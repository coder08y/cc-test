{"version":3,"file":"index-DCf0hNUB.js","sources":["../../../cetus-design/src/components/common/poolsDropSelect/TokenListBlock.tsx","../../../cetus-design/src/components/common/poolsDropSelect/index.tsx"],"sourcesContent":["import useGetTokenSource from '@cetus/hooks/src/useGetTokenSource'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { Token } from '@cetus/types'\nimport { CheckBox } from '@cetus/ui-kit'\nimport { Center, HStack, Text, VStack } from '@chakra-ui/react'\nimport Loading from '../Loading'\nimport SingleTokenInfo from '../SingleTokenInfo'\nimport TooltipIcon from '../TooltipIcon'\n\ninterface TokenListBlockProps {\n  tokenList: Token[]\n  selectTokenList: Token[]\n  onClickToken: (item: Token) => void\n  onDeleteToken?: (item: Token) => void\n  isLoading?: boolean\n  hideCheckbox?: boolean\n  currentTab?: string\n}\n\nexport default function TokenListBlock({\n  tokenList,\n  onClickToken,\n  onDeleteToken,\n  selectTokenList,\n  isLoading = false,\n  hideCheckbox = false,\n  currentTab = ''\n}: TokenListBlockProps) {\n  const tokenA = selectTokenList?.length > 0 ? selectTokenList[0] : null\n  const tokenB = selectTokenList?.length > 1 ? selectTokenList[1] : null\n  const { getTokenSource, getTrustTokenSource } = useGetTokenSource()\n  const { windowWidth } = useWindowWidth()\n  return (\n    <VStack w=\"100%\" gap=\"0px\" h=\"26vh\" maxH=\"350px\" minH=\"210px\" overflow=\"auto\" p=\"0\" pb=\"8px\" pl=\"4px\" overflowY=\"scroll\">\n      {isLoading ? (\n        <Center w=\"100%\" h=\"200px\" position=\"relative\" sx={{ '>div': { bg: 'none' } }}>\n          <Loading positionStyle=\"absolute\" />\n        </Center>\n      ) : tokenList?.length == 0 ? (\n        <VStack w=\"100%\" h=\"100%\" alignItems=\"center\" justify=\"center\" gap=\"4px\">\n          <Text color=\"text_caption\">No tokens found</Text>\n          <HStack gap=\"0\">\n            <Text fontSize=\"12px\">Or you can enter Coin Type</Text>\n            <TooltipIcon tooltipCon=\"The unique id of coin\" />\n          </HStack>\n        </VStack>\n      ) : (\n        tokenList?.map((token: Token) => {\n          const coinType = token?.coin_type\n          const isChecked: boolean =\n            !tokenA && !tokenB\n              ? false\n              : tokenA?.coin_type?.toLocaleLowerCase() == coinType?.toLocaleLowerCase() ||\n                tokenB?.coin_type?.toLocaleLowerCase() == coinType?.toLocaleLowerCase()\n\n          const isNeedShowTag = getTokenSource([token]).length > 0\n          return (\n            <HStack\n              w=\"100%\"\n              justify=\"space-between\"\n              key={token?.coin_type}\n              _hover={{\n                bg: 'primary_opacity.10',\n                borderRadius: '8px'\n              }}\n              cursor=\"pointer\"\n              h=\"46px\"\n              minH=\"46px\"\n              p=\"0 8px\"\n              onClick={\n                hideCheckbox\n                  ? () => onClickToken(token)\n                  : selectTokenList?.length >= 2\n                    ? () => {}\n                    : isChecked\n                      ? () => onDeleteToken?.(token)\n                      : () => onClickToken(token)\n              }\n            >\n              <SingleTokenInfo\n                token={token}\n                imgBoxStyle={{ w: '28px', h: '28px' }}\n                symbolFontSize=\"14px\"\n                symbolEllipsesDecimals={8}\n                nameEllipsesDecimals={hideCheckbox ? 20 : windowWidth <= 345 ? 20 : 26}\n                warningIcon={{ isNeedShow: isNeedShowTag }}\n              />\n              {!hideCheckbox && (\n                <CheckBox\n                  checked={isChecked}\n                  // onClick={selectTokenList?.length > 1 ? () => {} : isChecked ? () => onDeleteToken?.(token) : () => onClickToken(token)}\n                  onClick={() => {}}\n                />\n              )}\n            </HStack>\n          )\n        })\n      )}\n    </VStack>\n  )\n}\n","import useTokenSelect from '@/hook/useTokenSelect'\nimport { useDebounceFunction } from '@cetus/hooks'\nimport useTokenStore from '@cetus/stores/src/token'\nimport useTokenSelectStore from '@cetus/stores/src/useTokenSelectStore'\nimport { Token } from '@cetus/types'\nimport { Box, VStack } from '@chakra-ui/react'\nimport { useEffect, useState } from 'react'\nimport Block from '../Block'\nimport SelectTab from '../SelectTab'\nimport { SearchInput } from '../tokenSelectModal/SearchInput'\nimport TokenListBlock from './TokenListBlock'\n\ninterface PoolsDropSelectProps {\n  selectTokenList: Token[]\n  whiteTokenList?: Token[]\n  onClickToken: (item: Token) => void\n  onDeleteToken?: (item: Token) => void\n  hideCheckbox?: boolean\n  isVault?: boolean\n}\nexport default function PoolsDropSelect({\n  onClickToken,\n  onDeleteToken,\n  selectTokenList,\n  hideCheckbox,\n  whiteTokenList,\n  isVault\n}: PoolsDropSelectProps) {\n  const [inputValue, setInputValue] = useState('')\n  const { verifiedTokenMap } = useTokenStore()\n  const changeInputValue = (value: string) => {\n    const regValue = value.replace(/[^[a-zA-Z0-9\\s]+$/g, '')\n    setInputValue(regValue)\n    if (regValue) {\n      setFilterTokenLoading(true)\n      debouncedFilter(regValue)\n    }\n  }\n\n  const debouncedFilter = useDebounceFunction((value: string) => {\n    console.log('ðŸš€ðŸš€ðŸš€ ~ file: index.tsx:33 ~ debouncedFilter ~ value:', value)\n    console.log('ðŸš€ðŸš€ðŸš€ ~ file: index.tsx:36 ~ debouncedFilter ~ whiteTokenList:', whiteTokenList)\n    console.log('ðŸš€ðŸš€ðŸš€ ~ file: index.tsx:37 ~ debouncedFilter ~ trustedTokenList:', Array.from(verifiedTokenMap?.values()))\n    filterTokenListFun(\n      value,\n      whiteTokenList ? whiteTokenList : Array.from(verifiedTokenMap?.values()),\n      whiteTokenList ? [] : importTokenList,\n      false,\n      whiteTokenList ? false : true\n    )\n  }, 300)\n\n  const tabList = [\n    {\n      label: 'Default',\n      value: 'Default'\n    },\n    {\n      label: 'Imported',\n      value: 'Imported'\n    }\n  ]\n  const [currentTab, setCurrentTab] = useState('Default')\n\n  const { getDefaultTokenList } = useTokenSelect()\n  const [hasTriggered, setHasTriggered] = useState(false)\n\n  useEffect(() => {\n    if (!hasTriggered && verifiedTokenMap && verifiedTokenMap.size > 0) {\n      console.log('ðŸš€ ~ useEffect ~ filterTokenList:', verifiedTokenMap)\n      setHasTriggered(true)\n      getDefaultTokenList()\n      getImportTokenList()\n    }\n  }, [hasTriggered, verifiedTokenMap?.size])\n\n  const [tokenList, setTokenList] = useState<Token[]>()\n  const { sortWithTokenList, filterTokenListFun, getImportTokenList } = useTokenSelect()\n  const { setFilterTokenLoading, importTokenList, filterTokenLoading, filterTokenList } = useTokenSelectStore()\n\n  useEffect(() => {\n    console.log(\n      'ðŸš€ ~ useEffect ~ filterTokenList:',\n      filterTokenLoading,\n      filterTokenList,\n      Array.from(verifiedTokenMap?.values()),\n      importTokenList,\n      whiteTokenList\n    )\n    if (filterTokenLoading) {\n      setTokenList([])\n    }\n    if (inputValue) {\n      setTokenList(filterTokenList)\n    } else {\n      setTokenList(\n        currentTab === 'Default'\n          ? sortWithTokenList(whiteTokenList ? whiteTokenList : Array.from(verifiedTokenMap?.values()), '', false)\n          : sortWithTokenList(importTokenList, '', false)\n      )\n    }\n  }, [inputValue, filterTokenList, filterTokenLoading, currentTab, verifiedTokenMap, importTokenList, whiteTokenList])\n\n  return (\n    <VStack w=\"100%\" gap=\"0\" pt={!isVault ? '0' : '4px'}>\n      {!isVault && (\n        <VStack w=\"100%\" p=\"8px\" borderRadius=\"12px\">\n          <Block bg=\"bg_primary\" p=\"0px\" borderRadius=\"8px\">\n            <SearchInput inputValue={inputValue} changeInputValue={e => changeInputValue(e)} isFrom=\"pools\" inputFontSize=\"12px\" />\n          </Block>\n\n          {!inputValue && (!whiteTokenList || (whiteTokenList && whiteTokenList.length == 0)) && (\n            <SelectTab\n              type=\"borderTab\"\n              wrapStyle={{\n                w: {\n                  base: '100%'\n                },\n                h: '34px',\n                bg: 'none',\n                border: 'none'\n              }}\n              itemStyle={{\n                marginRight: '20px',\n                fontSize: '14px'\n              }}\n              tabList={tabList}\n              currentTab={currentTab}\n              handleChangeTab={item => {\n                setCurrentTab(item.value)\n                setFilterTokenLoading(true)\n                setTimeout(() => {\n                  setFilterTokenLoading(false)\n                }, 300)\n              }}\n            />\n          )}\n        </VStack>\n      )}\n\n      <Box w=\"100%\" overflow=\"hidden\">\n        <TokenListBlock\n          isLoading={filterTokenLoading}\n          currentTab={currentTab}\n          tokenList={tokenList}\n          onClickToken={onClickToken}\n          onDeleteToken={onDeleteToken}\n          selectTokenList={selectTokenList}\n          hideCheckbox={hideCheckbox}\n        />\n      </Box>\n    </VStack>\n  )\n}\n"],"names":["TokenListBlock","tokenList","onClickToken","onDeleteToken","selectTokenList","isLoading","hideCheckbox","currentTab","tokenA","tokenB","getTokenSource","useGetTokenSource","windowWidth","useWindowWidth","jsx","VStack","Center","Loading","jsxs","Text","HStack","TooltipIcon","token","coinType","isChecked","_a","_b","isNeedShowTag","SingleTokenInfo","CheckBox","PoolsDropSelect","whiteTokenList","isVault","inputValue","setInputValue","useState","verifiedTokenMap","useTokenStore","changeInputValue","value","regValue","setFilterTokenLoading","debouncedFilter","useDebounceFunction","filterTokenListFun","importTokenList","tabList","setCurrentTab","getDefaultTokenList","useTokenSelect","hasTriggered","setHasTriggered","useEffect","getImportTokenList","setTokenList","sortWithTokenList","filterTokenLoading","filterTokenList","useTokenSelectStore","Block","SearchInput","e","SelectTab","item","Box"],"mappings":"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"}