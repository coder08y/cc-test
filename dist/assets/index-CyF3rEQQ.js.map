{"version":3,"file":"index-CyF3rEQQ.js","sources":["../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sdk-info.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/store/store.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/telemetry-content.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/initCCA.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/error/constants.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/error/utils.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/error/errors.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/type/index.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/type/util.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/checkCrossOriginOpenerPolicy.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/provider.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/validatePreferences.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/constants.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/logEvent.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/events/communicator.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/events/snackbar.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/cssReset/cssReset-css.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/cssReset/cssReset.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/util.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/Snackbar/Snackbar-css.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/Snackbar/Snackbar.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/WalletLinkRelayUI.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/web.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/communicator/Communicator.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/type/Web3Response.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/error/serialize.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/provider/interface.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/storage/ScopedLocalStorage.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/events/provider.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/events/signer-selection.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/store/correlation-ids/store.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/events/scw-signer.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/events/scw-sub-account.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/utils.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/store/chain-clients/store.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/store/chain-clients/utils.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/assertPresence.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/assertSubAccount.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/cipher.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/kms/crypto-key/storage.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/kms/crypto-key/index.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/SCWKeyManager.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/get.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils/constants.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/util/encoding.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils/createSmartAccount.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils/createSubAccountSigner.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils/findOwnerIndex.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils/presentAddOwnerDialog.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils/handleAddSubAccountOwner.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils/handleInsufficientBalance.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/scw/SCWSigner.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/core/telemetry/events/walletlink-signer.js","../../../../node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_assert.js","../../../../node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/_u64.js","../../../../node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/crypto.js","../../../../node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/utils.js","../../../../node_modules/.pnpm/@noble+hashes@1.4.0/node_modules/@noble/hashes/sha3.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/util.cjs","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/abi.cjs","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/index.cjs","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/constants.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkCipher.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkHTTP.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkWebSocket.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkConnection.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/RelayEventManager.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/type/WalletLinkSession.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/RedirectDialog/RedirectDialog-css.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/RedirectDialog/RedirectDialog.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/WLMobileRelayUI.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/WalletLinkRelay.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/WalletLinkSigner.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/sign/util.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/CoinbaseWalletProvider.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/createCoinbaseWalletProvider.js","../../../../node_modules/.pnpm/@coinbase+wallet-sdk@4.3.6_@types+react@18.3.26_bufferutil@4.0.9_react@18.3.1_typescript@5.9._j7dyimd7xz4rilcraao3o3ltk4/node_modules/@coinbase/wallet-sdk/dist/createCoinbaseWalletSDK.js"],"sourcesContent":["export const VERSION = '4.3.6';\nexport const NAME = '@coinbase/wallet-sdk';\n//# sourceMappingURL=sdk-info.js.map","import { createJSONStorage, persist } from 'zustand/middleware';\nimport { createStore } from 'zustand/vanilla';\nimport { VERSION } from '../sdk-info.js';\nconst createChainSlice = () => {\n    return {\n        chains: [],\n    };\n};\nconst createKeysSlice = () => {\n    return {\n        keys: {},\n    };\n};\nconst createAccountSlice = () => {\n    return {\n        account: {},\n    };\n};\nconst createSubAccountSlice = () => {\n    return {\n        subAccount: undefined,\n    };\n};\nconst createSubAccountConfigSlice = () => {\n    return {\n        subAccountConfig: {},\n    };\n};\nconst createSpendPermissionsSlice = () => {\n    return {\n        spendPermissions: [],\n    };\n};\nconst createConfigSlice = () => {\n    return {\n        config: {\n            version: VERSION,\n        },\n    };\n};\nexport const sdkstore = createStore(persist((...args) => (Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, createChainSlice(...args)), createKeysSlice(...args)), createAccountSlice(...args)), createSubAccountSlice(...args)), createSpendPermissionsSlice(...args)), createConfigSlice(...args)), createSubAccountConfigSlice(...args))), {\n    name: 'cbwsdk.store',\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => {\n        // Explicitly select only the data properties we want to persist\n        // (not the methods)\n        return {\n            chains: state.chains,\n            keys: state.keys,\n            account: state.account,\n            subAccount: state.subAccount,\n            spendPermissions: state.spendPermissions,\n            config: state.config,\n        };\n    },\n}));\n// Non-persisted subaccount configuration\nexport const subAccountsConfig = {\n    get: () => sdkstore.getState().subAccountConfig,\n    set: (subAccountConfig) => {\n        sdkstore.setState((state) => ({\n            subAccountConfig: Object.assign(Object.assign({}, state.subAccountConfig), subAccountConfig),\n        }));\n    },\n    clear: () => {\n        sdkstore.setState({\n            subAccountConfig: {},\n        });\n    },\n};\nexport const subAccounts = {\n    get: () => sdkstore.getState().subAccount,\n    set: (subAccount) => {\n        sdkstore.setState((state) => ({\n            subAccount: state.subAccount\n                ? Object.assign(Object.assign({}, state.subAccount), subAccount) : Object.assign({ address: subAccount.address }, subAccount),\n        }));\n    },\n    clear: () => {\n        sdkstore.setState({\n            subAccount: undefined,\n        });\n    },\n};\nexport const spendPermissions = {\n    get: () => sdkstore.getState().spendPermissions,\n    set: (spendPermissions) => {\n        sdkstore.setState({ spendPermissions });\n    },\n    clear: () => {\n        sdkstore.setState({\n            spendPermissions: [],\n        });\n    },\n};\nexport const account = {\n    get: () => sdkstore.getState().account,\n    set: (account) => {\n        sdkstore.setState((state) => ({\n            account: Object.assign(Object.assign({}, state.account), account),\n        }));\n    },\n    clear: () => {\n        sdkstore.setState({\n            account: {},\n        });\n    },\n};\nexport const chains = {\n    get: () => sdkstore.getState().chains,\n    set: (chains) => {\n        sdkstore.setState({ chains });\n    },\n    clear: () => {\n        sdkstore.setState({\n            chains: [],\n        });\n    },\n};\nexport const keys = {\n    get: (key) => sdkstore.getState().keys[key],\n    set: (key, value) => {\n        sdkstore.setState((state) => ({ keys: Object.assign(Object.assign({}, state.keys), { [key]: value }) }));\n    },\n    clear: () => {\n        sdkstore.setState({\n            keys: {},\n        });\n    },\n};\nexport const config = {\n    get: () => sdkstore.getState().config,\n    set: (config) => {\n        sdkstore.setState((state) => ({ config: Object.assign(Object.assign({}, state.config), config) }));\n    },\n};\nconst actions = {\n    subAccounts,\n    subAccountsConfig,\n    spendPermissions,\n    account,\n    chains,\n    keys,\n    config,\n};\nexport const store = Object.assign(Object.assign({}, sdkstore), actions);\n//# sourceMappingURL=store.js.map","// This file is auto-generated by compile-assets.cjs\n// Do not edit manually - changes will be overwritten\nexport const TELEMETRY_SCRIPT_CONTENT = `!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.ClientAnalytics=t():e.ClientAnalytics=t()}(this,(function(){return(()=>{var e={792:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join(\"\")}}};e.exports=t},562:e=>{var t,n;t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join(\"\")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push(\"=\");return n.join(\"\")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\\\\/]/gi,\"\");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},335:e=>{function t(e){return!!e.constructor&&\"function\"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return\"function\"==typeof e.readFloatLE&&\"function\"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},762:(e,t,n)=>{var r,i,a,o,s;r=n(562),i=n(792).utf8,a=n(335),o=n(792).bin,(s=function(e,t){e.constructor==String?e=t&&\"binary\"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,p=271733878,m=0;m<n.length;m++)n[m]=16711935&(n[m]<<8|n[m]>>>24)|4278255360&(n[m]<<24|n[m]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=s._ff,v=s._gg,g=s._hh,b=s._ii;for(m=0;m<n.length;m+=16){var h=u,w=l,y=d,T=p;u=f(u,l,d,p,n[m+0],7,-680876936),p=f(p,u,l,d,n[m+1],12,-389564586),d=f(d,p,u,l,n[m+2],17,606105819),l=f(l,d,p,u,n[m+3],22,-1044525330),u=f(u,l,d,p,n[m+4],7,-176418897),p=f(p,u,l,d,n[m+5],12,1200080426),d=f(d,p,u,l,n[m+6],17,-1473231341),l=f(l,d,p,u,n[m+7],22,-45705983),u=f(u,l,d,p,n[m+8],7,1770035416),p=f(p,u,l,d,n[m+9],12,-1958414417),d=f(d,p,u,l,n[m+10],17,-42063),l=f(l,d,p,u,n[m+11],22,-1990404162),u=f(u,l,d,p,n[m+12],7,1804603682),p=f(p,u,l,d,n[m+13],12,-40341101),d=f(d,p,u,l,n[m+14],17,-1502002290),u=v(u,l=f(l,d,p,u,n[m+15],22,1236535329),d,p,n[m+1],5,-165796510),p=v(p,u,l,d,n[m+6],9,-1069501632),d=v(d,p,u,l,n[m+11],14,643717713),l=v(l,d,p,u,n[m+0],20,-373897302),u=v(u,l,d,p,n[m+5],5,-701558691),p=v(p,u,l,d,n[m+10],9,38016083),d=v(d,p,u,l,n[m+15],14,-660478335),l=v(l,d,p,u,n[m+4],20,-405537848),u=v(u,l,d,p,n[m+9],5,568446438),p=v(p,u,l,d,n[m+14],9,-1019803690),d=v(d,p,u,l,n[m+3],14,-187363961),l=v(l,d,p,u,n[m+8],20,1163531501),u=v(u,l,d,p,n[m+13],5,-1444681467),p=v(p,u,l,d,n[m+2],9,-51403784),d=v(d,p,u,l,n[m+7],14,1735328473),u=g(u,l=v(l,d,p,u,n[m+12],20,-1926607734),d,p,n[m+5],4,-378558),p=g(p,u,l,d,n[m+8],11,-2022574463),d=g(d,p,u,l,n[m+11],16,1839030562),l=g(l,d,p,u,n[m+14],23,-35309556),u=g(u,l,d,p,n[m+1],4,-1530992060),p=g(p,u,l,d,n[m+4],11,1272893353),d=g(d,p,u,l,n[m+7],16,-155497632),l=g(l,d,p,u,n[m+10],23,-1094730640),u=g(u,l,d,p,n[m+13],4,681279174),p=g(p,u,l,d,n[m+0],11,-358537222),d=g(d,p,u,l,n[m+3],16,-722521979),l=g(l,d,p,u,n[m+6],23,76029189),u=g(u,l,d,p,n[m+9],4,-640364487),p=g(p,u,l,d,n[m+12],11,-421815835),d=g(d,p,u,l,n[m+15],16,530742520),u=b(u,l=g(l,d,p,u,n[m+2],23,-995338651),d,p,n[m+0],6,-198630844),p=b(p,u,l,d,n[m+7],10,1126891415),d=b(d,p,u,l,n[m+14],15,-1416354905),l=b(l,d,p,u,n[m+5],21,-57434055),u=b(u,l,d,p,n[m+12],6,1700485571),p=b(p,u,l,d,n[m+3],10,-1894986606),d=b(d,p,u,l,n[m+10],15,-1051523),l=b(l,d,p,u,n[m+1],21,-2054922799),u=b(u,l,d,p,n[m+8],6,1873313359),p=b(p,u,l,d,n[m+15],10,-30611744),d=b(d,p,u,l,n[m+6],15,-1560198380),l=b(l,d,p,u,n[m+13],21,1309151649),u=b(u,l,d,p,n[m+4],6,-145523070),p=b(p,u,l,d,n[m+11],10,-1120210379),d=b(d,p,u,l,n[m+2],15,718787259),l=b(l,d,p,u,n[m+9],21,-343485551),u=u+h>>>0,l=l+w>>>0,d=d+y>>>0,p=p+T>>>0}return r.endian([u,l,d,p])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error(\"Illegal argument \"+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},2:(e,t,n)=>{\"use strict\";n.r(t),n.d(t,{Perfume:()=>ze,incrementUjNavigation:()=>Le,markStep:()=>Re,markStepOnce:()=>qe});var r,i,a={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},o=window,s=o.console,c=o.navigator,u=o.performance,l=function(){return c.deviceMemory},d=function(){return c.hardwareConcurrency},p=\"mark.\",m=function(){return u&&!!u.getEntriesByType&&!!u.now&&!!u.mark},f=\"4g\",v=!1,g={},b={value:0},h={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},w={value:0},y={value:0},T={},k={isHidden:!1,didChange:!1},_=function(){k.isHidden=!1,document.hidden&&(k.isHidden=document.hidden,k.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){s.warn(\"Perfume.js:\",e)}return null},E=function(){return!!(d()&&d()<=4)||!!(l()&&l()<=4)},x=function(e,t){switch(e){case\"slow-2g\":case\"2g\":case\"3g\":return!0;default:return E()||t}},O=function(e){return parseFloat(e.toFixed(4))},j=function(e){return\"number\"!=typeof e?null:O(e/Math.pow(1024,2))},N=function(e,t,n,r,i){var s,u=function(){a.analyticsTracker&&(k.isHidden&&![\"CLS\",\"INP\"].includes(e)||a.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:c?{deviceMemory:l()||0,hardwareConcurrency:d()||0,serviceWorkerStatus:\"serviceWorker\"in c?c.serviceWorker.controller?\"controlled\":\"supported\":\"unsupported\",isLowEndDevice:E(),isLowEndExperience:x(f,v)}:{},rating:n,navigationType:i}))};[\"CLS\",\"INP\"].includes(e)?u():(s=u,\"requestIdleCallback\"in o?o.requestIdleCallback(s,{timeout:3e3}):s())},I=function(e){e.forEach((function(e){if(!(\"self\"!==e.name||e.startTime<b.value)){var t=e.duration-50;t>0&&(w.value+=t,y.value+=t)}}))};!function(e){e.instant=\"instant\",e.quick=\"quick\",e.moderate=\"moderate\",e.slow=\"slow\",e.unavoidable=\"unavoidable\"}(r||(r={}));var P,M,B,C,D,A=((i={})[r.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},i[r.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},i[r.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},i[r.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},i[r.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},i),L={RT:[100,200],TBT:[200,600],NTBT:[200,600]},U=function(e,t){return L[e]?t<=L[e][0]?\"good\":t<=L[e][1]?\"needsImprovement\":\"poor\":null},R=function(e,t,n){Object.keys(t).forEach((function(e){\"number\"==typeof t[e]&&(t[e]=O(t[e]))})),N(e,t,null,n||{})},q=function(e){var t=e.attribution,n=e.name,r=e.rating,i=e.value,o=e.navigationType;\"FCP\"===n&&(b.value=i),[\"FCP\",\"LCP\"].includes(n)&&!T[0]&&(T[0]=S(\"longtask\",I)),\"FID\"===n&&setTimeout((function(){k.didChange||(q({attribution:t,name:\"TBT\",rating:U(\"TBT\",w.value),value:w.value,navigationType:o}),R(\"dataConsumption\",h.value))}),1e4);var s=O(i);s<=a.maxTime&&s>=0&&N(n,s,r,t,o)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},z=function(e){if(\"loading\"===document.readyState)return\"loading\";var t=F();if(t){if(e<t.domInteractive)return\"loading\";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return\"dom-interactive\";if(0===t.domComplete||e<t.domComplete)return\"dom-content-loaded\"}return\"complete\"},K=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,\"\")},$=function(e,t){var n=\"\";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?\"#\"+r.id:K(r)+(r.className&&r.className.length?\".\"+r.className.replace(/\\\\s+/g,\".\"):\"\");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+\">\"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},Q=-1,W=function(){return Q},H=function(e){addEventListener(\"pageshow\",(function(t){t.persisted&&(Q=t.timeStamp,e(t))}),!0)},V=function(){var e=F();return e&&e.activationStart||0},J=function(e,t){var n=F(),r=\"navigate\";return W()>=0?r=\"back-forward-cache\":n&&(r=document.prerendering||V()>0?\"prerender\":document.wasDiscarded?\"restore\":n.type.replace(/_/g,\"-\")),{name:e,value:void 0===t?-1:t,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},X=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},G=function(e,t){var n=function n(r){\"pagehide\"!==r.type&&\"hidden\"!==document.visibilityState||(e(r),t&&(removeEventListener(\"visibilitychange\",n,!0),removeEventListener(\"pagehide\",n,!0)))};addEventListener(\"visibilitychange\",n,!0),addEventListener(\"pagehide\",n,!0)},Z=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?\"poor\":e>t[0]?\"needs-improvement\":\"good\"}(t.value,n),e(t))}},Y=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ee=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},te=-1,ne=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},re=function(e){\"hidden\"===document.visibilityState&&te>-1&&(te=\"visibilitychange\"===e.type?e.timeStamp:0,ae())},ie=function(){addEventListener(\"visibilitychange\",re,!0),addEventListener(\"prerenderingchange\",re,!0)},ae=function(){removeEventListener(\"visibilitychange\",re,!0),removeEventListener(\"prerenderingchange\",re,!0)},oe=function(){return te<0&&(te=ne(),ie(),H((function(){setTimeout((function(){te=ne(),ie()}),0)}))),{get firstHiddenTime(){return te}}},se=function(e,t){t=t||{},ee((function(){var n,r=[1800,3e3],i=oe(),a=J(\"FCP\"),o=X(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-V(),0),a.entries.push(e),n(!0)))}))}));o&&(n=Z(e,a,r,t.reportAllChanges),H((function(i){a=J(\"FCP\"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ce={passive:!0,capture:!0},ue=new Date,le=function(e,t){P||(P=t,M=e,B=new Date,me(removeEventListener),de())},de=function(){if(M>=0&&M<B-ue){var e={entryType:\"first-input\",name:P.type,target:P.target,cancelable:P.cancelable,startTime:P.timeStamp,processingStart:P.timeStamp+M};C.forEach((function(t){t(e)})),C=[]}},pe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,t){var n=function(){le(e,t),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",n,ce),removeEventListener(\"pointercancel\",r,ce)};addEventListener(\"pointerup\",n,ce),addEventListener(\"pointercancel\",r,ce)}(t,e):le(t,e)}},me=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(t){return e(t,pe,ce)}))},fe=0,ve=1/0,ge=0,be=function(e){e.forEach((function(e){e.interactionId&&(ve=Math.min(ve,e.interactionId),ge=Math.max(ge,e.interactionId),fe=ge?(ge-ve)/7+1:0)}))},he=function(){return D?fe:performance.interactionCount||0},we=0,ye=function(){return he()-we},Te=[],ke={},_e=function(e){var t=Te[Te.length-1],n=ke[e.interactionId];if(n||Te.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ke[r.id]=r,Te.push(r)}Te.sort((function(e,t){return t.latency-e.latency})),Te.splice(10).forEach((function(e){delete ke[e.id]}))}},Se={},Ee=function e(t){document.prerendering?ee((function(){return e(t)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(t)}),!0):setTimeout(t,0)},xe=function(e,t){t=t||{};var n=[800,1800],r=J(\"TTFB\"),i=Z(e,r,n,t.reportAllChanges);Ee((function(){var a=F();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-V(),0),r.entries=[a],i(!0),H((function(){r=J(\"TTFB\",0),(i=Z(e,r,n,t.reportAllChanges))(!0)}))}}))},Oe=function(e){e.forEach((function(e){e.identifier&&q({attribution:{identifier:e.identifier},name:\"ET\",rating:null,value:e.startTime})}))},je=function(e){e.forEach((function(e){if(a.isResourceTiming&&R(\"resourceTiming\",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;h.value[e.initiatorType]+=t,h.value.total+=t}}))},Ne=function(){!function(e,t){xe((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&q(e)}(e)}),t)}(0,a.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ee((function(){var e,n=[.1,.25],r=J(\"CLS\"),i=-1,a=0,o=[],s=function(e){i>-1&&function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:$(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:z(t.startTime)})}}var r;e.attribution={}}(e),function(e){q(e)}(e)}(e)},c=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=o[0],i=o[o.length-1];a&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(a+=t.value,o.push(t)):(a=t.value,o=[t]),a>r.value&&(r.value=a,r.entries=o,e())}}))},u=X(\"layout-shift\",c);u&&(e=Z(s,r,n,t.reportAllChanges),se((function(t){i=t.value,r.value<0&&(r.value=0,e())})),G((function(){c(u.takeRecords()),e(!0)})),H((function(){a=0,i=-1,r=J(\"CLS\",0),e=Z(s,r,n,t.reportAllChanges),Y((function(){return e()}))})))}))}(0,t)}(0,a.reportOptions.cls),function(e,t){se((function(e){!function(e){if(e.entries.length){var t=F(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:z(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:z(W())}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[100,300],i=oe(),a=J(\"FID\"),o=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},s=function(e){e.forEach(o)},c=X(\"first-input\",s);n=Z(e,a,r,t.reportAllChanges),c&&G((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&H((function(){var i;a=J(\"FID\"),n=Z(e,a,r,t.reportAllChanges),C=[],M=-1,P=null,me(addEventListener),i=o,C.push(i),de()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[2500,4e3],i=oe(),a=J(\"LCP\"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-V(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},s=X(\"largest-contentful-paint\",o);if(s){n=Z(e,a,r,t.reportAllChanges);var c=function(){Se[a.id]||(o(s.takeRecords()),s.disconnect(),Se[a.id]=!0,n(!0))};[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),G(c,!0),H((function(i){a=J(\"LCP\"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,Se[a.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=F();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType(\"resource\").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),s=Math.max(o,i?i.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),u={element:$(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:s-o,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(u.url=r.url),i&&(u.lcpResourceEntry=i),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.lcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n=[200,500];\"interactionCount\"in performance||D||(D=X(\"event\",be,{type:\"event\",buffered:!0,durationThreshold:0}));var r,i=J(\"INP\"),a=function(e){e.forEach((function(e){e.interactionId&&_e(e),\"first-input\"===e.entryType&&!Te.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&_e(e)}));var t,n=(t=Math.min(Te.length-1,Math.floor(ye()/50)),Te[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=X(\"event\",a,{durationThreshold:t.durationThreshold||40});r=Z(e,i,n,t.reportAllChanges),o&&(o.observe({type:\"first-input\",buffered:!0}),G((function(){a(o.takeRecords()),i.value<0&&ye()>0&&(i.value=0,i.entries=[]),r(!0)})),H((function(){Te=[],we=he(),i=J(\"INP\"),r=Z(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}else e.attribution={}}(t),e(t)}),t)}((function(e){return q(e)}),a.reportOptions.inp),a.isResourceTiming&&S(\"resource\",je),a.isElementTiming&&S(\"element\",Oe)},Ie=function(e){var t=\"usageDetails\"in e?e.usageDetails:{};R(\"storageEstimate\",{quota:j(e.quota),usage:j(e.usage),caches:j(t.caches),indexedDB:j(t.indexedDB),serviceWorker:j(t.serviceWorkerRegistrations)})},Pe={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Me=function(e){delete Pe.active[e]},Be=function(){return Pe.navigationSteps},Ce=function(e){var t;return null!==(t=Be()[e])&&void 0!==t?t:{}},De=function(e,t,n){var r=\"step.\"+e,i=u.getEntriesByName(p+t).length>0;if(u.getEntriesByName(p+n).length>0&&a.steps){var o=A[a.steps[e].threshold],s=o.maxOutlierThreshold,c=o.vitalsThresholds;if(i){var l=u.measure(r,p+t,p+n),d=l.duration;if(d<=s){var m=function(e,t){return e<=t[0]?\"good\":e<=t[1]?\"needsImprovement\":\"poor\"}(d,c);d>=0&&(N(\"userJourneyStep\",d,m,{stepName:e},void 0),u.measure(\"step.\".concat(e,\"_vitals_\").concat(m),{start:l.startTime+l.duration,end:l.startTime+l.duration,detail:{type:\"stepVital\",duration:d}}))}}}},Ae=function(){var e=Be(),t=Pe.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Ce(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=Ce(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Le=function(){var e,t=Object.keys(Pe.navigationSteps).length;Pe.navigationSteps[t]={};var n=Ae();null===(e=a.onMarkStep)||void 0===e||e.call(a,\"\",Object.keys(n))},Ue=function(e){var t,n,r,i,o,s,c;if(Pe.finalMarkToStepsMap[e]){!function(e){var t=Pe.navigationSteps,n=Pe.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Ce(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=Ce(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,s=Ce(o);s[e]&&(s[e]=!1,t[o]=s)}}))}}}(e);var u=Pe.finalMarkToStepsMap[e];Object.keys(u).forEach((function(t){var n=u[t];n.forEach(Me),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(e){t(e)}}function a(e){try{o(r.throw(e))}catch(e){t(e)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}o((r=r.apply(undefined,[])).next())}))}(0,0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(r){switch(r.label){case 0:return[4,De(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=Pe.navigationSteps,o=Object.keys(i).length,(c=Ce(s=(o>0?o:1)-1)||[])[r]=!0,i[s]=c,function(e){var t,n=null!==(t=Pe.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Pe.active[e]||(Pe.active[e]=!0)}))}(e);if(a.enableNavigationTracking){var l=Ae();null===(t=a.onMarkStep)||void 0===t||t.call(a,e,Object.keys(l))}else null===(n=a.onMarkStep)||void 0===n||n.call(a,e,Object.keys(Pe.active))},Re=function(e){u.mark(p+e),Ue(e)},qe=function(e){0===u.getEntriesByName(p+e).length&&(u.mark(p+e),Ue(e))},Fe=0,ze=function(){function e(e){if(void 0===e&&(e={}),this.v=\"9.0.0-rc.3\",a.analyticsTracker=e.analyticsTracker,a.isResourceTiming=!!e.resourceTiming,a.isElementTiming=!!e.elementTiming,a.maxTime=e.maxMeasureTime||a.maxTime,a.reportOptions=e.reportOptions||a.reportOptions,a.steps=e.steps,a.onMarkStep=e.onMarkStep,a.enableNavigationTracking=e.enableNavigationTracking,m()){\"PerformanceObserver\"in o&&Ne(),void 0!==document.hidden&&document.addEventListener(\"visibilitychange\",_);var t=function(){if(!m())return{};var e=u.getEntriesByType(\"navigation\")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();R(\"navigationTiming\",t),t.redirectTime&&q({attribution:{},name:\"RT\",rating:U(\"RT\",t.redirectTime),value:t.redirectTime}),R(\"networkInformation\",function(){if(\"connection\"in c){var e=c.connection;return\"object\"!=typeof e?{}:(f=e.effectiveType,v=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),c&&c.storage&&\"function\"==typeof c.storage.estimate&&c.storage.estimate().then(Ie),a.steps&&a.steps&&(Pe.startMarkToStepsMap={},Pe.finalMarkToStepsMap={},Pe.active={},Pe.navigationSteps={},Object.entries(a.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],s=null!==(n=Pe.startMarkToStepsMap[a])&&void 0!==n?n:{};if(s[r]=!0,Pe.startMarkToStepsMap[a]=s,Pe.finalMarkToStepsMap[o]){var c=Pe.finalMarkToStepsMap[o][a]||[];c.push(r),Pe.finalMarkToStepsMap[o][a]=c}else Pe.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){m()&&!g[e]&&(g[e]=!0,u.mark(\"mark_\".concat(e,\"_start\")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),m()&&g[e]){u.mark(\"mark_\".concat(e,\"_end\")),delete g[e];var r=function(e){u.measure(e,\"mark_\".concat(e,\"_start\"),\"mark_\".concat(e,\"_end\"));var t=u.getEntriesByName(e).pop();return t&&\"measure\"===t.entryType?t.duration:-1}(e);n&&R(e,O(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete g[e],u.clearMarks&&(u.clearMarks(\"mark_\".concat(e,\"_start\")),u.clearMarks(\"mark_\".concat(e,\"_end\")))},e.prototype.markNTBT=function(){var e=this;this.start(\"ntbt\"),y.value=0,clearTimeout(Fe),Fe=setTimeout((function(){e.end(\"ntbt\",{},!1),q({attribution:{},name:\"NTBT\",rating:U(\"NTBT\",y.value),value:y.value}),y.value=0}),2e3)},e}()},426:(e,t)=>{\"use strict\";Symbol.for(\"react.element\"),Symbol.for(\"react.portal\"),Symbol.for(\"react.fragment\"),Symbol.for(\"react.strict_mode\"),Symbol.for(\"react.profiler\"),Symbol.for(\"react.provider\"),Symbol.for(\"react.context\"),Symbol.for(\"react.forward_ref\"),Symbol.for(\"react.suspense\"),Symbol.for(\"react.memo\"),Symbol.for(\"react.lazy\"),Symbol.iterator;var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r=Object.assign,i={};function a(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}function o(){}function s(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if(\"object\"!=typeof e&&\"function\"!=typeof e&&null!=e)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,e,t,\"setState\")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,\"forceUpdate\")},o.prototype=a.prototype;var c=s.prototype=new o;c.constructor=s,r(c,a.prototype),c.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty;var u={current:null};t.useCallback=function(e,t){return u.current.useCallback(e,t)},t.useEffect=function(e,t){return u.current.useEffect(e,t)},t.useRef=function(e){return u.current.useRef(e)}},784:(e,t,n)=>{\"use strict\";e.exports=n(426)},353:function(e,t,n){var r;!function(i,a){\"use strict\";var o=\"function\",s=\"undefined\",c=\"object\",u=\"string\",l=\"major\",d=\"model\",p=\"name\",m=\"type\",f=\"vendor\",v=\"version\",g=\"architecture\",b=\"console\",h=\"mobile\",w=\"tablet\",y=\"smarttv\",T=\"wearable\",k=\"embedded\",_=\"Amazon\",S=\"Apple\",E=\"ASUS\",x=\"BlackBerry\",O=\"Browser\",j=\"Chrome\",N=\"Firefox\",I=\"Google\",P=\"Huawei\",M=\"LG\",B=\"Microsoft\",C=\"Motorola\",D=\"Opera\",A=\"Samsung\",L=\"Sharp\",U=\"Sony\",R=\"Xiaomi\",q=\"Zebra\",F=\"Facebook\",z=\"Chromium OS\",K=\"Mac OS\",$=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Q=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===u)return e=e.replace(/^\\\\s\\\\s*/,\"\"),typeof t===s?e:e.substring(0,350)},V=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var p=t[d],m=t[d+1];for(n=r=0;n<p.length&&!u&&p[n];)if(u=p[n++].exec(e))for(i=0;i<m.length;i++)l=u[++r],typeof(s=m[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Q(t[n][r],e))return\"?\"===n?a:n}else if(Q(t[n],e))return\"?\"===n?a:n;return e},X={ME:\"4.90\",\"NT 3.11\":\"NT3.51\",\"NT 4.0\":\"NT4.0\",2e3:\"NT 5.0\",XP:[\"NT 5.1\",\"NT 5.2\"],Vista:\"NT 6.0\",7:\"NT 6.1\",8:\"NT 6.2\",8.1:\"NT 6.3\",10:[\"NT 6.4\",\"NT 10.0\"],RT:\"ARM\"},G={browser:[[/\\\\b(?:crmo|crios)\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"Chrome\"]],[/edg(?:e|ios|a)?\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"Edge\"]],[/(opera mini)\\\\/([-\\\\w\\\\.]+)/i,/(opera [mobiletab]{3,6})\\\\b.+version\\\\/([-\\\\w\\\\.]+)/i,/(opera)(?:.+version\\\\/|[\\\\/ ]+)([\\\\w\\\\.]+)/i],[p,v],[/opios[\\\\/ ]+([\\\\w\\\\.]+)/i],[v,[p,D+\" Mini\"]],[/\\\\bopr\\\\/([\\\\w\\\\.]+)/i],[v,[p,D]],[/(kindle)\\\\/([\\\\w\\\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\\\/ ]?([\\\\w\\\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\\\/ ]?([\\\\w\\\\.]*)/i,/(ba?idubrowser)[\\\\/ ]?([\\\\w\\\\.]+)/i,/(?:ms|\\\\()(ie) ([\\\\w\\\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\\\/([-\\\\w\\\\.]+)/i,/(heytap|ovi)browser\\\\/([\\\\d\\\\.]+)/i,/(weibo)__([\\\\d\\\\.]+)/i],[p,v],[/(?:\\\\buc? ?browser|(?:juc.+)ucweb)[\\\\/ ]?([\\\\w\\\\.]+)/i],[v,[p,\"UC\"+O]],[/microm.+\\\\bqbcore\\\\/([\\\\w\\\\.]+)/i,/\\\\bqbcore\\\\/([\\\\w\\\\.]+).+microm/i],[v,[p,\"WeChat(Win) Desktop\"]],[/micromessenger\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"WeChat\"]],[/konqueror\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"Konqueror\"]],[/trident.+rv[: ]([\\\\w\\\\.]{1,9})\\\\b.+like gecko/i],[v,[p,\"IE\"]],[/ya(?:search)?browser\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"Yandex\"]],[/(avast|avg)\\\\/([\\\\w\\\\.]+)/i],[[p,/(.+)/,\"$1 Secure \"+O],v],[/\\\\bfocus\\\\/([\\\\w\\\\.]+)/i],[v,[p,N+\" Focus\"]],[/\\\\bopt\\\\/([\\\\w\\\\.]+)/i],[v,[p,D+\" Touch\"]],[/coc_coc\\\\w+\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"Coc Coc\"]],[/dolfin\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"Dolphin\"]],[/coast\\\\/([\\\\w\\\\.]+)/i],[v,[p,D+\" Coast\"]],[/miuibrowser\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"MIUI \"+O]],[/fxios\\\\/([-\\\\w\\\\.]+)/i],[v,[p,N]],[/\\\\bqihu|(qi?ho?o?|360)browser/i],[[p,\"360 \"+O]],[/(oculus|samsung|sailfish|huawei)browser\\\\/([\\\\w\\\\.]+)/i],[[p,/(.+)/,\"$1 \"+O],v],[/(comodo_dragon)\\\\/([\\\\w\\\\.]+)/i],[[p,/_/g,\" \"],v],[/(electron)\\\\/([\\\\w\\\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\\\/(20\\\\d\\\\d\\\\.[-\\\\w\\\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\\\/ ]?([\\\\w\\\\.]+)/i],[p,v],[/(metasr)[\\\\/ ]?([\\\\w\\\\.]+)/i,/(lbbrowser)/i,/\\\\[(linkedin)app\\\\]/i],[p],[/((?:fban\\\\/fbios|fb_iab\\\\/fb4a)(?!.+fbav)|;fbav\\\\/([\\\\w\\\\.]+);)/i],[[p,F],v],[/(kakao(?:talk|story))[\\\\/ ]([\\\\w\\\\.]+)/i,/(naver)\\\\(.*?(\\\\d+\\\\.[\\\\w\\\\.]+).*\\\\)/i,/safari (line)\\\\/([\\\\w\\\\.]+)/i,/\\\\b(line)\\\\/([\\\\w\\\\.]+)\\\\/iab/i,/(chromium|instagram)[\\\\/ ]([-\\\\w\\\\.]+)/i],[p,v],[/\\\\bgsa\\\\/([\\\\w\\\\.]+) .*safari\\\\//i],[v,[p,\"GSA\"]],[/musical_ly(?:.+app_?version\\\\/|_)([\\\\w\\\\.]+)/i],[v,[p,\"TikTok\"]],[/headlesschrome(?:\\\\/([\\\\w\\\\.]+)| )/i],[v,[p,j+\" Headless\"]],[/ wv\\\\).+(chrome)\\\\/([\\\\w\\\\.]+)/i],[[p,j+\" WebView\"],v],[/droid.+ version\\\\/([\\\\w\\\\.]+)\\\\b.+(?:mobile safari|safari)/i],[v,[p,\"Android \"+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\\\/v?([\\\\w\\\\.]+)/i],[p,v],[/version\\\\/([\\\\w\\\\.\\\\,]+) .*mobile\\\\/\\\\w+ (safari)/i],[v,[p,\"Mobile Safari\"]],[/version\\\\/([\\\\w(\\\\.|\\\\,)]+) .*(mobile ?safari|safari)/i],[v,p],[/webkit.+?(mobile ?safari|safari)(\\\\/[\\\\w\\\\.]+)/i],[p,[v,J,{\"1.0\":\"/8\",1.2:\"/1\",1.3:\"/3\",\"2.0\":\"/412\",\"2.0.2\":\"/416\",\"2.0.3\":\"/417\",\"2.0.4\":\"/419\",\"?\":\"/\"}]],[/(webkit|khtml)\\\\/([\\\\w\\\\.]+)/i],[p,v],[/(navigator|netscape\\\\d?)\\\\/([-\\\\w\\\\.]+)/i],[[p,\"Netscape\"],v],[/mobile vr; rv:([\\\\w\\\\.]+)\\\\).+firefox/i],[v,[p,N+\" Reality\"]],[/ekiohf.+(flow)\\\\/([\\\\w\\\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\\\/ ]?([\\\\w\\\\.\\\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\\\/([-\\\\w\\\\.]+)$/i,/(firefox)\\\\/([\\\\w\\\\.]+)/i,/(mozilla)\\\\/([\\\\w\\\\.]+) .+rv\\\\:.+gecko\\\\/\\\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\\\. ]?browser)[-\\\\/ ]?v?([\\\\w\\\\.]+)/i,/(links) \\\\(([\\\\w\\\\.]+)/i,/panasonic;(viera)/i],[p,v],[/(cobalt)\\\\/([\\\\w\\\\.]+)/i],[p,[v,/master.|lts./,\"\"]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\\\)]/i],[[g,\"amd64\"]],[/(ia32(?=;))/i],[[g,W]],[/((?:i[346]|x)86)[;\\\\)]/i],[[g,\"ia32\"]],[/\\\\b(aarch64|arm(v?8e?l?|_?64))\\\\b/i],[[g,\"arm64\"]],[/\\\\b(arm(?:v[67])?ht?n?[fl]p?)\\\\b/i],[[g,\"armhf\"]],[/windows (ce|mobile); ppc;/i],[[g,\"arm\"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\\\))/i],[[g,/ower/,\"\",W]],[/(sun4\\\\w)[;\\\\)]/i],[[g,\"sparc\"]],[/((?:avr32|ia64(?=;))|68k(?=\\\\))|\\\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\\\b|pa-risc)/i],[[g,W]]],device:[[/\\\\b(sch-i[89]0\\\\d|shw-m380s|sm-[ptx]\\\\w{2,4}|gt-[pn]\\\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,A],[m,w]],[/\\\\b((?:s[cgp]h|gt|sm)-\\\\w+|sc[g-]?[\\\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\\\w]+)/i,/sec-(sgh\\\\w+)/i],[d,[f,A],[m,h]],[/(?:\\\\/|\\\\()(ip(?:hone|od)[\\\\w, ]*)(?:\\\\/|;)/i],[d,[f,S],[m,h]],[/\\\\((ipad);[-\\\\w\\\\),; ]+apple/i,/applecoremedia\\\\/[\\\\w\\\\.]+ \\\\((ipad)/i,/\\\\b(ipad)\\\\d\\\\d?,\\\\d\\\\d?[;\\\\]].+ios/i],[d,[f,S],[m,w]],[/(macintosh);/i],[d,[f,S]],[/\\\\b(sh-?[altvz]?\\\\d\\\\d[a-ekm]?)/i],[d,[f,L],[m,h]],[/\\\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\\\d{2})\\\\b(?!.+d\\\\/s)/i],[d,[f,P],[m,w]],[/(?:huawei|honor)([-\\\\w ]+)[;\\\\)]/i,/\\\\b(nexus 6p|\\\\w{2,4}e?-[atu]?[ln][\\\\dx][012359c][adn]?)\\\\b(?!.+d\\\\/s)/i],[d,[f,P],[m,h]],[/\\\\b(poco[\\\\w ]+)(?: bui|\\\\))/i,/\\\\b; (\\\\w+) build\\\\/hm\\\\1/i,/\\\\b(hm[-_ ]?note?[_ ]?(?:\\\\d\\\\w)?) bui/i,/\\\\b(redmi[\\\\-_ ]?(?:note|k)?[\\\\w_ ]+)(?: bui|\\\\))/i,/\\\\b(mi[-_ ]?(?:a\\\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\\\d?\\\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\\\))/i],[[d,/_/g,\" \"],[f,R],[m,h]],[/\\\\b(mi[-_ ]?(?:pad)(?:[\\\\w_ ]+))(?: bui|\\\\))/i],[[d,/_/g,\" \"],[f,R],[m,w]],[/; (\\\\w+) bui.+ oppo/i,/\\\\b(cph[12]\\\\d{3}|p(?:af|c[al]|d\\\\w|e[ar])[mt]\\\\d0|x9007|a101op)\\\\b/i],[d,[f,\"OPPO\"],[m,h]],[/vivo (\\\\w+)(?: bui|\\\\))/i,/\\\\b(v[12]\\\\d{3}\\\\w?[at])(?: bui|;)/i],[d,[f,\"Vivo\"],[m,h]],[/\\\\b(rmx[12]\\\\d{3})(?: bui|;|\\\\))/i],[d,[f,\"Realme\"],[m,h]],[/\\\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\\\b[\\\\w ]+build\\\\//i,/\\\\bmot(?:orola)?[- ](\\\\w*)/i,/((?:moto[\\\\w\\\\(\\\\) ]+|xt\\\\d{3,4}|nexus 6)(?= bui|\\\\)))/i],[d,[f,C],[m,h]],[/\\\\b(mz60\\\\d|xoom[2 ]{0,2}) build\\\\//i],[d,[f,C],[m,w]],[/((?=lg)?[vl]k\\\\-?\\\\d{3}) bui| 3\\\\.[-\\\\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,M],[m,w]],[/(lm(?:-?f100[nv]?|-[\\\\w\\\\.]+)(?= bui|\\\\))|nexus [45])/i,/\\\\blg[-e;\\\\/ ]+((?!browser|netcast|android tv)\\\\w+)/i,/\\\\blg-?([\\\\d\\\\w]+) bui/i],[d,[f,M],[m,h]],[/(ideatab[-\\\\w ]+)/i,/lenovo ?(s[56]000[-\\\\w]+|tab(?:[\\\\w ]+)|yt[-\\\\d\\\\w]{6}|tb[-\\\\d\\\\w]{6})/i],[d,[f,\"Lenovo\"],[m,w]],[/(?:maemo|nokia).*(n900|lumia \\\\d+)/i,/nokia[-_ ]?([-\\\\w\\\\.]*)/i],[[d,/_/g,\" \"],[f,\"Nokia\"],[m,h]],[/(pixel c)\\\\b/i],[d,[f,I],[m,w]],[/droid.+; (pixel[\\\\daxl ]{0,6})(?: bui|\\\\))/i],[d,[f,I],[m,h]],[/droid.+ (a?\\\\d[0-2]{2}so|[c-g]\\\\d{4}|so[-gl]\\\\w+|xq-a\\\\w[4-7][12])(?= bui|\\\\).+chrome\\\\/(?![1-6]{0,1}\\\\d\\\\.))/i],[d,[f,U],[m,h]],[/sony tablet [ps]/i,/\\\\b(?:sony)?sgp\\\\w+(?: bui|\\\\))/i],[[d,\"Xperia Tablet\"],[f,U],[m,w]],[/ (kb2005|in20[12]5|be20[12][59])\\\\b/i,/(?:one)?(?:plus)? (a\\\\d0\\\\d\\\\d)(?: b|\\\\))/i],[d,[f,\"OnePlus\"],[m,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\\\))/i,/(kf[a-z]+)( bui|\\\\)).+silk\\\\//i],[d,[f,_],[m,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\\\)).+silk\\\\//i],[[d,/(.+)/g,\"Fire Phone $1\"],[f,_],[m,h]],[/(playbook);[-\\\\w\\\\),; ]+(rim)/i],[d,f,[m,w]],[/\\\\b((?:bb[a-f]|st[hv])100-\\\\d)/i,/\\\\(bb10; (\\\\w+)/i],[d,[f,x],[m,h]],[/(?:\\\\b|asus_)(transfo[prime ]{4,10} \\\\w+|eeepc|slider \\\\w+|nexus 7|padfone|p00[cj])/i],[d,[f,E],[m,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \\\\d\\\\w?)\\\\b/i],[d,[f,E],[m,h]],[/(nexus 9)/i],[d,[f,\"HTC\"],[m,w]],[/(htc)[-;_ ]{1,2}([\\\\w ]+(?=\\\\)| bui)|\\\\w+)/i,/(zte)[- ]([\\\\w ]+?)(?: bui|\\\\/|\\\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\\\.))|sony(?!-bra))[-_ ]?([-\\\\w]*)/i],[f,[d,/_/g,\" \"],[m,h]],[/droid.+; ([ab][1-7]-?[0178a]\\\\d\\\\d?)/i],[d,[f,\"Acer\"],[m,w]],[/droid.+; (m[1-5] note) bui/i,/\\\\bmz-([-\\\\w]{2,})/i],[d,[f,\"Meizu\"],[m,h]],[/(blackberry|benq|palm(?=\\\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\\\w]*)/i,/(hp) ([\\\\w ]+\\\\w)/i,/(asus)-?(\\\\w+)/i,/(microsoft); (lumia[\\\\w ]+)/i,/(lenovo)[-_ ]?([-\\\\w]+)/i,/(jolla)/i,/(oppo) ?([\\\\w ]+) bui/i],[f,d,[m,h]],[/(kobo)\\\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\\\/([\\\\w\\\\.]+)/i,/(nook)[\\\\w ]+build\\\\/(\\\\w+)/i,/(dell) (strea[kpr\\\\d ]*[\\\\dko])/i,/(le[- ]+pan)[- ]+(\\\\w{1,9}) bui/i,/(trinity)[- ]*(t\\\\d{3}) bui/i,/(gigaset)[- ]+(q\\\\w{1,9}) bui/i,/(vodafone) ([\\\\w ]+)(?:\\\\)| bui)/i],[f,d,[m,w]],[/(surface duo)/i],[d,[f,B],[m,w]],[/droid [\\\\d\\\\.]+; (fp\\\\du?)(?: b|\\\\))/i],[d,[f,\"Fairphone\"],[m,h]],[/(u304aa)/i],[d,[f,\"AT&T\"],[m,h]],[/\\\\bsie-(\\\\w*)/i],[d,[f,\"Siemens\"],[m,h]],[/\\\\b(rct\\\\w+) b/i],[d,[f,\"RCA\"],[m,w]],[/\\\\b(venue[\\\\d ]{2,7}) b/i],[d,[f,\"Dell\"],[m,w]],[/\\\\b(q(?:mv|ta)\\\\w+) b/i],[d,[f,\"Verizon\"],[m,w]],[/\\\\b(?:barnes[& ]+noble |bn[rt])([\\\\w\\\\+ ]*) b/i],[d,[f,\"Barnes & Noble\"],[m,w]],[/\\\\b(tm\\\\d{3}\\\\w+) b/i],[d,[f,\"NuVision\"],[m,w]],[/\\\\b(k88) b/i],[d,[f,\"ZTE\"],[m,w]],[/\\\\b(nx\\\\d{3}j) b/i],[d,[f,\"ZTE\"],[m,h]],[/\\\\b(gen\\\\d{3}) b.+49h/i],[d,[f,\"Swiss\"],[m,h]],[/\\\\b(zur\\\\d{3}) b/i],[d,[f,\"Swiss\"],[m,w]],[/\\\\b((zeki)?tb.*\\\\b) b/i],[d,[f,\"Zeki\"],[m,w]],[/\\\\b([yr]\\\\d{2}) b/i,/\\\\b(dragon[- ]+touch |dt)(\\\\w{5}) b/i],[[f,\"Dragon Touch\"],d,[m,w]],[/\\\\b(ns-?\\\\w{0,9}) b/i],[d,[f,\"Insignia\"],[m,w]],[/\\\\b((nxa|next)-?\\\\w{0,9}) b/i],[d,[f,\"NextBook\"],[m,w]],[/\\\\b(xtreme\\\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,\"Voice\"],d,[m,h]],[/\\\\b(lvtel\\\\-)?(v1[12]) b/i],[[f,\"LvTel\"],d,[m,h]],[/\\\\b(ph-1) /i],[d,[f,\"Essential\"],[m,h]],[/\\\\b(v(100md|700na|7011|917g).*\\\\b) b/i],[d,[f,\"Envizen\"],[m,w]],[/\\\\b(trio[-\\\\w\\\\. ]+) b/i],[d,[f,\"MachSpeed\"],[m,w]],[/\\\\btu_(1491) b/i],[d,[f,\"Rotor\"],[m,w]],[/(shield[\\\\w ]+) b/i],[d,[f,\"Nvidia\"],[m,w]],[/(sprint) (\\\\w+)/i],[f,d,[m,h]],[/(kin\\\\.[onetw]{3})/i],[[d,/\\\\./g,\" \"],[f,B],[m,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\\\)/i],[d,[f,q],[m,w]],[/droid.+; (ec30|ps20|tc[2-8]\\\\d[kx])\\\\)/i],[d,[f,q],[m,h]],[/smart-tv.+(samsung)/i],[f,[m,y]],[/hbbtv.+maple;(\\\\d+)/i],[[d,/^/,\"SmartTV\"],[f,A],[m,y]],[/(nux; netcast.+smarttv|lg (netcast\\\\.tv-201\\\\d|android tv))/i],[[f,M],[m,y]],[/(apple) ?tv/i],[f,[d,S+\" TV\"],[m,y]],[/crkey/i],[[d,j+\"cast\"],[f,I],[m,y]],[/droid.+aft(\\\\w)( bui|\\\\))/i],[d,[f,_],[m,y]],[/\\\\(dtv[\\\\);].+(aquos)/i,/(aquos-tv[\\\\w ]+)\\\\)/i],[d,[f,L],[m,y]],[/(bravia[\\\\w ]+)( bui|\\\\))/i],[d,[f,U],[m,y]],[/(mitv-\\\\w{5}) bui/i],[d,[f,R],[m,y]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[m,y]],[/\\\\b(roku)[\\\\dx]*[\\\\)\\\\/]((?:dvp-)?[\\\\d\\\\.]*)/i,/hbbtv\\\\/\\\\d+\\\\.\\\\d+\\\\.\\\\d+ +\\\\([\\\\w\\\\+ ]*; *([\\\\w\\\\d][^;]*);([^;]*)/i],[[f,H],[d,H],[m,y]],[/\\\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\\\b/i],[[m,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[m,b]],[/droid.+; (shield) bui/i],[d,[f,\"Nvidia\"],[m,b]],[/(playstation [345portablevi]+)/i],[d,[f,U],[m,b]],[/\\\\b(xbox(?: one)?(?!; xbox))[\\\\); ]/i],[d,[f,B],[m,b]],[/((pebble))app/i],[f,d,[m,T]],[/(watch)(?: ?os[,\\\\/]|\\\\d,\\\\d\\\\/)[\\\\d\\\\.]+/i],[d,[f,S],[m,T]],[/droid.+; (glass) \\\\d/i],[d,[f,I],[m,T]],[/droid.+; (wt63?0{2,3})\\\\)/i],[d,[f,q],[m,T]],[/(quest( 2| pro)?)/i],[d,[f,F],[m,T]],[/(tesla)(?: qtcarbrowser|\\\\/[-\\\\w\\\\.]+)/i],[f,[m,k]],[/(aeobc)\\\\b/i],[d,[f,_],[m,k]],[/droid .+?; ([^;]+?)(?: bui|\\\\) applew).+? mobile safari/i],[d,[m,h]],[/droid .+?; ([^;]+?)(?: bui|\\\\) applew).+?(?! mobile) safari/i],[d,[m,w]],[/\\\\b((tablet|tab)[;\\\\/]|focus\\\\/\\\\d(?!.+mobile))/i],[[m,w]],[/(phone|mobile(?:[;\\\\/]| [ \\\\w\\\\/\\\\.]*safari)|pda(?=.+windows ce))/i],[[m,h]],[/(android[-\\\\w\\\\. ]{0,9});.+buil/i],[d,[f,\"Generic\"]]],engine:[[/windows.+ edge\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"EdgeHTML\"]],[/webkit\\\\/537\\\\.36.+chrome\\\\/(?!27)([\\\\w\\\\.]+)/i],[v,[p,\"Blink\"]],[/(presto)\\\\/([\\\\w\\\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\\\/([\\\\w\\\\.]+)/i,/ekioh(flow)\\\\/([\\\\w\\\\.]+)/i,/(khtml|tasman|links)[\\\\/ ]\\\\(?([\\\\w\\\\.]+)/i,/(icab)[\\\\/ ]([23]\\\\.[\\\\d\\\\.]+)/i,/\\\\b(libweb)/i],[p,v],[/rv\\\\:([\\\\w\\\\.]{1,9})\\\\b.+(gecko)/i],[v,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,v],[/(windows) nt 6\\\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\\\/ ]?([\\\\d\\\\.\\\\w ]*)/i,/(windows)[\\\\/ ]?([ntce\\\\d\\\\. ]+\\\\w)(?!.+xbox)/i],[p,[v,J,X]],[/(win(?=3|9|n)|win 9x )([nt\\\\d\\\\.]+)/i],[[p,\"Windows\"],[v,J,X]],[/ip[honead]{2,4}\\\\b(?:.*os ([\\\\w]+) like mac|; opera)/i,/ios;fbsv\\\\/([\\\\d\\\\.]+)/i,/cfnetwork\\\\/.+darwin/i],[[v,/_/g,\".\"],[p,\"iOS\"]],[/(mac os x) ?([\\\\w\\\\. ]*)/i,/(macintosh|mac_powerpc\\\\b)(?!.+haiku)/i],[[p,K],[v,/_/g,\".\"]],[/droid ([\\\\w\\\\.]+)\\\\b.+(android[- ]x86|harmonyos)/i],[v,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\\\/ ]?([\\\\w\\\\.]*)/i,/(blackberry)\\\\w*\\\\/([\\\\w\\\\.]*)/i,/(tizen|kaios)[\\\\/ ]([\\\\w\\\\.]+)/i,/\\\\((series40);/i],[p,v],[/\\\\(bb(10);/i],[v,[p,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\\\/ ]?([\\\\w\\\\.]*)/i],[v,[p,\"Symbian\"]],[/mozilla\\\\/[\\\\d\\\\.]+ \\\\((?:mobile|tablet|tv|mobile; [\\\\w ]+); rv:.+ gecko\\\\/([\\\\w\\\\.]+)/i],[v,[p,N+\" OS\"]],[/web0s;.+rt(tv)/i,/\\\\b(?:hp)?wos(?:browser)?\\\\/([\\\\w\\\\.]+)/i],[v,[p,\"webOS\"]],[/watch(?: ?os[,\\\\/]|\\\\d,\\\\d\\\\/)([\\\\d\\\\.]+)/i],[v,[p,\"watchOS\"]],[/crkey\\\\/([\\\\d\\\\.]+)/i],[v,[p,j+\"cast\"]],[/(cros) [\\\\w]+(?:\\\\)| ([\\\\w\\\\.]+)\\\\b)/i],[[p,z],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\\\/(\\\\d+\\\\.[\\\\w\\\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\\\);]+)/i,/\\\\b(joli|palm)\\\\b ?(?:os)?\\\\/?([\\\\w\\\\.]*)/i,/(mint)[\\\\/\\\\(\\\\) ]?(\\\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\\\/ ]?(?!chrom|package)([-\\\\w\\\\.]*)/i,/(hurd|linux) ?([\\\\w\\\\.]*)/i,/(gnu) ?([\\\\w\\\\.]*)/i,/\\\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\\\/ ]?(?!amd|[ix346]{1,2}86)([\\\\w\\\\.]*)/i,/(haiku) (\\\\w+)/i],[p,v],[/(sunos) ?([\\\\w\\\\.\\\\d]*)/i],[[p,\"Solaris\"],v],[/((?:open)?solaris)[-\\\\/ ]?([\\\\w\\\\.]*)/i,/(aix) ((\\\\d)(?=\\\\.|\\\\)| )[\\\\w\\\\.])*/i,/\\\\b(beos|os\\\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\\\w\\\\.]*)/i],[p,v]]},Z=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:\"\"),b=n&&n.userAgentData?n.userAgentData:a,y=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,t):G,T=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[p]=a,t[v]=a,V.call(t,r,y.browser),t[l]=typeof(e=t[v])===u?e.replace(/[^\\\\d\\\\.]/g,\"\").split(\".\")[0]:a,T&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[p]=\"Brave\"),t},this.getCPU=function(){var e={};return e[g]=a,V.call(e,r,y.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[d]=a,e[m]=a,V.call(e,r,y.device),T&&!e[m]&&b&&b.mobile&&(e[m]=h),T&&\"Macintosh\"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]=\"iPad\",e[m]=w),e},this.getEngine=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.engine),e},this.getOS=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.os),T&&!e[p]&&b&&\"Unknown\"!=b.platform&&(e[p]=b.platform.replace(/chrome os/i,z).replace(/macos/i,K)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?H(e,350):e,this},this.setUA(r),this};Z.VERSION=\"1.0.35\",Z.BROWSER=$([p,v,l]),Z.CPU=$([g]),Z.DEVICE=$([d,f,m,b,h,y,w,T,k]),Z.ENGINE=Z.OS=$([p,v]),typeof t!==s?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=Z);var Y=typeof i!==s&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var ee=new Z;Y.ua=ee.getResult(),Y.ua.get=function(){return ee.getUA()},Y.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Y.ua[n]=t[n]}}}(\"object\"==typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";n.r(r),n.d(r,{ActionType:()=>f,AmplitudePlatformName:()=>g,AnalyticsEventImportance:()=>l,AnalyticsQueries:()=>e,AuthStatus:()=>b,ComponentType:()=>m,IThresholdTier:()=>Jt,MetricType:()=>d,PlatformName:()=>v,SessionActions:()=>h,SessionAutomatedEvents:()=>w,SessionRank:()=>y,SubjectType:()=>p,UserTypeCommerce:()=>c,UserTypeInsto:()=>i,UserTypeRetail:()=>t,UserTypeRetailBusinessBanking:()=>s,UserTypeRetailEmployeeInternal:()=>a,UserTypeRetailEmployeePersonal:()=>o,UserTypeWallet:()=>u,automatedEvents:()=>xn,automatedMappingConfig:()=>In,clearMarkEntry:()=>Vn,clearPerformanceMarkEntries:()=>Xn,config:()=>A,createEventConfig:()=>On,createNewSpan:()=>Ln,createNewTrace:()=>Un,device:()=>W,endPerfMark:()=>Jn,exposeExperiment:()=>wn,flushQueue:()=>or,generateUUID:()=>V,getAnalyticsHeaders:()=>sr,getReferrerData:()=>le,getTracingHeaders:()=>An,getTracingId:()=>Dn,getUrlHostname:()=>pe,getUrlParams:()=>me,getUrlPathname:()=>fe,getUserContext:()=>ar,identify:()=>Tn,identifyFlow:()=>xe,identity:()=>H,identityFlow:()=>Se,incrementUjNavigation:()=>an,init:()=>yn,initNextJsTrackPageview:()=>_n,initTrackPageview:()=>kn,isEventKeyFormatValid:()=>we,isSessionEnded:()=>pt,location:()=>re,logEvent:()=>$t,logMetric:()=>Ht,logPageView:()=>on,logTrace:()=>Rn,markNTBT:()=>tn,markStep:()=>nn,markStepOnce:()=>rn,onVisibilityChange:()=>ln,optIn:()=>En,optOut:()=>Sn,perfMark:()=>Wn,persistentData:()=>oe,postMessage:()=>K,recordSessionDuration:()=>pn,removeFromIdentifyFlow:()=>Ee,savePersistentData:()=>st,sendScheduledEvents:()=>Bt,setBreadcrumbs:()=>ie,setConfig:()=>U,setLocation:()=>ae,setPagePath:()=>ve,setPageview:()=>Kt,setPersistentData:()=>se,setSessionStart:()=>dt,setTime:()=>Ue,startPerfMark:()=>Hn,timeStone:()=>Le,useEventLogger:()=>Yn,useLogEventOnMount:()=>tr,usePerformanceMarks:()=>rr});let e=function(e){return e.fbclid=\"fbclid\",e.gclid=\"gclid\",e.msclkid=\"msclkid\",e.ptclid=\"ptclid\",e.ttclid=\"ttclid\",e.utm_source=\"utm_source\",e.utm_medium=\"utm_medium\",e.utm_campaign=\"utm_campaign\",e.utm_term=\"utm_term\",e.utm_content=\"utm_content\",e}({});const t=0,i=1,a=2,o=3,s=4,c=5,u=6;let l=function(e){return e.low=\"low\",e.high=\"high\",e}({}),d=function(e){return e.count=\"count\",e.rate=\"rate\",e.gauge=\"gauge\",e.distribution=\"distribution\",e.histogram=\"histogram\",e}({}),p=function(e){return e.commerce_merchant=\"commerce_merchant\",e.device=\"device\",e.edp_fingerprint_id=\"edp_fingerprint_id\",e.nft_user=\"nft_user\",e.user=\"user\",e.wallet_user=\"wallet_user\",e.uuid=\"user_uuid\",e}({}),m=function(e){return e.unknown=\"unknown\",e.banner=\"banner\",e.button=\"button\",e.card=\"card\",e.chart=\"chart\",e.content_script=\"content_script\",e.dropdown=\"dropdown\",e.link=\"link\",e.page=\"page\",e.modal=\"modal\",e.table=\"table\",e.search_bar=\"search_bar\",e.service_worker=\"service_worker\",e.text=\"text\",e.text_input=\"text_input\",e.tray=\"tray\",e.checkbox=\"checkbox\",e.icon=\"icon\",e}({}),f=function(e){return e.unknown=\"unknown\",e.blur=\"blur\",e.click=\"click\",e.change=\"change\",e.dismiss=\"dismiss\",e.focus=\"focus\",e.hover=\"hover\",e.select=\"select\",e.measurement=\"measurement\",e.move=\"move\",e.process=\"process\",e.render=\"render\",e.scroll=\"scroll\",e.view=\"view\",e.search=\"search\",e.keyPress=\"keyPress\",e}({}),v=function(e){return e.unknown=\"unknown\",e.web=\"web\",e.android=\"android\",e.ios=\"ios\",e.mobile_web=\"mobile_web\",e.tablet_web=\"tablet_web\",e.server=\"server\",e.windows=\"windows\",e.macos=\"macos\",e.extension=\"extension\",e}({}),g=function(e){return e.web=\"Web\",e.ios=\"iOS\",e.android=\"Android\",e}({}),b=function(e){return e[e.notLoggedIn=0]=\"notLoggedIn\",e[e.loggedIn=1]=\"loggedIn\",e}({}),h=function(e){return e.ac=\"ac\",e.af=\"af\",e.ah=\"ah\",e.al=\"al\",e.am=\"am\",e.ar=\"ar\",e.as=\"as\",e}({}),w=function(e){return e.pv=\"pv\",e}({}),y=function(e){return e.xs=\"xs\",e.s=\"s\",e.m=\"m\",e.l=\"l\",e.xl=\"xl\",e.xxl=\"xxl\",e}({});const T=\"https://analytics-service-dev.cbhq.net\",k=3e5,_=5e3,S=\"analytics-db\",E=\"experiment-exposure-db\",x=\"Analytics SDK:\",O=Object.values(e),j=\"pageview\",N=\"session_duration\",I={navigationTiming:{eventName:\"perf_navigation_timing\"},redirectTime:{eventName:\"perf_redirect_time\"},RT:{eventName:\"perf_redirect_time\"},TTFB:{eventName:\"perf_time_to_first_byte\"},networkInformation:{eventName:\"perf_network_information\"},storageEstimate:{eventName:\"perf_storage_estimate\"},FCP:{eventName:\"perf_first_contentful_paint\"},FID:{eventName:\"perf_first_input_delay\"},LCP:{eventName:\"perf_largest_contentful_paint\"},CLS:{eventName:\"perf_cumulative_layout_shift\"},TBT:{eventName:\"perf_total_blocking_time\"},NTBT:{eventName:\"perf_navigation_total_blocking_time\"},INP:{eventName:\"perf_interact_to_next_paint\"},ET:{eventName:\"perf_element_timing\"},userJourneyStep:{eventName:\"perf_user_journey_step\"}},P=\"1\",M=\"web\";function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const C=/^(https?:\\\\/\\\\/)/;function D(e){return{eventsEndpoint:e+\"/amp\",metricsEndPoint:e+\"/metrics\",exposureEndpoint:e+\"/track-exposures\",tracesEndpoint:e+\"/traces\"}}const A=B({authCookie:\"logged_in\",amplitudeApiKey:\"\",batchEventsPeriod:_,batchEventsThreshold:30,batchMetricsPeriod:_,batchMetricsThreshold:30,batchTracesPeriod:_,batchTracesThreshold:30,headers:{},interactionManager:null,isAlwaysAuthed:!1,isProd:!1,isInternalApplication:!1,onError:(e,t)=>{console.error(x,e,t)},platform:v.unknown,projectName:\"\",ricTimeoutScheduleEvent:1e3,ricTimeoutSetDevice:500,showDebugLogging:!1,trackUserId:!1,version:null,apiEndpoint:T},D(T),{steps:{}}),L=[].reduce(((e,t)=>n=>e(t(n))),(e=>{if(!e.isProd)return e.isInternalApplication?(e.apiEndpoint=\"https://analytics-service-internal-dev.cbhq.net\",B({},e,D(e.apiEndpoint))):e;const t=(e=>e.apiEndpoint?C.test(e.apiEndpoint)?e.apiEndpoint:\\`https://\\${e.apiEndpoint}\\`:e.isInternalApplication?\"https://analytics-service-internal.cbhq.net\":\"https://as.coinbase.com\")(e);return B({},e,{apiEndpoint:t},D(t))})),U=e=>{const{batchEventsThreshold:t,batchMetricsThreshold:n,batchTracesThreshold:r}=e,i=[t,n,r];for(const e of i)if((e||0)>30){console.warn(\"You are setting the threshhold for the batch limit to be greater than 30. This may cause request overload.\");break}Object.assign(A,L(e))},R=[v.web,v.mobile_web,v.tablet_web];function q(){return\"android\"===A.platform}function F(){return\"ios\"===A.platform}function z(){return R.includes(A.platform)}function K(e){if(z()&&navigator&&\"serviceWorker\"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage(e)}catch(e){e instanceof Error&&A.onError(e)}}var $=n(353),Q=n.n($);const W={amplitudeOSName:null,amplitudeOSVersion:null,amplitudeDeviceModel:null,amplitudePlatform:null,browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},H={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,languageCode:null,locale:null,jwt:null,session_lcc_id:null,userAgent:null,userId:null},V=e=>e?(e^16*Math.random()>>e/4).toString(16):\"10000000-1000-4000-8000-100000000000\".replace(/[018]/g,V),J=()=>A.isAlwaysAuthed||!!H.userId,X=()=>{const e={};return H.countryCode&&(e.country_code=H.countryCode),e},G=()=>{const{platform:e}=A;if(e===v.web)switch(!0){case window.matchMedia(\"(max-width: 560px)\").matches:return v.mobile_web;case window.matchMedia(\"(max-width: 1024px, min-width: 561px)\").matches:return v.tablet_web}return e},Z=()=>{var e,t,n,r,i;z()?(\"requestIdleCallback\"in window?window.requestIdleCallback(ne,{timeout:A.ricTimeoutSetDevice}):ne(),W.amplitudePlatform=g.web,W.userAgent=(null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent)||null,ee({height:null!=(t=null==(n=window)?void 0:n.innerHeight)?t:null,width:null!=(r=null==(i=window)?void 0:i.innerWidth)?r:null})):F()?(W.amplitudePlatform=g.ios,W.userAgent=H.userAgent,W.userAgent&&ne()):q()&&(W.userAgent=H.userAgent,W.amplitudePlatform=g.android,W.userAgent&&ne())},Y=e=>{Object.assign(H,e),z()&&K({identity:{isAuthed:!!H.userId,locale:H.locale||null}})},ee=e=>{W.height=e.height,W.width=e.width},te=()=>{U({platform:G()}),z()&&K({config:{platform:A.platform}})},ne=()=>{var e;performance.mark&&performance.mark(\"ua_parser_start\");const t=new(Q())(null!=(e=W.userAgent)?e:\"\").getResult();W.browserName=t.browser.name||null,W.browserMajor=t.browser.major||null,W.osName=t.os.name||null,W.amplitudeOSName=W.browserName,W.amplitudeOSVersion=W.browserMajor,W.amplitudeDeviceModel=W.osName,K({device:{browserName:W.browserName,osName:W.osName}}),performance.mark&&(performance.mark(\"ua_parser_end\"),performance.measure(\"ua_parser\",\"ua_parser_start\",\"ua_parser_end\"))},re={breadcrumbs:[],initialUAAData:{},pageKey:\"\",pageKeyRegex:{},pagePath:\"\",prevPageKey:\"\",prevPagePath:\"\"};function ie(e){Object.assign(re,{breadcrumbs:e})}function ae(e){Object.assign(re,e)}const oe={eventId:0,sequenceNumber:0,sessionId:0,lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null,ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0};function se(e){Object.assign(oe,e)}function ce(){var e,t;return null!=(e=null==(t=document)?void 0:t.referrer)?e:\"\"}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}const le=()=>{const e=ce();if(!e)return{};const t=new URL(e);return t.hostname===pe()?{}:{referrer:e,referring_domain:t.hostname}},de=()=>{const e=new URLSearchParams(me()),t={};return O.forEach((n=>{e.has(n)&&(t[n]=(e.get(n)||\"\").toLowerCase())})),t},pe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.hostname)||\"\"},me=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.search)||\"\"},fe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.pathname)||\"\"},ve=()=>{const e=A.overrideWindowLocation?re.pagePath:fe()+me();e&&e!==re.pagePath&&(e!==re.pagePath&&ge(),re.pagePath=e,re.pageKeyRegex&&Object.keys(re.pageKeyRegex).some((e=>{if(re.pageKeyRegex[e].test(re.pagePath))return re.pageKey=e,!0})))},ge=()=>{if(z()){const e=ce();if(!re.prevPagePath&&e){const t=new URL(e);if(t.hostname===pe())return void(re.prevPagePath=t.pathname)}}re.prevPagePath=re.pagePath,re.prevPageKey=re.pageKey},be=e=>{z()&&Object.assign(e,z()?(Object.keys(re.initialUAAData).length>0||(new URLSearchParams(me()),re.initialUAAData=ue({},(()=>{const e={};return O.forEach((t=>{oe[t]&&(e[t]=oe[t])})),e})(),de(),le())),re.initialUAAData):re.initialUAAData)},he=/^[a-zd]+(_[a-zd]+)*$/;function we(e){return he.test(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}const Te=[\"action\",\"component_type\",\"component_name\",\"context\",\"logging_id\"],ke=[\"num_non_hardware_accounts\",\"ujs\"],_e=\"ujs_\",Se={};function Ee(e){e.forEach((e=>{ke.includes(e)&&delete Se[e]}))}function xe(e){var t;const n=Object.entries(e).reduce(((e,t)=>{const[n,r]=t;return!Te.includes(n)&&ke.includes(n)?we(n)?ye({},e,{[n]:r}):(A.onError(new Error(\"IdentityFlow property names must have snake case format\"),{[n]:r}),e):e}),{});null!=(t=n.ujs)&&t.length&&(n.ujs=n.ujs.map((e=>\\`\\${_e}\\${e}\\`))),Object.assign(Se,n)}function Oe(){return A.platform!==v.unknown||(A.onError(new Error(\"SDK platform not initialized\")),!1)}const je={eventsQueue:[],eventsScheduled:!1,metricsQueue:[],metricsScheduled:!1,tracesQueue:[],tracesScheduled:!1};function Ne(e){Object.assign(je,e)}const Ie={ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0},Pe={ac:20,af:5,ah:1,al:1,am:0,ar:10,as:20},Me={pv:25},Be={xs:0,s:1,m:1,l:2,xl:2,xxl:2},Ce=e=>e<15?y.xs:e<60?y.s:e<240?y.m:e<960?y.l:e<3840?y.xl:y.xxl,De=e=>{Object.assign(Ie,e)};function Ae(){return(new Date).getTime()}const Le={timeStart:Ae(),timeOnPagePath:0,timeOnPageKey:0,prevTimeOnPagePath:0,prevTimeOnPageKey:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function Ue(e){Object.assign(Le,e)}const Re=(e,t)=>t.some((t=>e instanceof t));let qe,Fe;const ze=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Qe=new WeakMap,We=new WeakMap;let He={get(e,t,n){if(e instanceof IDBTransaction){if(\"done\"===t)return Ke.get(e);if(\"objectStoreNames\"===t)return e.objectStoreNames||$e.get(e);if(\"store\"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&(\"done\"===t||\"store\"===t)||t in e};function Ve(e){return\"function\"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||\"objectStoreNames\"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Xe(this),e),Je(ze.get(this))}:function(...e){return Je(t.apply(Xe(this),e))}:function(e,...n){const r=t.call(Xe(this),e,...n);return $e.set(r,e.sort?e.sort():[e]),Je(r)}:(e instanceof IDBTransaction&&function(e){if(Ke.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener(\"complete\",i),e.removeEventListener(\"error\",a),e.removeEventListener(\"abort\",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(\"AbortError\",\"AbortError\")),r()};e.addEventListener(\"complete\",i),e.addEventListener(\"error\",a),e.addEventListener(\"abort\",a)}));Ke.set(e,t)}(e),Re(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,He):e);var t}function Je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener(\"success\",i),e.removeEventListener(\"error\",a)},i=()=>{t(Je(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(\"success\",i),e.addEventListener(\"error\",a)}));return t.then((t=>{t instanceof IDBCursor&&ze.set(t,e)})).catch((()=>{})),We.set(t,e),t}(e);if(Qe.has(e))return Qe.get(e);const t=Ve(e);return t!==e&&(Qe.set(e,t),We.set(t,e)),t}const Xe=e=>We.get(e),Ge=[\"get\",\"getKey\",\"getAll\",\"getAllKeys\",\"count\"],Ze=[\"put\",\"add\",\"delete\",\"clear\"],Ye=new Map;function et(e,t){if(!(e instanceof IDBDatabase)||t in e||\"string\"!=typeof t)return;if(Ye.get(t))return Ye.get(t);const n=t.replace(/FromIndex$/,\"\"),r=t!==n,i=Ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ge.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?\"readwrite\":\"readonly\");let o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ye.set(t,a),a}var tt;tt=He,He={...tt,get:(e,t,n)=>et(e,t)||tt.get(e,t,n),has:(e,t)=>!!et(e,t)||tt.has(e,t)};const nt={isReady:!1,idbKeyval:null};function rt(e){Object.assign(nt,e)}const it={},at=async e=>{if(!nt.idbKeyval)return Promise.resolve(null);try{return await nt.idbKeyval.get(e)}catch(e){return A.onError(new Error(\"IndexedDB:Get:InternalError\")),Promise.resolve(null)}},ot=async(e,t)=>{if(nt.idbKeyval)try{await nt.idbKeyval.set(e,t)}catch(e){A.onError(new Error(\"IndexedDB:Set:InternalError\"))}},st=()=>{\"server\"!==A.platform&&(se({sessionStart:Le.sessionStart,ac:Ie.ac,af:Ie.af,ah:Ie.ah,al:Ie.al,am:Ie.am,ar:Ie.ar,as:Ie.as,pv:Ie.pv}),H.userId&&se({userId:H.userId}),ot(S,oe))},ct=\"rgb(5,177,105)\",ut=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=\\`%c \\${x}\\`,a=\\`color:\\${ct};font-size:11px;\\`,o=\\`Importance: \\${r}\\`;console.group(i,a,t,o),n.forEach((e=>{e.event_type?console.log(e.event_type,e):console.log(e)})),console.groupEnd()},lt=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=\\`color:\\${ct};font-size:11px;\\`,a=\\`%c \\${x}\\`,o=\\`Importance: \\${r}\\`;console.log(a,i,t,n,o)},dt=()=>{const e=Ae();oe.sessionId&&oe.lastEventTime&&oe.sessionUUID&&!pt(e)||(oe.sessionId=e,oe.sessionUUID=V(),Ue({sessionStart:e}),lt({metricName:\"Started new session:\",data:{persistentData:oe,timeStone:Le}})),oe.lastEventTime=e},pt=e=>e-oe.lastEventTime>18e5;function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const ft=e=>{var t;(e=>{switch(e.action){case f.click:Ie.ac+=1;break;case f.focus:Ie.af+=1;break;case f.hover:Ie.ah+=1;break;case f.move:Ie.am+=1;break;case f.scroll:Ie.al+=1;break;case f.search:Ie.ar+=1;break;case f.select:Ie.as+=1}})(t=e),t.event_type!==j?t.event_type===N&&((e=>{if(!e.session_rank)return;const t=e.session_rank;Object.values(h).forEach((e=>{Ie.sqs+=Ie[e]*Pe[e]})),Object.values(w).forEach((e=>{Ie.sqs+=Ie[e]*Me[e]})),Ie.sqs*=Be[t]})(t),Object.assign(t,Ie),De({ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0})):Ie.pv+=1;const n=e.event_type;delete e.event_type;const r=e.deviceId?e.deviceId:null,i=e.timestamp;return delete e.timestamp,se({eventId:oe.eventId+1}),se({sequenceNumber:oe.sequenceNumber+1}),dt(),st(),{device_id:H.deviceId||r||null,user_id:H.userId,timestamp:i,event_id:oe.eventId,session_id:oe.sessionId||-1,event_type:n,version_name:A.version||null,platform:W.amplitudePlatform,os_name:W.amplitudeOSName,os_version:W.amplitudeOSVersion,device_model:W.amplitudeDeviceModel,language:H.languageCode,event_properties:mt({},e,{session_uuid:oe.sessionUUID,height:W.height,width:W.width}),user_properties:X(),uuid:V(),library:{name:\"@cbhq/client-analytics\",version:\"10.6.0\"},sequence_number:oe.sequenceNumber,user_agent:W.userAgent||H.userAgent}},vt=e=>e.map((e=>ft(e)));function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}const bt=e=>e.map((e=>(e=>{const t=e.tags||{},n=gt({authed:J()?\"true\":\"false\",platform:A.platform},t,{project_name:A.projectName,version_name:A.version||null});return{metric_name:e.metricName,page_path:e.pagePath||null,value:e.value,tags:n,type:e.metricType}})(e))),ht=e=>0!==je.metricsQueue.length&&(je.metricsQueue.length>=A.batchMetricsThreshold||(je.metricsScheduled||(je.metricsScheduled=!0,setTimeout((()=>{je.metricsScheduled=!1,e(bt(je.metricsQueue)),je.metricsQueue=[]}),A.batchMetricsPeriod)),!1)),wt=e=>0!==je.tracesQueue.length&&(je.tracesQueue.length>=A.batchTracesThreshold||(je.tracesScheduled||(je.tracesScheduled=!0,setTimeout((()=>{je.tracesScheduled=!1,e(je.tracesQueue),je.tracesQueue=[]}),A.batchTracesPeriod)),!1)),yt=e=>{var t;z()&&null!=(t=window)&&t.requestIdleCallback?window.requestIdleCallback(e,{timeout:A.ricTimeoutScheduleEvent}):(q()||F())&&A.interactionManager?A.interactionManager.runAfterInteractions(e):e()};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}const kt=\"application/x-www-form-urlencoded; charset=UTF-8\",_t=e=>{const{data:t,importance:n,isJSON:r,onError:i,url:a}=e,o=r?\"application/json\":kt,s=n||l.low,c=r?JSON.stringify(t):new URLSearchParams(t).toString();function u(){const e=new XMLHttpRequest;e.open(\"POST\",a,!0),Object.keys(A.headers||{}).forEach((t=>{e.setRequestHeader(t,A.headers[t])})),e.setRequestHeader(\"Content-Type\",kt),H.jwt&&e.setRequestHeader(\"authorization\",\\`Bearer \\${H.jwt}\\`),e.send(c)}if(!z()||r||!(\"sendBeacon\"in navigator)||s!==l.low||A.headers&&0!==Object.keys(A.headers).length)if(z()&&!r)u();else{const e=Tt({},A.headers,{\"Content-Type\":o});H.jwt&&(e.Authorization=\\`Bearer \\${H.jwt}\\`),fetch(a,{method:\"POST\",mode:\"no-cors\",headers:e,body:c}).catch((e=>{i(e,{context:\"AnalyticsSDKApiError\"})}))}else{const e=new Blob([c],{type:kt});try{navigator.sendBeacon.bind(navigator)(a,e)||u()}catch(e){console.error(e),u()}}};var St=n(762),Et=n.n(St);const xt=(e,t,n)=>{const r=e||\"\";return Et()(\"2\"+r+t+n)};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}class jt extends Error{constructor(e){super(e),this.name=\"CircularJsonReference\",this.message=e,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Nt extends jt{constructor(...e){super(...e),this.name=\"DomReferenceInAnalyticsEvent\"}}function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}const Pt=(e,t=l.low)=>{var n;e&&je.eventsQueue.push(e),nt.isReady&&(!A.trackUserId||H.userId?(t===l.high||(n=Mt,0!==je.eventsQueue.length&&(je.eventsQueue.length>=A.batchEventsThreshold||(je.eventsScheduled||(je.eventsScheduled=!0,setTimeout((()=>{je.eventsScheduled=!1,n(vt(je.eventsQueue)),je.eventsQueue=[]}),A.batchEventsPeriod)),0))))&&Bt():je.eventsQueue.length>10&&(A.trackUserId=!1,A.onError(new Error(\"userId not set in Logged-in\"))))},Mt=(e,t=l.low)=>{if(H.isOptOut||0===e.length)return;let n;try{n=JSON.stringify(e)}catch(t){const r=e.map((e=>e.event_type)).join(\", \"),[i,a]=(e=>{try{const n=[];for(const r of e){const e=Ot({},r);r.event_properties&&(e.event_properties=Ot({},e.event_properties,{currentTarget:null,target:null,relatedTarget:null,_dispatchInstances:null,_targetInst:null,view:(t=r.event_properties.view,[\"string\",\"number\",\"boolean\"].includes(typeof t)?r.event_properties.view:null)})),n.push(e)}return[!0,JSON.stringify(n)]}catch(e){return[!1,\"\"]}var t})(e);if(!i)return void A.onError(new jt(t instanceof Error?t.message:\"unknown\"),{listEventType:r});n=a,A.onError(new Nt(\"Found DOM element reference\"),{listEventType:r,stringifiedEventData:n})}const r=Ae().toString(),i=It({},{e:n,v:\"2\",upload_time:r},{client:A.amplitudeApiKey,checksum:xt(A.amplitudeApiKey,n,r)});_t({url:A.eventsEndpoint,data:i,importance:t,onError:A.onError}),ut({metricName:\"Batch Events\",data:e,importance:t})},Bt=()=>{Mt(vt(je.eventsQueue)),Ne({eventsQueue:[]})};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}const Dt=Object.values(f),At=Object.values(m),Lt=e=>Dt.includes(e)?e:f.unknown,Ut=e=>At.includes(e)?e:m.unknown,Rt=(e,t,n)=>{const r={auth:J()?b.loggedIn:b.notLoggedIn,action:Lt(e),component_type:Ut(t),logging_id:n,platform:A.platform,project_name:A.projectName};return\"number\"==typeof H.userTypeEnum&&(r.user_type_enum=H.userTypeEnum),r},qt=e=>{const t=Ae();if(!e)return A.onError(new Error(\"missing logData\")),Ct({},Rt(f.unknown,m.unknown),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});const n=Ct({},e,Rt(e.action,e.componentType,e.loggingId),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});return delete n.componentType,delete n.loggingId,n},Ft={blacklistRegex:[],isEnabled:!1};function zt(){return{page_key:re.pageKey,page_path:re.pagePath,prev_page_key:re.prevPageKey,prev_page_path:re.prevPagePath}}function Kt(e){Object.assign(Ft,e)}function $t(e,t,n=l.low){if(H.isOptOut)return;if(!Oe())return;const r=qt(t);!function(e){Ft.isEnabled&&(ve(),Object.assign(e,zt()))}(r),be(r),function(e){Object.keys(Se).length>0&&Object.assign(e,Se)}(r),r.has_double_fired=!1,r.event_type=e,n===l.high?Pt(r,n):yt((()=>{Pt(r)}))}function Qt(e,t=!1){t?_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError})})),ut({metricName:\"Batch Metrics\",data:e})}function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function Ht(e){if(!Oe())return;v.server!==A.platform&&!e.pagePath&&re.pagePath&&(e.pagePath=re.pagePath);const t=Object.keys(Se).length?Wt({},e.tags,Se):e.tags;t&&Object.assign(e,{tags:t}),je.metricsQueue.push(e),ht(Qt)&&(Qt(bt(je.metricsQueue)),je.metricsQueue=[])}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}let Jt=function(e){return e.instant=\"instant\",e.quick=\"quick\",e.moderate=\"moderate\",e.slow=\"slow\",e.unavoidable=\"unavoidable\",e}({});function Xt(e){return e.toLowerCase()}let Gt={};const Zt=(e,t)=>{null!=A&&A.onMarkStep&&A.onMarkStep(e,t),xe({ujs:t})};let Yt;const en={Perfume:()=>{},markStep:e=>{},markStepOnce:e=>{},incrementUjNavigation:()=>{}},tn=()=>{z()&&Yt&&Yt.markNTBT&&Yt.markNTBT()},nn=e=>{z()&&Yt&&en.markStep&&en.markStep(e)},rn=e=>{z()&&Yt&&en.markStepOnce&&en.markStepOnce(e)},an=()=>{z()&&Yt&&en.incrementUjNavigation&&en.incrementUjNavigation()};function on(e={callMarkNTBT:!0}){\"unknown\"!==A.platform&&(Ft.blacklistRegex.some((e=>e.test(fe())))||($t(j,{action:f.render,componentType:m.page}),e.callMarkNTBT&&tn()))}let sn=!1,cn=!1;const un=e=>{sn=!e.persisted},ln=(e,t=\"hidden\",n=!1)=>{cn||(addEventListener(\"pagehide\",un),addEventListener(\"beforeunload\",(()=>{})),cn=!0),addEventListener(\"visibilitychange\",(({timeStamp:n})=>{document.visibilityState===t&&e({timeStamp:n,isUnloading:sn})}),{capture:!0,once:n})},dn=36e3;function pn(){const e=pt(Ae());if(e&&(O.forEach((e=>{oe[e]&&delete oe[e]})),st()),!oe.lastEventTime||!Le.sessionStart||!e)return;const t=Math.round((oe.lastEventTime-Le.sessionStart)/1e3);if(t<1||t>dn)return;const n=Ce(t);$t(N,{action:f.measurement,componentType:m.page,session_duration:t,session_end:oe.lastEventTime,session_start:Le.sessionStart,session_rank:n})}function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mn.apply(this,arguments)}const fn=[],vn=[],gn=()=>{const e=fn.shift();e&&e()},bn=()=>{const e=vn.shift();e&&e()};let hn={};function wn(e){const t=function(e){return{test_name:e.testName,group_name:e.group,subject_id:e.subjectId,exposed_at:Ae(),subject_type:e.subjectType,platform:A.platform}}(e);hn[e.testName]=hn[e.testName]||0,hn[e.testName]+k>Ae()?lt({metricName:\\`Event: exposeExperiment \\${e.testName} not sent\\`,data:t}):(hn[e.testName]=Ae(),ot(E,hn),lt({metricName:\\`Event: exposeExperiment \\${e.testName} sent\\`,data:t}),_t({url:A.exposureEndpoint,data:[t],onError:(t,n)=>{hn[e.testName]=0,ot(E,hn),A.onError(t,n)},isJSON:!0,importance:l.high}))}const yn=e=>{var t,r,i;U(e),z()&&(H.languageCode=(null==(t=navigator)?void 0:t.languages[0])||(null==(r=navigator)?void 0:r.language)||\"\"),te(),(()=>{var e;if(z()&&null!=(e=window)&&e.indexedDB){const e=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=Je(o);return r&&o.addEventListener(\"upgradeneeded\",(e=>{r(Je(o.result),e.oldVersion,e.newVersion,Je(o.transaction),e)})),n&&o.addEventListener(\"blocked\",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener(\"close\",(()=>a())),i&&e.addEventListener(\"versionchange\",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}(\"keyval-store\",1,{upgrade(e){e.createObjectStore(\"keyval\")}});rt({idbKeyval:{get:async t=>(await e).get(\"keyval\",t),set:async(t,n)=>(await e).put(\"keyval\",n,t),delete:async t=>(await e).delete(\"keyval\",t),keys:async()=>(await e).getAllKeys(\"keyval\")}})}else rt({idbKeyval:{get:async e=>new Promise((t=>{t(it[e])})),set:async(e,t)=>new Promise((n=>{it[e]=t,n(e)})),delete:async e=>new Promise((()=>{delete it[e]})),keys:async()=>new Promise((e=>{e(Object.keys(it))}))}})})(),lt({metricName:\"Initialized Analytics:\",data:{deviceId:H.deviceId}}),fn.push((()=>{Pt()})),(async()=>{const e=await at(S);rt({isReady:!0}),gn(),e&&(bn(),se({eventId:e.eventId||oe.eventId,sequenceNumber:e.sequenceNumber||oe.sequenceNumber,sessionId:e.sessionId||oe.sessionId,lastEventTime:e.lastEventTime||oe.lastEventTime,sessionUUID:e.sessionUUID||oe.sessionUUID}),function(e){se(mn({},function(e){const t={};return O.forEach((n=>{e[n]&&(t[n]=e[n])})),t}(e),de()))}(e),Ue({sessionStart:e.sessionStart||oe.sessionStart}),De({ac:e.ac||Ie.ac,af:e.af||Ie.af,ah:e.ah||Ie.ah,al:e.al||Ie.al,am:e.am||Ie.am,ar:e.ar||Ie.ar,as:e.as||Ie.as,pv:e.pv||Ie.pv}),A.trackUserId&&Y({userId:e.userId||H.userId}),pn(),lt({metricName:\"Initialized Analytics IndexedDB:\",data:e}))})(),async function(){at(E).then((e=>{hn=null!=e?e:{}})).catch((e=>{e instanceof Error&&A.onError(e)}))}(),Z(),z()&&(ln((()=>{se({lastEventTime:Ae()}),st(),Bt()}),\"hidden\"),ln((()=>{pn()}),\"visible\")),z()&&(i=()=>{var e,t,n,r;te(),ee({width:null!=(e=null==(t=window)?void 0:t.innerWidth)?e:null,height:null!=(n=null==(r=window)?void 0:r.innerHeight)?n:null})},addEventListener(\"resize\",(()=>{requestAnimationFrame((()=>{i()}))}))),(()=>{if(z())try{const e=n(2);en.markStep=e.markStep,en.markStepOnce=e.markStepOnce,en.incrementUjNavigation=e.incrementUjNavigation,Yt=new e.Perfume({analyticsTracker:e=>{const{data:t,attribution:n,metricName:r,navigatorInformation:i,rating:a}=e,o=I[r],s=(null==n?void 0:n.category)||null;if(!o&&!s)return;const c=(null==i?void 0:i.deviceMemory)||0,u=(null==i?void 0:i.hardwareConcurrency)||0,l=(null==i?void 0:i.isLowEndDevice)||!1,p=(null==i?void 0:i.isLowEndExperience)||!1,v=(null==i?void 0:i.serviceWorkerStatus)||\"unsupported\",g=Vt({deviceMemory:c,hardwareConcurrency:u,isLowEndDevice:l,isLowEndExperience:p,serviceWorkerStatus:v},Gt),b={is_low_end_device:l,is_low_end_experience:p,page_key:re.pageKey||\"\",save_data:t.saveData||!1,service_worker:v,is_perf_metric:!0};if(\"navigationTiming\"===r)t&&\"number\"==typeof t.redirectTime&&Ht({metricName:I.redirectTime.eventName,metricType:d.histogram,tags:b,value:t.redirectTime||0});else if(\"TTFB\"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),Ht({metricName:I.TTFB.eventName,metricType:d.histogram,tags:Vt({},b),value:t}),a&&Ht({metricName:\\`perf_web_vitals_ttfb_\\${a}\\`,metricType:d.count,tags:b,value:1});else if(\"networkInformation\"===r)null!=t&&t.effectiveType&&(Gt=t,$t(o.eventName,{action:f.measurement,componentType:m.page,networkInformationDownlink:t.downlink,networkInformationEffectiveType:t.effectiveType,networkInformationRtt:t.rtt,networkInformationSaveData:t.saveData,navigatorDeviceMemory:c,navigatorHardwareConcurrency:u}));else if(\"storageEstimate\"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page},t,g)),Ht({metricName:\"perf_storage_estimate_caches\",metricType:d.histogram,tags:b,value:t.caches}),Ht({metricName:\"perf_storage_estimate_indexed_db\",metricType:d.histogram,tags:b,value:t.indexedDB});else if(\"CLS\"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,score:100*t||null,vitalsScore:a||null},g)),a&&Ht({metricName:\\`perf_web_vitals_cls_\\${a}\\`,metricType:d.count,tags:b,value:1});else if(\"FID\"===r){const e=(null==n?void 0:n.performanceEntry)||null,r=parseInt((null==e?void 0:e.processingStart)||\"\");$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,processingStart:null!=e&&e.processingStart?r:null,startTime:null!=e&&e.startTime?parseInt(e.startTime):null,vitalsScore:a||null},g)),a&&Ht({metricName:\\`perf_web_vitals_fidVitals_\\${a}\\`,metricType:d.count,tags:b,value:1})}else\"userJourneyStep\"===r?($t(\"perf_user_journey_step\",Vt({action:f.measurement,componentType:m.page,duration:t||null,rating:null!=a?a:null,step_name:(null==n?void 0:n.stepName)||\"\"},g)),Ht({metricName:\\`user_journey_step.\\${A.projectName}.\\${A.platform}.\\${(null==n?void 0:n.stepName)||\"\"}_vitals_\\${a}\\`,metricType:d.count,tags:b,value:1}),Ht({metricName:\\`user_journey_step.\\${A.projectName}.\\${A.platform}.\\${(null==n?void 0:n.stepName)||\"\"}\\`,metricType:d.distribution,tags:b,value:t||null})):I[r]&&t&&($t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),a&&(Ht({metricName:\\`perf_web_vitals_\\${Xt(r)}_\\${a}\\`,metricType:d.count,tags:b,value:1}),\"LCP\"===r&&Ht({metricName:\\`perf_web_vitals_\\${Xt(r)}\\`,metricType:d.distribution,tags:b,value:t})))},maxMeasureTime:3e4,steps:A.steps,onMarkStep:Zt})}catch(e){e instanceof Error&&A.onError(e)}})()},Tn=e=>{Y(e),e.userAgent&&Z(),lt({metricName:\"Identify:\",data:{countryCode:H.countryCode,deviceId:H.deviceId,userId:H.userId}})},kn=({blacklistRegex:e,pageKeyRegex:t,browserHistory:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.listen((()=>{on()}))},_n=({blacklistRegex:e,pageKeyRegex:t,nextJsRouter:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.events.on(\"routeChangeComplete\",(()=>{on()}))},Sn=()=>{Y({isOptOut:!0}),ot(S,{})},En=()=>{Y({isOptOut:!1})},xn={Button:{label:\"cb_button\",uuid:\"e921a074-40e6-4371-8700-134d5cd633e6\",componentType:m.button}};function On(e,t,n){return{componentName:e,actions:t,data:n}}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(this,arguments)}function Nn(e,t,n){const{componentName:r,data:i}=n;$t(e.label,jn({componentType:e.componentType,action:t,loggingId:e.uuid,component_name:r},i))}const In={actionMapping:{onPress:f.click,onHover:f.hover},handlers:{Button:{[f.click]:e=>Nn(xn.Button,f.click,e),[f.hover]:e=>Nn(xn.Button,f.hover,e)}}};function Pn(e,t=!1){t?_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError})})),ut({metricName:\"Batch Traces\",data:e})}function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mn.apply(this,arguments)}const Bn=1e6;function Cn(e){return e*Bn}function Dn(e=function(){var e;return null==(e=window)?void 0:e.crypto}()){const t=new Uint32Array(2);return null==e||e.getRandomValues(t),((BigInt(t[0])<<BigInt(32))+BigInt(t[1])).toString()}function An(e,t){return{\"x-datadog-origin\":\"rum\",\"x-datadog-parent-id\":t,\"x-datadog-sampling-priority\":\"1\",\"x-datadog-trace-id\":e}}function Ln(e){var t;const{name:n,traceId:r,spanId:i,start:a,duration:o,resource:s,meta:c}=e;return{duration:o?Cn(o):0,name:n,resource:s,service:A.projectName,span_id:null!=i?i:Dn(),start:a?Cn(a):0,trace_id:null!=r?r:Dn(),parent_id:P,type:M,meta:Mn({platform:A.platform},re.pageKey?{page_key:re.pageKey}:{},null!=(t=Se.ujs)&&t.length?{last_ujs:Se.ujs[Se.ujs.length-1]}:{},null!=c?c:{})}}function Un(e){return[Ln(e)]}function Rn(e,t){Oe()&&function(e){return e.length>0}(e)&&(t&&function(e,t){e.forEach((e=>function(e,t){const n=Mn({},e.meta,t.meta),r={start:t.start?Cn(t.start):e.start,duration:t.duration?Cn(t.duration):e.duration};Object.assign(e,t,Mn({meta:n},r))}(e,t)))}(e,t),je.tracesQueue.push(e),wt(Pn)&&(Pn(je.tracesQueue),je.tracesQueue=[]))}function qn(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,\"string\");if(\"object\"!=typeof r)return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==typeof t?t:String(t)}function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(this,arguments)}function zn(){return void 0!==typeof window&&\"performance\"in window&&\"mark\"in performance&&\"getEntriesByName\"in performance}function Kn(e,t){return\\`perf_\\${e}\\${null!=t&&t.label?\\`_\\${t.label}\\`:\"\"}\\`}function $n(e,t,n){return\\`\\${Kn(e,n)}__\\${t}\\`}let Qn={};function Wn(e,t,n){if(!zn())return;const r=$n(e,t,n);if(performance.mark(r),\"end\"===t){const t=Kn(e,n);!function(e,t,n){try{performance.measure(e,t,n)}catch(e){A.onError(e)}}(t,$n(e,\"start\",n),r);const i=performance.getEntriesByName(t).pop();i&&Ht(Fn({metricName:e,metricType:d.distribution,value:i.duration},null!=n&&n.tags?{tags:n.tags}:{}))}}function Hn(e,t){if(!zn())return;const n=$n(e,\"start\",t);Qn[n]||(Wn(e,\"start\",t),Qn[n]=!0)}function Vn(e,t){const n=$n(e,\"start\",t),r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(Qn,[n].map(qn));Qn=r}function Jn(e,t){if(!zn())return;const n=$n(e,\"start\",t);Qn[n]&&(Wn(e,\"end\",t),Vn(e,t))}function Xn(){zn()&&(performance.clearMarks(),Qn={})}var Gn=n(784);function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function Yn(e,t,n=l.low){const r=(0,Gn.useRef)(t);return(0,Gn.useEffect)((()=>{r.current=t}),[t]),(0,Gn.useCallback)((t=>{$t(e,Zn({},r.current,t),n)}),[e,n])}function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},er.apply(this,arguments)}function tr(e,t,n=l.low){(0,Gn.useEffect)((()=>{const r=er({},t,{action:f.render});$t(e,r,n)}),[])}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=function(e,t){return{markStartPerf:(0,Gn.useCallback)((()=>Hn(e,t)),[e,t]),markEndPerf:(0,Gn.useCallback)((n=>Jn(e,nr({},t,n))),[e,t])}};function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function ar(){return Object.entries(ir({},Se,zt(),{sessionUUID:oe.sessionUUID,userId:oe.userId})).reduce(((e,t)=>{return null!=(n=t[1])&&\"\"!==n?ir({},e,{[t[0]]:t[1]}):e;var n}),{})}async function or(){return new Promise((e=>{Mt(vt(je.eventsQueue)),Qt(bt(je.metricsQueue),!0),Pn(je.tracesQueue,!0),Ne({eventsQueue:[],metricsQueue:[],tracesQueue:[]}),e()}))}function sr(){return{\"X-CB-Device-ID\":H.deviceId||\"unknown\",\"X-CB-Is-Logged-In\":H.userId?\"true\":\"false\",\"X-CB-Pagekey\":re.pageKey||\"unknown\",\"X-CB-UJS\":(e=Se.ujs,void 0===e||0===e.length?\"\":e.join(\",\")),\"X-CB-Platform\":A.platform||\"unknown\",\"X-CB-Project-Name\":A.projectName||\"unknown\",\"X-CB-Session-UUID\":oe.sessionUUID||\"unknown\",\"X-CB-Version-Name\":A.version?String(A.version):\"unknown\"};var e}})(),r})()}));`;\n//# sourceMappingURL=telemetry-content.js.map","import { store } from '../../store/store.js';\nimport { TELEMETRY_SCRIPT_CONTENT } from './telemetry-content.js';\nexport const loadTelemetryScript = () => {\n    return new Promise((resolve, reject) => {\n        if (window.ClientAnalytics) {\n            return resolve();\n        }\n        try {\n            const script = document.createElement('script');\n            script.textContent = TELEMETRY_SCRIPT_CONTENT;\n            script.type = 'text/javascript';\n            document.head.appendChild(script);\n            initCCA();\n            document.head.removeChild(script);\n            resolve();\n        }\n        catch (_a) {\n            console.error('Failed to execute inlined telemetry script');\n            reject();\n        }\n    });\n};\nconst initCCA = () => {\n    var _a, _b, _c;\n    if (typeof window !== 'undefined') {\n        const deviceId = (_c = (_a = store.config.get().deviceId) !== null && _a !== void 0 ? _a : (_b = window.crypto) === null || _b === void 0 ? void 0 : _b.randomUUID()) !== null && _c !== void 0 ? _c : '';\n        if (window.ClientAnalytics) {\n            const { init, identify, PlatformName } = window.ClientAnalytics;\n            init({\n                isProd: true,\n                amplitudeApiKey: 'c66737ad47ec354ced777935b0af822e',\n                platform: PlatformName.web,\n                projectName: 'base_account_sdk',\n                showDebugLogging: false,\n                version: '1.0.0',\n                apiEndpoint: 'https://cca-lite.coinbase.com',\n            });\n            identify({ deviceId });\n            store.config.set({ deviceId });\n        }\n    }\n};\n//# sourceMappingURL=initCCA.js.map","export const standardErrorCodes = {\n    rpc: {\n        invalidInput: -32000,\n        resourceNotFound: -32001,\n        resourceUnavailable: -32002,\n        transactionRejected: -32003,\n        methodNotSupported: -32004,\n        limitExceeded: -32005,\n        parse: -32700,\n        invalidRequest: -32600,\n        methodNotFound: -32601,\n        invalidParams: -32602,\n        internal: -32603,\n    },\n    provider: {\n        userRejectedRequest: 4001,\n        unauthorized: 4100,\n        unsupportedMethod: 4200,\n        disconnected: 4900,\n        chainDisconnected: 4901,\n        unsupportedChain: 4902,\n    },\n};\nexport const errorValues = {\n    '-32700': {\n        standard: 'JSON RPC 2.0',\n        message: 'Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text.',\n    },\n    '-32600': {\n        standard: 'JSON RPC 2.0',\n        message: 'The JSON sent is not a valid Request object.',\n    },\n    '-32601': {\n        standard: 'JSON RPC 2.0',\n        message: 'The method does not exist / is not available.',\n    },\n    '-32602': {\n        standard: 'JSON RPC 2.0',\n        message: 'Invalid method parameter(s).',\n    },\n    '-32603': {\n        standard: 'JSON RPC 2.0',\n        message: 'Internal JSON-RPC error.',\n    },\n    '-32000': {\n        standard: 'EIP-1474',\n        message: 'Invalid input.',\n    },\n    '-32001': {\n        standard: 'EIP-1474',\n        message: 'Resource not found.',\n    },\n    '-32002': {\n        standard: 'EIP-1474',\n        message: 'Resource unavailable.',\n    },\n    '-32003': {\n        standard: 'EIP-1474',\n        message: 'Transaction rejected.',\n    },\n    '-32004': {\n        standard: 'EIP-1474',\n        message: 'Method not supported.',\n    },\n    '-32005': {\n        standard: 'EIP-1474',\n        message: 'Request limit exceeded.',\n    },\n    '4001': {\n        standard: 'EIP-1193',\n        message: 'User rejected the request.',\n    },\n    '4100': {\n        standard: 'EIP-1193',\n        message: 'The requested account and/or method has not been authorized by the user.',\n    },\n    '4200': {\n        standard: 'EIP-1193',\n        message: 'The requested method is not supported by this Ethereum provider.',\n    },\n    '4900': {\n        standard: 'EIP-1193',\n        message: 'The provider is disconnected from all chains.',\n    },\n    '4901': {\n        standard: 'EIP-1193',\n        message: 'The provider is disconnected from the specified chain.',\n    },\n    '4902': {\n        standard: 'EIP-3085',\n        message: 'Unrecognized chain ID.',\n    },\n};\n//# sourceMappingURL=constants.js.map","import { errorValues, standardErrorCodes } from './constants.js';\nconst FALLBACK_MESSAGE = 'Unspecified error message.';\nexport const JSON_RPC_SERVER_ERROR_MESSAGE = 'Unspecified server error.';\n/**\n * Gets the message for a given code, or a fallback message if the code has\n * no corresponding message.\n */\nexport function getMessageFromCode(code, fallbackMessage = FALLBACK_MESSAGE) {\n    if (code && Number.isInteger(code)) {\n        const codeString = code.toString();\n        if (hasKey(errorValues, codeString)) {\n            return errorValues[codeString].message;\n        }\n        if (isJsonRpcServerError(code)) {\n            return JSON_RPC_SERVER_ERROR_MESSAGE;\n        }\n    }\n    return fallbackMessage;\n}\n/**\n * Returns whether the given code is valid.\n * A code is only valid if it has a message.\n */\nexport function isValidCode(code) {\n    if (!Number.isInteger(code)) {\n        return false;\n    }\n    const codeString = code.toString();\n    if (errorValues[codeString]) {\n        return true;\n    }\n    if (isJsonRpcServerError(code)) {\n        return true;\n    }\n    return false;\n}\n/**\n * Returns the error code from an error object.\n */\nexport function getErrorCode(error) {\n    var _a;\n    if (typeof error === 'number') {\n        return error;\n    }\n    if (isErrorWithCode(error)) {\n        return (_a = error.code) !== null && _a !== void 0 ? _a : error.errorCode;\n    }\n    return undefined;\n}\nfunction isErrorWithCode(error) {\n    return (typeof error === 'object' &&\n        error !== null &&\n        (typeof error.code === 'number' ||\n            typeof error.errorCode === 'number'));\n}\nexport function serialize(error, { shouldIncludeStack = false } = {}) {\n    const serialized = {};\n    if (error &&\n        typeof error === 'object' &&\n        !Array.isArray(error) &&\n        hasKey(error, 'code') &&\n        isValidCode(error.code)) {\n        const _error = error;\n        serialized.code = _error.code;\n        if (_error.message && typeof _error.message === 'string') {\n            serialized.message = _error.message;\n            if (hasKey(_error, 'data')) {\n                serialized.data = _error.data;\n            }\n        }\n        else {\n            serialized.message = getMessageFromCode(serialized.code);\n            serialized.data = { originalError: assignOriginalError(error) };\n        }\n    }\n    else {\n        serialized.code = standardErrorCodes.rpc.internal;\n        serialized.message = hasStringProperty(error, 'message') ? error.message : FALLBACK_MESSAGE;\n        serialized.data = { originalError: assignOriginalError(error) };\n    }\n    if (shouldIncludeStack) {\n        serialized.stack = hasStringProperty(error, 'stack') ? error.stack : undefined;\n    }\n    return serialized;\n}\n// Internal\nfunction isJsonRpcServerError(code) {\n    return code >= -32099 && code <= -32000;\n}\nfunction assignOriginalError(error) {\n    if (error && typeof error === 'object' && !Array.isArray(error)) {\n        return Object.assign({}, error);\n    }\n    return error;\n}\nfunction hasKey(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\nfunction hasStringProperty(obj, prop) {\n    return (typeof obj === 'object' && obj !== null && prop in obj && typeof obj[prop] === 'string');\n}\n//# sourceMappingURL=utils.js.map","import { standardErrorCodes } from './constants.js';\nimport { getMessageFromCode } from './utils.js';\nexport const standardErrors = {\n    rpc: {\n        parse: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.parse, arg),\n        invalidRequest: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.invalidRequest, arg),\n        invalidParams: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.invalidParams, arg),\n        methodNotFound: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.methodNotFound, arg),\n        internal: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.internal, arg),\n        server: (opts) => {\n            if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n                throw new Error('Ethereum RPC Server errors must provide single object argument.');\n            }\n            const { code } = opts;\n            if (!Number.isInteger(code) || code > -32005 || code < -32099) {\n                throw new Error('\"code\" must be an integer such that: -32099 <= code <= -32005');\n            }\n            return getEthJsonRpcError(code, opts);\n        },\n        invalidInput: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.invalidInput, arg),\n        resourceNotFound: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.resourceNotFound, arg),\n        resourceUnavailable: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.resourceUnavailable, arg),\n        transactionRejected: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.transactionRejected, arg),\n        methodNotSupported: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.methodNotSupported, arg),\n        limitExceeded: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.limitExceeded, arg),\n    },\n    provider: {\n        userRejectedRequest: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.userRejectedRequest, arg);\n        },\n        unauthorized: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.unauthorized, arg);\n        },\n        unsupportedMethod: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.unsupportedMethod, arg);\n        },\n        disconnected: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.disconnected, arg);\n        },\n        chainDisconnected: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.chainDisconnected, arg);\n        },\n        unsupportedChain: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.unsupportedChain, arg);\n        },\n        custom: (opts) => {\n            if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n                throw new Error('Ethereum Provider custom errors must provide single object argument.');\n            }\n            const { code, message, data } = opts;\n            if (!message || typeof message !== 'string') {\n                throw new Error('\"message\" must be a nonempty string');\n            }\n            return new EthereumProviderError(code, message, data);\n        },\n    },\n};\n// Internal\nfunction getEthJsonRpcError(code, arg) {\n    const [message, data] = parseOpts(arg);\n    return new EthereumRpcError(code, message || getMessageFromCode(code), data);\n}\nfunction getEthProviderError(code, arg) {\n    const [message, data] = parseOpts(arg);\n    return new EthereumProviderError(code, message || getMessageFromCode(code), data);\n}\nfunction parseOpts(arg) {\n    if (arg) {\n        if (typeof arg === 'string') {\n            return [arg];\n        }\n        if (typeof arg === 'object' && !Array.isArray(arg)) {\n            const { message, data } = arg;\n            if (message && typeof message !== 'string') {\n                throw new Error('Must specify string message.');\n            }\n            return [message || undefined, data];\n        }\n    }\n    return [];\n}\nclass EthereumRpcError extends Error {\n    constructor(code, message, data) {\n        if (!Number.isInteger(code)) {\n            throw new Error('\"code\" must be an integer.');\n        }\n        if (!message || typeof message !== 'string') {\n            throw new Error('\"message\" must be a nonempty string.');\n        }\n        super(message);\n        this.code = code;\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nclass EthereumProviderError extends EthereumRpcError {\n    /**\n     * Create an Ethereum Provider JSON-RPC error.\n     * `code` must be an integer in the 1000 <= 4999 range.\n     */\n    constructor(code, message, data) {\n        if (!isValidEthProviderCode(code)) {\n            throw new Error('\"code\" must be an integer such that: 1000 <= code <= 4999');\n        }\n        super(code, message, data);\n    }\n}\nclass ActionableInsufficientBalanceError extends EthereumRpcError {\n}\nfunction isValidEthProviderCode(code) {\n    return Number.isInteger(code) && code >= 1000 && code <= 4999;\n}\nexport function isActionableHttpRequestError(errorObject) {\n    return (typeof errorObject === 'object' &&\n        errorObject !== null &&\n        'code' in errorObject &&\n        'data' in errorObject &&\n        errorObject.code === -32090 &&\n        typeof errorObject.data === 'object' &&\n        errorObject.data !== null &&\n        'type' in errorObject.data &&\n        errorObject.data.type === 'INSUFFICIENT_FUNDS');\n}\nexport function isViemError(error) {\n    // Check if object and has code, message, and details\n    return typeof error === 'object' && error !== null && 'details' in error;\n}\nexport function viemHttpErrorToProviderError(error) {\n    try {\n        const details = JSON.parse(error.details);\n        return new EthereumRpcError(details.code, details.message, details.data);\n    }\n    catch (_) {\n        return null;\n    }\n}\n//# sourceMappingURL=errors.js.map","export function OpaqueType() {\n    return (value) => value;\n}\nexport const HexString = OpaqueType();\nexport const BigIntString = OpaqueType();\nexport function IntNumber(num) {\n    return Math.floor(num);\n}\nexport const RegExpString = OpaqueType();\n//# sourceMappingURL=index.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { standardErrors } from '../error/errors.js';\nimport { BigIntString, HexString, IntNumber, RegExpString } from './index.js';\nconst INT_STRING_REGEX = /^[0-9]*$/;\nconst HEXADECIMAL_STRING_REGEX = /^[a-f0-9]*$/;\n/**\n * @param length number of bytes\n */\nexport function randomBytesHex(length) {\n    return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(length)));\n}\nexport function uint8ArrayToHex(value) {\n    return [...value].map((b) => b.toString(16).padStart(2, '0')).join('');\n}\nexport function hexStringToUint8Array(hexString) {\n    return new Uint8Array(hexString.match(/.{1,2}/g).map((byte) => Number.parseInt(byte, 16)));\n}\nexport function hexStringFromBuffer(buf, includePrefix = false) {\n    const hex = buf.toString('hex');\n    return HexString(includePrefix ? `0x${hex}` : hex);\n}\nexport function encodeToHexString(str) {\n    return hexStringFromBuffer(ensureBuffer(str), true);\n}\nexport function bigIntStringFromBigInt(bi) {\n    return BigIntString(bi.toString(10));\n}\nexport function intNumberFromHexString(hex) {\n    return IntNumber(Number(BigInt(ensureEvenLengthHexString(hex, true))));\n}\nexport function hexStringFromNumber(num) {\n    return HexString(`0x${BigInt(num).toString(16)}`);\n}\nexport function has0xPrefix(str) {\n    return str.startsWith('0x') || str.startsWith('0X');\n}\nexport function strip0x(hex) {\n    if (has0xPrefix(hex)) {\n        return hex.slice(2);\n    }\n    return hex;\n}\nexport function prepend0x(hex) {\n    if (has0xPrefix(hex)) {\n        return `0x${hex.slice(2)}`;\n    }\n    return `0x${hex}`;\n}\nexport function isHexString(hex) {\n    if (typeof hex !== 'string') {\n        return false;\n    }\n    const s = strip0x(hex).toLowerCase();\n    return HEXADECIMAL_STRING_REGEX.test(s);\n}\nexport function ensureHexString(hex, includePrefix = false) {\n    if (typeof hex === 'string') {\n        const s = strip0x(hex).toLowerCase();\n        if (HEXADECIMAL_STRING_REGEX.test(s)) {\n            return HexString(includePrefix ? `0x${s}` : s);\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`\"${String(hex)}\" is not a hexadecimal string`);\n}\nexport function ensureEvenLengthHexString(hex, includePrefix = false) {\n    let h = ensureHexString(hex, false);\n    if (h.length % 2 === 1) {\n        h = HexString(`0${h}`);\n    }\n    return includePrefix ? HexString(`0x${h}`) : h;\n}\nexport function ensureAddressString(str) {\n    if (typeof str === 'string') {\n        const s = strip0x(str).toLowerCase();\n        if (isHexString(s) && s.length === 40) {\n            return prepend0x(s);\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(str)}`);\n}\nexport function ensureBuffer(str) {\n    if (Buffer.isBuffer(str)) {\n        return str;\n    }\n    if (typeof str === 'string') {\n        if (isHexString(str)) {\n            const s = ensureEvenLengthHexString(str, false);\n            return Buffer.from(s, 'hex');\n        }\n        return Buffer.from(str, 'utf8');\n    }\n    throw standardErrors.rpc.invalidParams(`Not binary data: ${String(str)}`);\n}\nexport function ensureIntNumber(num) {\n    if (typeof num === 'number' && Number.isInteger(num)) {\n        return IntNumber(num);\n    }\n    if (typeof num === 'string') {\n        if (INT_STRING_REGEX.test(num)) {\n            return IntNumber(Number(num));\n        }\n        if (isHexString(num)) {\n            return IntNumber(Number(BigInt(ensureEvenLengthHexString(num, true))));\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`Not an integer: ${String(num)}`);\n}\nexport function ensureRegExpString(regExp) {\n    if (regExp instanceof RegExp) {\n        return RegExpString(regExp.toString());\n    }\n    throw standardErrors.rpc.invalidParams(`Not a RegExp: ${String(regExp)}`);\n}\nexport function ensureBigInt(val) {\n    if (val !== null && (typeof val === 'bigint' || isBigNumber(val))) {\n        // biome-ignore lint/suspicious/noExplicitAny: force cast to any to avoid type error\n        return BigInt(val.toString(10));\n    }\n    if (typeof val === 'number') {\n        return BigInt(ensureIntNumber(val));\n    }\n    if (typeof val === 'string') {\n        if (INT_STRING_REGEX.test(val)) {\n            return BigInt(val);\n        }\n        if (isHexString(val)) {\n            return BigInt(ensureEvenLengthHexString(val, true));\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`Not an integer: ${String(val)}`);\n}\nexport function ensureParsedJSONObject(val) {\n    if (typeof val === 'string') {\n        return JSON.parse(val);\n    }\n    if (typeof val === 'object') {\n        return val;\n    }\n    throw standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(val)}`);\n}\nexport function isBigNumber(val) {\n    // biome-ignore lint/suspicious/noExplicitAny: force cast to any to avoid type error\n    if (val == null || typeof val.constructor !== 'function') {\n        return false;\n    }\n    // biome-ignore lint/suspicious/noExplicitAny: force cast to any to avoid type error\n    const { constructor: constructor_ } = val;\n    return typeof constructor_.config === 'function' && typeof constructor_.EUCLID === 'number';\n}\nexport function range(start, stop) {\n    return Array.from({ length: stop - start }, (_, i) => start + i);\n}\nexport function getFavicon() {\n    const el = document.querySelector('link[sizes=\"192x192\"]') ||\n        document.querySelector('link[sizes=\"180x180\"]') ||\n        document.querySelector('link[rel=\"icon\"]') ||\n        document.querySelector('link[rel=\"shortcut icon\"]');\n    const { protocol, host } = document.location;\n    const href = el ? el.getAttribute('href') : null;\n    if (!href || href.startsWith('javascript:') || href.startsWith('vbscript:')) {\n        return `${protocol}//${host}/favicon.ico`; // fallback\n    }\n    if (href.startsWith('http://') || href.startsWith('https://') || href.startsWith('data:')) {\n        return href;\n    }\n    if (href.startsWith('//')) {\n        return protocol + href;\n    }\n    return `${protocol}//${host}${href}`;\n}\nexport function areAddressArraysEqual(arr1, arr2) {\n    return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n//# sourceMappingURL=util.js.map","const COOP_ERROR_MESSAGE = `Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.\n\nPlease see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`;\n/**\n * Creates a checker for the Cross-Origin-Opener-Policy (COOP).\n *\n * @returns An object with methods to get and check the Cross-Origin-Opener-Policy.\n *\n * @method getCrossOriginOpenerPolicy\n * Retrieves current Cross-Origin-Opener-Policy.\n * @throws Will throw an error if the policy has not been checked yet.\n *\n * @method checkCrossOriginOpenerPolicy\n * Checks the Cross-Origin-Opener-Policy of the current environment.\n * If in a non-browser environment, sets the policy to 'non-browser-env'.\n * If in a browser environment, fetches the policy from the current origin.\n * Logs an error if the policy is 'same-origin'.\n */\nconst createCoopChecker = () => {\n    let crossOriginOpenerPolicy;\n    return {\n        getCrossOriginOpenerPolicy: () => {\n            if (crossOriginOpenerPolicy === undefined) {\n                return 'undefined';\n            }\n            return crossOriginOpenerPolicy;\n        },\n        checkCrossOriginOpenerPolicy: async () => {\n            if (typeof window === 'undefined') {\n                // Non-browser environment\n                crossOriginOpenerPolicy = 'non-browser-env';\n                return;\n            }\n            try {\n                const url = `${window.location.origin}${window.location.pathname}`;\n                const response = await fetch(url, {\n                    method: 'HEAD',\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const result = response.headers.get('Cross-Origin-Opener-Policy');\n                crossOriginOpenerPolicy = result !== null && result !== void 0 ? result : 'null';\n                if (crossOriginOpenerPolicy === 'same-origin') {\n                    console.error(COOP_ERROR_MESSAGE);\n                }\n            }\n            catch (error) {\n                console.error('Error checking Cross-Origin-Opener-Policy:', error.message);\n                crossOriginOpenerPolicy = 'error';\n            }\n        },\n    };\n};\nexport const { checkCrossOriginOpenerPolicy, getCrossOriginOpenerPolicy } = createCoopChecker();\n//# sourceMappingURL=checkCrossOriginOpenerPolicy.js.map","import { NAME, VERSION } from '../sdk-info.js';\nimport { standardErrors } from '../core/error/errors.js';\nexport async function fetchRPCRequest(request, rpcUrl) {\n    const requestBody = Object.assign(Object.assign({}, request), { jsonrpc: '2.0', id: crypto.randomUUID() });\n    const res = await window.fetch(rpcUrl, {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        mode: 'cors',\n        headers: {\n            'Content-Type': 'application/json',\n            'X-Cbw-Sdk-Version': VERSION,\n            'X-Cbw-Sdk-Platform': NAME,\n        },\n    });\n    const { result, error } = await res.json();\n    if (error)\n        throw error;\n    return result;\n}\nfunction getCoinbaseInjectedLegacyProvider() {\n    const window = globalThis;\n    return window.coinbaseWalletExtension;\n}\nfunction getInjectedEthereum() {\n    var _a, _b;\n    try {\n        const window = globalThis;\n        return (_a = window.ethereum) !== null && _a !== void 0 ? _a : (_b = window.top) === null || _b === void 0 ? void 0 : _b.ethereum;\n    }\n    catch (_c) {\n        return undefined;\n    }\n}\nexport function getCoinbaseInjectedProvider({ metadata, preference, }) {\n    var _a, _b;\n    const { appName, appLogoUrl, appChainIds } = metadata;\n    if (preference.options !== 'smartWalletOnly') {\n        const extension = getCoinbaseInjectedLegacyProvider();\n        if (extension) {\n            (_a = extension.setAppInfo) === null || _a === void 0 ? void 0 : _a.call(extension, appName, appLogoUrl, appChainIds, preference);\n            return extension;\n        }\n    }\n    const ethereum = getInjectedEthereum();\n    if (ethereum === null || ethereum === void 0 ? void 0 : ethereum.isCoinbaseBrowser) {\n        (_b = ethereum.setAppInfo) === null || _b === void 0 ? void 0 : _b.call(ethereum, appName, appLogoUrl, appChainIds, preference);\n        return ethereum;\n    }\n    return undefined;\n}\n/**\n * Validates the arguments for an invalid request and returns an error if any validation fails.\n * Valid request args are defined here: https://eips.ethereum.org/EIPS/eip-1193#request\n * @param args The request arguments to validate.\n * @returns An error object if the arguments are invalid, otherwise undefined.\n */\nexport function checkErrorForInvalidRequestArgs(args) {\n    if (!args || typeof args !== 'object' || Array.isArray(args)) {\n        throw standardErrors.rpc.invalidParams({\n            message: 'Expected a single, non-array, object argument.',\n            data: args,\n        });\n    }\n    const { method, params } = args;\n    if (typeof method !== 'string' || method.length === 0) {\n        throw standardErrors.rpc.invalidParams({\n            message: \"'args.method' must be a non-empty string.\",\n            data: args,\n        });\n    }\n    if (params !== undefined &&\n        !Array.isArray(params) &&\n        (typeof params !== 'object' || params === null)) {\n        throw standardErrors.rpc.invalidParams({\n            message: \"'args.params' must be an object or array if provided.\",\n            data: args,\n        });\n    }\n    switch (method) {\n        case 'eth_sign':\n        case 'eth_signTypedData_v2':\n        case 'eth_subscribe':\n        case 'eth_unsubscribe':\n            throw standardErrors.provider.unsupportedMethod();\n    }\n}\n//# sourceMappingURL=provider.js.map","/**\n * Validates user supplied preferences. Throws if keys are not valid.\n * @param preference\n */\nexport function validatePreferences(preference) {\n    if (!preference) {\n        return;\n    }\n    if (!['all', 'smartWalletOnly', 'eoaOnly'].includes(preference.options)) {\n        throw new Error(`Invalid options: ${preference.options}`);\n    }\n    if (preference.attribution) {\n        if (preference.attribution.auto !== undefined &&\n            preference.attribution.dataSuffix !== undefined) {\n            throw new Error(`Attribution cannot contain both auto and dataSuffix properties`);\n        }\n    }\n    if (preference.telemetry) {\n        if (typeof preference.telemetry !== 'boolean') {\n            throw new Error(`Telemetry must be a boolean`);\n        }\n    }\n}\n/**\n * Validates user supplied toSubAccountSigner function. Throws if keys are not valid.\n * @param toAccount\n */\nexport function validateSubAccount(toAccount) {\n    if (typeof toAccount !== 'function') {\n        throw new Error(`toAccount is not a function`);\n    }\n}\n//# sourceMappingURL=validatePreferences.js.map","export const CB_KEYS_URL = 'https://keys.coinbase.com/connect';\nexport const CB_WALLET_RPC_URL = 'https://rpc.wallet.coinbase.com';\nexport const WALLETLINK_URL = 'https://www.walletlink.org';\nexport const CBW_MOBILE_DEEPLINK_URL = 'https://go.cb-w.com/walletlink';\n//# sourceMappingURL=constants.js.map","import { store } from '../../store/store.js';\nimport { VERSION } from '../../sdk-info.js';\nvar ComponentType;\n(function (ComponentType) {\n    ComponentType[\"unknown\"] = \"unknown\";\n    ComponentType[\"banner\"] = \"banner\";\n    ComponentType[\"button\"] = \"button\";\n    ComponentType[\"card\"] = \"card\";\n    ComponentType[\"chart\"] = \"chart\";\n    ComponentType[\"content_script\"] = \"content_script\";\n    ComponentType[\"dropdown\"] = \"dropdown\";\n    ComponentType[\"link\"] = \"link\";\n    ComponentType[\"page\"] = \"page\";\n    ComponentType[\"modal\"] = \"modal\";\n    ComponentType[\"table\"] = \"table\";\n    ComponentType[\"search_bar\"] = \"search_bar\";\n    ComponentType[\"service_worker\"] = \"service_worker\";\n    ComponentType[\"text\"] = \"text\";\n    ComponentType[\"text_input\"] = \"text_input\";\n    ComponentType[\"tray\"] = \"tray\";\n    ComponentType[\"checkbox\"] = \"checkbox\";\n    ComponentType[\"icon\"] = \"icon\";\n})(ComponentType || (ComponentType = {}));\nvar ActionType;\n(function (ActionType) {\n    ActionType[\"unknown\"] = \"unknown\";\n    ActionType[\"blur\"] = \"blur\";\n    ActionType[\"click\"] = \"click\";\n    ActionType[\"change\"] = \"change\";\n    ActionType[\"dismiss\"] = \"dismiss\";\n    ActionType[\"focus\"] = \"focus\";\n    ActionType[\"hover\"] = \"hover\";\n    ActionType[\"select\"] = \"select\";\n    ActionType[\"measurement\"] = \"measurement\";\n    ActionType[\"move\"] = \"move\";\n    ActionType[\"process\"] = \"process\";\n    ActionType[\"render\"] = \"render\";\n    ActionType[\"scroll\"] = \"scroll\";\n    ActionType[\"view\"] = \"view\";\n    ActionType[\"search\"] = \"search\";\n    ActionType[\"keyPress\"] = \"keyPress\";\n    ActionType[\"error\"] = \"error\";\n})(ActionType || (ActionType = {}));\nvar AnalyticsEventImportance;\n(function (AnalyticsEventImportance) {\n    AnalyticsEventImportance[\"low\"] = \"low\";\n    AnalyticsEventImportance[\"high\"] = \"high\";\n})(AnalyticsEventImportance || (AnalyticsEventImportance = {}));\nexport function logEvent(name, event, importance) {\n    var _a, _b, _c, _d;\n    if (window.ClientAnalytics) {\n        (_a = window.ClientAnalytics) === null || _a === void 0 ? void 0 : _a.logEvent(name, Object.assign(Object.assign({}, event), { sdkVersion: VERSION, appName: (_c = (_b = store.config.get().metadata) === null || _b === void 0 ? void 0 : _b.appName) !== null && _c !== void 0 ? _c : '', appOrigin: window.location.origin, appPreferredSigner: (_d = store.config.get().preference) === null || _d === void 0 ? void 0 : _d.options }), importance);\n    }\n}\nexport function identify(event) {\n    var _a;\n    if (window.ClientAnalytics) {\n        (_a = window.ClientAnalytics) === null || _a === void 0 ? void 0 : _a.identify(event);\n    }\n}\nexport { ActionType, AnalyticsEventImportance, ComponentType };\n//# sourceMappingURL=logEvent.js.map","import { ActionType, AnalyticsEventImportance, ComponentType, logEvent } from '../logEvent.js';\nexport const logPopupSetupStarted = () => {\n    logEvent('communicator.popup_setup.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n    }, AnalyticsEventImportance.high);\n};\nexport const logPopupSetupCompleted = () => {\n    logEvent('communicator.popup_setup.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n    }, AnalyticsEventImportance.high);\n};\nexport const logPopupUnloadReceived = () => {\n    logEvent('communicator.popup_unload.received', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n    }, AnalyticsEventImportance.high);\n};\n//# sourceMappingURL=communicator.js.map","import { ActionType, AnalyticsEventImportance, ComponentType, logEvent } from '../logEvent.js';\nexport const logSnackbarShown = ({ snackbarContext }) => {\n    logEvent(`snackbar.${snackbarContext}.shown`, {\n        action: ActionType.render,\n        componentType: ComponentType.modal,\n        snackbarContext,\n    }, AnalyticsEventImportance.high);\n};\nexport const logSnackbarActionClicked = ({ snackbarContext, snackbarAction, }) => {\n    logEvent(`snackbar.${snackbarContext}.action_clicked`, {\n        action: ActionType.click,\n        componentType: ComponentType.button,\n        snackbarContext,\n        snackbarAction,\n    }, AnalyticsEventImportance.high);\n};\n//# sourceMappingURL=snackbar.js.map","export default (() => `@namespace svg \"http://www.w3.org/2000/svg\";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:\"\\\\201C\" \"\\\\201D\" \"\\\\2018\" \"\\\\2019\";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}`)();\n//# sourceMappingURL=cssReset-css.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport css from './cssReset-css.js';\nexport function injectCssReset() {\n    const styleEl = document.createElement('style');\n    styleEl.type = 'text/css';\n    styleEl.appendChild(document.createTextNode(css));\n    document.documentElement.appendChild(styleEl);\n}\n//# sourceMappingURL=cssReset.js.map","export function createQrUrl(sessionId, sessionSecret, serverUrl, isParentConnection, version, chainId) {\n    const sessionIdKey = isParentConnection ? 'parent-id' : 'id';\n    const query = new URLSearchParams({\n        [sessionIdKey]: sessionId,\n        secret: sessionSecret,\n        server: serverUrl,\n        v: version,\n        chainId: chainId.toString(),\n    }).toString();\n    const qrUrl = `${serverUrl}/#/link?${query}`;\n    return qrUrl;\n}\nfunction isInIFrame() {\n    try {\n        return window.frameElement !== null;\n    }\n    catch (_) {\n        return false;\n    }\n}\nexport function getLocation() {\n    try {\n        if (isInIFrame() && window.top) {\n            return window.top.location;\n        }\n        return window.location;\n    }\n    catch (_) {\n        return window.location;\n    }\n}\nexport function isMobileWeb() {\n    var _a;\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent);\n}\nexport function isDarkMode() {\n    var _a, _b;\n    return (_b = (_a = window === null || window === void 0 ? void 0 : window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, '(prefers-color-scheme: dark)').matches) !== null && _b !== void 0 ? _b : false;\n}\n//# sourceMappingURL=util.js.map","export default (() => `.-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}`)();\n//# sourceMappingURL=Snackbar-css.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { clsx } from 'clsx';\nimport { render } from 'preact';\n// biome-ignore lint/correctness/noUnusedImports: preact\nimport { h } from 'preact';\nimport { useEffect, useState } from 'preact/hooks';\nimport { isDarkMode } from '../util.js';\nimport css from './Snackbar-css.js';\nconst cblogo = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+`;\nconst gearIcon = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=`;\nexport class Snackbar {\n    constructor() {\n        this.items = new Map();\n        this.nextItemKey = 0;\n        this.root = null;\n        this.darkMode = isDarkMode();\n    }\n    attach(el) {\n        this.root = document.createElement('div');\n        this.root.className = '-cbwsdk-snackbar-root';\n        el.appendChild(this.root);\n        this.render();\n    }\n    presentItem(itemProps) {\n        const key = this.nextItemKey++;\n        this.items.set(key, itemProps);\n        this.render();\n        return () => {\n            this.items.delete(key);\n            this.render();\n        };\n    }\n    clear() {\n        this.items.clear();\n        this.render();\n    }\n    render() {\n        if (!this.root) {\n            return;\n        }\n        render(h(\"div\", null,\n            h(SnackbarContainer, { darkMode: this.darkMode }, Array.from(this.items.entries()).map(([key, itemProps]) => (h(SnackbarInstance, Object.assign({}, itemProps, { key: key })))))), this.root);\n    }\n}\nexport const SnackbarContainer = (props) => (h(\"div\", { class: clsx('-cbwsdk-snackbar-container') },\n    h(\"style\", null, css),\n    h(\"div\", { class: \"-cbwsdk-snackbar\" }, props.children)));\nexport const SnackbarInstance = ({ autoExpand, message, menuItems, }) => {\n    const [hidden, setHidden] = useState(true);\n    const [expanded, setExpanded] = useState(autoExpand !== null && autoExpand !== void 0 ? autoExpand : false);\n    useEffect(() => {\n        const timers = [\n            window.setTimeout(() => {\n                setHidden(false);\n            }, 1),\n            window.setTimeout(() => {\n                setExpanded(true);\n            }, 10000),\n        ];\n        return () => {\n            timers.forEach(window.clearTimeout);\n        };\n    });\n    const toggleExpanded = () => {\n        setExpanded(!expanded);\n    };\n    return (h(\"div\", { class: clsx('-cbwsdk-snackbar-instance', hidden && '-cbwsdk-snackbar-instance-hidden', expanded && '-cbwsdk-snackbar-instance-expanded') },\n        h(\"div\", { class: \"-cbwsdk-snackbar-instance-header\", onClick: toggleExpanded },\n            h(\"img\", { src: cblogo, class: \"-cbwsdk-snackbar-instance-header-cblogo\" }),\n            ' ',\n            h(\"div\", { class: \"-cbwsdk-snackbar-instance-header-message\" }, message),\n            h(\"div\", { class: \"-gear-container\" },\n                !expanded && (h(\"svg\", { width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                    h(\"circle\", { cx: \"12\", cy: \"12\", r: \"12\", fill: \"#F5F7F8\" }))),\n                h(\"img\", { src: gearIcon, class: \"-gear-icon\", title: \"Expand\" }))),\n        menuItems && menuItems.length > 0 && (h(\"div\", { class: \"-cbwsdk-snackbar-instance-menu\" }, menuItems.map((action, i) => (h(\"div\", { class: clsx('-cbwsdk-snackbar-instance-menu-item', action.isRed && '-cbwsdk-snackbar-instance-menu-item-is-red'), onClick: action.onClick, key: i },\n            h(\"svg\", { width: action.svgWidth, height: action.svgHeight, viewBox: \"0 0 10 11\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                h(\"path\", { \"fill-rule\": action.defaultFillRule, \"clip-rule\": action.defaultClipRule, d: action.path, fill: \"#AAAAAA\" })),\n            h(\"span\", { class: clsx('-cbwsdk-snackbar-instance-menu-item-info', action.isRed && '-cbwsdk-snackbar-instance-menu-item-info-is-red') }, action.info))))))));\n};\n//# sourceMappingURL=Snackbar.js.map","import { injectCssReset } from './components/cssReset/cssReset.js';\nimport { Snackbar } from './components/Snackbar/Snackbar.js';\nexport const RETRY_SVG_PATH = 'M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z';\nexport class WalletLinkRelayUI {\n    constructor() {\n        this.attached = false;\n        this.snackbar = new Snackbar();\n    }\n    attach() {\n        if (this.attached) {\n            throw new Error('Coinbase Wallet SDK UI is already attached');\n        }\n        const el = document.documentElement;\n        const container = document.createElement('div');\n        container.className = '-cbwsdk-css-reset';\n        el.appendChild(container);\n        this.snackbar.attach(container);\n        this.attached = true;\n        injectCssReset();\n    }\n    showConnecting(options) {\n        let snackbarProps;\n        if (options.isUnlinkedErrorState) {\n            snackbarProps = {\n                autoExpand: true,\n                message: 'Connection lost',\n                menuItems: [\n                    {\n                        isRed: false,\n                        info: 'Reset connection',\n                        svgWidth: '10',\n                        svgHeight: '11',\n                        path: 'M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z',\n                        defaultFillRule: 'evenodd',\n                        defaultClipRule: 'evenodd',\n                        onClick: options.onResetConnection,\n                    },\n                ],\n            };\n        }\n        else {\n            snackbarProps = {\n                message: 'Confirm on phone',\n                menuItems: [\n                    {\n                        isRed: true,\n                        info: 'Cancel transaction',\n                        svgWidth: '11',\n                        svgHeight: '11',\n                        path: 'M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z',\n                        defaultFillRule: 'inherit',\n                        defaultClipRule: 'inherit',\n                        onClick: options.onCancel,\n                    },\n                    {\n                        isRed: false,\n                        info: 'Reset connection',\n                        svgWidth: '10',\n                        svgHeight: '11',\n                        path: RETRY_SVG_PATH,\n                        defaultFillRule: 'evenodd',\n                        defaultClipRule: 'evenodd',\n                        onClick: options.onResetConnection,\n                    },\n                ],\n            };\n        }\n        return this.snackbar.presentItem(snackbarProps);\n    }\n}\n//# sourceMappingURL=WalletLinkRelayUI.js.map","import { standardErrors } from '../core/error/errors.js';\nimport { logSnackbarActionClicked, logSnackbarShown } from '../core/telemetry/events/snackbar.js';\nimport { RETRY_SVG_PATH } from '../sign/walletlink/relay/ui/WalletLinkRelayUI.js';\nimport { Snackbar } from '../sign/walletlink/relay/ui/components/Snackbar/Snackbar.js';\nimport { NAME, VERSION } from '../sdk-info.js';\nimport { getCrossOriginOpenerPolicy } from './checkCrossOriginOpenerPolicy.js';\nconst POPUP_WIDTH = 420;\nconst POPUP_HEIGHT = 700;\nconst RETRY_BUTTON = {\n    isRed: false,\n    info: 'Retry',\n    svgWidth: '10',\n    svgHeight: '11',\n    path: RETRY_SVG_PATH,\n    defaultFillRule: 'evenodd',\n    defaultClipRule: 'evenodd',\n};\nconst POPUP_BLOCKED_MESSAGE = 'Popup was blocked. Try again.';\nlet snackbar = null;\nexport function openPopup(url) {\n    const left = (window.innerWidth - POPUP_WIDTH) / 2 + window.screenX;\n    const top = (window.innerHeight - POPUP_HEIGHT) / 2 + window.screenY;\n    appendAppInfoQueryParams(url);\n    function tryOpenPopup() {\n        const popupId = `wallet_${crypto.randomUUID()}`;\n        const popup = window.open(url, popupId, `width=${POPUP_WIDTH}, height=${POPUP_HEIGHT}, left=${left}, top=${top}`);\n        popup === null || popup === void 0 ? void 0 : popup.focus();\n        if (!popup) {\n            return null;\n        }\n        return popup;\n    }\n    let popup = tryOpenPopup();\n    // If the popup was blocked, show a snackbar with a retry button\n    if (!popup) {\n        const sb = initSnackbar();\n        return new Promise((resolve, reject) => {\n            logSnackbarShown({ snackbarContext: 'popup_blocked' });\n            sb.presentItem({\n                autoExpand: true,\n                message: POPUP_BLOCKED_MESSAGE,\n                menuItems: [\n                    Object.assign(Object.assign({}, RETRY_BUTTON), { onClick: () => {\n                            logSnackbarActionClicked({\n                                snackbarContext: 'popup_blocked',\n                                snackbarAction: 'confirm',\n                            });\n                            popup = tryOpenPopup();\n                            if (popup) {\n                                resolve(popup);\n                            }\n                            else {\n                                reject(standardErrors.rpc.internal('Popup window was blocked'));\n                            }\n                            sb.clear();\n                        } }),\n                ],\n            });\n        });\n    }\n    return Promise.resolve(popup);\n}\nexport function closePopup(popup) {\n    if (popup && !popup.closed) {\n        popup.close();\n    }\n}\nfunction appendAppInfoQueryParams(url) {\n    const params = {\n        sdkName: NAME,\n        sdkVersion: VERSION,\n        origin: window.location.origin,\n        coop: getCrossOriginOpenerPolicy(),\n    };\n    for (const [key, value] of Object.entries(params)) {\n        if (!url.searchParams.has(key)) {\n            url.searchParams.append(key, value.toString());\n        }\n    }\n}\nexport function initSnackbar() {\n    if (!snackbar) {\n        const root = document.createElement('div');\n        root.className = '-cbwsdk-css-reset';\n        document.body.appendChild(root);\n        snackbar = new Snackbar();\n        snackbar.attach(root);\n    }\n    return snackbar;\n}\n//# sourceMappingURL=web.js.map","import { CB_KEYS_URL } from '../constants.js';\nimport { standardErrors } from '../error/errors.js';\nimport { logPopupSetupCompleted, logPopupSetupStarted, logPopupUnloadReceived, } from '../telemetry/events/communicator.js';\nimport { closePopup, openPopup } from '../../util/web.js';\nimport { VERSION } from '../../sdk-info.js';\n/**\n * Communicates with a popup window for Coinbase keys.coinbase.com (or another url)\n * to send and receive messages.\n *\n * This class is responsible for opening a popup window, posting messages to it,\n * and listening for responses.\n *\n * It also handles cleanup of event listeners and the popup window itself when necessary.\n */\nexport class Communicator {\n    constructor({ url = CB_KEYS_URL, metadata, preference }) {\n        this.popup = null;\n        this.listeners = new Map();\n        /**\n         * Posts a message to the popup window\n         */\n        this.postMessage = async (message) => {\n            const popup = await this.waitForPopupLoaded();\n            popup.postMessage(message, this.url.origin);\n        };\n        /**\n         * Posts a request to the popup window and waits for a response\n         */\n        this.postRequestAndWaitForResponse = async (request) => {\n            const responsePromise = this.onMessage(({ requestId }) => requestId === request.id);\n            this.postMessage(request);\n            return await responsePromise;\n        };\n        /**\n         * Listens for messages from the popup window that match a given predicate.\n         */\n        this.onMessage = async (predicate) => {\n            return new Promise((resolve, reject) => {\n                const listener = (event) => {\n                    if (event.origin !== this.url.origin)\n                        return; // origin validation\n                    const message = event.data;\n                    if (predicate(message)) {\n                        resolve(message);\n                        window.removeEventListener('message', listener);\n                        this.listeners.delete(listener);\n                    }\n                };\n                window.addEventListener('message', listener);\n                this.listeners.set(listener, { reject });\n            });\n        };\n        /**\n         * Closes the popup, rejects all requests and clears the listeners\n         */\n        this.disconnect = () => {\n            // Note: keys popup handles closing itself. this is a fallback.\n            closePopup(this.popup);\n            this.popup = null;\n            this.listeners.forEach(({ reject }, listener) => {\n                reject(standardErrors.provider.userRejectedRequest('Request rejected'));\n                window.removeEventListener('message', listener);\n            });\n            this.listeners.clear();\n        };\n        /**\n         * Waits for the popup window to fully load and then sends a version message.\n         */\n        this.waitForPopupLoaded = async () => {\n            if (this.popup && !this.popup.closed) {\n                // In case the user un-focused the popup between requests, focus it again\n                this.popup.focus();\n                return this.popup;\n            }\n            logPopupSetupStarted();\n            this.popup = await openPopup(this.url);\n            this.onMessage(({ event }) => event === 'PopupUnload')\n                .then(() => {\n                this.disconnect();\n                logPopupUnloadReceived();\n            })\n                .catch(() => { });\n            return this.onMessage(({ event }) => event === 'PopupLoaded')\n                .then((message) => {\n                this.postMessage({\n                    requestId: message.id,\n                    data: {\n                        version: VERSION,\n                        metadata: this.metadata,\n                        preference: this.preference,\n                        location: window.location.toString(),\n                    },\n                });\n            })\n                .then(() => {\n                if (!this.popup)\n                    throw standardErrors.rpc.internal();\n                logPopupSetupCompleted();\n                return this.popup;\n            });\n        };\n        this.url = new URL(url);\n        this.metadata = metadata;\n        this.preference = preference;\n    }\n}\n//# sourceMappingURL=Communicator.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nexport function isErrorResponse(response) {\n    return response.errorMessage !== undefined;\n}\n//# sourceMappingURL=Web3Response.js.map","// TODO: error should not depend on walletlink. revisit this.\nimport { VERSION } from '../../sdk-info.js';\nimport { isErrorResponse } from '../../sign/walletlink/relay/type/Web3Response.js';\nimport { standardErrorCodes } from './constants.js';\nimport { serialize } from './utils.js';\n/**\n * Serializes an error to a format that is compatible with the Ethereum JSON RPC error format.\n * See https://docs.cloud.coinbase.com/wallet-sdk/docs/errors\n * for more information.\n */\nexport function serializeError(error) {\n    const serialized = serialize(getErrorObject(error), {\n        shouldIncludeStack: true,\n    });\n    const docUrl = new URL('https://docs.cloud.coinbase.com/wallet-sdk/docs/errors');\n    docUrl.searchParams.set('version', VERSION);\n    docUrl.searchParams.set('code', serialized.code.toString());\n    docUrl.searchParams.set('message', serialized.message);\n    return Object.assign(Object.assign({}, serialized), { docUrl: docUrl.href });\n}\n/**\n * Converts an error to a serializable object.\n */\nfunction getErrorObject(error) {\n    var _a;\n    if (typeof error === 'string') {\n        return {\n            message: error,\n            code: standardErrorCodes.rpc.internal,\n        };\n    }\n    if (isErrorResponse(error)) {\n        const message = error.errorMessage;\n        const code = (_a = error.errorCode) !== null && _a !== void 0 ? _a : (message.match(/(denied|rejected)/i)\n            ? standardErrorCodes.provider.userRejectedRequest\n            : undefined);\n        return Object.assign(Object.assign({}, error), { message,\n            code, data: { method: error.method } });\n    }\n    return error;\n}\n//# sourceMappingURL=serialize.js.map","import { EventEmitter } from 'eventemitter3';\nexport class ProviderEventEmitter extends EventEmitter {\n}\n//# sourceMappingURL=interface.js.map","// Copyright (c) 2018-2024 Coinbase, Inc. <https://www.coinbase.com/>\n// TODO: clean up, or possibly deprecate Storage class\nexport class ScopedLocalStorage {\n    constructor(scope, module) {\n        this.scope = scope;\n        this.module = module;\n    }\n    storeObject(key, item) {\n        this.setItem(key, JSON.stringify(item));\n    }\n    loadObject(key) {\n        const item = this.getItem(key);\n        return item ? JSON.parse(item) : undefined;\n    }\n    setItem(key, value) {\n        localStorage.setItem(this.scopedKey(key), value);\n    }\n    getItem(key) {\n        return localStorage.getItem(this.scopedKey(key));\n    }\n    removeItem(key) {\n        localStorage.removeItem(this.scopedKey(key));\n    }\n    clear() {\n        const prefix = this.scopedKey('');\n        const keysToRemove = [];\n        for (let i = 0; i < localStorage.length; i++) {\n            const key = localStorage.key(i);\n            if (typeof key === 'string' && key.startsWith(prefix)) {\n                keysToRemove.push(key);\n            }\n        }\n        keysToRemove.forEach((key) => localStorage.removeItem(key));\n    }\n    scopedKey(key) {\n        return `-${this.scope}${this.module ? `:${this.module}` : ''}:${key}`;\n    }\n    static clearAll() {\n        new ScopedLocalStorage('CBWSDK').clear();\n        new ScopedLocalStorage('walletlink').clear();\n    }\n}\n//# sourceMappingURL=ScopedLocalStorage.js.map","import { ActionType, AnalyticsEventImportance, ComponentType, logEvent } from '../logEvent.js';\nexport const logSignerLoadedFromStorage = ({ signerType }) => {\n    logEvent('provider.signer.loaded_from_storage', {\n        action: ActionType.measurement,\n        componentType: ComponentType.unknown,\n        signerType,\n    }, AnalyticsEventImportance.low);\n};\nexport const logRequestStarted = ({ method, correlationId, }) => {\n    logEvent('provider.request.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestError = ({ method, correlationId, signerType, errorMessage, }) => {\n    logEvent('provider.request.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        signerType,\n        correlationId,\n        errorMessage,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestResponded = ({ method, signerType, correlationId, }) => {\n    logEvent('provider.request.responded', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        signerType,\n        correlationId,\n    }, AnalyticsEventImportance.high);\n};\nexport const logEnableFunctionCalled = () => {\n    logEvent('provider.enable_function.called', {\n        action: ActionType.measurement,\n        componentType: ComponentType.unknown,\n    }, AnalyticsEventImportance.high);\n};\n//# sourceMappingURL=provider.js.map","import { ActionType, AnalyticsEventImportance, ComponentType, logEvent } from '../logEvent.js';\nexport const logSignerSelectionRequested = () => {\n    logEvent('signer.selection.requested', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n    }, AnalyticsEventImportance.high);\n};\nexport const logSignerSelectionResponded = (signerType) => {\n    logEvent('signer.selection.responded', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        signerType,\n    }, AnalyticsEventImportance.high);\n};\n//# sourceMappingURL=signer-selection.js.map","import { createStore } from 'zustand/vanilla';\nconst correlationIdsStore = createStore(() => ({\n    correlationIds: new Map(),\n}));\nexport const correlationIds = {\n    get: (key) => {\n        const correlationId = correlationIdsStore.getState().correlationIds.get(key);\n        return correlationId;\n    },\n    set: (key, correlationId) => {\n        correlationIdsStore.setState((state) => {\n            const newMap = new Map(state.correlationIds);\n            newMap.set(key, correlationId);\n            return { correlationIds: newMap };\n        });\n    },\n    delete: (key) => {\n        correlationIdsStore.setState((state) => {\n            const newMap = new Map(state.correlationIds);\n            newMap.delete(key);\n            return { correlationIds: newMap };\n        });\n    },\n    clear: () => {\n        correlationIdsStore.setState({\n            correlationIds: new Map(),\n        });\n    },\n};\n//# sourceMappingURL=store.js.map","import { store } from '../../../store/store.js';\nimport { ActionType, AnalyticsEventImportance, ComponentType, logEvent } from '../logEvent.js';\nexport const logHandshakeStarted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_signer.handshake.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logHandshakeError = ({ method, correlationId, errorMessage, }) => {\n    var _a;\n    logEvent('scw_signer.handshake.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        errorMessage,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logHandshakeCompleted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_signer.handshake.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestStarted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_signer.request.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestError = ({ method, correlationId, errorMessage, }) => {\n    var _a;\n    logEvent('scw_signer.request.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        errorMessage,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestCompleted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_signer.request.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\n//# sourceMappingURL=scw-signer.js.map","import { store } from '../../../store/store.js';\nimport { ActionType, AnalyticsEventImportance, ComponentType, logEvent } from '../logEvent.js';\nexport const logSubAccountRequestStarted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_sub_account.request.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logSubAccountRequestCompleted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_sub_account.request.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logSubAccountRequestError = ({ method, correlationId, errorMessage, }) => {\n    var _a;\n    logEvent('scw_sub_account.request.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        errorMessage,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logAddOwnerStarted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_sub_account.add_owner.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logAddOwnerCompleted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_sub_account.add_owner.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logAddOwnerError = ({ method, correlationId, errorMessage, }) => {\n    var _a;\n    logEvent('scw_sub_account.add_owner.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        errorMessage,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logInsufficientBalanceErrorHandlingStarted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_sub_account.insufficient_balance.error_handling.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logInsufficientBalanceErrorHandlingCompleted = ({ method, correlationId, }) => {\n    var _a;\n    logEvent('scw_sub_account.insufficient_balance.error_handling.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\nexport const logInsufficientBalanceErrorHandlingError = ({ method, correlationId, errorMessage, }) => {\n    var _a;\n    logEvent('scw_sub_account.insufficient_balance.error_handling.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        errorMessage,\n        enableAutoSubAccounts: (_a = store.subAccountsConfig.get()) === null || _a === void 0 ? void 0 : _a.enableAutoSubAccounts,\n    }, AnalyticsEventImportance.high);\n};\n//# sourceMappingURL=scw-sub-account.js.map","// biome-ignore lint/suspicious/noExplicitAny: this is used in a catch block\nexport const parseErrorMessageFromAny = (errorOrAny) => {\n    return 'message' in errorOrAny && typeof errorOrAny.message === 'string'\n        ? errorOrAny.message\n        : '';\n};\n//# sourceMappingURL=utils.js.map","import { createStore } from 'zustand/vanilla';\nexport const ChainClients = createStore(() => ({}));\n//# sourceMappingURL=store.js.map","import { createPublicClient, defineChain, http } from 'viem';\nimport { createBundlerClient } from 'viem/account-abstraction';\nimport { ChainClients } from './store.js';\nexport function createClients(chains) {\n    chains.forEach((c) => {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        if (!c.rpcUrl) {\n            return;\n        }\n        const viemchain = defineChain({\n            id: c.id,\n            rpcUrls: {\n                default: {\n                    http: [c.rpcUrl],\n                },\n            },\n            name: (_b = (_a = c.nativeCurrency) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : '',\n            nativeCurrency: {\n                name: (_d = (_c = c.nativeCurrency) === null || _c === void 0 ? void 0 : _c.name) !== null && _d !== void 0 ? _d : '',\n                symbol: (_f = (_e = c.nativeCurrency) === null || _e === void 0 ? void 0 : _e.symbol) !== null && _f !== void 0 ? _f : '',\n                decimals: (_h = (_g = c.nativeCurrency) === null || _g === void 0 ? void 0 : _g.decimal) !== null && _h !== void 0 ? _h : 18,\n            },\n        });\n        const client = createPublicClient({\n            chain: viemchain,\n            transport: http(c.rpcUrl),\n        });\n        const bundlerClient = createBundlerClient({\n            client,\n            transport: http(c.rpcUrl),\n        });\n        ChainClients.setState({\n            [c.id]: {\n                client,\n                bundlerClient,\n            },\n        });\n    });\n}\nexport function getClient(chainId) {\n    var _a;\n    return (_a = ChainClients.getState()[chainId]) === null || _a === void 0 ? void 0 : _a.client;\n}\nexport function getBundlerClient(chainId) {\n    var _a;\n    return (_a = ChainClients.getState()[chainId]) === null || _a === void 0 ? void 0 : _a.bundlerClient;\n}\n//# sourceMappingURL=utils.js.map","import { standardErrors } from '../core/error/errors.js';\nexport function assertPresence(value, error, message) {\n    if (value === null || value === undefined) {\n        throw (error !== null && error !== void 0 ? error : standardErrors.rpc.invalidParams({\n            message: message !== null && message !== void 0 ? message : 'value must be present',\n            data: value,\n        }));\n    }\n}\nexport function assertArrayPresence(value, message) {\n    if (!Array.isArray(value)) {\n        throw standardErrors.rpc.invalidParams({\n            message: message !== null && message !== void 0 ? message : 'value must be an array',\n            data: value,\n        });\n    }\n}\n//# sourceMappingURL=assertPresence.js.map","import { isAddress, isHex } from 'viem';\nimport { standardErrors } from '../core/error/errors.js';\nexport function assertSubAccount(info) {\n    if (typeof info !== 'object' || info === null) {\n        throw standardErrors.rpc.internal('sub account info is not an object');\n    }\n    if (!('address' in info)) {\n        throw standardErrors.rpc.internal('sub account is invalid');\n    }\n    if ('address' in info && typeof info.address === 'string' && !isAddress(info.address)) {\n        throw standardErrors.rpc.internal('sub account address is invalid');\n    }\n    if ('factory' in info && typeof info.factory === 'string' && !isAddress(info.factory)) {\n        throw standardErrors.rpc.internal('sub account factory address is invalid');\n    }\n    if ('factoryData' in info && typeof info.factoryData === 'string' && !isHex(info.factoryData)) {\n        throw standardErrors.rpc.internal('sub account factory data is invalid');\n    }\n}\n//# sourceMappingURL=assertSubAccount.js.map","import { hexStringToUint8Array, uint8ArrayToHex } from '../core/type/util.js';\nexport async function generateKeyPair() {\n    return crypto.subtle.generateKey({\n        name: 'ECDH',\n        namedCurve: 'P-256',\n    }, true, ['deriveKey']);\n}\nexport async function deriveSharedSecret(ownPrivateKey, peerPublicKey) {\n    return crypto.subtle.deriveKey({\n        name: 'ECDH',\n        public: peerPublicKey,\n    }, ownPrivateKey, {\n        name: 'AES-GCM',\n        length: 256,\n    }, false, ['encrypt', 'decrypt']);\n}\nexport async function encrypt(sharedSecret, plainText) {\n    const iv = crypto.getRandomValues(new Uint8Array(12));\n    const cipherText = await crypto.subtle.encrypt({\n        name: 'AES-GCM',\n        iv,\n    }, sharedSecret, new TextEncoder().encode(plainText));\n    return { iv, cipherText };\n}\nexport async function decrypt(sharedSecret, { iv, cipherText }) {\n    const plainText = await crypto.subtle.decrypt({\n        name: 'AES-GCM',\n        iv,\n    }, sharedSecret, cipherText);\n    return new TextDecoder().decode(plainText);\n}\nfunction getFormat(keyType) {\n    switch (keyType) {\n        case 'public':\n            return 'spki';\n        case 'private':\n            return 'pkcs8';\n    }\n}\nexport async function exportKeyToHexString(type, key) {\n    const format = getFormat(type);\n    const exported = await crypto.subtle.exportKey(format, key);\n    return uint8ArrayToHex(new Uint8Array(exported));\n}\nexport async function importKeyFromHexString(type, hexString) {\n    const format = getFormat(type);\n    const arrayBuffer = hexStringToUint8Array(hexString).buffer;\n    return await crypto.subtle.importKey(format, new Uint8Array(arrayBuffer), {\n        name: 'ECDH',\n        namedCurve: 'P-256',\n    }, true, type === 'private' ? ['deriveKey'] : []);\n}\nexport async function encryptContent(content, sharedSecret) {\n    const serialized = JSON.stringify(content, (_, value) => {\n        if (!(value instanceof Error))\n            return value;\n        const error = value;\n        return Object.assign(Object.assign({}, (error.code ? { code: error.code } : {})), { message: error.message });\n    });\n    return encrypt(sharedSecret, serialized);\n}\nexport async function decryptContent(encryptedData, sharedSecret) {\n    return JSON.parse(await decrypt(sharedSecret, encryptedData));\n}\n//# sourceMappingURL=cipher.js.map","import { createStore, del, get, set } from 'idb-keyval';\nexport function createStorage(scope, name) {\n    const store = typeof indexedDB !== 'undefined' ? createStore(scope, name) : undefined;\n    return {\n        getItem: async (key) => {\n            const value = await get(key, store);\n            if (!value) {\n                return null;\n            }\n            return value;\n        },\n        removeItem: async (key) => {\n            return del(key, store);\n        },\n        setItem: async (key, value) => {\n            return set(key, value, store);\n        },\n    };\n}\n//# sourceMappingURL=storage.js.map","import { Hex, PublicKey, Signature, WebAuthnP256, WebCryptoP256 } from 'ox';\nimport { hashMessage, hashTypedData } from 'viem';\nimport { createStorage } from './storage.js';\n// *****************************************************************\n// Constants\n// *****************************************************************\nexport const STORAGE_SCOPE = 'cbwsdk';\nexport const STORAGE_NAME = 'keys';\nexport const ACTIVE_ID_KEY = 'activeId';\n// *****************************************************************\n// Storage\n// *****************************************************************\nexport const storage = createStorage(STORAGE_SCOPE, STORAGE_NAME);\n// *****************************************************************\n// Functions\n// *****************************************************************\nexport async function generateKeyPair() {\n    const keypair = await WebCryptoP256.createKeyPair({ extractable: false });\n    const publicKey = Hex.slice(PublicKey.toHex(keypair.publicKey), 1);\n    await storage.setItem(publicKey, keypair);\n    await storage.setItem(ACTIVE_ID_KEY, publicKey);\n    return keypair;\n}\nexport async function getKeypair() {\n    const id = await storage.getItem(ACTIVE_ID_KEY);\n    if (!id) {\n        return null;\n    }\n    const keypair = await storage.getItem(id);\n    if (!keypair) {\n        return null;\n    }\n    return keypair;\n}\nasync function getOrCreateKeypair() {\n    const keypair = await getKeypair();\n    if (!keypair) {\n        const kp = await generateKeyPair();\n        const pubKey = Hex.slice(PublicKey.toHex(kp.publicKey), 1);\n        await storage.setItem(pubKey, kp);\n        await storage.setItem(ACTIVE_ID_KEY, pubKey);\n        return kp;\n    }\n    return keypair;\n}\nasync function getAccount() {\n    const keypair = await getOrCreateKeypair();\n    /**\n     * public key / address\n     */\n    const publicKey = Hex.slice(PublicKey.toHex(keypair.publicKey), 1);\n    const sign = async (payload) => {\n        const { payload: message, metadata } = WebAuthnP256.getSignPayload({\n            challenge: payload,\n            origin: 'https://keys.coinbase.com',\n            userVerification: 'preferred',\n        });\n        const signature = await WebCryptoP256.sign({\n            payload: message,\n            privateKey: keypair.privateKey,\n        });\n        return {\n            signature: Signature.toHex(signature),\n            raw: {}, // type changed in viem\n            webauthn: metadata,\n        };\n    };\n    return {\n        id: publicKey,\n        publicKey,\n        async sign({ hash }) {\n            return sign(hash);\n        },\n        async signMessage({ message }) {\n            return sign(hashMessage(message));\n        },\n        async signTypedData(parameters) {\n            return sign(hashTypedData(parameters));\n        },\n        type: 'webAuthn',\n    };\n}\nexport async function getCryptoKeyAccount() {\n    const account = await getAccount();\n    return {\n        account,\n    };\n}\nexport async function removeCryptoKey() {\n    const keypair = await getKeypair();\n    if (!keypair) {\n        return;\n    }\n    await storage.removeItem(Hex.slice(PublicKey.toHex(keypair.publicKey), 1));\n    await storage.removeItem(ACTIVE_ID_KEY);\n}\n//# sourceMappingURL=index.js.map","import { store } from '../../store/store.js';\nimport { deriveSharedSecret, exportKeyToHexString, generateKeyPair, importKeyFromHexString, } from '../../util/cipher.js';\nconst OWN_PRIVATE_KEY = {\n    storageKey: 'ownPrivateKey',\n    keyType: 'private',\n};\nconst OWN_PUBLIC_KEY = {\n    storageKey: 'ownPublicKey',\n    keyType: 'public',\n};\nconst PEER_PUBLIC_KEY = {\n    storageKey: 'peerPublicKey',\n    keyType: 'public',\n};\nexport class SCWKeyManager {\n    constructor() {\n        this.ownPrivateKey = null;\n        this.ownPublicKey = null;\n        this.peerPublicKey = null;\n        this.sharedSecret = null;\n    }\n    async getOwnPublicKey() {\n        await this.loadKeysIfNeeded();\n        return this.ownPublicKey;\n    }\n    // returns null if the shared secret is not yet derived\n    async getSharedSecret() {\n        await this.loadKeysIfNeeded();\n        return this.sharedSecret;\n    }\n    async setPeerPublicKey(key) {\n        this.sharedSecret = null;\n        this.peerPublicKey = key;\n        await this.storeKey(PEER_PUBLIC_KEY, key);\n        await this.loadKeysIfNeeded();\n    }\n    async clear() {\n        this.ownPrivateKey = null;\n        this.ownPublicKey = null;\n        this.peerPublicKey = null;\n        this.sharedSecret = null;\n        store.keys.clear();\n    }\n    async generateKeyPair() {\n        const newKeyPair = await generateKeyPair();\n        this.ownPrivateKey = newKeyPair.privateKey;\n        this.ownPublicKey = newKeyPair.publicKey;\n        await this.storeKey(OWN_PRIVATE_KEY, newKeyPair.privateKey);\n        await this.storeKey(OWN_PUBLIC_KEY, newKeyPair.publicKey);\n    }\n    async loadKeysIfNeeded() {\n        if (this.ownPrivateKey === null) {\n            this.ownPrivateKey = await this.loadKey(OWN_PRIVATE_KEY);\n        }\n        if (this.ownPublicKey === null) {\n            this.ownPublicKey = await this.loadKey(OWN_PUBLIC_KEY);\n        }\n        if (this.ownPrivateKey === null || this.ownPublicKey === null) {\n            await this.generateKeyPair();\n        }\n        if (this.peerPublicKey === null) {\n            this.peerPublicKey = await this.loadKey(PEER_PUBLIC_KEY);\n        }\n        if (this.sharedSecret === null) {\n            if (this.ownPrivateKey === null || this.peerPublicKey === null)\n                return;\n            this.sharedSecret = await deriveSharedSecret(this.ownPrivateKey, this.peerPublicKey);\n        }\n    }\n    // storage methods\n    async loadKey(item) {\n        const key = store.keys.get(item.storageKey);\n        if (!key)\n            return null;\n        return importKeyFromHexString(item.keyType, key);\n    }\n    async storeKey(item, key) {\n        const hexString = await exportKeyToHexString(item.keyType, key);\n        store.keys.set(item.storageKey, hexString);\n    }\n}\n//# sourceMappingURL=SCWKeyManager.js.map","export function get(obj, path) {\n    if (typeof obj !== 'object' || obj === null)\n        return undefined;\n    return path\n        .split(/[.[\\]]+/)\n        .filter(Boolean)\n        .reduce((value, key) => {\n        if (typeof value === 'object' && value !== null) {\n            return value[key];\n        }\n        return undefined;\n    }, obj);\n}\n//# sourceMappingURL=get.js.map","/**********************************************************************\n * Constants\n **********************************************************************/\nexport const factoryAddress = '0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a';\nexport const spendPermissionManagerAddress = '0xf85210B21cC50302F477BA56686d2019dC9b67Ad';\nexport const abi = [\n    { inputs: [], stateMutability: 'nonpayable', type: 'constructor' },\n    {\n        inputs: [{ name: 'owner', type: 'bytes' }],\n        name: 'AlreadyOwner',\n        type: 'error',\n    },\n    { inputs: [], name: 'Initialized', type: 'error' },\n    {\n        inputs: [{ name: 'owner', type: 'bytes' }],\n        name: 'InvalidEthereumAddressOwner',\n        type: 'error',\n    },\n    {\n        inputs: [{ name: 'key', type: 'uint256' }],\n        name: 'InvalidNonceKey',\n        type: 'error',\n    },\n    {\n        inputs: [{ name: 'owner', type: 'bytes' }],\n        name: 'InvalidOwnerBytesLength',\n        type: 'error',\n    },\n    { inputs: [], name: 'LastOwner', type: 'error' },\n    {\n        inputs: [{ name: 'index', type: 'uint256' }],\n        name: 'NoOwnerAtIndex',\n        type: 'error',\n    },\n    {\n        inputs: [{ name: 'ownersRemaining', type: 'uint256' }],\n        name: 'NotLastOwner',\n        type: 'error',\n    },\n    {\n        inputs: [{ name: 'selector', type: 'bytes4' }],\n        name: 'SelectorNotAllowed',\n        type: 'error',\n    },\n    { inputs: [], name: 'Unauthorized', type: 'error' },\n    { inputs: [], name: 'UnauthorizedCallContext', type: 'error' },\n    { inputs: [], name: 'UpgradeFailed', type: 'error' },\n    {\n        inputs: [\n            { name: 'index', type: 'uint256' },\n            { name: 'expectedOwner', type: 'bytes' },\n            { name: 'actualOwner', type: 'bytes' },\n        ],\n        name: 'WrongOwnerAtIndex',\n        type: 'error',\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: 'index',\n                type: 'uint256',\n            },\n            { indexed: false, name: 'owner', type: 'bytes' },\n        ],\n        name: 'AddOwner',\n        type: 'event',\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: 'index',\n                type: 'uint256',\n            },\n            { indexed: false, name: 'owner', type: 'bytes' },\n        ],\n        name: 'RemoveOwner',\n        type: 'event',\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: 'implementation',\n                type: 'address',\n            },\n        ],\n        name: 'Upgraded',\n        type: 'event',\n    },\n    { stateMutability: 'payable', type: 'fallback' },\n    {\n        inputs: [],\n        name: 'REPLAYABLE_NONCE_KEY',\n        outputs: [{ name: '', type: 'uint256' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'owner', type: 'address' }],\n        name: 'addOwnerAddress',\n        outputs: [],\n        stateMutability: 'nonpayable',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'x', type: 'bytes32' },\n            { name: 'y', type: 'bytes32' },\n        ],\n        name: 'addOwnerPublicKey',\n        outputs: [],\n        stateMutability: 'nonpayable',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'functionSelector', type: 'bytes4' }],\n        name: 'canSkipChainIdValidation',\n        outputs: [{ name: '', type: 'bool' }],\n        stateMutability: 'pure',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'domainSeparator',\n        outputs: [{ name: '', type: 'bytes32' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'eip712Domain',\n        outputs: [\n            { name: 'fields', type: 'bytes1' },\n            { name: 'name', type: 'string' },\n            { name: 'version', type: 'string' },\n            { name: 'chainId', type: 'uint256' },\n            { name: 'verifyingContract', type: 'address' },\n            { name: 'salt', type: 'bytes32' },\n            { name: 'extensions', type: 'uint256[]' },\n        ],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'entryPoint',\n        outputs: [{ name: '', type: 'address' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'target', type: 'address' },\n            { name: 'value', type: 'uint256' },\n            { name: 'data', type: 'bytes' },\n        ],\n        name: 'execute',\n        outputs: [],\n        stateMutability: 'payable',\n        type: 'function',\n    },\n    {\n        inputs: [\n            {\n                components: [\n                    { name: 'target', type: 'address' },\n                    { name: 'value', type: 'uint256' },\n                    { name: 'data', type: 'bytes' },\n                ],\n                name: 'calls',\n                type: 'tuple[]',\n            },\n        ],\n        name: 'executeBatch',\n        outputs: [],\n        stateMutability: 'payable',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'calls', type: 'bytes[]' }],\n        name: 'executeWithoutChainIdValidation',\n        outputs: [],\n        stateMutability: 'payable',\n        type: 'function',\n    },\n    {\n        inputs: [\n            {\n                components: [\n                    { name: 'sender', type: 'address' },\n                    { name: 'nonce', type: 'uint256' },\n                    { name: 'initCode', type: 'bytes' },\n                    { name: 'callData', type: 'bytes' },\n                    { name: 'callGasLimit', type: 'uint256' },\n                    {\n                        name: 'verificationGasLimit',\n                        type: 'uint256',\n                    },\n                    {\n                        name: 'preVerificationGas',\n                        type: 'uint256',\n                    },\n                    { name: 'maxFeePerGas', type: 'uint256' },\n                    {\n                        name: 'maxPriorityFeePerGas',\n                        type: 'uint256',\n                    },\n                    { name: 'paymasterAndData', type: 'bytes' },\n                    { name: 'signature', type: 'bytes' },\n                ],\n                name: 'userOp',\n                type: 'tuple',\n            },\n        ],\n        name: 'getUserOpHashWithoutChainId',\n        outputs: [{ name: '', type: 'bytes32' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'implementation',\n        outputs: [{ name: '$', type: 'address' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'owners', type: 'bytes[]' }],\n        name: 'initialize',\n        outputs: [],\n        stateMutability: 'payable',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'account', type: 'address' }],\n        name: 'isOwnerAddress',\n        outputs: [{ name: '', type: 'bool' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'account', type: 'bytes' }],\n        name: 'isOwnerBytes',\n        outputs: [{ name: '', type: 'bool' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'x', type: 'bytes32' },\n            { name: 'y', type: 'bytes32' },\n        ],\n        name: 'isOwnerPublicKey',\n        outputs: [{ name: '', type: 'bool' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'hash', type: 'bytes32' },\n            { name: 'signature', type: 'bytes' },\n        ],\n        name: 'isValidSignature',\n        outputs: [{ name: 'result', type: 'bytes4' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'nextOwnerIndex',\n        outputs: [{ name: '', type: 'uint256' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'index', type: 'uint256' }],\n        name: 'ownerAtIndex',\n        outputs: [{ name: '', type: 'bytes' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'ownerCount',\n        outputs: [{ name: '', type: 'uint256' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'proxiableUUID',\n        outputs: [{ name: '', type: 'bytes32' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'index', type: 'uint256' },\n            { name: 'owner', type: 'bytes' },\n        ],\n        name: 'removeLastOwner',\n        outputs: [],\n        stateMutability: 'nonpayable',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'index', type: 'uint256' },\n            { name: 'owner', type: 'bytes' },\n        ],\n        name: 'removeOwnerAtIndex',\n        outputs: [],\n        stateMutability: 'nonpayable',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'removedOwnersCount',\n        outputs: [{ name: '', type: 'uint256' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [{ name: 'hash', type: 'bytes32' }],\n        name: 'replaySafeHash',\n        outputs: [{ name: '', type: 'bytes32' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'newImplementation', type: 'address' },\n            { name: 'data', type: 'bytes' },\n        ],\n        name: 'upgradeToAndCall',\n        outputs: [],\n        stateMutability: 'payable',\n        type: 'function',\n    },\n    {\n        inputs: [\n            {\n                components: [\n                    { name: 'sender', type: 'address' },\n                    { name: 'nonce', type: 'uint256' },\n                    { name: 'initCode', type: 'bytes' },\n                    { name: 'callData', type: 'bytes' },\n                    { name: 'callGasLimit', type: 'uint256' },\n                    {\n                        name: 'verificationGasLimit',\n                        type: 'uint256',\n                    },\n                    {\n                        name: 'preVerificationGas',\n                        type: 'uint256',\n                    },\n                    { name: 'maxFeePerGas', type: 'uint256' },\n                    {\n                        name: 'maxPriorityFeePerGas',\n                        type: 'uint256',\n                    },\n                    { name: 'paymasterAndData', type: 'bytes' },\n                    { name: 'signature', type: 'bytes' },\n                ],\n                name: 'userOp',\n                type: 'tuple',\n            },\n            { name: 'userOpHash', type: 'bytes32' },\n            { name: 'missingAccountFunds', type: 'uint256' },\n        ],\n        name: 'validateUserOp',\n        outputs: [{ name: 'validationData', type: 'uint256' }],\n        stateMutability: 'nonpayable',\n        type: 'function',\n    },\n    { stateMutability: 'payable', type: 'receive' },\n];\nexport const factoryAbi = [\n    {\n        inputs: [{ name: 'implementation_', type: 'address' }],\n        stateMutability: 'payable',\n        type: 'constructor',\n    },\n    { inputs: [], name: 'OwnerRequired', type: 'error' },\n    {\n        inputs: [\n            { name: 'owners', type: 'bytes[]' },\n            { name: 'nonce', type: 'uint256' },\n        ],\n        name: 'createAccount',\n        outputs: [\n            {\n                name: 'account',\n                type: 'address',\n            },\n        ],\n        stateMutability: 'payable',\n        type: 'function',\n    },\n    {\n        inputs: [\n            { name: 'owners', type: 'bytes[]' },\n            { name: 'nonce', type: 'uint256' },\n        ],\n        name: 'getAddress',\n        outputs: [{ name: '', type: 'address' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'implementation',\n        outputs: [{ name: '', type: 'address' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n    {\n        inputs: [],\n        name: 'initCodeHash',\n        outputs: [{ name: '', type: 'bytes32' }],\n        stateMutability: 'view',\n        type: 'function',\n    },\n];\nexport const spendPermissionManagerAbi = [\n    {\n        type: 'constructor',\n        inputs: [\n            {\n                name: 'publicERC6492Validator',\n                type: 'address',\n                internalType: 'contract PublicERC6492Validator',\n            },\n            { name: 'magicSpend', type: 'address', internalType: 'address' },\n        ],\n        stateMutability: 'nonpayable',\n    },\n    { type: 'receive', stateMutability: 'payable' },\n    {\n        type: 'function',\n        name: 'MAGIC_SPEND',\n        inputs: [],\n        outputs: [{ name: '', type: 'address', internalType: 'address' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'NATIVE_TOKEN',\n        inputs: [],\n        outputs: [{ name: '', type: 'address', internalType: 'address' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'PERMISSION_DETAILS_TYPEHASH',\n        inputs: [],\n        outputs: [{ name: '', type: 'bytes32', internalType: 'bytes32' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'PUBLIC_ERC6492_VALIDATOR',\n        inputs: [],\n        outputs: [\n            {\n                name: '',\n                type: 'address',\n                internalType: 'contract PublicERC6492Validator',\n            },\n        ],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'SPEND_PERMISSION_BATCH_TYPEHASH',\n        inputs: [],\n        outputs: [{ name: '', type: 'bytes32', internalType: 'bytes32' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'SPEND_PERMISSION_TYPEHASH',\n        inputs: [],\n        outputs: [{ name: '', type: 'bytes32', internalType: 'bytes32' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'approve',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [{ name: '', type: 'bool', internalType: 'bool' }],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'function',\n        name: 'approveBatchWithSignature',\n        inputs: [\n            {\n                name: 'spendPermissionBatch',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermissionBatch',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    {\n                        name: 'permissions',\n                        type: 'tuple[]',\n                        internalType: 'struct SpendPermissionManager.PermissionDetails[]',\n                        components: [\n                            {\n                                name: 'spender',\n                                type: 'address',\n                                internalType: 'address',\n                            },\n                            {\n                                name: 'token',\n                                type: 'address',\n                                internalType: 'address',\n                            },\n                            {\n                                name: 'allowance',\n                                type: 'uint160',\n                                internalType: 'uint160',\n                            },\n                            {\n                                name: 'salt',\n                                type: 'uint256',\n                                internalType: 'uint256',\n                            },\n                            {\n                                name: 'extraData',\n                                type: 'bytes',\n                                internalType: 'bytes',\n                            },\n                        ],\n                    },\n                ],\n            },\n            { name: 'signature', type: 'bytes', internalType: 'bytes' },\n        ],\n        outputs: [{ name: '', type: 'bool', internalType: 'bool' }],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'function',\n        name: 'approveWithRevoke',\n        inputs: [\n            {\n                name: 'permissionToApprove',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n            {\n                name: 'permissionToRevoke',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n            {\n                name: 'expectedLastUpdatedPeriod',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.PeriodSpend',\n                components: [\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'spend', type: 'uint160', internalType: 'uint160' },\n                ],\n            },\n        ],\n        outputs: [{ name: '', type: 'bool', internalType: 'bool' }],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'function',\n        name: 'approveWithSignature',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n            { name: 'signature', type: 'bytes', internalType: 'bytes' },\n        ],\n        outputs: [{ name: '', type: 'bool', internalType: 'bool' }],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'function',\n        name: 'eip712Domain',\n        inputs: [],\n        outputs: [\n            { name: 'fields', type: 'bytes1', internalType: 'bytes1' },\n            { name: 'name', type: 'string', internalType: 'string' },\n            { name: 'version', type: 'string', internalType: 'string' },\n            { name: 'chainId', type: 'uint256', internalType: 'uint256' },\n            {\n                name: 'verifyingContract',\n                type: 'address',\n                internalType: 'address',\n            },\n            { name: 'salt', type: 'bytes32', internalType: 'bytes32' },\n            {\n                name: 'extensions',\n                type: 'uint256[]',\n                internalType: 'uint256[]',\n            },\n        ],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'getBatchHash',\n        inputs: [\n            {\n                name: 'spendPermissionBatch',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermissionBatch',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    {\n                        name: 'permissions',\n                        type: 'tuple[]',\n                        internalType: 'struct SpendPermissionManager.PermissionDetails[]',\n                        components: [\n                            {\n                                name: 'spender',\n                                type: 'address',\n                                internalType: 'address',\n                            },\n                            {\n                                name: 'token',\n                                type: 'address',\n                                internalType: 'address',\n                            },\n                            {\n                                name: 'allowance',\n                                type: 'uint160',\n                                internalType: 'uint160',\n                            },\n                            {\n                                name: 'salt',\n                                type: 'uint256',\n                                internalType: 'uint256',\n                            },\n                            {\n                                name: 'extraData',\n                                type: 'bytes',\n                                internalType: 'bytes',\n                            },\n                        ],\n                    },\n                ],\n            },\n        ],\n        outputs: [{ name: '', type: 'bytes32', internalType: 'bytes32' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'getCurrentPeriod',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [\n            {\n                name: '',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.PeriodSpend',\n                components: [\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'spend', type: 'uint160', internalType: 'uint160' },\n                ],\n            },\n        ],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'getHash',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [{ name: '', type: 'bytes32', internalType: 'bytes32' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'getLastUpdatedPeriod',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [\n            {\n                name: '',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.PeriodSpend',\n                components: [\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'spend', type: 'uint160', internalType: 'uint160' },\n                ],\n            },\n        ],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'isApproved',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [{ name: '', type: 'bool', internalType: 'bool' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'isRevoked',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [{ name: '', type: 'bool', internalType: 'bool' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'isValid',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [{ name: '', type: 'bool', internalType: 'bool' }],\n        stateMutability: 'view',\n    },\n    {\n        type: 'function',\n        name: 'revoke',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'function',\n        name: 'revokeAsSpender',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        outputs: [],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'function',\n        name: 'spend',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n            { name: 'value', type: 'uint160', internalType: 'uint160' },\n        ],\n        outputs: [],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'function',\n        name: 'spendWithWithdraw',\n        inputs: [\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n            { name: 'value', type: 'uint160', internalType: 'uint160' },\n            {\n                name: 'withdrawRequest',\n                type: 'tuple',\n                internalType: 'struct MagicSpend.WithdrawRequest',\n                components: [\n                    { name: 'signature', type: 'bytes', internalType: 'bytes' },\n                    { name: 'asset', type: 'address', internalType: 'address' },\n                    { name: 'amount', type: 'uint256', internalType: 'uint256' },\n                    { name: 'nonce', type: 'uint256', internalType: 'uint256' },\n                    { name: 'expiry', type: 'uint48', internalType: 'uint48' },\n                ],\n            },\n        ],\n        outputs: [],\n        stateMutability: 'nonpayable',\n    },\n    {\n        type: 'event',\n        name: 'SpendPermissionApproved',\n        inputs: [\n            {\n                name: 'hash',\n                type: 'bytes32',\n                indexed: true,\n                internalType: 'bytes32',\n            },\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                indexed: false,\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        anonymous: false,\n    },\n    {\n        type: 'event',\n        name: 'SpendPermissionRevoked',\n        inputs: [\n            {\n                name: 'hash',\n                type: 'bytes32',\n                indexed: true,\n                internalType: 'bytes32',\n            },\n            {\n                name: 'spendPermission',\n                type: 'tuple',\n                indexed: false,\n                internalType: 'struct SpendPermissionManager.SpendPermission',\n                components: [\n                    { name: 'account', type: 'address', internalType: 'address' },\n                    { name: 'spender', type: 'address', internalType: 'address' },\n                    { name: 'token', type: 'address', internalType: 'address' },\n                    {\n                        name: 'allowance',\n                        type: 'uint160',\n                        internalType: 'uint160',\n                    },\n                    { name: 'period', type: 'uint48', internalType: 'uint48' },\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'salt', type: 'uint256', internalType: 'uint256' },\n                    { name: 'extraData', type: 'bytes', internalType: 'bytes' },\n                ],\n            },\n        ],\n        anonymous: false,\n    },\n    {\n        type: 'event',\n        name: 'SpendPermissionUsed',\n        inputs: [\n            {\n                name: 'hash',\n                type: 'bytes32',\n                indexed: true,\n                internalType: 'bytes32',\n            },\n            {\n                name: 'account',\n                type: 'address',\n                indexed: true,\n                internalType: 'address',\n            },\n            {\n                name: 'spender',\n                type: 'address',\n                indexed: true,\n                internalType: 'address',\n            },\n            {\n                name: 'token',\n                type: 'address',\n                indexed: false,\n                internalType: 'address',\n            },\n            {\n                name: 'periodSpend',\n                type: 'tuple',\n                indexed: false,\n                internalType: 'struct SpendPermissionManager.PeriodSpend',\n                components: [\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'spend', type: 'uint160', internalType: 'uint160' },\n                ],\n            },\n        ],\n        anonymous: false,\n    },\n    {\n        type: 'error',\n        name: 'AfterSpendPermissionEnd',\n        inputs: [\n            {\n                name: 'currentTimestamp',\n                type: 'uint48',\n                internalType: 'uint48',\n            },\n            { name: 'end', type: 'uint48', internalType: 'uint48' },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'BeforeSpendPermissionStart',\n        inputs: [\n            {\n                name: 'currentTimestamp',\n                type: 'uint48',\n                internalType: 'uint48',\n            },\n            { name: 'start', type: 'uint48', internalType: 'uint48' },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'ERC721TokenNotSupported',\n        inputs: [{ name: 'token', type: 'address', internalType: 'address' }],\n    },\n    { type: 'error', name: 'EmptySpendPermissionBatch', inputs: [] },\n    {\n        type: 'error',\n        name: 'ExceededSpendPermission',\n        inputs: [\n            { name: 'value', type: 'uint256', internalType: 'uint256' },\n            { name: 'allowance', type: 'uint256', internalType: 'uint256' },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'InvalidLastUpdatedPeriod',\n        inputs: [\n            {\n                name: 'actualLastUpdatedPeriod',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.PeriodSpend',\n                components: [\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'spend', type: 'uint160', internalType: 'uint160' },\n                ],\n            },\n            {\n                name: 'expectedLastUpdatedPeriod',\n                type: 'tuple',\n                internalType: 'struct SpendPermissionManager.PeriodSpend',\n                components: [\n                    { name: 'start', type: 'uint48', internalType: 'uint48' },\n                    { name: 'end', type: 'uint48', internalType: 'uint48' },\n                    { name: 'spend', type: 'uint160', internalType: 'uint160' },\n                ],\n            },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'InvalidSender',\n        inputs: [\n            { name: 'sender', type: 'address', internalType: 'address' },\n            { name: 'expected', type: 'address', internalType: 'address' },\n        ],\n    },\n    { type: 'error', name: 'InvalidSignature', inputs: [] },\n    {\n        type: 'error',\n        name: 'InvalidStartEnd',\n        inputs: [\n            { name: 'start', type: 'uint48', internalType: 'uint48' },\n            { name: 'end', type: 'uint48', internalType: 'uint48' },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'InvalidWithdrawRequestNonce',\n        inputs: [\n            {\n                name: 'noncePostfix',\n                type: 'uint128',\n                internalType: 'uint128',\n            },\n            {\n                name: 'permissionHashPostfix',\n                type: 'uint128',\n                internalType: 'uint128',\n            },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'MismatchedAccounts',\n        inputs: [\n            {\n                name: 'firstAccount',\n                type: 'address',\n                internalType: 'address',\n            },\n            {\n                name: 'secondAccount',\n                type: 'address',\n                internalType: 'address',\n            },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'SafeERC20FailedOperation',\n        inputs: [{ name: 'token', type: 'address', internalType: 'address' }],\n    },\n    {\n        type: 'error',\n        name: 'SpendTokenWithdrawAssetMismatch',\n        inputs: [\n            { name: 'spendToken', type: 'address', internalType: 'address' },\n            {\n                name: 'withdrawAsset',\n                type: 'address',\n                internalType: 'address',\n            },\n        ],\n    },\n    {\n        type: 'error',\n        name: 'SpendValueOverflow',\n        inputs: [{ name: 'value', type: 'uint256', internalType: 'uint256' }],\n    },\n    {\n        type: 'error',\n        name: 'SpendValueWithdrawAmountMismatch',\n        inputs: [\n            { name: 'spendValue', type: 'uint256', internalType: 'uint256' },\n            {\n                name: 'withdrawAmount',\n                type: 'uint256',\n                internalType: 'uint256',\n            },\n        ],\n    },\n    { type: 'error', name: 'UnauthorizedSpendPermission', inputs: [] },\n    {\n        type: 'error',\n        name: 'UnexpectedReceiveAmount',\n        inputs: [\n            { name: 'received', type: 'uint256', internalType: 'uint256' },\n            { name: 'expected', type: 'uint256', internalType: 'uint256' },\n        ],\n    },\n    { type: 'error', name: 'ZeroAllowance', inputs: [] },\n    { type: 'error', name: 'ZeroPeriod', inputs: [] },\n    { type: 'error', name: 'ZeroSpender', inputs: [] },\n    { type: 'error', name: 'ZeroToken', inputs: [] },\n    { type: 'error', name: 'ZeroValue', inputs: [] },\n];\n//# sourceMappingURL=constants.js.map","import { hexToBigInt, isAddress } from 'viem';\nimport { keccak256, numberToHex, slice, toHex } from 'viem';\nimport { standardErrors } from '../../core/error/errors.js';\nimport { logSnackbarActionClicked, logSnackbarShown } from '../../core/telemetry/events/snackbar.js';\nimport { config, store } from '../../store/store.js';\nimport { get } from '../../util/get.js';\nimport { initSnackbar } from '../../util/web.js';\nimport { waitForCallsStatus } from 'viem/experimental';\nimport { getCryptoKeyAccount } from '../../kms/crypto-key/index.js';\nimport { spendPermissionManagerAddress } from './utils/constants.js';\n// ***************************************************************\n// Utility\n// ***************************************************************\nexport function getSenderFromRequest(request) {\n    var _a;\n    if (!Array.isArray(request.params)) {\n        return null;\n    }\n    switch (request.method) {\n        case 'personal_sign':\n            return request.params[1];\n        case 'eth_signTypedData_v4':\n            return request.params[0];\n        case 'eth_signTransaction':\n        case 'eth_sendTransaction':\n        case 'wallet_sendCalls':\n            return (_a = request.params[0]) === null || _a === void 0 ? void 0 : _a.from;\n        default:\n            return null;\n    }\n}\nexport function addSenderToRequest(request, sender) {\n    if (!Array.isArray(request.params)) {\n        throw standardErrors.rpc.invalidParams();\n    }\n    const params = [...request.params];\n    switch (request.method) {\n        case 'eth_signTransaction':\n        case 'eth_sendTransaction':\n        case 'wallet_sendCalls':\n            params[0].from = sender;\n            break;\n        case 'eth_signTypedData_v4':\n            params[0] = sender;\n            break;\n        case 'personal_sign':\n            params[1] = sender;\n            break;\n        default:\n            break;\n    }\n    return Object.assign(Object.assign({}, request), { params });\n}\nexport function assertParamsChainId(params) {\n    var _a;\n    if (!params || !Array.isArray(params) || !((_a = params[0]) === null || _a === void 0 ? void 0 : _a.chainId)) {\n        throw standardErrors.rpc.invalidParams();\n    }\n    if (typeof params[0].chainId !== 'string' && typeof params[0].chainId !== 'number') {\n        throw standardErrors.rpc.invalidParams();\n    }\n}\nexport function assertGetCapabilitiesParams(params) {\n    if (!params || !Array.isArray(params) || (params.length !== 1 && params.length !== 2)) {\n        throw standardErrors.rpc.invalidParams();\n    }\n    if (typeof params[0] !== 'string' || !isAddress(params[0])) {\n        throw standardErrors.rpc.invalidParams();\n    }\n    if (params.length === 2) {\n        if (!Array.isArray(params[1])) {\n            throw standardErrors.rpc.invalidParams();\n        }\n        for (const param of params[1]) {\n            if (typeof param !== 'string' || !param.startsWith('0x')) {\n                throw standardErrors.rpc.invalidParams();\n            }\n        }\n    }\n}\nexport function injectRequestCapabilities(request, capabilities) {\n    // Modify request to include auto sub account capabilities\n    const modifiedRequest = Object.assign({}, request);\n    if (capabilities && request.method.startsWith('wallet_')) {\n        let requestCapabilities = get(modifiedRequest, 'params.0.capabilities');\n        if (typeof requestCapabilities === 'undefined') {\n            requestCapabilities = {};\n        }\n        if (typeof requestCapabilities !== 'object') {\n            throw standardErrors.rpc.invalidParams();\n        }\n        requestCapabilities = Object.assign(Object.assign({}, capabilities), requestCapabilities);\n        if (modifiedRequest.params && Array.isArray(modifiedRequest.params)) {\n            modifiedRequest.params[0] = Object.assign(Object.assign({}, modifiedRequest.params[0]), { capabilities: requestCapabilities });\n        }\n    }\n    return modifiedRequest;\n}\n/**\n * Initializes the `subAccountConfig` store with the owner account function and capabilities\n * @returns void\n */\nexport async function initSubAccountConfig() {\n    var _a;\n    const config = (_a = store.subAccountsConfig.get()) !== null && _a !== void 0 ? _a : {};\n    const capabilities = {};\n    if (config.enableAutoSubAccounts) {\n        // Get the owner account\n        const { account: owner } = config.toOwnerAccount\n            ? await config.toOwnerAccount()\n            : await getCryptoKeyAccount();\n        if (!owner) {\n            throw standardErrors.provider.unauthorized('No owner account found');\n        }\n        capabilities.addSubAccount = {\n            account: {\n                type: 'create',\n                keys: [\n                    {\n                        type: owner.address ? 'address' : 'webauthn-p256',\n                        publicKey: owner.address || owner.publicKey,\n                    },\n                ],\n            },\n        };\n    }\n    // Store the owner account and capabilities in the non-persisted config\n    store.subAccountsConfig.set({\n        capabilities,\n    });\n}\nexport function assertFetchPermissionsRequest(request) {\n    if (request.method === 'coinbase_fetchPermissions' && request.params === undefined) {\n        return;\n    }\n    if (request.method === 'coinbase_fetchPermissions' &&\n        Array.isArray(request.params) &&\n        request.params.length === 1 &&\n        typeof request.params[0] === 'object') {\n        if (typeof request.params[0].account !== 'string' ||\n            !request.params[0].chainId.startsWith('0x')) {\n            throw standardErrors.rpc.invalidParams('FetchPermissions - Invalid params: params[0].account must be a hex string');\n        }\n        if (typeof request.params[0].chainId !== 'string' ||\n            !request.params[0].chainId.startsWith('0x')) {\n            throw standardErrors.rpc.invalidParams('FetchPermissions - Invalid params: params[0].chainId must be a hex string');\n        }\n        if (typeof request.params[0].spender !== 'string' ||\n            !request.params[0].spender.startsWith('0x')) {\n            throw standardErrors.rpc.invalidParams('FetchPermissions - Invalid params: params[0].spender must be a hex string');\n        }\n        return;\n    }\n    throw standardErrors.rpc.invalidParams();\n}\nexport function fillMissingParamsForFetchPermissions(request) {\n    var _a, _b, _c;\n    if (request.params !== undefined) {\n        return request;\n    }\n    // this is based on the assumption that the first account is the active account\n    // it could change in the context of multi-(universal)-account\n    const accountFromStore = (_a = store.getState().account.accounts) === null || _a === void 0 ? void 0 : _a[0];\n    const chainId = (_b = store.getState().account.chain) === null || _b === void 0 ? void 0 : _b.id;\n    const subAccountFromStore = (_c = store.getState().subAccount) === null || _c === void 0 ? void 0 : _c.address;\n    if (!accountFromStore || !subAccountFromStore || !chainId) {\n        throw standardErrors.rpc.invalidParams('FetchPermissions - one or more of account, sub account, or chain id is missing, connect to sub account via wallet_connect first');\n    }\n    return {\n        method: 'coinbase_fetchPermissions',\n        params: [\n            {\n                account: accountFromStore,\n                chainId: numberToHex(chainId),\n                spender: subAccountFromStore,\n            },\n        ],\n    };\n}\nexport function createSpendPermissionMessage({ spendPermission, chainId, }) {\n    return {\n        domain: {\n            name: 'Spend Permission Manager',\n            version: '1',\n            chainId: chainId,\n            verifyingContract: spendPermissionManagerAddress,\n        },\n        types: {\n            SpendPermission: [\n                { name: 'account', type: 'address' },\n                { name: 'spender', type: 'address' },\n                { name: 'token', type: 'address' },\n                { name: 'allowance', type: 'uint160' },\n                { name: 'period', type: 'uint48' },\n                { name: 'start', type: 'uint48' },\n                { name: 'end', type: 'uint48' },\n                { name: 'salt', type: 'uint256' },\n                { name: 'extraData', type: 'bytes' },\n            ],\n        },\n        primaryType: 'SpendPermission',\n        message: {\n            account: spendPermission.account,\n            spender: spendPermission.spender,\n            token: spendPermission.token,\n            allowance: spendPermission.allowance,\n            period: spendPermission.period,\n            start: spendPermission.start,\n            end: spendPermission.end,\n            salt: spendPermission.salt,\n            extraData: spendPermission.extraData,\n        },\n    };\n}\nexport function createSpendPermissionBatchMessage({ spendPermissionBatch, chainId, }) {\n    return {\n        domain: {\n            name: 'Spend Permission Manager',\n            version: '1',\n            chainId,\n            verifyingContract: spendPermissionManagerAddress,\n        },\n        types: {\n            SpendPermissionBatch: [\n                { name: 'account', type: 'address' },\n                { name: 'period', type: 'uint48' },\n                { name: 'start', type: 'uint48' },\n                { name: 'end', type: 'uint48' },\n                { name: 'permissions', type: 'PermissionDetails[]' },\n            ],\n            PermissionDetails: [\n                { name: 'spender', type: 'address' },\n                { name: 'token', type: 'address' },\n                { name: 'allowance', type: 'uint160' },\n                { name: 'salt', type: 'uint256' },\n                { name: 'extraData', type: 'bytes' },\n            ],\n        },\n        primaryType: 'SpendPermissionBatch',\n        message: {\n            account: spendPermissionBatch.account,\n            period: spendPermissionBatch.period,\n            start: spendPermissionBatch.start,\n            end: spendPermissionBatch.end,\n            permissions: spendPermissionBatch.permissions.map((p) => ({\n                spender: p.spender,\n                token: p.token,\n                allowance: p.allowance,\n                salt: p.salt,\n                extraData: p.extraData,\n            })),\n        },\n    };\n}\nexport async function waitForCallsTransactionHash({ client, id, }) {\n    var _a;\n    const result = await waitForCallsStatus(client, {\n        id,\n    });\n    if (result.status === 'success') {\n        return (_a = result.receipts) === null || _a === void 0 ? void 0 : _a[0].transactionHash;\n    }\n    throw standardErrors.rpc.internal('failed to send transaction');\n}\nexport function createWalletSendCallsRequest({ calls, from, chainId, capabilities, }) {\n    const paymasterUrls = config.get().paymasterUrls;\n    let request = {\n        method: 'wallet_sendCalls',\n        params: [\n            {\n                version: '1.0',\n                calls,\n                chainId: numberToHex(chainId),\n                from,\n                atomicRequired: true,\n                capabilities,\n            },\n        ],\n    };\n    if (paymasterUrls === null || paymasterUrls === void 0 ? void 0 : paymasterUrls[chainId]) {\n        request = injectRequestCapabilities(request, {\n            paymasterService: { url: paymasterUrls === null || paymasterUrls === void 0 ? void 0 : paymasterUrls[chainId] },\n        });\n    }\n    return request;\n}\nexport async function presentSubAccountFundingDialog() {\n    const snackbar = initSnackbar();\n    const userChoice = await new Promise((resolve) => {\n        logSnackbarShown({ snackbarContext: 'sub_account_insufficient_balance' });\n        snackbar.presentItem({\n            autoExpand: true,\n            message: 'Insufficient spend permission. Choose how to proceed:',\n            menuItems: [\n                {\n                    isRed: false,\n                    info: 'Create new Spend Permission',\n                    svgWidth: '10',\n                    svgHeight: '11',\n                    path: '',\n                    defaultFillRule: 'evenodd',\n                    defaultClipRule: 'evenodd',\n                    onClick: () => {\n                        logSnackbarActionClicked({\n                            snackbarContext: 'sub_account_insufficient_balance',\n                            snackbarAction: 'create_permission',\n                        });\n                        snackbar.clear();\n                        resolve('update_permission');\n                    },\n                },\n                {\n                    isRed: false,\n                    info: 'Continue in Popup',\n                    svgWidth: '10',\n                    svgHeight: '11',\n                    path: '',\n                    defaultFillRule: 'evenodd',\n                    defaultClipRule: 'evenodd',\n                    onClick: () => {\n                        logSnackbarActionClicked({\n                            snackbarContext: 'sub_account_insufficient_balance',\n                            snackbarAction: 'continue_in_popup',\n                        });\n                        snackbar.clear();\n                        resolve('continue_popup');\n                    },\n                },\n                {\n                    isRed: true,\n                    info: 'Cancel',\n                    svgWidth: '10',\n                    svgHeight: '11',\n                    path: '',\n                    defaultFillRule: 'evenodd',\n                    defaultClipRule: 'evenodd',\n                    onClick: () => {\n                        logSnackbarActionClicked({\n                            snackbarContext: 'sub_account_insufficient_balance',\n                            snackbarAction: 'cancel',\n                        });\n                        snackbar.clear();\n                        resolve('cancel');\n                    },\n                },\n            ],\n        });\n    });\n    return userChoice;\n}\nexport function parseFundingOptions({ errorData, sourceAddress, }) {\n    var _a;\n    const spendPermissionRequests = [];\n    for (const [token, { amount, sources }] of Object.entries((_a = errorData === null || errorData === void 0 ? void 0 : errorData.required) !== null && _a !== void 0 ? _a : {})) {\n        const sourcesWithSufficientBalance = sources.filter((source) => {\n            return (hexToBigInt(source.balance) >= hexToBigInt(amount) &&\n                source.address.toLowerCase() === (sourceAddress === null || sourceAddress === void 0 ? void 0 : sourceAddress.toLowerCase()));\n        });\n        if (sourcesWithSufficientBalance.length === 0) {\n            throw new Error('Source address has insufficient balance for a token');\n        }\n        spendPermissionRequests.push({\n            token: token,\n            requiredAmount: hexToBigInt(amount),\n        });\n    }\n    return spendPermissionRequests;\n}\nexport function isSendCallsParams(params) {\n    return typeof params === 'object' && params !== null && 'calls' in params;\n}\nexport function isEthSendTransactionParams(params) {\n    return (Array.isArray(params) &&\n        params.length === 1 &&\n        typeof params[0] === 'object' &&\n        params[0] !== null &&\n        'to' in params[0]);\n}\nexport function compute16ByteHash(input) {\n    return slice(keccak256(toHex(input)), 0, 16);\n}\nexport function makeDataSuffix({ attribution, dappOrigin, }) {\n    if (!attribution) {\n        return;\n    }\n    if ('auto' in attribution && attribution.auto && dappOrigin) {\n        return compute16ByteHash(dappOrigin);\n    }\n    if ('dataSuffix' in attribution) {\n        return attribution.dataSuffix;\n    }\n    return;\n}\n/**\n * Checks if a specific capability is present in a request's params\n * @param request The request object to check\n * @param capabilityName The name of the capability to check for\n * @returns boolean indicating if the capability is present\n */\nexport function requestHasCapability(request, capabilityName) {\n    var _a;\n    if (!Array.isArray(request === null || request === void 0 ? void 0 : request.params))\n        return false;\n    const capabilities = (_a = request.params[0]) === null || _a === void 0 ? void 0 : _a.capabilities;\n    if (!capabilities || typeof capabilities !== 'object')\n        return false;\n    return capabilityName in capabilities;\n}\n/**\n * Prepends an item to an array without duplicates\n * @param array The array to prepend to\n * @param item The item to prepend\n * @returns The array with the item prepended\n */\nexport function prependWithoutDuplicates(array, item) {\n    const filtered = array.filter((i) => i !== item);\n    return [item, ...filtered];\n}\n/**\n * Appends an item to an array without duplicates\n * @param array The array to append to\n * @param item The item to append\n * @returns The array with the item appended\n */\nexport function appendWithoutDuplicates(array, item) {\n    const filtered = array.filter((i) => i !== item);\n    return [...filtered, item];\n}\nexport async function getCachedWalletConnectResponse() {\n    const spendPermissions = store.spendPermissions.get();\n    const subAccount = store.subAccounts.get();\n    const accounts = store.account.get().accounts;\n    if (!accounts) {\n        return null;\n    }\n    const walletConnectAccounts = accounts === null || accounts === void 0 ? void 0 : accounts.map((account) => ({\n        address: account,\n        capabilities: {\n            subAccounts: subAccount ? [subAccount] : undefined,\n            spendPermissions: spendPermissions.length > 0 ? { permissions: spendPermissions } : undefined,\n        },\n    }));\n    return {\n        accounts: walletConnectAccounts,\n    };\n}\n//# sourceMappingURL=utils.js.map","import { Signature } from 'ox';\nimport { hexToBytes, numberToHex, stringToBytes, trim } from 'viem';\nexport function base64ToBase64Url(base64) {\n    return base64.replaceAll('+', '-').replaceAll('/', '_').replace(/=+$/, '');\n}\nexport function arrayBufferToBase64Url(buffer) {\n    // First convert to regular base64\n    const base64String = btoa(String.fromCharCode(...new Uint8Array(buffer)));\n    // Then convert to base64url\n    return base64ToBase64Url(base64String);\n}\nexport function convertCredentialToJSON({ webauthn, signature, id, }) {\n    const signatureRaw = Signature.fromHex(signature);\n    return {\n        id,\n        rawId: arrayBufferToBase64Url(stringToBytes(id)),\n        response: {\n            authenticatorData: arrayBufferToBase64Url(hexToBytes(webauthn.authenticatorData)),\n            clientDataJSON: arrayBufferToBase64Url(stringToBytes(webauthn.clientDataJSON)),\n            signature: arrayBufferToBase64Url(asn1EncodeSignature(signatureRaw.r, signatureRaw.s)),\n        },\n        type: JSON.parse(webauthn.clientDataJSON).type,\n    };\n}\nexport function asn1EncodeSignature(r, s) {\n    // Convert r and s to byte arrays and remove any leading zeros\n    const rBytes = hexToBytes(trim(numberToHex(r)));\n    const sBytes = hexToBytes(trim(numberToHex(s)));\n    // Calculate lengths\n    const rLength = rBytes.length;\n    const sLength = sBytes.length;\n    const totalLength = rLength + sLength + 4; // 4 additional bytes for type and length fields\n    // Create the signature buffer\n    const signature = new Uint8Array(totalLength + 2); // +2 for sequence header\n    // Sequence header\n    signature[0] = 0x30; // ASN.1 sequence tag\n    signature[1] = totalLength;\n    // Encode r value\n    signature[2] = 0x02; // ASN.1 integer tag\n    signature[3] = rLength;\n    signature.set(rBytes, 4);\n    // Encode s value\n    signature[rLength + 4] = 0x02; // ASN.1 integer tag\n    signature[rLength + 5] = sLength;\n    signature.set(sBytes, rLength + 6);\n    return signature;\n}\n//# sourceMappingURL=encoding.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as Signature from 'ox/Signature';\nimport { BaseError, decodeFunctionData, encodeAbiParameters, encodeFunctionData, encodePacked, hashMessage, hashTypedData, parseSignature, size, stringToHex, } from 'viem';\nimport { entryPoint06Abi, entryPoint06Address, getUserOperationHash, toSmartAccount, } from 'viem/account-abstraction';\nimport { abi, factoryAbi, factoryAddress } from './constants.js';\n/**\n * @description Create a Coinbase Smart Account.\n *\n * @param parameters - {@link CreateSmartAccountParameters}\n * @returns Coinbase Smart Account. {@link CreateSmartAccountReturnType}\n *\n * @example\n *\n * const account = createSmartAccount({\n *   client,\n *   owner: privateKeyToAccount('0x...'),\n *   ownerIndex: 0,\n *   address: '0x...',\n *   factoryData: '0x...',\n * })\n */\nexport async function createSmartAccount(parameters) {\n    const { owner, ownerIndex, address, client, factoryData } = parameters;\n    const entryPoint = {\n        abi: entryPoint06Abi,\n        address: entryPoint06Address,\n        version: '0.6',\n    };\n    const factory = {\n        abi: factoryAbi,\n        address: factoryAddress,\n    };\n    return toSmartAccount({\n        client,\n        entryPoint,\n        extend: { abi, factory },\n        async decodeCalls(data) {\n            const result = decodeFunctionData({\n                abi,\n                data,\n            });\n            if (result.functionName === 'execute')\n                return [{ to: result.args[0], value: result.args[1], data: result.args[2] }];\n            if (result.functionName === 'executeBatch')\n                return result.args[0].map((arg) => ({\n                    to: arg.target,\n                    value: arg.value,\n                    data: arg.data,\n                }));\n            throw new BaseError(`unable to decode calls for \"${result.functionName}\"`);\n        },\n        async encodeCalls(calls) {\n            var _a, _b;\n            if (calls.length === 1) {\n                return encodeFunctionData({\n                    abi,\n                    functionName: 'execute',\n                    args: [calls[0].to, (_a = calls[0].value) !== null && _a !== void 0 ? _a : BigInt(0), (_b = calls[0].data) !== null && _b !== void 0 ? _b : '0x'],\n                });\n            }\n            return encodeFunctionData({\n                abi,\n                functionName: 'executeBatch',\n                args: [\n                    calls.map((call) => {\n                        var _a, _b;\n                        return ({\n                            data: (_a = call.data) !== null && _a !== void 0 ? _a : '0x',\n                            target: call.to,\n                            value: (_b = call.value) !== null && _b !== void 0 ? _b : BigInt(0),\n                        });\n                    }),\n                ],\n            });\n        },\n        async getAddress() {\n            return address;\n        },\n        async getFactoryArgs() {\n            if (factoryData)\n                return { factory: factory.address, factoryData };\n            // TODO: support creating factory data\n            return { factory: factory.address, factoryData };\n        },\n        async getStubSignature() {\n            if (owner.type === 'webAuthn')\n                return '0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000';\n            return wrapSignature({\n                ownerIndex,\n                signature: '0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c',\n            });\n        },\n        async sign(parameters) {\n            const address = await this.getAddress();\n            const hash = toReplaySafeHash({\n                address,\n                chainId: client.chain.id,\n                hash: parameters.hash,\n            });\n            const signature = await sign({ hash, owner });\n            return wrapSignature({\n                ownerIndex,\n                signature,\n            });\n        },\n        async signMessage(parameters) {\n            const { message } = parameters;\n            const address = await this.getAddress();\n            const hash = toReplaySafeHash({\n                address,\n                chainId: client.chain.id,\n                hash: hashMessage(message),\n            });\n            const signature = await sign({ hash, owner });\n            return wrapSignature({\n                ownerIndex,\n                signature,\n            });\n        },\n        async signTypedData(parameters) {\n            const { domain, types, primaryType, message } = parameters;\n            const address = await this.getAddress();\n            const hash = toReplaySafeHash({\n                address,\n                chainId: client.chain.id,\n                hash: hashTypedData({\n                    domain,\n                    message,\n                    primaryType,\n                    types,\n                }),\n            });\n            const signature = await sign({ hash, owner });\n            return wrapSignature({\n                ownerIndex,\n                signature,\n            });\n        },\n        async signUserOperation(parameters) {\n            const { chainId = client.chain.id } = parameters, userOperation = __rest(parameters, [\"chainId\"]);\n            const address = await this.getAddress();\n            const hash = getUserOperationHash({\n                chainId,\n                entryPointAddress: entryPoint.address,\n                entryPointVersion: entryPoint.version,\n                userOperation: Object.assign(Object.assign({}, userOperation), { sender: address }),\n            });\n            const signature = await sign({ hash, owner });\n            return wrapSignature({\n                ownerIndex,\n                signature,\n            });\n        },\n        userOperation: {\n            async estimateGas(userOperation) {\n                var _a;\n                if (owner.type !== 'webAuthn')\n                    return;\n                // Accounts with WebAuthn owner require a minimum verification gas limit of 800,000.\n                return {\n                    verificationGasLimit: BigInt(Math.max(Number((_a = userOperation.verificationGasLimit) !== null && _a !== void 0 ? _a : BigInt(0)), 800000)),\n                };\n            },\n        },\n    });\n}\n/////////////////////////////////////////////////////////////////////////////////////////////\n// Utilities\n/////////////////////////////////////////////////////////////////////////////////////////////\n/** @internal */\nexport async function sign({ hash, owner, }) {\n    // WebAuthn Account (Passkey)\n    if (owner.type === 'webAuthn') {\n        const { signature, webauthn } = await owner.sign({\n            hash,\n        });\n        return toWebAuthnSignature({ signature, webauthn });\n    }\n    if (owner.sign)\n        return owner.sign({ hash });\n    throw new BaseError('`owner` does not support raw sign.');\n}\n/** @internal */\nexport function toReplaySafeHash({ address, chainId, hash, }) {\n    return hashTypedData({\n        domain: {\n            chainId,\n            name: 'Coinbase Smart Wallet',\n            verifyingContract: address,\n            version: '1',\n        },\n        types: {\n            CoinbaseSmartWalletMessage: [\n                {\n                    name: 'hash',\n                    type: 'bytes32',\n                },\n            ],\n        },\n        primaryType: 'CoinbaseSmartWalletMessage',\n        message: {\n            hash,\n        },\n    });\n}\n/** @internal */\nexport function toWebAuthnSignature({ webauthn, signature, }) {\n    const { r, s } = Signature.fromHex(signature);\n    return encodeAbiParameters([\n        {\n            components: [\n                {\n                    name: 'authenticatorData',\n                    type: 'bytes',\n                },\n                { name: 'clientDataJSON', type: 'bytes' },\n                { name: 'challengeIndex', type: 'uint256' },\n                { name: 'typeIndex', type: 'uint256' },\n                {\n                    name: 'r',\n                    type: 'uint256',\n                },\n                {\n                    name: 's',\n                    type: 'uint256',\n                },\n            ],\n            type: 'tuple',\n        },\n    ], [\n        {\n            authenticatorData: webauthn.authenticatorData,\n            clientDataJSON: stringToHex(webauthn.clientDataJSON),\n            challengeIndex: BigInt(webauthn.challengeIndex),\n            typeIndex: BigInt(webauthn.typeIndex),\n            r,\n            s,\n        },\n    ]);\n}\n/** @internal */\nexport function wrapSignature(parameters) {\n    const { ownerIndex = 0 } = parameters;\n    const signatureData = (() => {\n        if (size(parameters.signature) !== 65)\n            return parameters.signature;\n        const signature = parseSignature(parameters.signature);\n        return encodePacked(['bytes32', 'bytes32', 'uint8'], [signature.r, signature.s, signature.yParity === 0 ? 27 : 28]);\n    })();\n    return encodeAbiParameters([\n        {\n            components: [\n                {\n                    name: 'ownerIndex',\n                    type: 'uint8',\n                },\n                {\n                    name: 'signatureData',\n                    type: 'bytes',\n                },\n            ],\n            type: 'tuple',\n        },\n    ], [\n        {\n            ownerIndex,\n            signatureData,\n        },\n    ]);\n}\n//# sourceMappingURL=createSmartAccount.js.map","import { isViemError, standardErrors, viemHttpErrorToProviderError } from '../../../core/error/errors.js';\nimport { ensureHexString } from '../../../core/type/util.js';\nimport { assertArrayPresence, assertPresence } from '../../../util/assertPresence.js';\nimport { convertCredentialToJSON } from '../../../util/encoding.js';\nimport { get } from '../../../util/get.js';\nimport { hexToString, isHex, numberToHex, } from 'viem';\nimport { createWalletSendCallsRequest, injectRequestCapabilities, waitForCallsTransactionHash, } from '../utils.js';\nimport { createSmartAccount } from './createSmartAccount.js';\nexport async function createSubAccountSigner({ address, client, factory, factoryData, owner, ownerIndex, parentAddress, attribution, }) {\n    var _a;\n    const subAccount = {\n        address,\n        factory,\n        factoryData,\n    };\n    const chainId = (_a = client.chain) === null || _a === void 0 ? void 0 : _a.id;\n    if (!chainId) {\n        throw standardErrors.rpc.internal('chainId not found');\n    }\n    const account = await createSmartAccount({\n        owner,\n        ownerIndex: ownerIndex !== null && ownerIndex !== void 0 ? ownerIndex : 1,\n        address,\n        client,\n        factoryData,\n    });\n    const request = async (args) => {\n        var _a, _b, _c, _d, _e, _f;\n        try {\n            switch (args.method) {\n                case 'wallet_addSubAccount':\n                    return subAccount;\n                case 'eth_accounts':\n                    return [subAccount.address];\n                case 'eth_coinbase':\n                    return subAccount.address;\n                case 'net_version':\n                    return chainId.toString();\n                case 'eth_chainId':\n                    return numberToHex(chainId);\n                case 'eth_sendTransaction': {\n                    assertArrayPresence(args.params);\n                    const rawParams = args.params[0];\n                    assertPresence(rawParams.to, standardErrors.rpc.invalidParams('to is required'));\n                    const params = {\n                        to: rawParams.to,\n                        data: ensureHexString((_a = rawParams.data) !== null && _a !== void 0 ? _a : '0x', true),\n                        value: ensureHexString((_b = rawParams.value) !== null && _b !== void 0 ? _b : '0x', true),\n                        from: (_c = rawParams.from) !== null && _c !== void 0 ? _c : subAccount.address,\n                    };\n                    // Transform into wallet_sendCalls request\n                    const sendCallsRequest = createWalletSendCallsRequest({\n                        calls: [params],\n                        chainId,\n                        from: params.from,\n                    });\n                    const response = (await request(sendCallsRequest));\n                    return waitForCallsTransactionHash({\n                        client,\n                        id: response,\n                    });\n                }\n                case 'wallet_sendCalls': {\n                    assertArrayPresence(args.params);\n                    // Get the client for the chain\n                    const chainId = get(args.params[0], 'chainId');\n                    if (!chainId) {\n                        throw standardErrors.rpc.invalidParams('chainId is required');\n                    }\n                    if (!isHex(chainId)) {\n                        throw standardErrors.rpc.invalidParams('chainId must be a hex encoded integer');\n                    }\n                    if (!args.params[0]) {\n                        throw standardErrors.rpc.invalidParams('params are required');\n                    }\n                    if (!('calls' in args.params[0])) {\n                        throw standardErrors.rpc.invalidParams('calls are required');\n                    }\n                    let prepareCallsRequest = {\n                        method: 'wallet_prepareCalls',\n                        params: [\n                            {\n                                version: '1.0',\n                                calls: args.params[0].calls,\n                                chainId: chainId,\n                                from: subAccount.address,\n                                capabilities: 'capabilities' in args.params[0]\n                                    ? args.params[0].capabilities\n                                    : {},\n                            },\n                        ],\n                    };\n                    if (parentAddress) {\n                        prepareCallsRequest = injectRequestCapabilities(prepareCallsRequest, {\n                            funding: [\n                                {\n                                    type: 'spendPermission',\n                                    data: {\n                                        autoApply: true,\n                                        sources: [parentAddress],\n                                        preference: 'PREFER_DIRECT_BALANCE',\n                                    },\n                                },\n                            ],\n                        });\n                    }\n                    let prepareCallsResponse = (await request(prepareCallsRequest));\n                    const signResponse = await ((_e = (_d = owner).sign) === null || _e === void 0 ? void 0 : _e.call(_d, {\n                        // Hash returned from wallet_prepareCalls is double hex encoded\n                        hash: hexToString(prepareCallsResponse.signatureRequest.hash),\n                    }));\n                    let signatureData;\n                    if (!signResponse) {\n                        throw standardErrors.rpc.internal('signature not found');\n                    }\n                    if (isHex(signResponse)) {\n                        signatureData = {\n                            type: 'secp256k1',\n                            data: {\n                                address: owner.address,\n                                signature: signResponse,\n                            },\n                        };\n                    }\n                    else {\n                        signatureData = {\n                            type: 'webauthn',\n                            data: {\n                                signature: JSON.stringify(convertCredentialToJSON(Object.assign({ id: (_f = owner.id) !== null && _f !== void 0 ? _f : '1' }, signResponse))),\n                                publicKey: owner.publicKey,\n                            },\n                        };\n                    }\n                    const sendPreparedCallsResponse = (await request({\n                        method: 'wallet_sendPreparedCalls',\n                        params: [\n                            {\n                                version: '1.0',\n                                type: prepareCallsResponse.type,\n                                data: prepareCallsResponse.userOp,\n                                chainId: prepareCallsResponse.chainId,\n                                signature: signatureData,\n                            },\n                        ],\n                    }));\n                    return sendPreparedCallsResponse[0];\n                }\n                case 'wallet_sendPreparedCalls': {\n                    assertArrayPresence(args.params);\n                    // Get the client for the chain\n                    const chainId = get(args.params[0], 'chainId');\n                    if (!chainId) {\n                        throw standardErrors.rpc.invalidParams('chainId is required');\n                    }\n                    if (!isHex(chainId)) {\n                        throw standardErrors.rpc.invalidParams('chainId must be a hex encoded integer');\n                    }\n                    const sendPreparedCallsResponse = await client.request({\n                        method: 'wallet_sendPreparedCalls',\n                        params: args.params,\n                    });\n                    return sendPreparedCallsResponse;\n                }\n                case 'wallet_prepareCalls': {\n                    assertArrayPresence(args.params);\n                    // Get the client for the chain\n                    const chainId = get(args.params[0], 'chainId');\n                    if (!chainId) {\n                        throw standardErrors.rpc.invalidParams('chainId is required');\n                    }\n                    if (!isHex(chainId)) {\n                        throw standardErrors.rpc.invalidParams('chainId must be a hex encoded integer');\n                    }\n                    if (!args.params[0]) {\n                        throw standardErrors.rpc.invalidParams('params are required');\n                    }\n                    if (!get(args.params[0], 'calls')) {\n                        throw standardErrors.rpc.invalidParams('calls are required');\n                    }\n                    const prepareCallsParams = args.params[0];\n                    if (attribution &&\n                        prepareCallsParams.capabilities &&\n                        !('attribution' in prepareCallsParams.capabilities)) {\n                        prepareCallsParams.capabilities.attribution = attribution;\n                    }\n                    const prepareCallsResponse = await client.request({\n                        method: 'wallet_prepareCalls',\n                        params: [Object.assign(Object.assign({}, args.params[0]), { chainId: chainId })],\n                    });\n                    return prepareCallsResponse;\n                }\n                case 'personal_sign': {\n                    assertArrayPresence(args.params);\n                    // Param is expected to be a hex encoded string\n                    if (!isHex(args.params[0])) {\n                        throw standardErrors.rpc.invalidParams('message must be a hex encoded string');\n                    }\n                    // signMessage expects the unencoded message\n                    const message = hexToString(args.params[0]);\n                    return account.signMessage({ message });\n                }\n                case 'eth_signTypedData_v4': {\n                    assertArrayPresence(args.params);\n                    const typedData = typeof args.params[1] === 'string' ? JSON.parse(args.params[1]) : args.params[1];\n                    return account.signTypedData(typedData);\n                }\n                case 'eth_signTypedData_v1':\n                case 'eth_signTypedData_v3':\n                case 'wallet_addEthereumChain':\n                case 'wallet_switchEthereumChain':\n                default:\n                    throw standardErrors.rpc.methodNotSupported();\n            }\n        }\n        catch (error) {\n            // Convert error to RPC error if possible\n            if (isViemError(error)) {\n                const newError = viemHttpErrorToProviderError(error);\n                if (newError) {\n                    throw newError;\n                }\n            }\n            throw error;\n        }\n    };\n    return { request };\n}\n//# sourceMappingURL=createSubAccountSigner.js.map","import { standardErrors } from '../../../core/error/errors.js';\nimport { decodeFunctionData, getAddress, isAddress, pad } from 'viem';\nimport { getCode, readContract } from 'viem/actions';\nimport { abi, factoryAbi, factoryAddress } from './constants.js';\nexport async function findOwnerIndex({ address, client, publicKey, factory, factoryData, }) {\n    const code = await getCode(client, {\n        address,\n    });\n    // Check index of owner in the factoryData\n    // Note: importing an undeployed contract might need to be handled differently\n    // The implemention will likely require the signer to tell us the index\n    if (!code && factory && factoryData) {\n        if (getAddress(factory) !== getAddress(factoryAddress)) {\n            throw standardErrors.rpc.internal('unknown factory address');\n        }\n        const initData = decodeFunctionData({\n            abi: factoryAbi,\n            data: factoryData,\n        });\n        if (initData.functionName !== 'createAccount') {\n            throw standardErrors.rpc.internal('unknown factory function');\n        }\n        const [owners] = initData.args;\n        return owners.findIndex((owner) => {\n            return owner.toLowerCase() === formatPublicKey(publicKey).toLowerCase();\n        });\n    }\n    const ownerCount = await readContract(client, {\n        address,\n        abi,\n        functionName: 'ownerCount',\n    });\n    // Iterate from highest index down and return early when found\n    for (let i = Number(ownerCount) - 1; i >= 0; i--) {\n        const owner = await readContract(client, {\n            address,\n            abi,\n            functionName: 'ownerAtIndex',\n            args: [BigInt(i)],\n        });\n        const formatted = formatPublicKey(publicKey);\n        if (owner.toLowerCase() === formatted.toLowerCase()) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Formats 20 byte addresses to 32 byte public keys. Contract uses 32 byte keys for owners.\n * @param publicKey - The public key to format\n * @returns The formatted public key\n */\nexport function formatPublicKey(publicKey) {\n    if (isAddress(publicKey)) {\n        return pad(publicKey);\n    }\n    return publicKey;\n}\n//# sourceMappingURL=findOwnerIndex.js.map","import { logSnackbarActionClicked, logSnackbarShown } from '../../../core/telemetry/events/snackbar.js';\nimport { initSnackbar } from '../../../util/web.js';\nexport async function presentAddOwnerDialog() {\n    const snackbar = initSnackbar();\n    return new Promise((resolve) => {\n        logSnackbarShown({ snackbarContext: 'sub_account_add_owner' });\n        snackbar.presentItem({\n            autoExpand: true,\n            message: 'App requires a signer update',\n            menuItems: [\n                {\n                    isRed: false,\n                    info: 'Confirm',\n                    svgWidth: '10',\n                    svgHeight: '11',\n                    path: '',\n                    defaultFillRule: 'evenodd',\n                    defaultClipRule: 'evenodd',\n                    onClick: () => {\n                        logSnackbarActionClicked({\n                            snackbarContext: 'sub_account_add_owner',\n                            snackbarAction: 'confirm',\n                        });\n                        snackbar.clear();\n                        resolve('authenticate');\n                    },\n                },\n                {\n                    isRed: true,\n                    info: 'Cancel',\n                    svgWidth: '10',\n                    svgHeight: '11',\n                    path: '',\n                    defaultFillRule: 'evenodd',\n                    defaultClipRule: 'evenodd',\n                    onClick: () => {\n                        logSnackbarActionClicked({\n                            snackbarContext: 'sub_account_add_owner',\n                            snackbarAction: 'cancel',\n                        });\n                        snackbar.clear();\n                        resolve('cancel');\n                    },\n                },\n            ],\n        });\n    });\n}\n//# sourceMappingURL=presentAddOwnerDialog.js.map","import { standardErrors } from \"../../../core/error/errors.js\";\nimport { getClient } from \"../../../store/chain-clients/utils.js\";\nimport { store } from \"../../../store/store.js\";\nimport { assertPresence } from \"../../../util/assertPresence.js\";\nimport { decodeAbiParameters, encodeFunctionData, numberToHex, toHex, } from \"viem\";\nimport { waitForCallsStatus } from \"viem/experimental\";\nimport { abi } from \"../utils/constants.js\";\nimport { findOwnerIndex } from \"../utils/findOwnerIndex.js\";\nimport { presentAddOwnerDialog } from \"./presentAddOwnerDialog.js\";\nexport async function handleAddSubAccountOwner({ ownerAccount, globalAccountRequest, }) {\n    var _a, _b;\n    const account = store.account.get();\n    const subAccount = store.subAccounts.get();\n    const globalAccount = (_a = account.accounts) === null || _a === void 0 ? void 0 : _a.find((account) => account.toLowerCase() !== (subAccount === null || subAccount === void 0 ? void 0 : subAccount.address.toLowerCase()));\n    assertPresence(globalAccount, standardErrors.provider.unauthorized(\"no global account\"));\n    assertPresence((_b = account.chain) === null || _b === void 0 ? void 0 : _b.id, standardErrors.provider.unauthorized(\"no chain id\"));\n    assertPresence(subAccount === null || subAccount === void 0 ? void 0 : subAccount.address, standardErrors.provider.unauthorized(\"no sub account\"));\n    const calls = [];\n    if (ownerAccount.type === \"local\" && ownerAccount.address) {\n        calls.push({\n            to: subAccount.address,\n            data: encodeFunctionData({\n                abi,\n                functionName: \"addOwnerAddress\",\n                args: [ownerAccount.address],\n            }),\n            value: toHex(0),\n        });\n    }\n    if (ownerAccount.publicKey) {\n        const [x, y] = decodeAbiParameters([{ type: \"bytes32\" }, { type: \"bytes32\" }], ownerAccount.publicKey);\n        calls.push({\n            to: subAccount.address,\n            data: encodeFunctionData({\n                abi,\n                functionName: \"addOwnerPublicKey\",\n                args: [x, y],\n            }),\n            value: toHex(0),\n        });\n    }\n    const request = {\n        method: \"wallet_sendCalls\",\n        params: [\n            {\n                version: \"1\",\n                calls,\n                chainId: numberToHex(84532),\n                from: globalAccount,\n            },\n        ],\n    };\n    const selection = await presentAddOwnerDialog();\n    if (selection === \"cancel\") {\n        throw standardErrors.provider.unauthorized(\"user cancelled\");\n    }\n    const callsId = (await globalAccountRequest(request));\n    const client = getClient(account.chain.id);\n    assertPresence(client, standardErrors.rpc.internal(`client not found for chainId ${account.chain.id}`));\n    const callsResult = await waitForCallsStatus(client, {\n        id: callsId,\n    });\n    if (callsResult.status !== 'success') {\n        throw standardErrors.rpc.internal(\"add owner call failed\");\n    }\n    const ownerIndex = await findOwnerIndex({\n        address: subAccount.address,\n        publicKey: ownerAccount.type === \"local\" && ownerAccount.address\n            ? ownerAccount.address\n            : ownerAccount.publicKey,\n        client,\n    });\n    if (ownerIndex === -1) {\n        throw standardErrors.rpc.internal(\"failed to find owner index\");\n    }\n    return ownerIndex;\n}\n//# sourceMappingURL=handleAddSubAccountOwner.js.map","import { standardErrors } from '../../../core/error/errors.js';\nimport { assertPresence } from '../../../util/assertPresence.js';\nimport { encodeFunctionData, erc20Abi, hexToBigInt, numberToHex, } from 'viem';\nimport { createSpendPermissionBatchMessage, createSpendPermissionMessage, createWalletSendCallsRequest, isEthSendTransactionParams, isSendCallsParams, parseFundingOptions, presentSubAccountFundingDialog, waitForCallsTransactionHash, } from '../utils.js';\nimport { abi } from './constants.js';\nexport async function handleInsufficientBalanceError({ errorData, globalAccountAddress, subAccountAddress, client, request, subAccountRequest, globalAccountRequest, }) {\n    var _a;\n    const chainId = (_a = client.chain) === null || _a === void 0 ? void 0 : _a.id;\n    assertPresence(chainId, standardErrors.rpc.internal(`invalid chainId`));\n    // Build spend permission requests for each token and check\n    // that each token has global account as sufficient source\n    // If not, will throw error\n    const spendPermissionRequests = parseFundingOptions({\n        errorData,\n        sourceAddress: globalAccountAddress,\n    });\n    // Present options to user via snackbar\n    const userChoice = await presentSubAccountFundingDialog();\n    if (userChoice === 'cancel') {\n        throw new Error('User cancelled funding');\n    }\n    let signatureRequest;\n    // Request 3x the amount per day -- maybe we can do something smarter here\n    const defaultPeriod = 60 * 60 * 24;\n    const defaultMultiplier = 3;\n    if (userChoice === 'update_permission') {\n        if (spendPermissionRequests.length === 1) {\n            const spendPermission = spendPermissionRequests[0];\n            const message = createSpendPermissionMessage({\n                spendPermission: {\n                    token: spendPermission.token,\n                    allowance: numberToHex(spendPermission.requiredAmount * BigInt(defaultMultiplier)),\n                    period: defaultPeriod,\n                    account: globalAccountAddress,\n                    spender: subAccountAddress,\n                    start: 0,\n                    end: 281474976710655,\n                    salt: numberToHex(BigInt(Math.floor(Math.random() * Number.MAX_SAFE_INTEGER))),\n                    extraData: '0x',\n                },\n                chainId,\n            });\n            signatureRequest = {\n                method: 'eth_signTypedData_v4',\n                params: [globalAccountAddress, message],\n            };\n        }\n        else {\n            // Batch spend permission request\n            const message = createSpendPermissionBatchMessage({\n                spendPermissionBatch: {\n                    account: globalAccountAddress,\n                    period: defaultPeriod,\n                    start: 0,\n                    end: 281474976710655,\n                    permissions: spendPermissionRequests.map((spendPermission) => ({\n                        token: spendPermission.token,\n                        allowance: numberToHex(spendPermission.requiredAmount * BigInt(defaultMultiplier)),\n                        period: defaultPeriod,\n                        account: globalAccountAddress,\n                        spender: subAccountAddress,\n                        salt: '0x0',\n                        extraData: '0x',\n                    })),\n                },\n                chainId,\n            });\n            signatureRequest = {\n                method: 'eth_signTypedData_v4',\n                params: [globalAccountAddress, message],\n            };\n        }\n        try {\n            // Request the signature - will be stored in backend\n            await globalAccountRequest(signatureRequest);\n        }\n        catch (error) {\n            console.error(error);\n            // If the signature request is denied, we throw the original error\n            throw new Error('User denied spend permission request');\n        }\n        // Retry the original request after updating permissions\n        return subAccountRequest(request);\n    }\n    /* Handle continue_popup path */\n    // Construct calls to transfer required tokens to sub account\n    const transferCalls = spendPermissionRequests.map((spendPermission) => {\n        const isNative = spendPermission.token.toLowerCase() ===\n            '0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE'.toLowerCase();\n        if (isNative) {\n            return {\n                to: subAccountAddress,\n                value: numberToHex(spendPermission.requiredAmount),\n                data: '0x',\n            };\n        }\n        return {\n            to: spendPermission.token,\n            value: '0x0',\n            data: encodeFunctionData({\n                abi: erc20Abi,\n                functionName: 'transfer',\n                args: [subAccountAddress, spendPermission.requiredAmount],\n            }),\n        };\n    });\n    // Construct call to execute the original calls using executeBatch\n    let originalSendCallsParams;\n    if (request.method === 'wallet_sendCalls' && isSendCallsParams(request.params)) {\n        originalSendCallsParams = request.params[0];\n    }\n    else if (request.method === 'eth_sendTransaction' &&\n        isEthSendTransactionParams(request.params)) {\n        const sendCallsRequest = createWalletSendCallsRequest({\n            calls: [request.params[0]],\n            chainId,\n            from: request.params[0].from,\n        });\n        originalSendCallsParams = sendCallsRequest.params[0];\n    }\n    else {\n        throw new Error('Could not get original call');\n    }\n    const subAccountCallData = encodeFunctionData({\n        abi,\n        functionName: 'executeBatch',\n        args: [\n            originalSendCallsParams.calls.map((call) => {\n                var _a, _b;\n                return ({\n                    target: call.to,\n                    value: hexToBigInt((_a = call.value) !== null && _a !== void 0 ? _a : '0x0'),\n                    data: (_b = call.data) !== null && _b !== void 0 ? _b : '0x',\n                });\n            }),\n        ],\n    });\n    // Send using wallet_sendCalls\n    const calls = [\n        ...transferCalls,\n        { data: subAccountCallData, to: subAccountAddress, value: '0x0' },\n    ];\n    const result = await globalAccountRequest({\n        method: 'wallet_sendCalls',\n        params: [Object.assign(Object.assign({}, originalSendCallsParams), { calls, from: globalAccountAddress })],\n    });\n    if (request.method === 'eth_sendTransaction') {\n        return waitForCallsTransactionHash({\n            client,\n            id: result,\n        });\n    }\n    return result;\n}\n//# sourceMappingURL=handleInsufficientBalance.js.map","import { CB_WALLET_RPC_URL } from '../../core/constants.js';\nimport { hexToNumber, isAddressEqual, numberToHex } from 'viem';\nimport { isActionableHttpRequestError, isViemError, standardErrors } from '../../core/error/errors.js';\nimport { logHandshakeCompleted, logHandshakeError, logHandshakeStarted, logRequestCompleted, logRequestError, logRequestStarted, } from '../../core/telemetry/events/scw-signer.js';\nimport { logAddOwnerCompleted, logAddOwnerError, logAddOwnerStarted, logInsufficientBalanceErrorHandlingCompleted, logInsufficientBalanceErrorHandlingError, logInsufficientBalanceErrorHandlingStarted, logSubAccountRequestCompleted, logSubAccountRequestError, logSubAccountRequestStarted, } from '../../core/telemetry/events/scw-sub-account.js';\nimport { parseErrorMessageFromAny } from '../../core/telemetry/utils.js';\nimport { ensureIntNumber, hexStringFromNumber } from '../../core/type/util.js';\nimport { createClients, getClient } from '../../store/chain-clients/utils.js';\nimport { correlationIds } from '../../store/correlation-ids/store.js';\nimport { store } from '../../store/store.js';\nimport { assertArrayPresence, assertPresence } from '../../util/assertPresence.js';\nimport { assertSubAccount } from '../../util/assertSubAccount.js';\nimport { decryptContent, encryptContent, exportKeyToHexString, importKeyFromHexString, } from '../../util/cipher.js';\nimport { fetchRPCRequest } from '../../util/provider.js';\nimport { getCryptoKeyAccount } from '../../kms/crypto-key/index.js';\nimport { SCWKeyManager } from './SCWKeyManager.js';\nimport { addSenderToRequest, appendWithoutDuplicates, assertFetchPermissionsRequest, assertGetCapabilitiesParams, assertParamsChainId, fillMissingParamsForFetchPermissions, getCachedWalletConnectResponse, getSenderFromRequest, initSubAccountConfig, injectRequestCapabilities, makeDataSuffix, prependWithoutDuplicates, requestHasCapability, } from './utils.js';\nimport { createSubAccountSigner } from './utils/createSubAccountSigner.js';\nimport { findOwnerIndex } from './utils/findOwnerIndex.js';\nimport { handleAddSubAccountOwner } from './utils/handleAddSubAccountOwner.js';\nimport { handleInsufficientBalanceError } from './utils/handleInsufficientBalance.js';\nexport class SCWSigner {\n    constructor(params) {\n        var _a, _b, _c, _d;\n        this.communicator = params.communicator;\n        this.callback = params.callback;\n        this.keyManager = new SCWKeyManager();\n        const { account, chains } = store.getState();\n        this.accounts = (_a = account.accounts) !== null && _a !== void 0 ? _a : [];\n        this.chain = (_b = account.chain) !== null && _b !== void 0 ? _b : {\n            id: (_d = (_c = params.metadata.appChainIds) === null || _c === void 0 ? void 0 : _c[0]) !== null && _d !== void 0 ? _d : 1,\n        };\n        if (chains) {\n            createClients(chains);\n        }\n    }\n    async handshake(args) {\n        var _a, _b, _c;\n        const correlationId = correlationIds.get(args);\n        logHandshakeStarted({ method: args.method, correlationId });\n        try {\n            // Open the popup before constructing the request message.\n            // This is to ensure that the popup is not blocked by some browsers (i.e. Safari)\n            await ((_b = (_a = this.communicator).waitForPopupLoaded) === null || _b === void 0 ? void 0 : _b.call(_a));\n            const handshakeMessage = await this.createRequestMessage({\n                handshake: {\n                    method: args.method,\n                    params: (_c = args.params) !== null && _c !== void 0 ? _c : [],\n                },\n            }, correlationId);\n            const response = await this.communicator.postRequestAndWaitForResponse(handshakeMessage);\n            // store peer's public key\n            if ('failure' in response.content) {\n                throw response.content.failure;\n            }\n            const peerPublicKey = await importKeyFromHexString('public', response.sender);\n            await this.keyManager.setPeerPublicKey(peerPublicKey);\n            const decrypted = await this.decryptResponseMessage(response);\n            this.handleResponse(args, decrypted);\n            logHandshakeCompleted({ method: args.method, correlationId });\n        }\n        catch (error) {\n            logHandshakeError({\n                method: args.method,\n                correlationId,\n                errorMessage: parseErrorMessageFromAny(error),\n            });\n            throw error;\n        }\n    }\n    async request(request) {\n        const correlationId = correlationIds.get(request);\n        logRequestStarted({ method: request.method, correlationId });\n        try {\n            const result = await this._request(request);\n            logRequestCompleted({ method: request.method, correlationId });\n            return result;\n        }\n        catch (error) {\n            logRequestError({\n                method: request.method,\n                correlationId,\n                errorMessage: parseErrorMessageFromAny(error),\n            });\n            throw error;\n        }\n    }\n    async _request(request) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        if (this.accounts.length === 0) {\n            switch (request.method) {\n                case 'eth_requestAccounts': {\n                    // Wait for the popup to be loaded before making async calls\n                    await ((_b = (_a = this.communicator).waitForPopupLoaded) === null || _b === void 0 ? void 0 : _b.call(_a));\n                    await initSubAccountConfig();\n                    // This will populate the store with the sub account\n                    await this.request({\n                        method: 'wallet_connect',\n                        params: [\n                            {\n                                version: '1',\n                                capabilities: Object.assign({}, ((_d = (_c = store.subAccountsConfig.get()) === null || _c === void 0 ? void 0 : _c.capabilities) !== null && _d !== void 0 ? _d : {})),\n                            },\n                        ],\n                    });\n                    return this.accounts;\n                }\n                case 'wallet_switchEthereumChain': {\n                    assertParamsChainId(request.params);\n                    this.chain.id = Number(request.params[0].chainId);\n                    return;\n                }\n                case 'wallet_connect': {\n                    // Wait for the popup to be loaded before making async calls\n                    await ((_f = (_e = this.communicator).waitForPopupLoaded) === null || _f === void 0 ? void 0 : _f.call(_e));\n                    await initSubAccountConfig();\n                    // Check if addSubAccount capability is present and if so, inject the the sub account capabilities\n                    let capabilitiesToInject = {};\n                    if (requestHasCapability(request, 'addSubAccount')) {\n                        capabilitiesToInject = (_h = (_g = store.subAccountsConfig.get()) === null || _g === void 0 ? void 0 : _g.capabilities) !== null && _h !== void 0 ? _h : {};\n                    }\n                    const modifiedRequest = injectRequestCapabilities(request, capabilitiesToInject);\n                    return this.sendRequestToPopup(modifiedRequest);\n                }\n                case 'wallet_sendCalls':\n                case 'wallet_sign': {\n                    return this.sendRequestToPopup(request);\n                }\n                default:\n                    throw standardErrors.provider.unauthorized();\n            }\n        }\n        if (this.shouldRequestUseSubAccountSigner(request)) {\n            const correlationId = correlationIds.get(request);\n            logSubAccountRequestStarted({ method: request.method, correlationId });\n            try {\n                const result = await this.sendRequestToSubAccountSigner(request);\n                logSubAccountRequestCompleted({ method: request.method, correlationId });\n                return result;\n            }\n            catch (error) {\n                logSubAccountRequestError({\n                    method: request.method,\n                    correlationId,\n                    errorMessage: parseErrorMessageFromAny(error),\n                });\n                throw error;\n            }\n        }\n        switch (request.method) {\n            case 'eth_requestAccounts':\n            case 'eth_accounts': {\n                const subAccount = store.subAccounts.get();\n                const subAccountsConfig = store.subAccountsConfig.get();\n                if (subAccount === null || subAccount === void 0 ? void 0 : subAccount.address) {\n                    // if auto sub accounts are enabled and we have a sub account, we need to return it as a top level account\n                    // otherwise, we just append it to the accounts array\n                    this.accounts = (subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.enableAutoSubAccounts)\n                        ? prependWithoutDuplicates(this.accounts, subAccount.address)\n                        : appendWithoutDuplicates(this.accounts, subAccount.address);\n                }\n                (_j = this.callback) === null || _j === void 0 ? void 0 : _j.call(this, 'connect', { chainId: numberToHex(this.chain.id) });\n                return this.accounts;\n            }\n            case 'eth_coinbase':\n                return this.accounts[0];\n            case 'net_version':\n                return this.chain.id;\n            case 'eth_chainId':\n                return numberToHex(this.chain.id);\n            case 'wallet_getCapabilities':\n                return this.handleGetCapabilitiesRequest(request);\n            case 'wallet_switchEthereumChain':\n                return this.handleSwitchChainRequest(request);\n            case 'eth_ecRecover':\n            case 'personal_sign':\n            case 'wallet_sign':\n            case 'personal_ecRecover':\n            case 'eth_signTransaction':\n            case 'eth_sendTransaction':\n            case 'eth_signTypedData_v1':\n            case 'eth_signTypedData_v3':\n            case 'eth_signTypedData_v4':\n            case 'eth_signTypedData':\n            case 'wallet_addEthereumChain':\n            case 'wallet_watchAsset':\n            case 'wallet_sendCalls':\n            case 'wallet_showCallsStatus':\n            case 'wallet_grantPermissions':\n                return this.sendRequestToPopup(request);\n            case 'wallet_connect': {\n                // Return cached wallet connect response if available\n                const cachedResponse = await getCachedWalletConnectResponse();\n                if (cachedResponse) {\n                    return cachedResponse;\n                }\n                // Wait for the popup to be loaded before making async calls\n                await ((_l = (_k = this.communicator).waitForPopupLoaded) === null || _l === void 0 ? void 0 : _l.call(_k));\n                await initSubAccountConfig();\n                const subAccountsConfig = store.subAccountsConfig.get();\n                const modifiedRequest = injectRequestCapabilities(request, (_m = subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.capabilities) !== null && _m !== void 0 ? _m : {});\n                (_o = this.callback) === null || _o === void 0 ? void 0 : _o.call(this, 'connect', { chainId: numberToHex(this.chain.id) });\n                return this.sendRequestToPopup(modifiedRequest);\n            }\n            // Sub Account Support\n            case 'wallet_getSubAccounts': {\n                const subAccount = store.subAccounts.get();\n                if (subAccount === null || subAccount === void 0 ? void 0 : subAccount.address) {\n                    return {\n                        subAccounts: [subAccount],\n                    };\n                }\n                if (!this.chain.rpcUrl) {\n                    throw standardErrors.rpc.internal('No RPC URL set for chain');\n                }\n                const response = (await fetchRPCRequest(request, this.chain.rpcUrl));\n                assertArrayPresence(response.subAccounts, 'subAccounts');\n                if (response.subAccounts.length > 0) {\n                    // cache the sub account\n                    assertSubAccount(response.subAccounts[0]);\n                    const subAccount = response.subAccounts[0];\n                    store.subAccounts.set({\n                        address: subAccount.address,\n                        factory: subAccount.factory,\n                        factoryData: subAccount.factoryData,\n                    });\n                }\n                return response;\n            }\n            case 'wallet_addSubAccount':\n                return this.addSubAccount(request);\n            case 'coinbase_fetchPermissions': {\n                assertFetchPermissionsRequest(request);\n                const completeRequest = fillMissingParamsForFetchPermissions(request);\n                const permissions = (await fetchRPCRequest(completeRequest, CB_WALLET_RPC_URL));\n                const requestedChainId = hexToNumber((_p = completeRequest.params) === null || _p === void 0 ? void 0 : _p[0].chainId);\n                store.spendPermissions.set(permissions.permissions.map((permission) => (Object.assign(Object.assign({}, permission), { chainId: requestedChainId }))));\n                return permissions;\n            }\n            default:\n                if (!this.chain.rpcUrl) {\n                    throw standardErrors.rpc.internal('No RPC URL set for chain');\n                }\n                return fetchRPCRequest(request, this.chain.rpcUrl);\n        }\n    }\n    async sendRequestToPopup(request) {\n        var _a, _b;\n        // Open the popup before constructing the request message.\n        // This is to ensure that the popup is not blocked by some browsers (i.e. Safari)\n        await ((_b = (_a = this.communicator).waitForPopupLoaded) === null || _b === void 0 ? void 0 : _b.call(_a));\n        const response = await this.sendEncryptedRequest(request);\n        const decrypted = await this.decryptResponseMessage(response);\n        return this.handleResponse(request, decrypted);\n    }\n    async handleResponse(request, decrypted) {\n        var _a, _b, _c, _d, _e;\n        const result = decrypted.result;\n        if ('error' in result)\n            throw result.error;\n        switch (request.method) {\n            case 'eth_requestAccounts': {\n                const accounts = result.value;\n                this.accounts = accounts;\n                store.account.set({\n                    accounts,\n                    chain: this.chain,\n                });\n                (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'accountsChanged', accounts);\n                break;\n            }\n            case 'wallet_connect': {\n                const response = result.value;\n                const accounts = response.accounts.map((account) => account.address);\n                this.accounts = accounts;\n                store.account.set({\n                    accounts,\n                });\n                const account = response.accounts.at(0);\n                const capabilities = account === null || account === void 0 ? void 0 : account.capabilities;\n                if (capabilities === null || capabilities === void 0 ? void 0 : capabilities.subAccounts) {\n                    const capabilityResponse = capabilities === null || capabilities === void 0 ? void 0 : capabilities.subAccounts;\n                    assertArrayPresence(capabilityResponse, 'subAccounts');\n                    assertSubAccount(capabilityResponse[0]);\n                    store.subAccounts.set({\n                        address: capabilityResponse[0].address,\n                        factory: capabilityResponse[0].factory,\n                        factoryData: capabilityResponse[0].factoryData,\n                    });\n                }\n                let accounts_ = [this.accounts[0]];\n                const subAccount = store.subAccounts.get();\n                const subAccountsConfig = store.subAccountsConfig.get();\n                if (subAccount === null || subAccount === void 0 ? void 0 : subAccount.address) {\n                    // Sub account should be returned as a top level account if auto sub accounts are enabled\n                    this.accounts = (subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.enableAutoSubAccounts)\n                        ? prependWithoutDuplicates(this.accounts, subAccount.address)\n                        : appendWithoutDuplicates(this.accounts, subAccount.address);\n                }\n                const spendPermissions = (_c = (_b = response === null || response === void 0 ? void 0 : response.accounts) === null || _b === void 0 ? void 0 : _b[0].capabilities) === null || _c === void 0 ? void 0 : _c.spendPermissions;\n                if (spendPermissions && 'permissions' in spendPermissions) {\n                    store.spendPermissions.set(spendPermissions === null || spendPermissions === void 0 ? void 0 : spendPermissions.permissions);\n                }\n                (_d = this.callback) === null || _d === void 0 ? void 0 : _d.call(this, 'accountsChanged', accounts_);\n                break;\n            }\n            case 'wallet_addSubAccount': {\n                assertSubAccount(result.value);\n                const subAccount = result.value;\n                store.subAccounts.set(subAccount);\n                const subAccountsConfig = store.subAccountsConfig.get();\n                this.accounts = (subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.enableAutoSubAccounts)\n                    ? prependWithoutDuplicates(this.accounts, subAccount.address)\n                    : appendWithoutDuplicates(this.accounts, subAccount.address);\n                (_e = this.callback) === null || _e === void 0 ? void 0 : _e.call(this, 'accountsChanged', this.accounts);\n                break;\n            }\n            default:\n                break;\n        }\n        return result.value;\n    }\n    async cleanup() {\n        var _a, _b;\n        const metadata = store.config.get().metadata;\n        await this.keyManager.clear();\n        // clear the store\n        store.account.clear();\n        store.subAccounts.clear();\n        store.spendPermissions.clear();\n        store.chains.clear();\n        // reset the signer\n        this.accounts = [];\n        this.chain = {\n            id: (_b = (_a = metadata === null || metadata === void 0 ? void 0 : metadata.appChainIds) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : 1,\n        };\n    }\n    /**\n     * @returns `null` if the request was successful.\n     * https://eips.ethereum.org/EIPS/eip-3326#wallet_switchethereumchain\n     */\n    async handleSwitchChainRequest(request) {\n        assertParamsChainId(request.params);\n        const chainId = ensureIntNumber(request.params[0].chainId);\n        const localResult = this.updateChain(chainId);\n        if (localResult)\n            return null;\n        const popupResult = await this.sendRequestToPopup(request);\n        if (popupResult === null) {\n            this.updateChain(chainId);\n        }\n        return popupResult;\n    }\n    async handleGetCapabilitiesRequest(request) {\n        assertGetCapabilitiesParams(request.params);\n        const requestedAccount = request.params[0];\n        const filterChainIds = request.params[1]; // Optional second parameter\n        if (!this.accounts.some((account) => isAddressEqual(account, requestedAccount))) {\n            throw standardErrors.provider.unauthorized('no active account found when getting capabilities');\n        }\n        const capabilities = store.getState().account.capabilities;\n        // Return empty object if capabilities is undefined\n        if (!capabilities) {\n            return {};\n        }\n        // If no filter is provided, return all capabilities\n        if (!filterChainIds || filterChainIds.length === 0) {\n            return capabilities;\n        }\n        // Convert filter chain IDs to numbers once for efficient lookup\n        const filterChainNumbers = new Set(filterChainIds.map((chainId) => hexToNumber(chainId)));\n        // Filter capabilities\n        const filteredCapabilities = Object.fromEntries(Object.entries(capabilities).filter(([capabilityKey]) => {\n            try {\n                const capabilityChainNumber = hexToNumber(capabilityKey);\n                return filterChainNumbers.has(capabilityChainNumber);\n            }\n            catch (_a) {\n                // If capabilityKey is not a valid hex string, exclude it\n                return false;\n            }\n        }));\n        return filteredCapabilities;\n    }\n    async sendEncryptedRequest(request) {\n        const sharedSecret = await this.keyManager.getSharedSecret();\n        if (!sharedSecret) {\n            throw standardErrors.provider.unauthorized('No shared secret found when encrypting request');\n        }\n        const encrypted = await encryptContent({\n            action: request,\n            chainId: this.chain.id,\n        }, sharedSecret);\n        const correlationId = correlationIds.get(request);\n        const message = await this.createRequestMessage({ encrypted }, correlationId);\n        return this.communicator.postRequestAndWaitForResponse(message);\n    }\n    async createRequestMessage(content, correlationId) {\n        const publicKey = await exportKeyToHexString('public', await this.keyManager.getOwnPublicKey());\n        return {\n            id: crypto.randomUUID(),\n            correlationId,\n            sender: publicKey,\n            content,\n            timestamp: new Date(),\n        };\n    }\n    async decryptResponseMessage(message) {\n        var _a, _b, _c;\n        const content = message.content;\n        // throw protocol level error\n        if ('failure' in content) {\n            throw content.failure;\n        }\n        const sharedSecret = await this.keyManager.getSharedSecret();\n        if (!sharedSecret) {\n            throw standardErrors.provider.unauthorized('Invalid session: no shared secret found when decrypting response');\n        }\n        const response = await decryptContent(content.encrypted, sharedSecret);\n        const availableChains = (_a = response.data) === null || _a === void 0 ? void 0 : _a.chains;\n        if (availableChains) {\n            const nativeCurrencies = (_b = response.data) === null || _b === void 0 ? void 0 : _b.nativeCurrencies;\n            const chains = Object.entries(availableChains).map(([id, rpcUrl]) => {\n                const nativeCurrency = nativeCurrencies === null || nativeCurrencies === void 0 ? void 0 : nativeCurrencies[Number(id)];\n                return Object.assign({ id: Number(id), rpcUrl }, (nativeCurrency ? { nativeCurrency } : {}));\n            });\n            store.chains.set(chains);\n            this.updateChain(this.chain.id, chains);\n            createClients(chains);\n        }\n        const walletCapabilities = (_c = response.data) === null || _c === void 0 ? void 0 : _c.capabilities;\n        if (walletCapabilities) {\n            store.account.set({\n                capabilities: walletCapabilities,\n            });\n        }\n        return response;\n    }\n    updateChain(chainId, newAvailableChains) {\n        var _a;\n        const state = store.getState();\n        const chains = newAvailableChains !== null && newAvailableChains !== void 0 ? newAvailableChains : state.chains;\n        const chain = chains === null || chains === void 0 ? void 0 : chains.find((chain) => chain.id === chainId);\n        if (!chain)\n            return false;\n        if (chain !== this.chain) {\n            this.chain = chain;\n            store.account.set({\n                chain,\n            });\n            (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'chainChanged', hexStringFromNumber(chain.id));\n        }\n        return true;\n    }\n    async addSubAccount(request) {\n        var _a, _b, _c, _d;\n        const state = store.getState();\n        const subAccount = state.subAccount;\n        const subAccountsConfig = store.subAccountsConfig.get();\n        if (subAccount === null || subAccount === void 0 ? void 0 : subAccount.address) {\n            this.accounts = (subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.enableAutoSubAccounts)\n                ? prependWithoutDuplicates(this.accounts, subAccount.address)\n                : appendWithoutDuplicates(this.accounts, subAccount.address);\n            (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'accountsChanged', this.accounts);\n            return subAccount;\n        }\n        // Wait for the popup to be loaded before sending the request\n        await ((_c = (_b = this.communicator).waitForPopupLoaded) === null || _c === void 0 ? void 0 : _c.call(_b));\n        if (Array.isArray(request.params) &&\n            request.params.length > 0 &&\n            request.params[0].account &&\n            request.params[0].account.type === 'create') {\n            let keys;\n            if (request.params[0].account.keys && request.params[0].account.keys.length > 0) {\n                keys = request.params[0].account.keys;\n            }\n            else {\n                const config = (_d = store.subAccountsConfig.get()) !== null && _d !== void 0 ? _d : {};\n                const { account: ownerAccount } = config.toOwnerAccount\n                    ? await config.toOwnerAccount()\n                    : await getCryptoKeyAccount();\n                if (!ownerAccount) {\n                    throw standardErrors.provider.unauthorized('could not get subaccount owner account when adding sub account');\n                }\n                keys = [\n                    {\n                        type: ownerAccount.address ? 'address' : 'webauthn-p256',\n                        publicKey: ownerAccount.address || ownerAccount.publicKey,\n                    },\n                ];\n            }\n            request.params[0].account.keys = keys;\n        }\n        const response = await this.sendRequestToPopup(request);\n        assertSubAccount(response);\n        return response;\n    }\n    shouldRequestUseSubAccountSigner(request) {\n        const sender = getSenderFromRequest(request);\n        const subAccount = store.subAccounts.get();\n        if (sender) {\n            return sender.toLowerCase() === (subAccount === null || subAccount === void 0 ? void 0 : subAccount.address.toLowerCase());\n        }\n        return false;\n    }\n    async sendRequestToSubAccountSigner(request) {\n        var _a;\n        const subAccount = store.subAccounts.get();\n        const subAccountsConfig = store.subAccountsConfig.get();\n        const config = store.config.get();\n        assertPresence(subAccount === null || subAccount === void 0 ? void 0 : subAccount.address, standardErrors.provider.unauthorized('no active sub account when sending request to sub account signer'));\n        // Get the owner account from the config\n        const ownerAccount = (subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.toOwnerAccount)\n            ? await subAccountsConfig.toOwnerAccount()\n            : await getCryptoKeyAccount();\n        assertPresence(ownerAccount === null || ownerAccount === void 0 ? void 0 : ownerAccount.account, standardErrors.provider.unauthorized('no active sub account owner when sending request to sub account signer'));\n        const sender = getSenderFromRequest(request);\n        // if sender is undefined, we inject the active sub account\n        // address into the params for the supported request methods\n        if (sender === undefined) {\n            request = addSenderToRequest(request, subAccount.address);\n        }\n        const client = getClient(this.chain.id);\n        assertPresence(client, standardErrors.rpc.internal(`client not found for chainId ${this.chain.id} when sending request to sub account signer`));\n        const globalAccountAddress = this.accounts.find((account) => account.toLowerCase() !== subAccount.address.toLowerCase());\n        assertPresence(globalAccountAddress, standardErrors.provider.unauthorized('no global account found when sending request to sub account signer'));\n        const dataSuffix = makeDataSuffix({\n            attribution: (_a = config.preference) === null || _a === void 0 ? void 0 : _a.attribution,\n            dappOrigin: window.location.origin,\n        });\n        const publicKey = ownerAccount.account.type === 'local'\n            ? ownerAccount.account.address\n            : ownerAccount.account.publicKey;\n        let ownerIndex = await findOwnerIndex({\n            address: subAccount.address,\n            factory: subAccount.factory,\n            factoryData: subAccount.factoryData,\n            publicKey,\n            client,\n        });\n        if (ownerIndex === -1) {\n            const correlationId = correlationIds.get(request);\n            logAddOwnerStarted({ method: request.method, correlationId });\n            try {\n                ownerIndex = await handleAddSubAccountOwner({\n                    ownerAccount: ownerAccount.account,\n                    globalAccountRequest: this.sendRequestToPopup.bind(this),\n                });\n                logAddOwnerCompleted({ method: request.method, correlationId });\n            }\n            catch (error) {\n                logAddOwnerError({\n                    method: request.method,\n                    correlationId,\n                    errorMessage: parseErrorMessageFromAny(error),\n                });\n                return standardErrors.provider.unauthorized('failed to add sub account owner when sending request to sub account signer');\n            }\n        }\n        const { request: subAccountRequest } = await createSubAccountSigner({\n            address: subAccount.address,\n            owner: ownerAccount.account,\n            client: client,\n            factory: subAccount.factory,\n            factoryData: subAccount.factoryData,\n            parentAddress: globalAccountAddress,\n            attribution: dataSuffix ? { suffix: dataSuffix } : undefined,\n            ownerIndex,\n        });\n        try {\n            const result = await subAccountRequest(request);\n            return result;\n        }\n        catch (error) {\n            let errorObject;\n            if (isViemError(error)) {\n                errorObject = JSON.parse(error.details);\n            }\n            else if (isActionableHttpRequestError(error)) {\n                errorObject = error;\n            }\n            else {\n                throw error;\n            }\n            if (!(isActionableHttpRequestError(errorObject) && errorObject.data)) {\n                throw error;\n            }\n            if (!errorObject.data) {\n                throw error;\n            }\n            const correlationId = correlationIds.get(request);\n            logInsufficientBalanceErrorHandlingStarted({ method: request.method, correlationId });\n            try {\n                const result = await handleInsufficientBalanceError({\n                    errorData: errorObject.data,\n                    globalAccountAddress,\n                    subAccountAddress: subAccount.address,\n                    client,\n                    request,\n                    subAccountRequest,\n                    globalAccountRequest: this.request.bind(this),\n                });\n                logInsufficientBalanceErrorHandlingCompleted({ method: request.method, correlationId });\n                return result;\n            }\n            catch (handlingError) {\n                console.error(handlingError);\n                logInsufficientBalanceErrorHandlingError({\n                    method: request.method,\n                    correlationId,\n                    errorMessage: parseErrorMessageFromAny(handlingError),\n                });\n                throw error;\n            }\n        }\n    }\n}\n//# sourceMappingURL=SCWSigner.js.map","import { ActionType, AnalyticsEventImportance, ComponentType, logEvent } from '../logEvent.js';\nexport const logHandshakeStarted = ({ method, correlationId, }) => {\n    logEvent('walletlink_signer.handshake.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n    }, AnalyticsEventImportance.high);\n};\nexport const logHandshakeError = ({ method, correlationId, errorMessage, }) => {\n    logEvent('walletlink_signer.handshake.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        errorMessage,\n    }, AnalyticsEventImportance.high);\n};\nexport const logHandshakeCompleted = ({ method, correlationId, }) => {\n    logEvent('walletlink_signer.handshake.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestStarted = ({ method, correlationId, }) => {\n    logEvent('walletlink_signer.request.started', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestError = ({ method, correlationId, errorMessage, }) => {\n    logEvent('walletlink_signer.request.error', {\n        action: ActionType.error,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n        errorMessage,\n    }, AnalyticsEventImportance.high);\n};\nexport const logRequestCompleted = ({ method, correlationId, }) => {\n    logEvent('walletlink_signer.request.completed', {\n        action: ActionType.unknown,\n        componentType: ComponentType.unknown,\n        method,\n        correlationId,\n    }, AnalyticsEventImportance.high);\n};\nexport const logWalletLinkConnectionConnectionFailed = () => {\n    logEvent('walletlink_signer.walletlink_connection.connection_failed', {\n        action: ActionType.measurement,\n        componentType: ComponentType.unknown,\n    }, AnalyticsEventImportance.high);\n};\nexport const logWalletLinkConnectionFetchUnseenEventsFailed = () => {\n    logEvent('walletlink_signer.walletlink_connection.fetch_unseen_events_failed', {\n        action: ActionType.measurement,\n        componentType: ComponentType.unknown,\n    }, AnalyticsEventImportance.high);\n};\n//# sourceMappingURL=walletlink-signer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.output = exports.exists = exports.hash = exports.bytes = exports.bool = exports.number = exports.isBytes = void 0;\nfunction number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`positive integer expected, not ${n}`);\n}\nexports.number = number;\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`boolean expected, not ${b}`);\n}\nexports.bool = bool;\n// copied from utils\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nexports.isBytes = isBytes;\nfunction bytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Uint8Array expected of length ${lengths}, not of length=${b.length}`);\n}\nexports.bytes = bytes;\nfunction hash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(h.outputLen);\n    number(h.blockLen);\n}\nexports.hash = hash;\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexports.exists = exists;\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexports.output = output;\nconst assert = { number, bool, bytes, hash, exists, output };\nexports.default = assert;\n//# sourceMappingURL=_assert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.add5L = exports.add5H = exports.add4H = exports.add4L = exports.add3H = exports.add3L = exports.add = exports.rotlBL = exports.rotlBH = exports.rotlSL = exports.rotlSH = exports.rotr32L = exports.rotr32H = exports.rotrBL = exports.rotrBH = exports.rotrSL = exports.rotrSH = exports.shrSL = exports.shrSH = exports.toBig = exports.split = exports.fromBig = void 0;\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexports.fromBig = fromBig;\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexports.split = split;\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nexports.shrSH = shrSH;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.shrSL = shrSL;\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nexports.rotrSH = rotrSH;\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.rotrSL = rotrSL;\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nexports.rotrBH = rotrBH;\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\nexports.rotrBL = rotrBL;\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nexports.rotr32H = rotr32H;\nconst rotr32L = (h, _l) => h;\nexports.rotr32L = rotr32L;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nexports.rotlSH = rotlSH;\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\nexports.rotlSL = rotlSL;\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nexports.rotlBH = rotlBH;\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\nexports.rotlBL = rotlBL;\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\nexports.add = add;\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nexports.add3L = add3L;\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nexports.add3H = add3H;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nexports.add4L = add4L;\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nexports.add4H = add4H;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nexports.add5L = add5L;\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\nexports.add5H = add5H;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n//# sourceMappingURL=_u64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.byteSwap32 = exports.byteSwapIfBE = exports.byteSwap = exports.isLE = exports.rotl = exports.rotr = exports.createView = exports.u32 = exports.u8 = exports.isBytes = void 0;\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\nconst _assert_js_1 = require(\"./_assert.js\");\n// export { isBytes } from './_assert.js';\n// We can't reuse isBytes from _assert, because somehow this causes huge perf issues\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nexports.isBytes = isBytes;\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | ((word >>> (32 - shift)) >>> 0);\nexports.rotl = rotl;\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// The byte swap operation for uint32\nconst byteSwap = (word) => ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff);\nexports.byteSwap = byteSwap;\n// Conditionally byte swap if on a big-endian platform\nexports.byteSwapIfBE = exports.isLE ? (n) => n : (n) => (0, exports.byteSwap)(n);\n// In place byte swap for Uint32Array\nfunction byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = (0, exports.byteSwap)(arr[i]);\n    }\n}\nexports.byteSwap32 = byteSwap32;\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    (0, _assert_js_1.bytes)(bytes);\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, _A: 65, _F: 70, _a: 97, _f: 102 };\nfunction asciiToBase16(char) {\n    if (char >= asciis._0 && char <= asciis._9)\n        return char - asciis._0;\n    if (char >= asciis._A && char <= asciis._F)\n        return char - (asciis._A - 10);\n    if (char >= asciis._a && char <= asciis._f)\n        return char - (asciis._a - 10);\n    return;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\nexports.utf8ToBytes = utf8ToBytes;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    (0, _assert_js_1.bytes)(data);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Copies several Uint8Arrays into one.\n */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        (0, _assert_js_1.bytes)(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\nconst toStr = {}.toString;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && toStr.call(opts) !== '[object Object]')\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\nfunction wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapXOFConstructorWithOpts = wrapXOFConstructorWithOpts;\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\nexports.randomBytes = randomBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shake256 = exports.shake128 = exports.keccak_512 = exports.keccak_384 = exports.keccak_256 = exports.keccak_224 = exports.sha3_512 = exports.sha3_384 = exports.sha3_256 = exports.sha3_224 = exports.Keccak = exports.keccakP = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst _u64_js_1 = require(\"./_u64.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// SHA3 (keccak) is based on a new design: basically, the internal state is bigger than output size.\n// It's called a sponge function.\n// Various per round constants calculations\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = [];\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\nconst _7n = /* @__PURE__ */ BigInt(7);\nconst _256n = /* @__PURE__ */ BigInt(256);\nconst _0x71n = /* @__PURE__ */ BigInt(0x71);\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << /* @__PURE__ */ BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst [SHA3_IOTA_H, SHA3_IOTA_L] = /* @__PURE__ */ (0, _u64_js_1.split)(_SHA3_IOTA, true);\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? (0, _u64_js_1.rotlBH)(h, l, s) : (0, _u64_js_1.rotlSH)(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? (0, _u64_js_1.rotlBL)(h, l, s) : (0, _u64_js_1.rotlSL)(h, l, s));\n// Same as keccakf1600, but allows to skip some rounds\nfunction keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta \n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho () and Pi ()\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi ()\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota ()\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    B.fill(0);\n}\nexports.keccakP = keccakP;\nclass Keccak extends utils_js_1.Hash {\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        super();\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        this.pos = 0;\n        this.posOut = 0;\n        this.finished = false;\n        this.destroyed = false;\n        // Can be passed from user as dkLen\n        (0, _assert_js_1.number)(outputLen);\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        if (0 >= this.blockLen || this.blockLen >= 200)\n            throw new Error('Sha3 supports only keccak-f1600 function');\n        this.state = new Uint8Array(200);\n        this.state32 = (0, utils_js_1.u32)(this.state);\n    }\n    keccak() {\n        if (!utils_js_1.isLE)\n            (0, utils_js_1.byteSwap32)(this.state32);\n        keccakP(this.state32, this.rounds);\n        if (!utils_js_1.isLE)\n            (0, utils_js_1.byteSwap32)(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        (0, _assert_js_1.exists)(this);\n        const { blockLen, state } = this;\n        data = (0, utils_js_1.toBytes)(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        (0, _assert_js_1.exists)(this, false);\n        (0, _assert_js_1.bytes)(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        (0, _assert_js_1.number)(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        (0, _assert_js_1.output)(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        this.state.fill(0);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to || (to = new Keccak(blockLen, suffix, outputLen, enableXOF, rounds));\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nexports.Keccak = Keccak;\nconst gen = (suffix, blockLen, outputLen) => (0, utils_js_1.wrapConstructor)(() => new Keccak(blockLen, suffix, outputLen));\nexports.sha3_224 = gen(0x06, 144, 224 / 8);\n/**\n * SHA3-256 hash function\n * @param message - that would be hashed\n */\nexports.sha3_256 = gen(0x06, 136, 256 / 8);\nexports.sha3_384 = gen(0x06, 104, 384 / 8);\nexports.sha3_512 = gen(0x06, 72, 512 / 8);\nexports.keccak_224 = gen(0x01, 144, 224 / 8);\n/**\n * keccak-256 hash function. Different from SHA3-256.\n * @param message - that would be hashed\n */\nexports.keccak_256 = gen(0x01, 136, 256 / 8);\nexports.keccak_384 = gen(0x01, 104, 384 / 8);\nexports.keccak_512 = gen(0x01, 72, 512 / 8);\nconst genShake = (suffix, blockLen, outputLen) => (0, utils_js_1.wrapXOFConstructorWithOpts)((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true));\nexports.shake128 = genShake(0x1f, 168, 128 / 8);\nexports.shake256 = genShake(0x1f, 136, 256 / 8);\n//# sourceMappingURL=sha3.js.map","// Extracted from https://github.com/ethereumjs/ethereumjs-util and stripped out irrelevant code\n// Original code licensed under the Mozilla Public License Version 2.0\n\n/* eslint-disable */\n//prettier-ignore\nconst { keccak_256 } = require('@noble/hashes/sha3')\n\n/**\n * Returns a buffer filled with 0s\n * @method zeros\n * @param {Number} bytes  the number of bytes the buffer should be\n * @return {Buffer}\n */\nfunction zeros (bytes) {\n  return Buffer.allocUnsafe(bytes).fill(0)\n}\n\n\n/**\n * Converts a `Number` into a hex `String` (https://github.com/ethjs/ethjs-util/blob/master/src/index.js)\n * @param {Number} i\n * @return {String}\n */\nfunction intToHex(i) {\n  const hex = i.toString(16); // eslint-disable-line\n\n  return `0x${hex}`;\n}\n\n/**\n * Converts an `Number` to a `Buffer` (https://github.com/ethjs/ethjs-util/blob/master/src/index.js)\n * @param {Number} i\n * @return {Buffer}\n */\nfunction intToBuffer(i) {\n  const hex = intToHex(i);\n\n  return new Buffer(padToEven(hex.slice(2)), 'hex');\n}\n\nfunction bitLengthFromBigInt (num) {\n  return num.toString(2).length\n}\n\nfunction bufferBEFromBigInt(num, length) {\n  let hex = num.toString(16);\n  // Ensure the hex string length is even\n  if (hex.length % 2 !== 0) hex = '0' + hex;\n  // Convert hex string to a byte array\n  const byteArray = hex.match(/.{1,2}/g).map(byte => parseInt(byte, 16));\n  // Ensure the byte array is of the specified length\n  while (byteArray.length < length) {\n    byteArray.unshift(0); // Prepend with zeroes if shorter than required length\n  }\n\n  return Buffer.from(byteArray);\n}\n\nfunction twosFromBigInt(value, width) {\n  const isNegative = value < 0n;\n  let result;\n  if (isNegative) {\n    // Prepare a mask for the specified width to perform NOT operation\n    const mask = (1n << BigInt(width)) - 1n;\n    // Invert bits (using NOT) and add one\n    result = (~value & mask) + 1n;\n  } else {\n    result = value;\n  }\n  // Ensure the result fits in the specified width\n  result &= (1n << BigInt(width)) - 1n;\n\n  return result;\n}\n\n/**\n * Left Pads an `Array` or `Buffer` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @method setLength\n * @param {Buffer|Array} msg the value to pad\n * @param {Number} length the number of bytes the output should be\n * @param {Boolean} [right=false] whether to start padding form the left or right\n * @return {Buffer|Array}\n */\nfunction setLength (msg, length, right) {\n  const buf = zeros(length)\n  msg = toBuffer(msg)\n  if (right) {\n    if (msg.length < length) {\n      msg.copy(buf)\n      return buf\n    }\n    return msg.slice(0, length)\n  } else {\n    if (msg.length < length) {\n      msg.copy(buf, length - msg.length)\n      return buf\n    }\n    return msg.slice(-length)\n  }\n}\n\n/**\n * Right Pads an `Array` or `Buffer` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @param {Buffer|Array} msg the value to pad\n * @param {Number} length the number of bytes the output should be\n * @return {Buffer|Array}\n */\nfunction setLengthRight (msg, length) {\n  return setLength(msg, length, true)\n}\n\n/**\n * Attempts to turn a value into a `Buffer`. As input it supports `Buffer`, `String`, `Number`, null/undefined, `BIgInt` and other objects with a `toArray()` method.\n * @param {*} v the value\n */\nfunction toBuffer (v) {\n  if (!Buffer.isBuffer(v)) {\n    if (Array.isArray(v)) {\n      v = Buffer.from(v)\n    } else if (typeof v === 'string') {\n      if (isHexString(v)) {\n        v = Buffer.from(padToEven(stripHexPrefix(v)), 'hex')\n      } else {\n        v = Buffer.from(v)\n      }\n    } else if (typeof v === 'number') {\n      v = intToBuffer(v)\n    } else if (v === null || v === undefined) {\n      v = Buffer.allocUnsafe(0)\n    } else if (typeof v === 'bigint') {\n      v = bufferBEFromBigInt(v)\n    } else if (v.toArray) {\n      // TODO: bigint should be handled above, may remove this duplicate\n      // converts a BigInt to a Buffer\n      v = Buffer.from(v.toArray())\n    } else {\n      throw new Error('invalid type')\n    }\n  }\n  return v\n}\n\n/**\n * Converts a `Buffer` into a hex `String`\n * @param {Buffer} buf\n * @return {String}\n */\nfunction bufferToHex (buf) {\n  buf = toBuffer(buf)\n  return '0x' + buf.toString('hex')\n}\n\n/**\n * Creates Keccak hash of the input\n * @param {Buffer|Array|String|Number} a the input data\n * @param {Number} [bits=256] the Keccak width\n * @return {Buffer}\n */\nfunction keccak (a, bits) {\n  a = toBuffer(a)\n  if (!bits) bits = 256\n  if (bits !== 256) {\n    throw new Error('unsupported')\n  }\n  return Buffer.from(keccak_256(new Uint8Array(a)))\n}\n\nfunction padToEven (str) {\n  return str.length % 2 ? '0' + str : str\n}\n\nfunction isHexString (str) {\n  return typeof str === 'string' && str.match(/^0x[0-9A-Fa-f]*$/)\n}\n\nfunction stripHexPrefix (str) {\n  if (typeof str === 'string' && str.startsWith('0x')) {\n    return str.slice(2)\n  }\n  return str\n}\n\nmodule.exports = {\n  zeros,\n  setLength,\n  setLengthRight,\n  isHexString,\n  stripHexPrefix,\n  toBuffer,\n  bufferToHex,\n  keccak,\n  bitLengthFromBigInt,\n  bufferBEFromBigInt,\n  twosFromBigInt\n}\n","// Extracted from https://github.com/ethereumjs/ethereumjs-abi and stripped out irrelevant code\n// Original code licensed under the MIT License - Copyright (c) 2015 Alex Beregszaszi\n\n/* eslint-disable */\n//prettier-ignore\nconst util = require('./util.cjs')\n\n// Convert from short to canonical names\n// FIXME: optimise or make this nicer?\nfunction elementaryName (name) {\n  if (name.startsWith('int[')) {\n    return 'int256' + name.slice(3)\n  } else if (name === 'int') {\n    return 'int256'\n  } else if (name.startsWith('uint[')) {\n    return 'uint256' + name.slice(4)\n  } else if (name === 'uint') {\n    return 'uint256'\n  } else if (name.startsWith('fixed[')) {\n    return 'fixed128x128' + name.slice(5)\n  } else if (name === 'fixed') {\n    return 'fixed128x128'\n  } else if (name.startsWith('ufixed[')) {\n    return 'ufixed128x128' + name.slice(6)\n  } else if (name === 'ufixed') {\n    return 'ufixed128x128'\n  }\n  return name\n}\n\n// Parse N from type<N>\nfunction parseTypeN (type) {\n  return Number.parseInt(/^\\D+(\\d+)$/.exec(type)[1], 10)\n}\n\n// Parse N,M from type<N>x<M>\nfunction parseTypeNxM (type) {\n  var tmp = /^\\D+(\\d+)x(\\d+)$/.exec(type)\n  return [ Number.parseInt(tmp[1], 10), Number.parseInt(tmp[2], 10) ]\n}\n\n// Parse N in type[<N>] where \"type\" can itself be an array type.\nfunction parseTypeArray (type) {\n  var tmp = type.match(/(.*)\\[(.*?)\\]$/)\n  if (tmp) {\n    return tmp[2] === '' ? 'dynamic' : Number.parseInt(tmp[2], 10)\n  }\n  return null\n}\n\nfunction parseNumber (arg) {\n  var type = typeof arg\n  if (type === 'string' || type === 'number') {\n    return BigInt(arg)\n  } else if (type === 'bigint') {\n    return arg\n  } else {\n    throw new Error('Argument is not a number')\n  }\n}\n\n// Encodes a single item (can be dynamic array)\n// @returns: Buffer\nfunction encodeSingle (type, arg) {\n  var size, num, ret, i\n\n  if (type === 'address') {\n    return encodeSingle('uint160', parseNumber(arg))\n  } else if (type === 'bool') {\n    return encodeSingle('uint8', arg ? 1 : 0)\n  } else if (type === 'string') {\n    return encodeSingle('bytes', new Buffer(arg, 'utf8'))\n  } else if (isArray(type)) {\n    // this part handles fixed-length ([2]) and variable length ([]) arrays\n    // NOTE: we catch here all calls to arrays, that simplifies the rest\n    if (typeof arg.length === 'undefined') {\n      throw new Error('Not an array?')\n    }\n    size = parseTypeArray(type)\n    if (size !== 'dynamic' && size !== 0 && arg.length > size) {\n      throw new Error('Elements exceed array size: ' + size)\n    }\n    ret = []\n    type = type.slice(0, type.lastIndexOf('['))\n    if (typeof arg === 'string') {\n      arg = JSON.parse(arg)\n    }\n    for (i in arg) {\n      ret.push(encodeSingle(type, arg[i]))\n    }\n    if (size === 'dynamic') {\n      var length = encodeSingle('uint256', arg.length)\n      ret.unshift(length)\n    }\n    return Buffer.concat(ret)\n  } else if (type === 'bytes') {\n    arg = new Buffer(arg)\n\n    ret = Buffer.concat([ encodeSingle('uint256', arg.length), arg ])\n\n    if ((arg.length % 32) !== 0) {\n      ret = Buffer.concat([ ret, util.zeros(32 - (arg.length % 32)) ])\n    }\n\n    return ret\n  } else if (type.startsWith('bytes')) {\n    size = parseTypeN(type)\n    if (size < 1 || size > 32) {\n      throw new Error('Invalid bytes<N> width: ' + size)\n    }\n\n    return util.setLengthRight(arg, 32)\n  } else if (type.startsWith('uint')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid uint<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    const bitLength = util.bitLengthFromBigInt(num)\n    if (bitLength > size) {\n      throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + bitLength)\n    }\n\n    if (num < 0) {\n      throw new Error('Supplied uint is negative')\n    }\n\n    return util.bufferBEFromBigInt(num, 32);\n  } else if (type.startsWith('int')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid int<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    const bitLength = util.bitLengthFromBigInt(num)\n    if (bitLength > size) {\n      throw new Error('Supplied int exceeds width: ' + size + ' vs ' + bitLength)\n    }\n\n    const twos = util.twosFromBigInt(num, 256);\n\n    return util.bufferBEFromBigInt(twos, 32);\n  } else if (type.startsWith('ufixed')) {\n    size = parseTypeNxM(type)\n\n    num = parseNumber(arg)\n\n    if (num < 0) {\n      throw new Error('Supplied ufixed is negative')\n    }\n\n    return encodeSingle('uint256', num * BigInt(2) ** BigInt(size[1]))\n  } else if (type.startsWith('fixed')) {\n    size = parseTypeNxM(type)\n\n    return encodeSingle('int256', parseNumber(arg) * BigInt(2) ** BigInt(size[1]))\n  }\n\n  throw new Error('Unsupported or invalid type: ' + type)\n}\n\n// Is a type dynamic?\nfunction isDynamic (type) {\n  // FIXME: handle all types? I don't think anything is missing now\n  return (type === 'string') || (type === 'bytes') || (parseTypeArray(type) === 'dynamic')\n}\n\n// Is a type an array?\nfunction isArray (type) {\n  return type.lastIndexOf(']') === type.length - 1\n}\n\n// Encode a method/event with arguments\n// @types an array of string type names\n// @args  an array of the appropriate values\nfunction rawEncode (types, values) {\n  var output = []\n  var data = []\n\n  var headLength = 32 * types.length\n\n  for (var i in types) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n    var cur = encodeSingle(type, value)\n\n    // Use the head/tail method for storing dynamic data\n    if (isDynamic(type)) {\n      output.push(encodeSingle('uint256', headLength))\n      data.push(cur)\n      headLength += cur.length\n    } else {\n      output.push(cur)\n    }\n  }\n\n  return Buffer.concat(output.concat(data))\n}\n\nfunction solidityPack (types, values) {\n  if (types.length !== values.length) {\n    throw new Error('Number of types are not matching the values')\n  }\n\n  var size, num\n  var ret = []\n\n  for (var i = 0; i < types.length; i++) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n\n    if (type === 'bytes') {\n      ret.push(value)\n    } else if (type === 'string') {\n      ret.push(new Buffer(value, 'utf8'))\n    } else if (type === 'bool') {\n      ret.push(new Buffer(value ? '01' : '00', 'hex'))\n    } else if (type === 'address') {\n      ret.push(util.setLength(value, 20))\n    } else if (type.startsWith('bytes')) {\n      size = parseTypeN(type)\n      if (size < 1 || size > 32) {\n        throw new Error('Invalid bytes<N> width: ' + size)\n      }\n\n      ret.push(util.setLengthRight(value, size))\n    } else if (type.startsWith('uint')) {\n      size = parseTypeN(type)\n      if ((size % 8) || (size < 8) || (size > 256)) {\n        throw new Error('Invalid uint<N> width: ' + size)\n      }\n\n      num = parseNumber(value)\n      const bitLength = util.bitLengthFromBigInt(num)\n      if (bitLength > size) {\n        throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + bitLength)\n      }\n\n      ret.push(util.bufferBEFromBigInt(num, size / 8))\n    } else if (type.startsWith('int')) {\n      size = parseTypeN(type)\n      if ((size % 8) || (size < 8) || (size > 256)) {\n        throw new Error('Invalid int<N> width: ' + size)\n      }\n\n      num = parseNumber(value)\n      const bitLength = util.bitLengthFromBigInt(num)\n      if (bitLength > size) {\n        throw new Error('Supplied int exceeds width: ' + size + ' vs ' + bitLength)\n      }\n\n      const twos = util.twosFromBigInt(num, size);\n      ret.push(util.bufferBEFromBigInt(twos, size / 8))\n    } else {\n      // FIXME: support all other types\n      throw new Error('Unsupported or invalid type: ' + type)\n    }\n  }\n\n  return Buffer.concat(ret)\n}\n\nfunction soliditySHA3 (types, values) {\n  return util.keccak(solidityPack(types, values))\n}\n\nmodule.exports = {\n  rawEncode,\n  solidityPack,\n  soliditySHA3\n}\n","/* eslint-disable */\n//prettier-ignore\n\nconst util = require('./util.cjs')\nconst abi = require('./abi.cjs')\n\nconst TYPED_MESSAGE_SCHEMA = {\n  type: 'object',\n  properties: {\n    types: {\n      type: 'object',\n      additionalProperties: {\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            name: {type: 'string'},\n            type: {type: 'string'},\n          },\n          required: ['name', 'type'],\n        },\n      },\n    },\n    primaryType: {type: 'string'},\n    domain: {type: 'object'},\n    message: {type: 'object'},\n  },\n  required: ['types', 'primaryType', 'domain', 'message'],\n}\n\n/**\n * A collection of utility functions used for signing typed data\n */\nconst TypedDataUtils = {\n  /**\n   * Encodes an object by encoding and concatenating each of its members\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} data - Object to encode\n   * @param {Object} types - Type definitions\n   * @returns {string} - Encoded representation of an object\n   */\n  encodeData (primaryType, data, types, useV4 = true) {\n    const encodedTypes = ['bytes32']\n    const encodedValues = [this.hashType(primaryType, types)]\n\n    if(useV4) {\n      const encodeField = (name, type, value) => {\n        if (types[type] !== undefined) {\n          return ['bytes32', value == null ?\n            '0x0000000000000000000000000000000000000000000000000000000000000000' :\n            util.keccak(this.encodeData(type, value, types, useV4))]\n        }\n\n        if(value === undefined)\n          throw new Error(`missing value for field ${name} of type ${type}`)\n\n        if (type === 'bytes') {\n          return ['bytes32', util.keccak(value)]\n        }\n\n        if (type === 'string') {\n          // convert string to buffer - prevents ethUtil from interpreting strings like '0xabcd' as hex\n          if (typeof value === 'string') {\n            value = Buffer.from(value, 'utf8')\n          }\n          return ['bytes32', util.keccak(value)]\n        }\n\n        if (type.lastIndexOf(']') === type.length - 1) {\n          const parsedType = type.slice(0, type.lastIndexOf('['))\n          const typeValuePairs = value.map(item =>\n            encodeField(name, parsedType, item))\n          return ['bytes32', util.keccak(abi.rawEncode(\n            typeValuePairs.map(([type]) => type),\n            typeValuePairs.map(([, value]) => value),\n          ))]\n        }\n\n        return [type, value]\n      }\n\n      for (const field of types[primaryType]) {\n        const [type, value] = encodeField(field.name, field.type, data[field.name])\n        encodedTypes.push(type)\n        encodedValues.push(value)\n      }\n    } else {\n      for (const field of types[primaryType]) {\n        let value = data[field.name]\n        if (value !== undefined) {\n          if (field.type === 'bytes') {\n            encodedTypes.push('bytes32')\n            value = util.keccak(value)\n            encodedValues.push(value)\n          } else if (field.type === 'string') {\n            encodedTypes.push('bytes32')\n            // convert string to buffer - prevents ethUtil from interpreting strings like '0xabcd' as hex\n            if (typeof value === 'string') {\n              value = Buffer.from(value, 'utf8')\n            }\n            value = util.keccak(value)\n            encodedValues.push(value)\n          } else if (types[field.type] !== undefined) {\n            encodedTypes.push('bytes32')\n            value = util.keccak(this.encodeData(field.type, value, types, useV4))\n            encodedValues.push(value)\n          } else if (field.type.lastIndexOf(']') === field.type.length - 1) {\n            throw new Error('Arrays currently unimplemented in encodeData')\n          } else {\n            encodedTypes.push(field.type)\n            encodedValues.push(value)\n          }\n        }\n      }\n    }\n\n    return abi.rawEncode(encodedTypes, encodedValues)\n  },\n\n  /**\n   * Encodes the type of an object by encoding a comma delimited list of its members\n   *\n   * @param {string} primaryType - Root type to encode\n   * @param {Object} types - Type definitions\n   * @returns {string} - Encoded representation of the type of an object\n   */\n  encodeType (primaryType, types) {\n    let result = ''\n    let deps = this.findTypeDependencies(primaryType, types).filter(dep => dep !== primaryType)\n    deps = [primaryType].concat(deps.sort())\n    for (const type of deps) {\n      const children = types[type]\n      if (!children) {\n        throw new Error('No type definition specified: ' + type)\n      }\n      result += type + '(' + types[type].map(({ name, type }) => type + ' ' + name).join(',') + ')'\n    }\n    return result\n  },\n\n  /**\n   * Finds all types within a type definition object\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} types - Type definitions\n   * @param {Array} results - current set of accumulated types\n   * @returns {Array} - Set of all types found in the type definition\n   */\n  findTypeDependencies (primaryType, types, results = []) {\n    primaryType = primaryType.match(/^\\w*/)[0]\n    if (results.includes(primaryType) || types[primaryType] === undefined) { return results }\n    results.push(primaryType)\n    for (const field of types[primaryType]) {\n      for (const dep of this.findTypeDependencies(field.type, types, results)) {\n        !results.includes(dep) && results.push(dep)\n      }\n    }\n    return results\n  },\n\n  /**\n   * Hashes an object\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} data - Object to hash\n   * @param {Object} types - Type definitions\n   * @returns {Buffer} - Hash of an object\n   */\n  hashStruct (primaryType, data, types, useV4 = true) {\n    return util.keccak(this.encodeData(primaryType, data, types, useV4))\n  },\n\n  /**\n   * Hashes the type of an object\n   *\n   * @param {string} primaryType - Root type to hash\n   * @param {Object} types - Type definitions\n   * @returns {string} - Hash of an object\n   */\n  hashType (primaryType, types) {\n    return util.keccak(this.encodeType(primaryType, types))\n  },\n\n  /**\n   * Removes properties from a message object that are not defined per EIP-712\n   *\n   * @param {Object} data - typed message object\n   * @returns {Object} - typed message object with only allowed fields\n   */\n  sanitizeData (data) {\n    const sanitizedData = {}\n    for (const key in TYPED_MESSAGE_SCHEMA.properties) {\n      data[key] && (sanitizedData[key] = data[key])\n    }\n    if (sanitizedData.types) {\n      sanitizedData.types = Object.assign({ EIP712Domain: [] }, sanitizedData.types)\n    }\n    return sanitizedData\n  },\n\n  /**\n   * Returns the hash of a typed message as per EIP-712 for signing\n   *\n   * @param {Object} typedData - Types message data to sign\n   * @returns {string} - sha3 hash for signing\n   */\n  hash (typedData, useV4 = true) {\n    const sanitizedData = this.sanitizeData(typedData)\n    const parts = [Buffer.from('1901', 'hex')]\n    parts.push(this.hashStruct('EIP712Domain', sanitizedData.domain, sanitizedData.types, useV4))\n    if (sanitizedData.primaryType !== 'EIP712Domain') {\n      parts.push(this.hashStruct(sanitizedData.primaryType, sanitizedData.message, sanitizedData.types, useV4))\n    }\n    return util.keccak(Buffer.concat(parts))\n  },\n}\n\nmodule.exports = {\n  TYPED_MESSAGE_SCHEMA,\n  TypedDataUtils,\n\n  hashForSignTypedDataLegacy: function (msgParams) {\n    return typedSignatureHashLegacy(msgParams.data)\n  },\n\n  hashForSignTypedData_v3: function (msgParams) {\n    return TypedDataUtils.hash(msgParams.data, false)\n  },\n\n  hashForSignTypedData_v4: function (msgParams) {\n    return TypedDataUtils.hash(msgParams.data)\n  },\n}\n\n/**\n * @param typedData - Array of data along with types, as per EIP712.\n * @returns Buffer\n */\nfunction typedSignatureHashLegacy(typedData) {\n  const error = new Error('Expect argument to be non-empty array')\n  if (typeof typedData !== 'object' || !typedData.length) throw error\n\n  const data = typedData.map(function (e) {\n    return e.type === 'bytes' ? util.toBuffer(e.value) : e.value\n  })\n  const types = typedData.map(function (e) { return e.type })\n  const schema = typedData.map(function (e) {\n    if (!e.name) throw error\n    return e.type + ' ' + e.name\n  })\n\n  return abi.soliditySHA3(\n    ['bytes32', 'bytes32'],\n    [\n      abi.soliditySHA3(new Array(typedData.length).fill('string'), schema),\n      abi.soliditySHA3(types, data)\n    ]\n  )\n}","export const WALLET_USER_NAME_KEY = 'walletUsername';\nexport const LOCAL_STORAGE_ADDRESSES_KEY = 'Addresses';\nexport const APP_VERSION_KEY = 'AppVersion';\n//# sourceMappingURL=constants.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { hexStringToUint8Array, uint8ArrayToHex } from '../../../../core/type/util.js';\nexport class WalletLinkCipher {\n    // @param secret hex representation of 32-byte secret\n    constructor(secret) {\n        this.secret = secret;\n    }\n    /**\n     *\n     * @param plainText string to be encrypted\n     * returns hex string representation of bytes in the order: initialization vector (iv),\n     * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes. Remaining bytes are the\n     * encrypted plainText.\n     */\n    async encrypt(plainText) {\n        const secret = this.secret;\n        if (secret.length !== 64)\n            throw new Error(`secret must be 256 bits`);\n        const ivBytes = crypto.getRandomValues(new Uint8Array(12));\n        const secretKey = await crypto.subtle.importKey('raw', hexStringToUint8Array(secret), { name: 'aes-gcm' }, false, ['encrypt', 'decrypt']);\n        const enc = new TextEncoder();\n        // Will return encrypted plainText with auth tag (ie MAC or checksum) appended at the end\n        const encryptedResult = await window.crypto.subtle.encrypt({\n            name: 'AES-GCM',\n            iv: ivBytes,\n        }, secretKey, enc.encode(plainText));\n        const tagLength = 16;\n        const authTag = encryptedResult.slice(encryptedResult.byteLength - tagLength);\n        const encryptedPlaintext = encryptedResult.slice(0, encryptedResult.byteLength - tagLength);\n        const authTagBytes = new Uint8Array(authTag);\n        const encryptedPlaintextBytes = new Uint8Array(encryptedPlaintext);\n        const concatenated = new Uint8Array([...ivBytes, ...authTagBytes, ...encryptedPlaintextBytes]);\n        return uint8ArrayToHex(concatenated);\n    }\n    /**\n     *\n     * @param cipherText hex string representation of bytes in the order: initialization vector (iv),\n     * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes.\n     */\n    async decrypt(cipherText) {\n        const secret = this.secret;\n        if (secret.length !== 64)\n            throw new Error(`secret must be 256 bits`);\n        return new Promise((resolve, reject) => {\n            void (async () => {\n                const secretKey = await crypto.subtle.importKey('raw', hexStringToUint8Array(secret), { name: 'aes-gcm' }, false, ['encrypt', 'decrypt']);\n                const encrypted = hexStringToUint8Array(cipherText);\n                const ivBytes = encrypted.slice(0, 12);\n                const authTagBytes = encrypted.slice(12, 28);\n                const encryptedPlaintextBytes = encrypted.slice(28);\n                const concatenatedBytes = new Uint8Array([...encryptedPlaintextBytes, ...authTagBytes]);\n                const algo = {\n                    name: 'AES-GCM',\n                    iv: new Uint8Array(ivBytes),\n                };\n                try {\n                    const decrypted = await window.crypto.subtle.decrypt(algo, secretKey, concatenatedBytes);\n                    const decoder = new TextDecoder();\n                    resolve(decoder.decode(decrypted));\n                }\n                catch (err) {\n                    reject(err);\n                }\n            })();\n        });\n    }\n}\n//# sourceMappingURL=WalletLinkCipher.js.map","export class WalletLinkHTTP {\n    constructor(linkAPIUrl, sessionId, sessionKey) {\n        this.linkAPIUrl = linkAPIUrl;\n        this.sessionId = sessionId;\n        const credentials = `${sessionId}:${sessionKey}`;\n        this.auth = `Basic ${btoa(credentials)}`;\n    }\n    // mark unseen events as seen\n    async markUnseenEventsAsSeen(events) {\n        return Promise.all(events.map((e) => fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`, {\n            method: 'POST',\n            headers: {\n                Authorization: this.auth,\n            },\n        }))).catch((error) => console.error('Unable to mark events as seen:', error));\n    }\n    async fetchUnseenEvents() {\n        var _a;\n        const response = await fetch(`${this.linkAPIUrl}/events?unseen=true`, {\n            headers: {\n                Authorization: this.auth,\n            },\n        });\n        if (response.ok) {\n            const { events, error } = (await response.json());\n            if (error) {\n                throw new Error(`Check unseen events failed: ${error}`);\n            }\n            const responseEvents = (_a = events === null || events === void 0 ? void 0 : events.filter((e) => e.event === 'Web3Response').map((e) => ({\n                type: 'Event',\n                sessionId: this.sessionId,\n                eventId: e.id,\n                event: e.event,\n                data: e.data,\n            }))) !== null && _a !== void 0 ? _a : [];\n            this.markUnseenEventsAsSeen(responseEvents);\n            return responseEvents;\n        }\n        throw new Error(`Check unseen events failed: ${response.status}`);\n    }\n}\n//# sourceMappingURL=WalletLinkHTTP.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nexport var ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"DISCONNECTED\"] = 0] = \"DISCONNECTED\";\n    ConnectionState[ConnectionState[\"CONNECTING\"] = 1] = \"CONNECTING\";\n    ConnectionState[ConnectionState[\"CONNECTED\"] = 2] = \"CONNECTED\";\n})(ConnectionState || (ConnectionState = {}));\nexport class WalletLinkWebSocket {\n    setConnectionStateListener(listener) {\n        this.connectionStateListener = listener;\n    }\n    setIncomingDataListener(listener) {\n        this.incomingDataListener = listener;\n    }\n    /**\n     * Constructor\n     * @param url WebSocket server URL\n     * @param [WebSocketClass] Custom WebSocket implementation\n     */\n    constructor(url, WebSocketClass = WebSocket) {\n        this.WebSocketClass = WebSocketClass;\n        this.webSocket = null;\n        this.isDisconnecting = false;\n        this.url = url.replace(/^http/, 'ws');\n        this.instanceId = WalletLinkWebSocket.instanceCounter++;\n        WalletLinkWebSocket.activeInstances.add(this.instanceId);\n    }\n    /**\n     * Make a websocket connection\n     * @returns a Promise that resolves when connected\n     */\n    async connect() {\n        if (this.webSocket) {\n            throw new Error('webSocket object is not null');\n        }\n        if (this.isDisconnecting) {\n            throw new Error('WebSocket is disconnecting, cannot reconnect on same instance');\n        }\n        return new Promise((resolve, reject) => {\n            var _a;\n            let webSocket;\n            try {\n                this.webSocket = webSocket = new this.WebSocketClass(this.url);\n            }\n            catch (err) {\n                reject(err);\n                return;\n            }\n            (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.CONNECTING);\n            webSocket.onclose = (evt) => {\n                var _a;\n                this.clearWebSocket();\n                // Only reject the connection promise if we haven't connected yet\n                if (webSocket.readyState !== WebSocket.OPEN) {\n                    reject(new Error(`websocket error ${evt.code}: ${evt.reason}`));\n                }\n                (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.DISCONNECTED);\n            };\n            webSocket.onopen = (_) => {\n                var _a;\n                resolve();\n                (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.CONNECTED);\n                if (WalletLinkWebSocket.pendingData.length > 0) {\n                    const pending = [...WalletLinkWebSocket.pendingData];\n                    pending.forEach((data) => this.sendData(data));\n                    WalletLinkWebSocket.pendingData = [];\n                }\n            };\n            webSocket.onmessage = (evt) => {\n                var _a, _b;\n                if (evt.data === 'h') {\n                    (_a = this.incomingDataListener) === null || _a === void 0 ? void 0 : _a.call(this, {\n                        type: 'Heartbeat',\n                    });\n                }\n                else {\n                    try {\n                        const message = JSON.parse(evt.data);\n                        (_b = this.incomingDataListener) === null || _b === void 0 ? void 0 : _b.call(this, message);\n                    }\n                    catch (_c) {\n                    }\n                }\n            };\n        });\n    }\n    /**\n     * Disconnect from server\n     */\n    disconnect() {\n        var _a;\n        const { webSocket } = this;\n        if (!webSocket) {\n            return;\n        }\n        // Mark as disconnecting to prevent reconnection attempts on this instance\n        this.isDisconnecting = true;\n        this.clearWebSocket();\n        // Clear listeners\n        (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.DISCONNECTED);\n        this.connectionStateListener = undefined;\n        this.incomingDataListener = undefined;\n        try {\n            webSocket.close();\n        }\n        catch (_b) {\n            // noop\n        }\n    }\n    /**\n     * Send data to server\n     * @param data text to send\n     */\n    sendData(data) {\n        const { webSocket } = this;\n        if (!webSocket) {\n            WalletLinkWebSocket.pendingData.push(data);\n            if (!this.isDisconnecting) {\n                this.connect();\n            }\n            return;\n        }\n        // Check if WebSocket is actually open before sending\n        if (webSocket.readyState !== WebSocket.OPEN) {\n            WalletLinkWebSocket.pendingData.push(data);\n            return;\n        }\n        webSocket.send(data);\n    }\n    clearWebSocket() {\n        const { webSocket } = this;\n        if (!webSocket) {\n            return;\n        }\n        this.webSocket = null;\n        webSocket.onclose = null;\n        webSocket.onerror = null;\n        webSocket.onmessage = null;\n        webSocket.onopen = null;\n    }\n    /**\n     * remove ws from active instances\n     */\n    cleanup() {\n        WalletLinkWebSocket.activeInstances.delete(this.instanceId);\n    }\n}\n// used to differentiate instances\nWalletLinkWebSocket.instanceCounter = 0;\nWalletLinkWebSocket.activeInstances = new Set();\nWalletLinkWebSocket.pendingData = [];\n//# sourceMappingURL=WalletLinkWebSocket.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { logWalletLinkConnectionConnectionFailed, logWalletLinkConnectionFetchUnseenEventsFailed, } from '../../../../core/telemetry/events/walletlink-signer.js';\nimport { IntNumber } from '../../../../core/type/index.js';\nimport { APP_VERSION_KEY, WALLET_USER_NAME_KEY } from '../constants.js';\nimport { WalletLinkCipher } from './WalletLinkCipher.js';\nimport { WalletLinkHTTP } from './WalletLinkHTTP.js';\nimport { ConnectionState, WalletLinkWebSocket } from './WalletLinkWebSocket.js';\nconst HEARTBEAT_INTERVAL = 10000;\nconst REQUEST_TIMEOUT = 60000;\n/**\n * Coinbase Wallet Connection\n */\nexport class WalletLinkConnection {\n    /**\n     * Constructor\n     * @param session Session\n     * @param linkAPIUrl Coinbase Wallet link server URL\n     * @param listener WalletLinkConnectionUpdateListener\n     * @param [WebSocketClass] Custom WebSocket implementation\n     */\n    constructor({ session, linkAPIUrl, listener }) {\n        this.destroyed = false;\n        this.lastHeartbeatResponse = 0;\n        this.nextReqId = IntNumber(1);\n        this.reconnectAttempts = 0;\n        this.isReconnecting = false;\n        /**\n         * true if connected and authenticated, else false\n         * runs listener when connected status changes\n         */\n        this._connected = false;\n        /**\n         * true if linked (a guest has joined before)\n         * runs listener when linked status changes\n         */\n        this._linked = false;\n        this.requestResolutions = new Map();\n        this.handleSessionMetadataUpdated = (metadata) => {\n            if (!metadata)\n                return;\n            // Map of metadata key to handler function\n            const handlers = new Map([\n                ['__destroyed', this.handleDestroyed],\n                ['EthereumAddress', this.handleAccountUpdated],\n                ['WalletUsername', this.handleWalletUsernameUpdated],\n                ['AppVersion', this.handleAppVersionUpdated],\n                [\n                    'ChainId', // ChainId and JsonRpcUrl are always updated together\n                    (v) => metadata.JsonRpcUrl && this.handleChainUpdated(v, metadata.JsonRpcUrl),\n                ],\n            ]);\n            // call handler for each metadata key if value is defined\n            handlers.forEach((handler, key) => {\n                const value = metadata[key];\n                if (value === undefined)\n                    return;\n                handler(value);\n            });\n        };\n        this.handleDestroyed = (__destroyed) => {\n            var _a;\n            if (__destroyed !== '1')\n                return;\n            (_a = this.listener) === null || _a === void 0 ? void 0 : _a.resetAndReload();\n        };\n        this.handleAccountUpdated = async (encryptedEthereumAddress) => {\n            var _a;\n            try {\n                const address = await this.cipher.decrypt(encryptedEthereumAddress);\n                (_a = this.listener) === null || _a === void 0 ? void 0 : _a.accountUpdated(address);\n            }\n            catch (_b) {\n                // Had error decrypting\n            }\n        };\n        this.handleMetadataUpdated = async (key, encryptedMetadataValue) => {\n            var _a;\n            try {\n                const decryptedValue = await this.cipher.decrypt(encryptedMetadataValue);\n                (_a = this.listener) === null || _a === void 0 ? void 0 : _a.metadataUpdated(key, decryptedValue);\n            }\n            catch (_b) {\n                // Had error decrypting\n            }\n        };\n        this.handleWalletUsernameUpdated = async (walletUsername) => {\n            this.handleMetadataUpdated(WALLET_USER_NAME_KEY, walletUsername);\n        };\n        this.handleAppVersionUpdated = async (appVersion) => {\n            this.handleMetadataUpdated(APP_VERSION_KEY, appVersion);\n        };\n        this.handleChainUpdated = async (encryptedChainId, encryptedJsonRpcUrl) => {\n            var _a;\n            try {\n                const chainId = await this.cipher.decrypt(encryptedChainId);\n                const jsonRpcUrl = await this.cipher.decrypt(encryptedJsonRpcUrl);\n                (_a = this.listener) === null || _a === void 0 ? void 0 : _a.chainUpdated(chainId, jsonRpcUrl);\n            }\n            catch (_b) {\n                // Had error decrypting\n            }\n        };\n        this.session = session;\n        this.cipher = new WalletLinkCipher(session.secret);\n        this.listener = listener;\n        this.linkAPIUrl = linkAPIUrl;\n        this.WebSocketClass = WebSocket;\n        const ws = this.createWebSocket();\n        this.ws = ws;\n        this.http = new WalletLinkHTTP(linkAPIUrl, session.id, session.key);\n        this.setupVisibilityChangeHandler();\n    }\n    createWebSocket() {\n        const ws = new WalletLinkWebSocket(`${this.linkAPIUrl}/rpc`, this.WebSocketClass);\n        // Track this as the active WebSocket instance\n        this.activeWsInstance = ws;\n        ws.setConnectionStateListener(async (state) => {\n            // Ignore events from non-active WebSocket instances\n            if (ws !== this.activeWsInstance) {\n                return;\n            }\n            // attempt to reconnect every 5 seconds when disconnected\n            let connected = false;\n            switch (state) {\n                case ConnectionState.DISCONNECTED:\n                    // Clear heartbeat timer when disconnected\n                    if (this.heartbeatIntervalId) {\n                        clearInterval(this.heartbeatIntervalId);\n                        this.heartbeatIntervalId = undefined;\n                    }\n                    // Reset lastHeartbeatResponse to prevent false timeout on reconnection\n                    this.lastHeartbeatResponse = 0;\n                    // Reset connected state to false on disconnect\n                    connected = false;\n                    // if DISCONNECTED and not destroyed, create a fresh WebSocket connection\n                    if (!this.destroyed) {\n                        const reconnect = async () => {\n                            // Prevent multiple concurrent reconnection attempts\n                            if (this.isReconnecting) {\n                                return;\n                            }\n                            this.isReconnecting = true;\n                            // 0 second delay on first attempt, then 3 seconds\n                            const delay = this.reconnectAttempts === 0 ? 0 : 3000;\n                            // wait before reconnecting\n                            await new Promise((resolve) => setTimeout(resolve, delay));\n                            // check whether it's destroyed again and ensure this is still the active instance\n                            if (!this.destroyed && ws === this.activeWsInstance) {\n                                this.reconnectAttempts++;\n                                // Clean up the old WebSocket instance\n                                if ('cleanup' in this.ws && typeof this.ws.cleanup === 'function') {\n                                    this.ws.cleanup();\n                                }\n                                // Create a fresh WebSocket instance\n                                this.ws = this.createWebSocket();\n                                this.ws\n                                    .connect()\n                                    .catch(() => {\n                                    // Reconnection failed, will retry\n                                    logWalletLinkConnectionConnectionFailed();\n                                })\n                                    .finally(() => {\n                                    this.isReconnecting = false;\n                                });\n                            }\n                            else {\n                                this.isReconnecting = false;\n                            }\n                        };\n                        reconnect();\n                    }\n                    break;\n                case ConnectionState.CONNECTED:\n                    // Reset reconnect attempts on successful connection\n                    this.reconnectAttempts = 0;\n                    // perform authentication upon connection\n                    try {\n                        // if CONNECTED, authenticate, and then check link status\n                        connected = await this.handleConnected();\n                        // Always fetch unseen events when WebSocket state changes to CONNECTED\n                        this.fetchUnseenEventsAPI().catch(() => {\n                            // Failed to fetch unseen events after connection\n                        });\n                    }\n                    catch (_error) {\n                        // Don't set connected to true if authentication fails\n                        break;\n                    }\n                    // Update connected state immediately after successful authentication\n                    // This ensures heartbeats won't be skipped\n                    this.connected = connected;\n                    // send heartbeat every n seconds while connected\n                    // if CONNECTED, start the heartbeat timer\n                    // first timer event updates lastHeartbeat timestamp\n                    // subsequent calls send heartbeat message\n                    this.updateLastHeartbeat();\n                    // Clear existing heartbeat timer\n                    if (this.heartbeatIntervalId) {\n                        clearInterval(this.heartbeatIntervalId);\n                    }\n                    this.heartbeatIntervalId = window.setInterval(() => {\n                        this.heartbeat();\n                    }, HEARTBEAT_INTERVAL);\n                    // Send an immediate heartbeat\n                    setTimeout(() => {\n                        this.heartbeat();\n                    }, 100);\n                    break;\n                case ConnectionState.CONNECTING:\n                    break;\n            }\n            // Update connected state for DISCONNECTED and CONNECTING cases\n            // For CONNECTED case, it's already set above\n            if (state !== ConnectionState.CONNECTED) {\n                this.connected = connected;\n            }\n        });\n        ws.setIncomingDataListener((m) => {\n            var _a;\n            switch (m.type) {\n                // handle server's heartbeat responses\n                case 'Heartbeat':\n                    this.updateLastHeartbeat();\n                    return;\n                // handle link status updates\n                case 'IsLinkedOK':\n                case 'Linked': {\n                    const linked = m.type === 'IsLinkedOK' ? m.linked : undefined;\n                    this.linked = linked || m.onlineGuests > 0;\n                    break;\n                }\n                // handle session config updates\n                case 'GetSessionConfigOK':\n                case 'SessionConfigUpdated': {\n                    this.handleSessionMetadataUpdated(m.metadata);\n                    break;\n                }\n                case 'Event': {\n                    this.handleIncomingEvent(m);\n                    break;\n                }\n            }\n            // resolve request promises\n            if (m.id !== undefined) {\n                (_a = this.requestResolutions.get(m.id)) === null || _a === void 0 ? void 0 : _a(m);\n            }\n        });\n        return ws;\n    }\n    setupVisibilityChangeHandler() {\n        this.visibilityChangeHandler = () => {\n            if (!document.hidden && !this.destroyed) {\n                if (!this.connected) {\n                    // Force a fresh connection if we're disconnected\n                    this.reconnectWithFreshWebSocket();\n                }\n                else {\n                    // Otherwise send a heartbeat to check if connection is still alive\n                    this.heartbeat();\n                }\n            }\n        };\n        // Handle focus events (when user switches back to the tab/app)\n        this.focusHandler = () => {\n            if (!this.destroyed && !this.connected) {\n                this.reconnectWithFreshWebSocket();\n            }\n        };\n        // Add event listeners\n        document.addEventListener('visibilitychange', this.visibilityChangeHandler);\n        window.addEventListener('focus', this.focusHandler);\n        window.addEventListener('pageshow', (event) => {\n            if (event.persisted) {\n                if (this.focusHandler) {\n                    this.focusHandler();\n                }\n            }\n        });\n    }\n    reconnectWithFreshWebSocket() {\n        if (this.destroyed)\n            return;\n        // Clear the active instance reference before disconnecting\n        const oldWs = this.ws;\n        this.activeWsInstance = undefined;\n        // Disconnect current WebSocket\n        oldWs.disconnect();\n        // Clean up the old instance\n        if ('cleanup' in oldWs && typeof oldWs.cleanup === 'function') {\n            oldWs.cleanup();\n        }\n        // Create and connect fresh WebSocket\n        this.ws = this.createWebSocket();\n        this.ws.connect().catch(() => {\n            // Fresh reconnection failed\n            logWalletLinkConnectionConnectionFailed();\n        });\n    }\n    /**\n     * Make a connection to the server\n     */\n    connect() {\n        if (this.destroyed) {\n            throw new Error('instance is destroyed');\n        }\n        this.ws.connect();\n    }\n    /**\n     * Terminate connection, and mark as destroyed. To reconnect, create a new\n     * instance of WalletSDKConnection\n     */\n    async destroy() {\n        if (this.destroyed)\n            return;\n        await this.makeRequest({\n            type: 'SetSessionConfig',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n            metadata: { __destroyed: '1' },\n        }, { timeout: 1000 });\n        this.destroyed = true;\n        // Clear the active instance reference\n        this.activeWsInstance = undefined;\n        // Clear heartbeat timer\n        if (this.heartbeatIntervalId) {\n            clearInterval(this.heartbeatIntervalId);\n            this.heartbeatIntervalId = undefined;\n        }\n        // Remove event listeners\n        if (this.visibilityChangeHandler) {\n            document.removeEventListener('visibilitychange', this.visibilityChangeHandler);\n        }\n        if (this.focusHandler) {\n            window.removeEventListener('focus', this.focusHandler);\n        }\n        this.ws.disconnect();\n        // Call cleanup on the WebSocket instance if it has the method\n        if ('cleanup' in this.ws && typeof this.ws.cleanup === 'function') {\n            this.ws.cleanup();\n        }\n        this.listener = undefined;\n    }\n    get connected() {\n        return this._connected;\n    }\n    set connected(connected) {\n        this._connected = connected;\n    }\n    get linked() {\n        return this._linked;\n    }\n    set linked(linked) {\n        var _a, _b;\n        this._linked = linked;\n        if (linked)\n            (_a = this.onceLinked) === null || _a === void 0 ? void 0 : _a.call(this);\n        (_b = this.listener) === null || _b === void 0 ? void 0 : _b.linkedUpdated(linked);\n    }\n    setOnceLinked(callback) {\n        return new Promise((resolve) => {\n            if (this.linked) {\n                callback().then(resolve);\n            }\n            else {\n                this.onceLinked = () => {\n                    callback().then(resolve);\n                    this.onceLinked = undefined;\n                };\n            }\n        });\n    }\n    async handleIncomingEvent(m) {\n        var _a;\n        if (m.type !== 'Event' || m.event !== 'Web3Response') {\n            return;\n        }\n        try {\n            const decryptedData = await this.cipher.decrypt(m.data);\n            const message = JSON.parse(decryptedData);\n            if (message.type !== 'WEB3_RESPONSE')\n                return;\n            (_a = this.listener) === null || _a === void 0 ? void 0 : _a.handleWeb3ResponseMessage(message.id, message.response);\n        }\n        catch (_error) {\n            // Had error decrypting\n        }\n    }\n    async checkUnseenEvents() {\n        // Add a small delay to ensure any pending operations complete\n        await new Promise((resolve) => setTimeout(resolve, 250));\n        try {\n            await this.fetchUnseenEventsAPI();\n        }\n        catch (e) {\n            console.error('Unable to check for unseen events', e);\n        }\n    }\n    async fetchUnseenEventsAPI() {\n        try {\n            const responseEvents = await this.http.fetchUnseenEvents();\n            responseEvents.forEach((e) => {\n                this.handleIncomingEvent(e);\n            });\n        }\n        catch (_error) {\n            // Failed to fetch unseen events\n            logWalletLinkConnectionFetchUnseenEventsFailed();\n        }\n    }\n    /**\n     * Publish an event and emit event ID when successful\n     * @param event event name\n     * @param unencryptedData unencrypted event data\n     * @param callWebhook whether the webhook should be invoked\n     * @returns a Promise that emits event ID when successful\n     */\n    async publishEvent(event, unencryptedData, callWebhook = false) {\n        const data = await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({}, unencryptedData), { origin: location.origin, location: location.href, relaySource: 'coinbaseWalletExtension' in window && window.coinbaseWalletExtension\n                ? 'injected_sdk'\n                : 'sdk' })));\n        const message = {\n            type: 'PublishEvent',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n            event,\n            data,\n            callWebhook,\n        };\n        return this.setOnceLinked(async () => {\n            const res = await this.makeRequest(message);\n            if (res.type === 'Fail') {\n                throw new Error(res.error || 'failed to publish event');\n            }\n            return res.eventId;\n        });\n    }\n    sendData(message) {\n        this.ws.sendData(JSON.stringify(message));\n    }\n    updateLastHeartbeat() {\n        this.lastHeartbeatResponse = Date.now();\n    }\n    heartbeat() {\n        if (Date.now() - this.lastHeartbeatResponse > HEARTBEAT_INTERVAL * 2) {\n            this.ws.disconnect();\n            return;\n        }\n        // Only send heartbeat if we're connected\n        if (!this.connected) {\n            return;\n        }\n        try {\n            this.ws.sendData('h');\n        }\n        catch (_error) {\n            // Error sending heartbeat\n        }\n    }\n    async makeRequest(message, options = { timeout: REQUEST_TIMEOUT }) {\n        const reqId = message.id;\n        this.sendData(message);\n        // await server message with corresponding id\n        let timeoutId;\n        return Promise.race([\n            new Promise((_, reject) => {\n                timeoutId = window.setTimeout(() => {\n                    reject(new Error(`request ${reqId} timed out`));\n                }, options.timeout);\n            }),\n            new Promise((resolve) => {\n                this.requestResolutions.set(reqId, (m) => {\n                    clearTimeout(timeoutId); // clear the timeout\n                    resolve(m);\n                    this.requestResolutions.delete(reqId);\n                });\n            }),\n        ]);\n    }\n    async handleConnected() {\n        const res = await this.makeRequest({\n            type: 'HostSession',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n            sessionKey: this.session.key,\n        });\n        if (res.type === 'Fail') {\n            return false;\n        }\n        this.sendData({\n            type: 'IsLinked',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n        });\n        this.sendData({\n            type: 'GetSessionConfig',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n        });\n        return true;\n    }\n}\n//# sourceMappingURL=WalletLinkConnection.js.map","import { prepend0x } from '../../../core/type/util.js';\nexport class RelayEventManager {\n    constructor() {\n        this._nextRequestId = 0;\n        this.callbacks = new Map();\n    }\n    makeRequestId() {\n        // max nextId == max int32 for compatibility with mobile\n        this._nextRequestId = (this._nextRequestId + 1) % 0x7fffffff;\n        const id = this._nextRequestId;\n        const idStr = prepend0x(id.toString(16));\n        // unlikely that this will ever be an issue, but just to be safe\n        const callback = this.callbacks.get(idStr);\n        if (callback) {\n            this.callbacks.delete(idStr);\n        }\n        return id;\n    }\n}\n//# sourceMappingURL=RelayEventManager.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { sha256 } from '@noble/hashes/sha256';\nimport { bytesToHex } from '@noble/hashes/utils';\nimport { randomBytesHex } from '../../../../core/type/util.js';\nconst STORAGE_KEY_SESSION_ID = 'session:id';\nconst STORAGE_KEY_SESSION_SECRET = 'session:secret';\nconst STORAGE_KEY_SESSION_LINKED = 'session:linked';\nexport class WalletLinkSession {\n    constructor(storage, id, secret, linked = false) {\n        this.storage = storage;\n        this.id = id;\n        this.secret = secret;\n        this.key = bytesToHex(sha256(`${id}, ${secret} WalletLink`));\n        this._linked = !!linked;\n    }\n    static create(storage) {\n        const id = randomBytesHex(16);\n        const secret = randomBytesHex(32);\n        return new WalletLinkSession(storage, id, secret).save();\n    }\n    static load(storage) {\n        const id = storage.getItem(STORAGE_KEY_SESSION_ID);\n        const linked = storage.getItem(STORAGE_KEY_SESSION_LINKED);\n        const secret = storage.getItem(STORAGE_KEY_SESSION_SECRET);\n        if (id && secret) {\n            return new WalletLinkSession(storage, id, secret, linked === '1');\n        }\n        return null;\n    }\n    get linked() {\n        return this._linked;\n    }\n    set linked(val) {\n        this._linked = val;\n        this.persistLinked();\n    }\n    save() {\n        this.storage.setItem(STORAGE_KEY_SESSION_ID, this.id);\n        this.storage.setItem(STORAGE_KEY_SESSION_SECRET, this.secret);\n        this.persistLinked();\n        return this;\n    }\n    persistLinked() {\n        this.storage.setItem(STORAGE_KEY_SESSION_LINKED, this._linked ? '1' : '0');\n    }\n}\n//# sourceMappingURL=WalletLinkSession.js.map","export default (() => `.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}`)();\n//# sourceMappingURL=RedirectDialog-css.js.map","import { clsx } from 'clsx';\nimport { render } from 'preact';\n// biome-ignore lint/correctness/noUnusedImports: preact\nimport { h } from 'preact';\nimport { injectCssReset } from '../cssReset/cssReset.js';\nimport { SnackbarContainer } from '../Snackbar/Snackbar.js';\nimport { isDarkMode } from '../util.js';\nimport css from './RedirectDialog-css.js';\nexport class RedirectDialog {\n    constructor() {\n        this.root = null;\n        this.darkMode = isDarkMode();\n    }\n    attach() {\n        const el = document.documentElement;\n        this.root = document.createElement('div');\n        this.root.className = '-cbwsdk-css-reset';\n        el.appendChild(this.root);\n        injectCssReset();\n    }\n    present(props) {\n        this.render(props);\n    }\n    clear() {\n        this.render(null);\n    }\n    render(props) {\n        if (!this.root)\n            return;\n        render(null, this.root);\n        if (!props)\n            return;\n        render(h(RedirectDialogContent, Object.assign({}, props, { onDismiss: () => {\n                this.clear();\n            }, darkMode: this.darkMode })), this.root);\n    }\n}\nconst RedirectDialogContent = ({ title, buttonText, darkMode, onButtonClick, onDismiss }) => {\n    const theme = darkMode ? 'dark' : 'light';\n    return (h(SnackbarContainer, { darkMode: darkMode },\n        h(\"div\", { class: \"-cbwsdk-redirect-dialog\" },\n            h(\"style\", null, css),\n            h(\"div\", { class: \"-cbwsdk-redirect-dialog-backdrop\", onClick: onDismiss }),\n            h(\"div\", { class: clsx('-cbwsdk-redirect-dialog-box', theme) },\n                h(\"p\", null, title),\n                h(\"button\", { onClick: onButtonClick }, buttonText)))));\n};\n//# sourceMappingURL=RedirectDialog.js.map","import { CBW_MOBILE_DEEPLINK_URL } from '../../../../core/constants.js';\nimport { RedirectDialog } from './components/RedirectDialog/RedirectDialog.js';\nimport { getLocation } from './components/util.js';\nexport class WLMobileRelayUI {\n    constructor() {\n        this.attached = false;\n        this.redirectDialog = new RedirectDialog();\n    }\n    attach() {\n        if (this.attached) {\n            throw new Error('Coinbase Wallet SDK UI is already attached');\n        }\n        this.redirectDialog.attach();\n        this.attached = true;\n    }\n    redirectToCoinbaseWallet(walletLinkUrl) {\n        const url = new URL(CBW_MOBILE_DEEPLINK_URL);\n        url.searchParams.append('redirect_url', getLocation().href);\n        if (walletLinkUrl) {\n            url.searchParams.append('wl_url', walletLinkUrl);\n        }\n        const anchorTag = document.createElement('a');\n        anchorTag.target = 'cbw-opener';\n        anchorTag.href = url.href;\n        anchorTag.rel = 'noreferrer noopener';\n        anchorTag.click();\n    }\n    openCoinbaseWalletDeeplink(walletLinkUrl) {\n        // redirect to coinbase wallet immediately to avoid Safari/Chrome popup(deeplink) blocking\n        this.redirectToCoinbaseWallet(walletLinkUrl);\n        setTimeout(() => {\n            this.redirectDialog.present({\n                title: 'Redirecting to Coinbase Wallet...',\n                buttonText: 'Open',\n                onButtonClick: () => {\n                    this.redirectToCoinbaseWallet(walletLinkUrl);\n                },\n            });\n        }, 99);\n    }\n    showConnecting(_options) {\n        // it uses the return callback to clear the dialog\n        return () => {\n            this.redirectDialog.clear();\n        };\n    }\n}\n//# sourceMappingURL=WLMobileRelayUI.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { standardErrors } from '../../../core/error/errors.js';\nimport { ScopedLocalStorage } from '../../../core/storage/ScopedLocalStorage.js';\nimport { bigIntStringFromBigInt, hexStringFromBuffer, randomBytesHex } from '../../../core/type/util.js';\nimport { WalletLinkConnection, } from './connection/WalletLinkConnection.js';\nimport { LOCAL_STORAGE_ADDRESSES_KEY } from './constants.js';\nimport { RelayEventManager } from './RelayEventManager.js';\nimport { WalletLinkSession } from './type/WalletLinkSession.js';\nimport { isErrorResponse } from './type/Web3Response.js';\nimport { isMobileWeb } from './ui/components/util.js';\nimport { WalletLinkRelayUI } from './ui/WalletLinkRelayUI.js';\nimport { WLMobileRelayUI } from './ui/WLMobileRelayUI.js';\nexport class WalletLinkRelay {\n    constructor(options) {\n        this.chainCallbackParams = { chainId: '', jsonRpcUrl: '' }; // to implement distinctUntilChanged\n        this.isMobileWeb = isMobileWeb();\n        this.linkedUpdated = (linked) => {\n            this.isLinked = linked;\n            const cachedAddresses = this.storage.getItem(LOCAL_STORAGE_ADDRESSES_KEY);\n            if (linked) {\n                // Only set linked session variable one way\n                this._session.linked = linked;\n            }\n            this.isUnlinkedErrorState = false;\n            if (cachedAddresses) {\n                const addresses = cachedAddresses.split(' ');\n                const wasConnectedViaStandalone = this.storage.getItem('IsStandaloneSigning') === 'true';\n                if (addresses[0] !== '' && !linked && this._session.linked && !wasConnectedViaStandalone) {\n                    this.isUnlinkedErrorState = true;\n                }\n            }\n        };\n        this.metadataUpdated = (key, value) => {\n            this.storage.setItem(key, value);\n        };\n        this.chainUpdated = (chainId, jsonRpcUrl) => {\n            if (this.chainCallbackParams.chainId === chainId &&\n                this.chainCallbackParams.jsonRpcUrl === jsonRpcUrl) {\n                return;\n            }\n            this.chainCallbackParams = {\n                chainId,\n                jsonRpcUrl,\n            };\n            if (this.chainCallback) {\n                this.chainCallback(jsonRpcUrl, Number.parseInt(chainId, 10));\n            }\n        };\n        this.accountUpdated = (selectedAddress) => {\n            if (this.accountsCallback) {\n                this.accountsCallback([selectedAddress]);\n            }\n            if (WalletLinkRelay.accountRequestCallbackIds.size > 0) {\n                // We get the ethereum address from the metadata.  If for whatever\n                // reason we don't get a response via an explicit web3 message\n                // we can still fulfill the eip1102 request.\n                Array.from(WalletLinkRelay.accountRequestCallbackIds.values()).forEach((id) => {\n                    this.invokeCallback(id, {\n                        method: 'requestEthereumAccounts',\n                        result: [selectedAddress],\n                    });\n                });\n                WalletLinkRelay.accountRequestCallbackIds.clear();\n            }\n        };\n        this.resetAndReload = this.resetAndReload.bind(this);\n        this.linkAPIUrl = options.linkAPIUrl;\n        this.storage = options.storage;\n        this.metadata = options.metadata;\n        this.accountsCallback = options.accountsCallback;\n        this.chainCallback = options.chainCallback;\n        const { session, ui, connection } = this.subscribe();\n        this._session = session;\n        this.connection = connection;\n        this.relayEventManager = new RelayEventManager();\n        this.ui = ui;\n        this.ui.attach();\n    }\n    subscribe() {\n        const session = WalletLinkSession.load(this.storage) || WalletLinkSession.create(this.storage);\n        const { linkAPIUrl } = this;\n        const connection = new WalletLinkConnection({\n            session,\n            linkAPIUrl,\n            listener: this,\n        });\n        const ui = this.isMobileWeb ? new WLMobileRelayUI() : new WalletLinkRelayUI();\n        connection.connect();\n        return { session, ui, connection };\n    }\n    resetAndReload() {\n        this.connection\n            .destroy()\n            .then(() => {\n            /**\n             * Only clear storage if the session id we have in memory matches the one on disk\n             * Otherwise, in the case where we have 2 tabs, another tab might have cleared\n             * storage already.  In that case if we clear storage again, the user will be in\n             * a state where the first tab allows the user to connect but the session that\n             * was used isn't persisted.  This leaves the user in a state where they aren't\n             * connected to the mobile app.\n             */\n            const storedSession = WalletLinkSession.load(this.storage);\n            if ((storedSession === null || storedSession === void 0 ? void 0 : storedSession.id) === this._session.id) {\n                ScopedLocalStorage.clearAll();\n            }\n            document.location.reload();\n        })\n            .catch((_) => { });\n    }\n    signEthereumTransaction(params) {\n        return this.sendRequest({\n            method: 'signEthereumTransaction',\n            params: {\n                fromAddress: params.fromAddress,\n                toAddress: params.toAddress,\n                weiValue: bigIntStringFromBigInt(params.weiValue),\n                data: hexStringFromBuffer(params.data, true),\n                nonce: params.nonce,\n                gasPriceInWei: params.gasPriceInWei ? bigIntStringFromBigInt(params.gasPriceInWei) : null,\n                maxFeePerGas: params.gasPriceInWei ? bigIntStringFromBigInt(params.gasPriceInWei) : null,\n                maxPriorityFeePerGas: params.gasPriceInWei\n                    ? bigIntStringFromBigInt(params.gasPriceInWei)\n                    : null,\n                gasLimit: params.gasLimit ? bigIntStringFromBigInt(params.gasLimit) : null,\n                chainId: params.chainId,\n                shouldSubmit: false,\n            },\n        });\n    }\n    signAndSubmitEthereumTransaction(params) {\n        return this.sendRequest({\n            method: 'signEthereumTransaction',\n            params: {\n                fromAddress: params.fromAddress,\n                toAddress: params.toAddress,\n                weiValue: bigIntStringFromBigInt(params.weiValue),\n                data: hexStringFromBuffer(params.data, true),\n                nonce: params.nonce,\n                gasPriceInWei: params.gasPriceInWei ? bigIntStringFromBigInt(params.gasPriceInWei) : null,\n                maxFeePerGas: params.maxFeePerGas ? bigIntStringFromBigInt(params.maxFeePerGas) : null,\n                maxPriorityFeePerGas: params.maxPriorityFeePerGas\n                    ? bigIntStringFromBigInt(params.maxPriorityFeePerGas)\n                    : null,\n                gasLimit: params.gasLimit ? bigIntStringFromBigInt(params.gasLimit) : null,\n                chainId: params.chainId,\n                shouldSubmit: true,\n            },\n        });\n    }\n    submitEthereumTransaction(signedTransaction, chainId) {\n        return this.sendRequest({\n            method: 'submitEthereumTransaction',\n            params: {\n                signedTransaction: hexStringFromBuffer(signedTransaction, true),\n                chainId,\n            },\n        });\n    }\n    getWalletLinkSession() {\n        return this._session;\n    }\n    sendRequest(request) {\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        return new Promise((resolve, reject) => {\n            {\n                hideSnackbarItem = this.ui.showConnecting({\n                    isUnlinkedErrorState: this.isUnlinkedErrorState,\n                    onCancel: cancel,\n                    onResetConnection: this.resetAndReload,\n                });\n            }\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    publishWeb3RequestEvent(id, request) {\n        const message = { type: 'WEB3_REQUEST', id, request };\n        this.publishEvent('Web3Request', message, true)\n            .then((_) => { })\n            .catch((err) => {\n            this.handleWeb3ResponseMessage(message.id, {\n                method: request.method,\n                errorMessage: err.message,\n            });\n        });\n        if (this.isMobileWeb) {\n            this.openCoinbaseWalletDeeplink(request.method);\n        }\n    }\n    // copied from MobileRelay\n    openCoinbaseWalletDeeplink(method) {\n        if (!(this.ui instanceof WLMobileRelayUI))\n            return;\n        // For mobile relay requests, open the Coinbase Wallet app\n        switch (method) {\n            case 'requestEthereumAccounts': // requestEthereumAccounts is handled via popup\n            case 'switchEthereumChain': // switchEthereumChain doesn't need to open the app\n                return;\n            default:\n                window.addEventListener('blur', () => {\n                    window.addEventListener('focus', () => {\n                        this.connection.checkUnseenEvents();\n                    }, { once: true });\n                }, { once: true });\n                this.ui.openCoinbaseWalletDeeplink();\n                break;\n        }\n    }\n    publishWeb3RequestCanceledEvent(id) {\n        const message = {\n            type: 'WEB3_REQUEST_CANCELED',\n            id,\n        };\n        this.publishEvent('Web3RequestCanceled', message, false).then();\n    }\n    publishEvent(event, message, callWebhook) {\n        return this.connection.publishEvent(event, message, callWebhook);\n    }\n    handleWeb3ResponseMessage(id, response) {\n        if (response.method === 'requestEthereumAccounts') {\n            WalletLinkRelay.accountRequestCallbackIds.forEach((id) => this.invokeCallback(id, response));\n            WalletLinkRelay.accountRequestCallbackIds.clear();\n            return;\n        }\n        this.invokeCallback(id, response);\n    }\n    handleErrorResponse(id, method, error) {\n        var _a;\n        const errorMessage = (_a = error === null || error === void 0 ? void 0 : error.message) !== null && _a !== void 0 ? _a : 'Unspecified error message.';\n        this.handleWeb3ResponseMessage(id, {\n            method,\n            errorMessage,\n        });\n    }\n    invokeCallback(id, response) {\n        const callback = this.relayEventManager.callbacks.get(id);\n        if (callback) {\n            callback(response);\n            this.relayEventManager.callbacks.delete(id);\n        }\n    }\n    requestEthereumAccounts() {\n        const { appName, appLogoUrl } = this.metadata;\n        const request = {\n            method: 'requestEthereumAccounts',\n            params: {\n                appName,\n                appLogoUrl,\n            },\n        };\n        const hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                // @ts-ignore\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            WalletLinkRelay.accountRequestCallbackIds.add(id);\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    watchAsset(type, address, symbol, decimals, image, chainId) {\n        const request = {\n            method: 'watchAsset',\n            params: {\n                type,\n                options: {\n                    address,\n                    symbol,\n                    decimals,\n                    image,\n                },\n                chainId,\n            },\n        };\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload,\n            });\n        }\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    addEthereumChain(chainId, rpcUrls, iconUrls, blockExplorerUrls, chainName, nativeCurrency) {\n        const request = {\n            method: 'addEthereumChain',\n            params: {\n                chainId,\n                rpcUrls,\n                blockExplorerUrls,\n                chainName,\n                iconUrls,\n                nativeCurrency,\n            },\n        };\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload,\n            });\n        }\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    switchEthereumChain(chainId, address) {\n        const request = {\n            method: 'switchEthereumChain',\n            params: Object.assign({ chainId }, { address }),\n        };\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload,\n            });\n        }\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response) && response.errorCode) {\n                    return reject(standardErrors.provider.custom({\n                        code: response.errorCode,\n                        message: `Unrecognized chain ID. Try adding the chain using addEthereumChain first.`,\n                    }));\n                }\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n}\nWalletLinkRelay.accountRequestCallbackIds = new Set();\n//# sourceMappingURL=WalletLinkRelay.js.map","// Copyright (c) 2018-2024 Coinbase, Inc. <https://www.coinbase.com/>\nimport { WALLETLINK_URL } from '../../core/constants.js';\nimport { standardErrors } from '../../core/error/errors.js';\nimport { ScopedLocalStorage } from '../../core/storage/ScopedLocalStorage.js';\nimport { logHandshakeCompleted, logHandshakeError, logHandshakeStarted, logRequestCompleted, logRequestError, logRequestStarted, } from '../../core/telemetry/events/walletlink-signer.js';\nimport { parseErrorMessageFromAny } from '../../core/telemetry/utils.js';\nimport { encodeToHexString, ensureAddressString, ensureBigInt, ensureBuffer, ensureIntNumber, ensureParsedJSONObject, hexStringFromBuffer, hexStringFromNumber, } from '../../core/type/util.js';\nimport { correlationIds } from '../../store/correlation-ids/store.js';\nimport { fetchRPCRequest } from '../../util/provider.js';\nimport eip712 from '../../vendor-js/eth-eip712-util/index.cjs';\nimport { WalletLinkRelay } from './relay/WalletLinkRelay.js';\nimport { LOCAL_STORAGE_ADDRESSES_KEY } from './relay/constants.js';\nimport { isErrorResponse } from './relay/type/Web3Response.js';\nconst DEFAULT_CHAIN_ID_KEY = 'DefaultChainId';\nconst DEFAULT_JSON_RPC_URL = 'DefaultJsonRpcUrl';\n// original source: https://github.com/coinbase/coinbase-wallet-sdk/blob/v3.7.1/packages/wallet-sdk/src/provider/CoinbaseWalletProvider.ts\nexport class WalletLinkSigner {\n    constructor(options) {\n        this._relay = null;\n        this._addresses = [];\n        this.metadata = options.metadata;\n        this._storage = new ScopedLocalStorage('walletlink', WALLETLINK_URL);\n        this.callback = options.callback || null;\n        const cachedAddresses = this._storage.getItem(LOCAL_STORAGE_ADDRESSES_KEY);\n        if (cachedAddresses) {\n            const addresses = cachedAddresses.split(' ');\n            if (addresses[0] !== '') {\n                this._addresses = addresses.map((address) => ensureAddressString(address));\n            }\n        }\n        this.initializeRelay();\n    }\n    getSession() {\n        const relay = this.initializeRelay();\n        const { id, secret } = relay.getWalletLinkSession();\n        return { id, secret };\n    }\n    async handshake(args) {\n        // only eth_requestAccounts is supported for handshake in WalletLink\n        const method = 'eth_requestAccounts';\n        const correlationId = correlationIds.get(args);\n        logHandshakeStarted({\n            method,\n            correlationId,\n        });\n        try {\n            await this._eth_requestAccounts();\n            logHandshakeCompleted({\n                method,\n                correlationId,\n            });\n        }\n        catch (error) {\n            logHandshakeError({\n                method,\n                correlationId,\n                errorMessage: parseErrorMessageFromAny(error),\n            });\n            throw error;\n        }\n    }\n    get selectedAddress() {\n        return this._addresses[0] || undefined;\n    }\n    get jsonRpcUrl() {\n        var _a;\n        return (_a = this._storage.getItem(DEFAULT_JSON_RPC_URL)) !== null && _a !== void 0 ? _a : undefined;\n    }\n    set jsonRpcUrl(value) {\n        this._storage.setItem(DEFAULT_JSON_RPC_URL, value);\n    }\n    updateProviderInfo(jsonRpcUrl, chainId) {\n        var _a;\n        this.jsonRpcUrl = jsonRpcUrl;\n        // emit chainChanged event if necessary\n        const originalChainId = this.getChainId();\n        this._storage.setItem(DEFAULT_CHAIN_ID_KEY, chainId.toString(10));\n        const chainChanged = ensureIntNumber(chainId) !== originalChainId;\n        if (chainChanged) {\n            (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'chainChanged', hexStringFromNumber(chainId));\n        }\n    }\n    async watchAsset(params) {\n        const request = (Array.isArray(params) ? params[0] : params);\n        if (!request.type) {\n            throw standardErrors.rpc.invalidParams('Type is required');\n        }\n        if ((request === null || request === void 0 ? void 0 : request.type) !== 'ERC20') {\n            throw standardErrors.rpc.invalidParams(`Asset of type '${request.type}' is not supported`);\n        }\n        if (!(request === null || request === void 0 ? void 0 : request.options)) {\n            throw standardErrors.rpc.invalidParams('Options are required');\n        }\n        if (!(request === null || request === void 0 ? void 0 : request.options.address)) {\n            throw standardErrors.rpc.invalidParams('Address is required');\n        }\n        const chainId = this.getChainId();\n        const { address, symbol, image, decimals } = request.options;\n        const relay = this.initializeRelay();\n        const result = await relay.watchAsset(request.type, address, symbol, decimals, image, chainId === null || chainId === void 0 ? void 0 : chainId.toString());\n        if (isErrorResponse(result))\n            return false;\n        return !!result.result;\n    }\n    async addEthereumChain(params) {\n        var _a, _b;\n        const request = params[0];\n        if (((_a = request.rpcUrls) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n            throw standardErrors.rpc.invalidParams('please pass in at least 1 rpcUrl');\n        }\n        if (!request.chainName || request.chainName.trim() === '') {\n            throw standardErrors.rpc.invalidParams('chainName is a required field');\n        }\n        if (!request.nativeCurrency) {\n            throw standardErrors.rpc.invalidParams('nativeCurrency is a required field');\n        }\n        const chainIdNumber = Number.parseInt(request.chainId, 16);\n        if (chainIdNumber === this.getChainId()) {\n            return false;\n        }\n        const relay = this.initializeRelay();\n        const { rpcUrls = [], blockExplorerUrls = [], chainName, iconUrls = [], nativeCurrency, } = request;\n        const res = await relay.addEthereumChain(chainIdNumber.toString(), rpcUrls, iconUrls, blockExplorerUrls, chainName, nativeCurrency);\n        if (isErrorResponse(res))\n            return false;\n        if (((_b = res.result) === null || _b === void 0 ? void 0 : _b.isApproved) === true) {\n            this.updateProviderInfo(rpcUrls[0], chainIdNumber);\n            return null;\n        }\n        throw standardErrors.rpc.internal('unable to add ethereum chain');\n    }\n    async switchEthereumChain(params) {\n        const request = params[0];\n        const chainId = Number.parseInt(request.chainId, 16);\n        const relay = this.initializeRelay();\n        const res = await relay.switchEthereumChain(chainId.toString(10), this.selectedAddress || undefined);\n        if (isErrorResponse(res))\n            throw res;\n        const switchResponse = res.result;\n        if (switchResponse.isApproved && switchResponse.rpcUrl.length > 0) {\n            this.updateProviderInfo(switchResponse.rpcUrl, chainId);\n        }\n        return null;\n    }\n    async cleanup() {\n        this.callback = null;\n        if (this._relay) {\n            this._relay.resetAndReload();\n        }\n        this._storage.clear();\n    }\n    _setAddresses(addresses, _) {\n        var _a;\n        if (!Array.isArray(addresses)) {\n            throw new Error('addresses is not an array');\n        }\n        const newAddresses = addresses.map((address) => ensureAddressString(address));\n        if (JSON.stringify(newAddresses) === JSON.stringify(this._addresses)) {\n            return;\n        }\n        this._addresses = newAddresses;\n        (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'accountsChanged', newAddresses);\n        this._storage.setItem(LOCAL_STORAGE_ADDRESSES_KEY, newAddresses.join(' '));\n    }\n    async request(request) {\n        const correlationId = correlationIds.get(request);\n        logRequestStarted({ method: request.method, correlationId });\n        try {\n            const result = await this._request(request);\n            logRequestCompleted({ method: request.method, correlationId });\n            return result;\n        }\n        catch (error) {\n            logRequestError({\n                method: request.method,\n                correlationId,\n                errorMessage: parseErrorMessageFromAny(error),\n            });\n            throw error;\n        }\n    }\n    async _request(request) {\n        const params = request.params || [];\n        switch (request.method) {\n            case 'eth_accounts':\n                return [...this._addresses];\n            case 'eth_coinbase':\n                return this.selectedAddress || null;\n            case 'net_version':\n                return this.getChainId().toString(10);\n            case 'eth_chainId':\n                return hexStringFromNumber(this.getChainId());\n            case 'eth_requestAccounts':\n                return this._eth_requestAccounts();\n            case 'eth_ecRecover':\n            case 'personal_ecRecover':\n                return this.ecRecover(request);\n            case 'personal_sign':\n                return this.personalSign(request);\n            case 'eth_signTransaction':\n                return this._eth_signTransaction(params);\n            case 'eth_sendRawTransaction':\n                return this._eth_sendRawTransaction(params);\n            case 'eth_sendTransaction':\n                return this._eth_sendTransaction(params);\n            case 'eth_signTypedData_v1':\n            case 'eth_signTypedData_v3':\n            case 'eth_signTypedData_v4':\n            case 'eth_signTypedData':\n                return this.signTypedData(request);\n            case 'wallet_addEthereumChain':\n                return this.addEthereumChain(params);\n            case 'wallet_switchEthereumChain':\n                return this.switchEthereumChain(params);\n            case 'wallet_watchAsset':\n                return this.watchAsset(params);\n            default:\n                if (!this.jsonRpcUrl)\n                    throw standardErrors.rpc.internal('No RPC URL set for chain');\n                return fetchRPCRequest(request, this.jsonRpcUrl);\n        }\n    }\n    _ensureKnownAddress(addressString) {\n        const addressStr = ensureAddressString(addressString);\n        const lowercaseAddresses = this._addresses.map((address) => ensureAddressString(address));\n        if (!lowercaseAddresses.includes(addressStr)) {\n            throw new Error('Unknown Ethereum address');\n        }\n    }\n    _prepareTransactionParams(tx) {\n        const fromAddress = tx.from ? ensureAddressString(tx.from) : this.selectedAddress;\n        if (!fromAddress) {\n            throw new Error('Ethereum address is unavailable');\n        }\n        this._ensureKnownAddress(fromAddress);\n        const toAddress = tx.to ? ensureAddressString(tx.to) : null;\n        const weiValue = tx.value != null ? ensureBigInt(tx.value) : BigInt(0);\n        const data = tx.data ? ensureBuffer(tx.data) : Buffer.alloc(0);\n        const nonce = tx.nonce != null ? ensureIntNumber(tx.nonce) : null;\n        const gasPriceInWei = tx.gasPrice != null ? ensureBigInt(tx.gasPrice) : null;\n        const maxFeePerGas = tx.maxFeePerGas != null ? ensureBigInt(tx.maxFeePerGas) : null;\n        const maxPriorityFeePerGas = tx.maxPriorityFeePerGas != null ? ensureBigInt(tx.maxPriorityFeePerGas) : null;\n        const gasLimit = tx.gas != null ? ensureBigInt(tx.gas) : null;\n        const chainId = tx.chainId ? ensureIntNumber(tx.chainId) : this.getChainId();\n        return {\n            fromAddress,\n            toAddress,\n            weiValue,\n            data,\n            nonce,\n            gasPriceInWei,\n            maxFeePerGas,\n            maxPriorityFeePerGas,\n            gasLimit,\n            chainId,\n        };\n    }\n    async ecRecover(request) {\n        const { method, params } = request;\n        if (!Array.isArray(params))\n            throw standardErrors.rpc.invalidParams();\n        const relay = this.initializeRelay();\n        const res = await relay.sendRequest({\n            method: 'ethereumAddressFromSignedMessage',\n            params: {\n                message: encodeToHexString(params[0]),\n                signature: encodeToHexString(params[1]),\n                addPrefix: method === 'personal_ecRecover',\n            },\n        });\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    getChainId() {\n        var _a;\n        return Number.parseInt((_a = this._storage.getItem(DEFAULT_CHAIN_ID_KEY)) !== null && _a !== void 0 ? _a : '1', 10);\n    }\n    async _eth_requestAccounts() {\n        var _a, _b;\n        if (this._addresses.length > 0) {\n            (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'connect', { chainId: hexStringFromNumber(this.getChainId()) });\n            return this._addresses;\n        }\n        const relay = this.initializeRelay();\n        const res = await relay.requestEthereumAccounts();\n        if (isErrorResponse(res))\n            throw res;\n        if (!res.result) {\n            throw new Error('accounts received is empty');\n        }\n        this._setAddresses(res.result);\n        (_b = this.callback) === null || _b === void 0 ? void 0 : _b.call(this, 'connect', { chainId: hexStringFromNumber(this.getChainId()) });\n        return this._addresses;\n    }\n    async personalSign({ params }) {\n        if (!Array.isArray(params))\n            throw standardErrors.rpc.invalidParams();\n        const address = params[1];\n        const rawData = params[0];\n        this._ensureKnownAddress(address);\n        const relay = this.initializeRelay();\n        const res = await relay.sendRequest({\n            method: 'signEthereumMessage',\n            params: {\n                address: ensureAddressString(address),\n                message: encodeToHexString(rawData),\n                addPrefix: true,\n                typedDataJson: null,\n            },\n        });\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async _eth_signTransaction(params) {\n        const tx = this._prepareTransactionParams(params[0] || {});\n        const relay = this.initializeRelay();\n        const res = await relay.signEthereumTransaction(tx);\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async _eth_sendRawTransaction(params) {\n        const signedTransaction = ensureBuffer(params[0]);\n        const relay = this.initializeRelay();\n        const res = await relay.submitEthereumTransaction(signedTransaction, this.getChainId());\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async _eth_sendTransaction(params) {\n        const tx = this._prepareTransactionParams(params[0] || {});\n        const relay = this.initializeRelay();\n        const res = await relay.signAndSubmitEthereumTransaction(tx);\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async signTypedData(request) {\n        const { method, params } = request;\n        if (!Array.isArray(params))\n            throw standardErrors.rpc.invalidParams();\n        const encode = (input) => {\n            const hashFuncMap = {\n                eth_signTypedData_v1: eip712.hashForSignTypedDataLegacy,\n                eth_signTypedData_v3: eip712.hashForSignTypedData_v3,\n                eth_signTypedData_v4: eip712.hashForSignTypedData_v4,\n                eth_signTypedData: eip712.hashForSignTypedData_v4,\n            };\n            return hexStringFromBuffer(hashFuncMap[method]({\n                data: ensureParsedJSONObject(input),\n            }), true);\n        };\n        const address = params[method === 'eth_signTypedData_v1' ? 1 : 0];\n        const rawData = params[method === 'eth_signTypedData_v1' ? 0 : 1];\n        this._ensureKnownAddress(address);\n        const relay = this.initializeRelay();\n        const res = await relay.sendRequest({\n            method: 'signEthereumMessage',\n            params: {\n                address: ensureAddressString(address),\n                message: encode(rawData),\n                typedDataJson: JSON.stringify(rawData, null, 2),\n                addPrefix: false,\n            },\n        });\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    initializeRelay() {\n        if (!this._relay) {\n            this._relay = new WalletLinkRelay({\n                linkAPIUrl: WALLETLINK_URL,\n                storage: this._storage,\n                metadata: this.metadata,\n                accountsCallback: this._setAddresses.bind(this),\n                chainCallback: this.updateProviderInfo.bind(this),\n            });\n        }\n        return this._relay;\n    }\n}\n//# sourceMappingURL=WalletLinkSigner.js.map","import { ScopedLocalStorage } from '../core/storage/ScopedLocalStorage.js';\nimport { SCWSigner } from './scw/SCWSigner.js';\nimport { WalletLinkSigner } from './walletlink/WalletLinkSigner.js';\nconst SIGNER_TYPE_KEY = 'SignerType';\nconst storage = new ScopedLocalStorage('CBWSDK', 'SignerConfigurator');\nexport function loadSignerType() {\n    return storage.getItem(SIGNER_TYPE_KEY);\n}\nexport function storeSignerType(signerType) {\n    storage.setItem(SIGNER_TYPE_KEY, signerType);\n}\nexport function signerToSignerType(signer) {\n    if (!signer) {\n        return undefined;\n    }\n    return signer instanceof SCWSigner ? 'scw' : 'walletlink';\n}\nexport async function fetchSignerType(params) {\n    const { communicator, metadata, handshakeRequest, callback } = params;\n    listenForWalletLinkSessionRequest(communicator, metadata, callback, handshakeRequest).catch(() => { });\n    const request = {\n        id: crypto.randomUUID(),\n        event: 'selectSignerType',\n        data: Object.assign(Object.assign({}, params.preference), { handshakeRequest }),\n    };\n    const { data } = await communicator.postRequestAndWaitForResponse(request);\n    return data;\n}\nexport function createSigner(params) {\n    const { signerType, metadata, communicator, callback } = params;\n    switch (signerType) {\n        case 'scw': {\n            return new SCWSigner({\n                metadata,\n                callback,\n                communicator,\n            });\n        }\n        case 'walletlink': {\n            return new WalletLinkSigner({\n                metadata,\n                callback,\n            });\n        }\n    }\n}\nasync function listenForWalletLinkSessionRequest(communicator, metadata, callback, handshakeRequest) {\n    await communicator.onMessage(({ event }) => event === 'WalletLinkSessionRequest');\n    // temporary walletlink signer instance to handle WalletLinkSessionRequest\n    // will revisit this when refactoring the walletlink signer\n    const walletlink = new WalletLinkSigner({\n        metadata,\n        callback,\n    });\n    // send wallet link session to popup\n    communicator.postMessage({\n        event: 'WalletLinkUpdate',\n        data: { session: walletlink.getSession() },\n    });\n    // wait for handshake to complete\n    await walletlink.handshake(handshakeRequest);\n    // send connected status to popup\n    communicator.postMessage({\n        event: 'WalletLinkUpdate',\n        data: { connected: true },\n    });\n}\n//# sourceMappingURL=util.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Communicator } from './core/communicator/Communicator.js';\nimport { CB_WALLET_RPC_URL } from './core/constants.js';\nimport { standardErrorCodes } from './core/error/constants.js';\nimport { standardErrors } from './core/error/errors.js';\nimport { serializeError } from './core/error/serialize.js';\nimport { ProviderEventEmitter, } from './core/provider/interface.js';\nimport { ScopedLocalStorage } from './core/storage/ScopedLocalStorage.js';\nimport { logEnableFunctionCalled, logRequestError, logRequestResponded, logRequestStarted, logSignerLoadedFromStorage, } from './core/telemetry/events/provider.js';\nimport { logSignerSelectionRequested, logSignerSelectionResponded, } from './core/telemetry/events/signer-selection.js';\nimport { hexStringFromNumber } from './core/type/util.js';\nimport { correlationIds } from './store/correlation-ids/store.js';\nimport { store } from './store/store.js';\nimport { checkErrorForInvalidRequestArgs, fetchRPCRequest } from './util/provider.js';\nimport { createSigner, fetchSignerType, loadSignerType, signerToSignerType, storeSignerType, } from './sign/util.js';\nexport class CoinbaseWalletProvider extends ProviderEventEmitter {\n    constructor(_a) {\n        var { metadata } = _a, _b = _a.preference, { keysUrl } = _b, preference = __rest(_b, [\"keysUrl\"]);\n        super();\n        this.signer = null;\n        this.isCoinbaseWallet = true;\n        this.metadata = metadata;\n        this.preference = preference;\n        this.communicator = new Communicator({\n            url: keysUrl,\n            metadata,\n            preference,\n        });\n        const signerType = loadSignerType();\n        if (signerType) {\n            this.signer = this.initSigner(signerType);\n            logSignerLoadedFromStorage({ signerType });\n        }\n    }\n    async request(args) {\n        // correlation id across the entire request lifecycle\n        const correlationId = crypto.randomUUID();\n        correlationIds.set(args, correlationId);\n        logRequestStarted({ method: args.method, correlationId });\n        try {\n            const result = await this._request(args);\n            logRequestResponded({\n                method: args.method,\n                signerType: signerToSignerType(this.signer),\n                correlationId,\n            });\n            return result;\n        }\n        catch (error) {\n            logRequestError({\n                method: args.method,\n                correlationId,\n                signerType: signerToSignerType(this.signer),\n                errorMessage: error instanceof Error ? error.message : '',\n            });\n            throw error;\n        }\n        finally {\n            correlationIds.delete(args);\n        }\n    }\n    async _request(args) {\n        try {\n            checkErrorForInvalidRequestArgs(args);\n            if (!this.signer) {\n                switch (args.method) {\n                    case 'eth_requestAccounts': {\n                        let signerType;\n                        const subAccountsConfig = store.subAccountsConfig.get();\n                        if (subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.enableAutoSubAccounts) {\n                            signerType = 'scw';\n                        }\n                        else {\n                            signerType = await this.requestSignerSelection(args);\n                        }\n                        const signer = this.initSigner(signerType);\n                        if (signerType === 'scw' && (subAccountsConfig === null || subAccountsConfig === void 0 ? void 0 : subAccountsConfig.enableAutoSubAccounts)) {\n                            await signer.handshake({ method: 'handshake' });\n                            // eth_requestAccounts gets translated to wallet_connect at SCWSigner level\n                            await signer.request(args);\n                        }\n                        else {\n                            await signer.handshake(args);\n                        }\n                        this.signer = signer;\n                        storeSignerType(signerType);\n                        break;\n                    }\n                    case 'wallet_connect': {\n                        const signer = this.initSigner('scw');\n                        await signer.handshake({ method: 'handshake' }); // exchange session keys\n                        const result = await signer.request(args); // send diffie-hellman encrypted request\n                        this.signer = signer;\n                        return result;\n                    }\n                    case 'wallet_sendCalls':\n                    case 'wallet_sign': {\n                        const ephemeralSigner = this.initSigner('scw');\n                        await ephemeralSigner.handshake({ method: 'handshake' }); // exchange session keys\n                        const result = await ephemeralSigner.request(args); // send diffie-hellman encrypted request\n                        await ephemeralSigner.cleanup(); // clean up (rotate) the ephemeral session keys\n                        return result;\n                    }\n                    case 'wallet_getCallsStatus': {\n                        const result = await fetchRPCRequest(args, CB_WALLET_RPC_URL);\n                        return result;\n                    }\n                    case 'net_version': {\n                        const result = 1; // default value\n                        return result;\n                    }\n                    case 'eth_chainId': {\n                        const result = hexStringFromNumber(1); // default value\n                        return result;\n                    }\n                    default: {\n                        throw standardErrors.provider.unauthorized(\"Must call 'eth_requestAccounts' before other methods\");\n                    }\n                }\n            }\n            const result = await this.signer.request(args);\n            return result;\n        }\n        catch (error) {\n            const { code } = error;\n            if (code === standardErrorCodes.provider.unauthorized)\n                this.disconnect();\n            return Promise.reject(serializeError(error));\n        }\n    }\n    /** @deprecated Use `.request({ method: 'eth_requestAccounts' })` instead. */\n    async enable() {\n        console.warn(`.enable() has been deprecated. Please use .request({ method: \"eth_requestAccounts\" }) instead.`);\n        logEnableFunctionCalled();\n        return await this.request({\n            method: 'eth_requestAccounts',\n        });\n    }\n    async disconnect() {\n        var _a;\n        await ((_a = this.signer) === null || _a === void 0 ? void 0 : _a.cleanup());\n        this.signer = null;\n        ScopedLocalStorage.clearAll();\n        correlationIds.clear();\n        this.emit('disconnect', standardErrors.provider.disconnected('User initiated disconnection'));\n    }\n    async requestSignerSelection(handshakeRequest) {\n        logSignerSelectionRequested();\n        const signerType = await fetchSignerType({\n            communicator: this.communicator,\n            preference: this.preference,\n            metadata: this.metadata,\n            handshakeRequest,\n            callback: this.emit.bind(this),\n        });\n        logSignerSelectionResponded(signerType);\n        return signerType;\n    }\n    initSigner(signerType) {\n        return createSigner({\n            signerType,\n            metadata: this.metadata,\n            communicator: this.communicator,\n            callback: this.emit.bind(this),\n        });\n    }\n}\n//# sourceMappingURL=CoinbaseWalletProvider.js.map","import { getCoinbaseInjectedProvider } from './util/provider.js';\nimport { CoinbaseWalletProvider } from './CoinbaseWalletProvider.js';\nexport function createCoinbaseWalletProvider(options) {\n    var _a;\n    const params = {\n        metadata: options.metadata,\n        preference: options.preference,\n    };\n    return (_a = getCoinbaseInjectedProvider(params)) !== null && _a !== void 0 ? _a : new CoinbaseWalletProvider(params);\n}\n//# sourceMappingURL=createCoinbaseWalletProvider.js.map","import { decodeAbiParameters, encodeFunctionData, toHex } from 'viem';\nimport { loadTelemetryScript } from './core/telemetry/initCCA.js';\nimport { abi } from './sign/scw/utils/constants.js';\nimport { assertPresence } from './util/assertPresence.js';\nimport { checkCrossOriginOpenerPolicy } from './util/checkCrossOriginOpenerPolicy.js';\nimport { validatePreferences, validateSubAccount } from './util/validatePreferences.js';\nimport { createCoinbaseWalletProvider } from './createCoinbaseWalletProvider.js';\nimport { store } from './store/store.js';\nconst DEFAULT_PREFERENCE = {\n    options: 'all',\n};\n/**\n * Create a Coinbase Wallet SDK instance.\n * @param params - Options to create a Coinbase Wallet SDK instance.\n * @returns A Coinbase Wallet SDK object.\n */\nexport function createCoinbaseWalletSDK(params) {\n    var _a, _b, _c, _d;\n    const options = {\n        metadata: {\n            appName: params.appName || 'Dapp',\n            appLogoUrl: params.appLogoUrl || '',\n            appChainIds: params.appChainIds || [],\n        },\n        preference: Object.assign(DEFAULT_PREFERENCE, (_a = params.preference) !== null && _a !== void 0 ? _a : {}),\n        paymasterUrls: params.paymasterUrls,\n    };\n    // If we have a toOwnerAccount function, set it in the non-persisted config\n    if ((_b = params.subAccounts) === null || _b === void 0 ? void 0 : _b.toOwnerAccount) {\n        validateSubAccount(params.subAccounts.toOwnerAccount);\n    }\n    store.subAccountsConfig.set({\n        toOwnerAccount: (_c = params.subAccounts) === null || _c === void 0 ? void 0 : _c.toOwnerAccount,\n        // @ts-expect-error - enableSubAccounts is not officially supported yet\n        enableAutoSubAccounts: (_d = params.subAccounts) === null || _d === void 0 ? void 0 : _d.enableAutoSubAccounts,\n    });\n    // set the options in the store\n    store.config.set(options);\n    // rehydrate the store from storage\n    void store.persist.rehydrate();\n    // check the cross origin opener policy\n    void checkCrossOriginOpenerPolicy();\n    // load the telemetry script\n    if (options.preference.telemetry !== false) {\n        void loadTelemetryScript();\n    }\n    // Validate user supplied preferences. Throws if key/values are not valid.\n    validatePreferences(options.preference);\n    let provider = null;\n    const sdk = {\n        getProvider() {\n            if (!provider) {\n                provider = createCoinbaseWalletProvider(options);\n            }\n            // @ts-expect-error - store reference to the sdk on the provider\n            provider.sdk = sdk;\n            return provider;\n        },\n        subAccount: {\n            async create(account) {\n                var _a, _b;\n                const state = store.getState();\n                assertPresence((_a = state.subAccount) === null || _a === void 0 ? void 0 : _a.address, new Error('subaccount already exists'));\n                return (await ((_b = sdk.getProvider()) === null || _b === void 0 ? void 0 : _b.request({\n                    method: 'wallet_addSubAccount',\n                    params: [\n                        {\n                            version: '1',\n                            account,\n                        },\n                    ],\n                })));\n            },\n            async get() {\n                var _a, _b;\n                const subAccount = store.subAccounts.get();\n                if (subAccount === null || subAccount === void 0 ? void 0 : subAccount.address) {\n                    return subAccount;\n                }\n                const response = (await ((_a = sdk.getProvider()) === null || _a === void 0 ? void 0 : _a.request({\n                    method: 'wallet_connect',\n                    params: [\n                        {\n                            version: '1',\n                            capabilities: {},\n                        },\n                    ],\n                })));\n                const subAccounts = (_b = response.accounts[0].capabilities) === null || _b === void 0 ? void 0 : _b.subAccounts;\n                if (!Array.isArray(subAccounts)) {\n                    return null;\n                }\n                return subAccounts[0];\n            },\n            async addOwner({ address, publicKey, chainId }) {\n                var _a, _b;\n                const subAccount = store.subAccounts.get();\n                const account = store.account.get();\n                assertPresence(account, new Error('account does not exist'));\n                assertPresence(subAccount === null || subAccount === void 0 ? void 0 : subAccount.address, new Error('subaccount does not exist'));\n                const calls = [];\n                if (publicKey) {\n                    const [x, y] = decodeAbiParameters([{ type: 'bytes32' }, { type: 'bytes32' }], publicKey);\n                    calls.push({\n                        to: subAccount.address,\n                        data: encodeFunctionData({\n                            abi,\n                            functionName: 'addOwnerPublicKey',\n                            args: [x, y],\n                        }),\n                        value: toHex(0),\n                    });\n                }\n                if (address) {\n                    calls.push({\n                        to: subAccount.address,\n                        data: encodeFunctionData({\n                            abi,\n                            functionName: 'addOwnerAddress',\n                            args: [address],\n                        }),\n                        value: toHex(0),\n                    });\n                }\n                return (await ((_a = sdk.getProvider()) === null || _a === void 0 ? void 0 : _a.request({\n                    method: 'wallet_sendCalls',\n                    params: [\n                        {\n                            calls,\n                            chainId: toHex(chainId),\n                            from: (_b = account.accounts) === null || _b === void 0 ? void 0 : _b[0],\n                            version: '1',\n                        },\n                    ],\n                })));\n            },\n            setToOwnerAccount(toSubAccountOwner) {\n                validateSubAccount(toSubAccountOwner);\n                store.subAccountsConfig.set({\n                    toOwnerAccount: toSubAccountOwner,\n                });\n            },\n        },\n    };\n    return sdk;\n}\n//# sourceMappingURL=createCoinbaseWalletSDK.js.map"],"names":["VERSION","NAME","createChainSlice","createKeysSlice","createAccountSlice","createSubAccountSlice","createSubAccountConfigSlice","createSpendPermissionsSlice","createConfigSlice","sdkstore","createStore","persist","args","createJSONStorage","state","subAccountsConfig","subAccountConfig","subAccounts","subAccount","spendPermissions","account","chains","keys","key","value","config","actions","store","TELEMETRY_SCRIPT_CONTENT","loadTelemetryScript","resolve","reject","script","initCCA","_a","_b","_c","deviceId","init","identify","PlatformName","standardErrorCodes","errorValues","FALLBACK_MESSAGE","JSON_RPC_SERVER_ERROR_MESSAGE","getMessageFromCode","code","fallbackMessage","codeString","hasKey","isJsonRpcServerError","isValidCode","serialize","error","shouldIncludeStack","serialized","_error","assignOriginalError","hasStringProperty","obj","prop","standardErrors","arg","getEthJsonRpcError","opts","getEthProviderError","message","data","EthereumProviderError","parseOpts","EthereumRpcError","isValidEthProviderCode","isActionableHttpRequestError","errorObject","isViemError","viemHttpErrorToProviderError","details","OpaqueType","HexString","BigIntString","IntNumber","num","INT_STRING_REGEX","HEXADECIMAL_STRING_REGEX","randomBytesHex","length","uint8ArrayToHex","b","hexStringToUint8Array","hexString","byte","hexStringFromBuffer","buf","includePrefix","hex","encodeToHexString","str","ensureBuffer","bigIntStringFromBigInt","bi","hexStringFromNumber","has0xPrefix","strip0x","prepend0x","isHexString","s","ensureHexString","ensureEvenLengthHexString","h","ensureAddressString","Buffer","ensureIntNumber","ensureBigInt","val","isBigNumber","ensureParsedJSONObject","constructor_","COOP_ERROR_MESSAGE","createCoopChecker","crossOriginOpenerPolicy","url","response","result","checkCrossOriginOpenerPolicy","getCrossOriginOpenerPolicy","fetchRPCRequest","request","rpcUrl","requestBody","res","getCoinbaseInjectedLegacyProvider","getInjectedEthereum","window","getCoinbaseInjectedProvider","metadata","preference","appName","appLogoUrl","appChainIds","extension","ethereum","checkErrorForInvalidRequestArgs","method","params","validatePreferences","validateSubAccount","toAccount","CB_KEYS_URL","CB_WALLET_RPC_URL","WALLETLINK_URL","CBW_MOBILE_DEEPLINK_URL","ComponentType","ActionType","AnalyticsEventImportance","logEvent","name","event","importance","_d","logPopupSetupStarted","logPopupSetupCompleted","logPopupUnloadReceived","logSnackbarShown","snackbarContext","logSnackbarActionClicked","snackbarAction","css$2","injectCssReset","styleEl","css","isInIFrame","getLocation","isMobileWeb","isDarkMode","css$1","cblogo","gearIcon","Snackbar","el","itemProps","render","SnackbarContainer","SnackbarInstance","props","clsx","autoExpand","menuItems","hidden","setHidden","useState","expanded","setExpanded","useEffect","timers","toggleExpanded","action","i","RETRY_SVG_PATH","WalletLinkRelayUI","container","options","snackbarProps","POPUP_WIDTH","POPUP_HEIGHT","RETRY_BUTTON","POPUP_BLOCKED_MESSAGE","snackbar","openPopup","left","top","appendAppInfoQueryParams","tryOpenPopup","popupId","popup","sb","initSnackbar","closePopup","root","Communicator","responsePromise","requestId","predicate","listener","isErrorResponse","serializeError","getErrorObject","docUrl","ProviderEventEmitter","EventEmitter","ScopedLocalStorage","scope","module","item","prefix","keysToRemove","logSignerLoadedFromStorage","signerType","logRequestStarted","correlationId","logRequestError","errorMessage","logRequestResponded","logEnableFunctionCalled","logSignerSelectionRequested","logSignerSelectionResponded","correlationIdsStore","correlationIds","newMap","logHandshakeStarted","logHandshakeError","logHandshakeCompleted","logRequestCompleted","logSubAccountRequestStarted","logSubAccountRequestCompleted","logSubAccountRequestError","logAddOwnerStarted","logAddOwnerCompleted","logAddOwnerError","logInsufficientBalanceErrorHandlingStarted","logInsufficientBalanceErrorHandlingCompleted","logInsufficientBalanceErrorHandlingError","parseErrorMessageFromAny","errorOrAny","ChainClients","createClients","c","_e","_f","_g","_h","viemchain","defineChain","client","createPublicClient","http","bundlerClient","createBundlerClient","getClient","chainId","assertPresence","assertArrayPresence","assertSubAccount","info","isAddress","isHex","generateKeyPair","deriveSharedSecret","ownPrivateKey","peerPublicKey","encrypt","sharedSecret","plainText","iv","cipherText","decrypt","getFormat","keyType","exportKeyToHexString","type","format","exported","importKeyFromHexString","arrayBuffer","encryptContent","content","_","decryptContent","encryptedData","createStorage","get","del","set","STORAGE_SCOPE","STORAGE_NAME","ACTIVE_ID_KEY","storage","keypair","WebCryptoP256.createKeyPair","publicKey","Hex.slice","PublicKey.toHex","getKeypair","id","getOrCreateKeypair","kp","pubKey","getAccount","sign","payload","WebAuthnP256.getSignPayload","signature","WebCryptoP256.sign","Signature.toHex","hash","hashMessage","parameters","hashTypedData","getCryptoKeyAccount","OWN_PRIVATE_KEY","OWN_PUBLIC_KEY","PEER_PUBLIC_KEY","SCWKeyManager","newKeyPair","path","factoryAddress","spendPermissionManagerAddress","abi","factoryAbi","getSenderFromRequest","addSenderToRequest","sender","assertParamsChainId","assertGetCapabilitiesParams","param","injectRequestCapabilities","capabilities","modifiedRequest","requestCapabilities","initSubAccountConfig","owner","assertFetchPermissionsRequest","fillMissingParamsForFetchPermissions","accountFromStore","subAccountFromStore","numberToHex","createSpendPermissionMessage","spendPermission","createSpendPermissionBatchMessage","spendPermissionBatch","p","waitForCallsTransactionHash","waitForCallsStatus","createWalletSendCallsRequest","calls","from","paymasterUrls","presentSubAccountFundingDialog","parseFundingOptions","errorData","sourceAddress","spendPermissionRequests","token","amount","sources","source","hexToBigInt","isSendCallsParams","isEthSendTransactionParams","compute16ByteHash","input","slice","keccak256","toHex","makeDataSuffix","attribution","dappOrigin","requestHasCapability","capabilityName","prependWithoutDuplicates","array","filtered","appendWithoutDuplicates","getCachedWalletConnectResponse","accounts","base64ToBase64Url","base64","arrayBufferToBase64Url","buffer","base64String","convertCredentialToJSON","webauthn","signatureRaw","Signature.fromHex","stringToBytes","hexToBytes","asn1EncodeSignature","r","rBytes","trim","sBytes","rLength","sLength","totalLength","__rest","e","t","createSmartAccount","ownerIndex","address","factoryData","entryPoint","entryPoint06Abi","entryPoint06Address","factory","toSmartAccount","decodeFunctionData","BaseError","encodeFunctionData","call","wrapSignature","toReplaySafeHash","domain","types","primaryType","userOperation","getUserOperationHash","toWebAuthnSignature","encodeAbiParameters","stringToHex","signatureData","size","parseSignature","encodePacked","createSubAccountSigner","parentAddress","rawParams","sendCallsRequest","prepareCallsRequest","prepareCallsResponse","signResponse","hexToString","prepareCallsParams","typedData","newError","findOwnerIndex","getCode","getAddress","initData","owners","formatPublicKey","ownerCount","readContract","formatted","pad","presentAddOwnerDialog","handleAddSubAccountOwner","ownerAccount","globalAccountRequest","globalAccount","x","y","decodeAbiParameters","callsId","handleInsufficientBalanceError","globalAccountAddress","subAccountAddress","subAccountRequest","userChoice","signatureRequest","defaultPeriod","defaultMultiplier","transferCalls","erc20Abi","originalSendCallsParams","subAccountCallData","SCWSigner","handshakeMessage","decrypted","_j","_k","_l","_m","_o","_p","capabilitiesToInject","cachedResponse","completeRequest","permissions","requestedChainId","hexToNumber","permission","capabilityResponse","accounts_","popupResult","requestedAccount","filterChainIds","isAddressEqual","filterChainNumbers","capabilityKey","capabilityChainNumber","encrypted","availableChains","nativeCurrencies","nativeCurrency","walletCapabilities","newAvailableChains","chain","dataSuffix","handlingError","logWalletLinkConnectionConnectionFailed","logWalletLinkConnectionFetchUnseenEventsFailed","_assert","number","n","bool","isBytes","a","bytes","lengths","exists","instance","checkFinished","output","out","min","assert","_u64","U32_MASK64","_32n","fromBig","le","split","lst","Ah","Al","l","toBig","shrSH","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","add","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","u64","crypto","exports","crypto_1","require$$0","_assert_js_1","require$$1","u8","arr","u32","createView","rotr","word","shift","rotl","byteSwap","byteSwap32","hexes","bytesToHex","asciis","asciiToBase16","char","hl","al","ai","hi","n1","n2","nextTick","asyncLoop","iters","tick","cb","ts","diff","utf8ToBytes","toBytes","concatBytes","arrays","sum","Hash","toStr","checkOpts","defaults","wrapConstructor","hashCons","hashC","msg","tmp","wrapConstructorWithOpts","wrapXOFConstructorWithOpts","randomBytes","bytesLength","sha3","_u64_js_1","utils_js_1","require$$2","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","_0n","_1n","_2n","_7n","_256n","_0x71n","round","R","j","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","keccakP","rounds","B","idx1","idx0","B0","B1","Th","Tl","curH","curL","PI","Keccak","blockLen","suffix","outputLen","enableXOF","len","pos","take","bufferOut","to","gen","genShake","keccak_256","zeros","intToHex","intToBuffer","padToEven","bitLengthFromBigInt","bufferBEFromBigInt","byteArray","twosFromBigInt","width","isNegative","mask","setLength","right","toBuffer","setLengthRight","v","stripHexPrefix","bufferToHex","keccak","bits","util","elementaryName","parseTypeN","parseTypeNxM","parseTypeArray","parseNumber","encodeSingle","ret","isArray","bitLength","twos","isDynamic","rawEncode","values","headLength","cur","solidityPack","soliditySHA3","TYPED_MESSAGE_SCHEMA","TypedDataUtils","useV4","encodedTypes","encodedValues","encodeField","parsedType","typeValuePairs","field","deps","dep","results","sanitizedData","parts","ethEip712Util","msgParams","typedSignatureHashLegacy","schema","WALLET_USER_NAME_KEY","LOCAL_STORAGE_ADDRESSES_KEY","APP_VERSION_KEY","WalletLinkCipher","secret","ivBytes","secretKey","enc","encryptedResult","tagLength","authTag","encryptedPlaintext","authTagBytes","encryptedPlaintextBytes","concatenated","concatenatedBytes","algo","decoder","err","WalletLinkHTTP","linkAPIUrl","sessionId","sessionKey","credentials","events","responseEvents","ConnectionState","WalletLinkWebSocket","WebSocketClass","webSocket","evt","HEARTBEAT_INTERVAL","REQUEST_TIMEOUT","WalletLinkConnection","session","handler","__destroyed","encryptedEthereumAddress","encryptedMetadataValue","decryptedValue","walletUsername","appVersion","encryptedChainId","encryptedJsonRpcUrl","jsonRpcUrl","ws","connected","delay","m","linked","oldWs","callback","decryptedData","unencryptedData","callWebhook","reqId","timeoutId","RelayEventManager","idStr","STORAGE_KEY_SESSION_ID","STORAGE_KEY_SESSION_SECRET","STORAGE_KEY_SESSION_LINKED","WalletLinkSession","sha256","RedirectDialog","RedirectDialogContent","title","buttonText","darkMode","onButtonClick","onDismiss","theme","WLMobileRelayUI","walletLinkUrl","anchorTag","_options","WalletLinkRelay","cachedAddresses","addresses","wasConnectedViaStandalone","selectedAddress","ui","connection","storedSession","signedTransaction","hideSnackbarItem","cancel","symbol","decimals","image","rpcUrls","iconUrls","blockExplorerUrls","chainName","DEFAULT_CHAIN_ID_KEY","DEFAULT_JSON_RPC_URL","WalletLinkSigner","relay","originalChainId","chainIdNumber","switchResponse","newAddresses","addressString","addressStr","tx","fromAddress","toAddress","weiValue","nonce","gasPriceInWei","maxFeePerGas","maxPriorityFeePerGas","gasLimit","rawData","encode","hashFuncMap","eip712","SIGNER_TYPE_KEY","loadSignerType","storeSignerType","signerToSignerType","signer","fetchSignerType","communicator","handshakeRequest","listenForWalletLinkSessionRequest","createSigner","walletlink","CoinbaseWalletProvider","keysUrl","ephemeralSigner","createCoinbaseWalletProvider","DEFAULT_PREFERENCE","createCoinbaseWalletSDK","provider","sdk","toSubAccountOwner"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77]}