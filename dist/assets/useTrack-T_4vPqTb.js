import{j as S,Z as I}from"./index-Lo8eQgA0.js";import"./cross-J9VCREIf.js";import{v as O}from"./v4-C6aID195.js";const M={CETUS:"a",DEEPBOOK:"b",DEEPBOOKV3:"c",KRIYA:"d",KRIYAV3:"e",FLOWX:"f",FLOWXV3:"g",AFTERMATH:"h",TURBOS:"i",HAEDAL:"j",HAEDALPMM:"k",VOLO:"l",AFSUI:"m",BLUEMOVE:"n",SCALLOP:"o",SPRINGSUI:"p",BLUEFIN:"q",ALPHAFI:"r",STEAMM:"s",METASTABLE:"t",OBRIC:"u",MOMENTUM:"v",MAGMA:"w",SEVENK:"x",STEAMM_OMM_V2:"y",FULLSAIL:"z"};function _(t,c,w){typeof window<"u"&&window.gtag&&window.gtag("event","track_shio_status",{operation_type:t,shio_enabled:c,tx_hash:w})}function x(t){console.log("ðŸš€ ~ file: gtag.ts:30 ~ trackTransaction ~ data:",t);const w=t.providers.map(s=>M==null?void 0:M[s]).join("");console.log("ðŸš€ ~ file: gtsag.ts:30 ~ trackTransaction ~ final data:",{...t,providers:w}),typeof window<"u"&&window.gtag&&window.gtag("event","track_transaction",{...t,providers:w})}function C(t){typeof window<"u"&&window.gtag&&window.gtag("event","track_transaction_error",{...t})}function F({walletName:t,walletAddress:c}){typeof window<"u"&&window.gtag&&window.gtag("event","wallet_connection",{walletName:t,walletAddress:c})}function B({walletName:t,walletAddress:c,inviteCodes:w,connectTime:s}){var y,k,v;if(typeof window<"u"&&window.gtag)try{console.log("trackDlmmBetaWalletConnect: ",{walletName:t,walletAddress:(y=String(c))==null?void 0:y.split("0x")[1],inviteCodes:w,connectTime:s}),window.gtag("event","dlmm_beta_wallet_connection",{walletName:t,walletAddress:(v=(k=String(c))==null?void 0:k.split("0x"))==null?void 0:v[1],inviteCodes:w,connectTime:s})}catch(e){console.log("ðŸš€ ~ trackDlmmBetaWalletConnect ~ error:",e)}}function $(t){try{typeof window<"u"&&window.gtag&&window.gtag("event","track_dlmm_transaction",{...t})}catch(c){console.log("ðŸš€ ~ trackDlmmTransaction ~ error:",c)}}function R(){const t=(e,n,o)=>{const g=e==null?void 0:e.action;if(["FarmingOpenAndAddLiquidity","FarmingIncreaseLiquidity","FarmingDecreaseLiquidity","FarmingRemoveLiquidity","FarmingRemoveLiquidity","OpenAndAddLiquidity","IncreaseLiquidity","RemoveLiquidity","DecreaseLiquidity","AddVaultsPosition","RemoveVaultsPosition","AggregatorSwap"].includes(g))try{_(g,n,o)}catch(m){console.log("ðŸš€ ~ useTransaction ~ trackShioEvent error:",m)}},c=(e,n,o)=>{var g,r,m,T;try{const h="Swap",l=new Date().getTime(),u=((g=e==null?void 0:e.providerKey)==null?void 0:g.length)>1,i=!!((r=e==null?void 0:e.routerData)!=null&&r.isDowngrade),E=(e==null?void 0:e.providerKey)||[],A=`${e==null?void 0:e.from}-${(m=e==null?void 0:e.routerData)==null?void 0:m.fromAmountUi}`,L=`${e==null?void 0:e.to}-${(T=e==null?void 0:e.routerData)==null?void 0:T.toAmountUi}`,p=!!n,f={action:h,actionTime:l,txHash:o,isOpenAggregator:u,isDowngrade:i,providers:E,fromCoin:A,toCoin:L,isError:!!n,useMev:e==null?void 0:e.useMev,useFastMode:e==null?void 0:e.useFastMode};if(console.log("ðŸš€ ~ trackSwap ~ data:",f),p){const D=String(f==null?void 0:f.error).replace(/\\/g,"").replace(/"/g,"").replace(/\s+/g," ").trim();f.errorStringLength=D.length,s(f,D,"errorMsg",25,100)}console.log("useTrack ðŸš€ ~ trackSwap ~ data:",f),x(f)}catch(h){console.log("ðŸš€ ~ useTrack ~ error:",h)}},w=({walletAddress:e,walletName:n})=>{const o=new Date().toISOString().split("T")[0],g=`wallet_connected_${n}_${e}`,r=localStorage.getItem(g);(!r||r!==o)&&(localStorage.setItem(g,o),F({walletAddress:e,walletName:n}))},s=(e,n,o,g=25,r=100)=>{if(!n||n.length===0)return e;const m=Object.keys(e).length,T=g-m,h=Math.ceil(n.length/r);if(h<=T){let l=0;for(;l*r<n.length;){const u=l*r,i=Math.min(u+r,n.length);e[`${o}${l}`]=n.slice(u,i),l++}}else{const l=Math.floor(T/2);for(let i=0;i<l;i++){const E=i*r,A=Math.min(E+r,n.length);e[`${o}${i}`]=n.slice(E,A)}const u=h-(T-l);for(let i=0;i<T-l;i++){const A=(u+i)*r,L=Math.min(A+r,n.length);e[`${o}${l+i}`]=n.slice(A,L)}}return e};return{trackShio:t,toTrackSwap:c,toTrackWalletConnect:w,toTrackTransactionError:e=>{console.log("ðŸš€ ~ trackTransactionError ~ data:",e);const n={};if(n.timestamp=new Date().getTime(),e!=null&&e.paramsJson){const o=String(e==null?void 0:e.paramsJson).replace(/\\/g,"").replace(/"/g,"").replace(/\s+/g," ").trim();console.log("ðŸš€ ~ trackTransactionError ~ paramsJson:",o),n.paramsJsonLength=o.length,s(n,o,"paramsJson",25,100)}if(e!=null&&e.error){const o=String(e==null?void 0:e.error).replace(/\\/g,"").replace(/"/g,"").replace(/\s+/g," ").trim();console.log("ðŸš€ ~ trackTransactionError ~ errorString:",o),n.errorStringLength=o.length,s(n,o,"errorMsg",25,100)}console.log("ðŸš€ ~ trackTransactionError ~ eventData:",n),C(n)},toTrackDlmmBetaWalletConnect:e=>{B({walletName:e==null?void 0:e.walletName,walletAddress:String(e==null?void 0:e.walletAddress),inviteCodes:e==null?void 0:e.inviteCodes,connectTime:new Date().getTime()})},toTrackDlmmTransaction:e=>{if(S.env==="testnet")return;const n={trackId:O(),action:e==null?void 0:e.action,timestamp:new Date().getTime(),walletName:e==null?void 0:e.walletName,walletAddress:I(e==null?void 0:e.walletAddress),isError:e==null?void 0:e.isError};if(e!=null&&e.txHash&&(n.txHash=e==null?void 0:e.txHash),e!=null&&e.params){const o=JSON.stringify(e==null?void 0:e.params,null,0).replace(/\\/g,"").replace(/"/g,"").replace(/\s+/g," ").trim();o.length>1e3&&(n.paramsJsonLength=o.length),s(n,o,"paramsJson",25,100)}if(e!=null&&e.error){const o=String(e==null?void 0:e.error).replace(/\\/g,"").replace(/"/g,"").replace(/\s+/g," ").trim();n.errorStringLength=o.length,s(n,o,"errorMsg",25,100)}console.log("ðŸš€ ~ toTrackDlmmTransaction ~ eventData:",n),$({...n})}}}export{_ as t,R as u};
