import{r as l,j as o,B as y,H as N,V as R,T as b,m as Z,Z as q}from"./vendor-CBmAETR3.js";import{a as J,u as K,V as O}from"./VolumeChart-BMeNPMyu.js";import{w as Q,z as X,as as h,i as Y,n as I,bf as F,ah as E,d}from"./index-ihcskjKt.js";import"./cross-CbhIs7DK.js";import{m as tt}from"./maxBy-DupNhJLP.js";function ut({statisticsData:s,pageFrom:a="stats",isRefresh:i}){var C;const x=[{label:"D"},{label:"W"},{label:"M"}],[u,n]=l.useState("(24H)"),[v,c]=l.useState(!0),[r,W]=l.useState("D"),{time:f,getHoverTime:_,getCurrentTime:V}=J(),{getHistogramData:k,getDlmmHistogramData:A}=K(),[B,$]=l.useState([]),[H,g]=l.useState((C=s==null?void 0:s.summary)==null?void 0:C.vol24H),[z,G]=l.useState(f),j=async()=>{c(!0);const e={type:"vol",date_type:r=="D"?"day":r=="W"?"wek":"mon"};e.limit=r=="D"?31:r=="W"?52:60;const S=await k(e),U=await A(e),w=S.map(t=>({...t,clmm:t==null?void 0:t.num})),D=U.map(t=>({...t,dlmm:t==null?void 0:t.num})),p=tt([w,D],t=>t.length),T=p!=null&&p.some(t=>(t==null?void 0:t.clmm)!==void 0)?D:w,L=p==null?void 0:p.map(t=>{const m=(T==null?void 0:T.find(M=>M.date===t.date))??{};return{date:t==null?void 0:t.date,xAxis:t==null?void 0:t.xAxis,clmm:m==null?void 0:m.num,dlmm:t==null?void 0:t.num,num:X((t==null?void 0:t.num)||0).plus((m==null?void 0:m.num)||0).toNumber()}});$(L),c(!1)},P=e=>{var S;e?(_(e.date,r),g(h(e.num,"$")),n(r=="D"?"(24H)":r=="W"?"(7D)":"(30D)")):(n("(24H)"),V(),g((S=s==null?void 0:s.summary)==null?void 0:S.vol24H))};return l.useEffect(()=>{i&&j()},[i]),l.useEffect(()=>{V()},[]),l.useEffect(()=>{j()},[r]),l.useEffect(()=>{var e;s&&g((e=s==null?void 0:s.summary)==null?void 0:e.vol24H)},[s]),l.useEffect(()=>{f&&G(f)},[f]),o.jsxs(y,{w:a=="pools"?"100%":{base:"100%",lg:"50%"},mt:{base:"12px",lg:"0"},children:[o.jsxs(N,{w:"100%",justify:"space-between",children:[o.jsxs(R,{align:"flex-start",gap:"8px",children:[o.jsxs(b,{fontWeight:"500",children:["Trading Volume ",u]}),o.jsx(Z,{isLoaded:!!H,h:"20px",children:o.jsx(b,{fontWeight:a=="pools"?"600":"500",fontSize:"20px",color:"text_caption",children:H})}),a=="stats"&&o.jsx(b,{fontWeight:"500",children:z})]}),o.jsx(Q,{type:"outlineTab",tabList:x,currentTab:r,handleChangeTab:e=>W(e.label),wrapStyle:{w:"128px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),o.jsxs(y,{w:"100%",h:a=="pools"?"270px":"260px",position:"relative",pt:a=="pools"?"12px":"20px",children:[v&&o.jsx(y,{position:"absolute",top:"38%",left:"50%",transform:"translate(-50%,-50%)",children:o.jsx(q,{})}),o.jsx(O,{data:B,onChangeValue:P,pageFrom:a})]})]})}const st=(s,a)=>({statisticsData:void 0,setStatisticsData:i=>{s(()=>({statisticsData:i}))}}),et=Y(st);function ct(){const{fetchByApi:s}=I(),{setStatisticsData:a}=et();return{getStatistics:async()=>{const x=await s(F,"GET");if(console.log("ðŸš€ ~ file: useStatistics.ts:8 ~ getStatistics ~ res:",x),x){const{cLmm:u,dlmm:n}=x,v={totalTvl:h(d(u.totalTvl).plus(n.totalTvl).toString(),"$"),vol24H:h(d(u.vol24H).plus(n.vol24H).toString(),"$"),cumulativeVol:h(d(u.cumulativeVol).plus(n.cumulativeVol).toString(),"$"),cumulativeTx:E(d(u.cumulativeTx).plus(n.cumulativeTx??0).toString()),cumulativeUserAccount:E(d(u.cumulativeUserAccount).plus(n.cumulativeUserAccount??0).toString())},c={clmm:u,dlmm:n,summary:v};return console.log("ðŸš€ ~ file: useStatistics.ts:42 ~ getStatistics ~ result:",c),a(c),c}}}}export{ut as V,et as a,ct as u};
//# sourceMappingURL=useStatistics-Ct37Q2eO.js.map
