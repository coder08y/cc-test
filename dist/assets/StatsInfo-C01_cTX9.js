import{f as R,c as T}from"./dlmm-B3MPeVqN.js";import{f as G,aq as W,e as E,n as O,l as z,d as F,aW as q,z as j,u as C}from"./index-ihcskjKt.js";import{u as H}from"./index-9vefoQ6F.js";import{r as w,l as V,j as M}from"./vendor-CBmAETR3.js";import{u as N,a as Q}from"./useGetDlmmContractPoolInfo-NnEy3AV5.js";import{m as A}from"./maxBy-DupNhJLP.js";import"./cross-CbhIs7DK.js";import{H as J}from"./HTextLabelBox-Cv1F2u1A.js";import{V as K}from"./VTextLabelBox-YDTOuudM.js";function le(i){return Object.keys(i).length===0}function oe(){const i=G("dlmm");return{getBinsInfoByPool:async(a,f,u)=>{const s=await i.Pool.getPoolBinInfo(a);return console.log("getBinsInfoByPool res",s),{allBinObj:Object.fromEntries(s==null?void 0:s.map(c=>[String(c.bin_id),{...c,price:R(c.price_per_lamport,f,u)}])),binList:[...s]}}}}function ae(){const{tab:i,poolId:e,from:a,to:f,fee:u}=W(),[s,y]=w.useState([]),{dlmmApiPoolInfo:c,setDlmmApiPoolInfo:p,setDlmmApiPoolInfoLoading:r,setNetError:v}=H(),x=V(),{fetchTokenInfo:g}=E(),{getDlmmPools:_}=N();O();const{getDlmmContractPoolInfo:S}=Q(),D=async({poolId:b,from:m,to:P})=>{var L,B,I,$;console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:148 ~ getList ~ getList:");try{r(!0);let n,l;if(b&&b!=="undefined"){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:32 ~ getList ~ poolId:",b);const t=await _({pools:[b],display_all_pools:!0});console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:52 ~ getList ~ _res:",t),t&&t.list&&t.list.length?(l=t.list[0],n=await _({coin_type:`${(L=l==null?void 0:l.displayTokenA)==null?void 0:L.coin_type},${(B=l==null?void 0:l.displayTokenB)==null?void 0:B.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):c&&z(c)?(l=c,n={list:s}):(l={poolId:b,displayTokenA:void 0,displayTokenB:void 0},n={list:[]}),r(!1)}else if(m&&P&&m!=="undefined"&&P!=="undefined"&&m!==P){const t=await _({coin_type:`${m},${P}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(n,l,"setDlmmApiPoolInfoLoading"),t&&t.list&&t.list.length)if(u&&u!=="undefined"){const o=(I=t==null?void 0:t.list)==null?void 0:I.find(d=>F(d==null?void 0:d.feeRate).eq(u));if(o)x(i?`/dlmm?tab=${i}&poolId=${o==null?void 0:o.poolAddress}`:`/dlmm?poolId=${o==null?void 0:o.poolAddress}`);else{const d=A(t==null?void 0:t.list,h=>Number((h==null?void 0:h.tvl)||"0"));x(i?`/dlmm?tab=${i}&poolId=${d==null?void 0:d.poolId}`:`/dlmm?poolId=${d==null?void 0:d.poolId}`)}}else{let o=A(t==null?void 0:t.list,d=>Number((d==null?void 0:d.tvl)||"0"));o||(o=A(t==null?void 0:t.list,d=>{var h;return Number(((h=d==null?void 0:d.object)==null?void 0:h.liquidity)||"0")}),o||(o=t==null?void 0:t.list[0])),x(i?`/dlmm?tab=${i}&poolId=${o==null?void 0:o.poolId}`:`/dlmm?poolId=${o==null?void 0:o.poolId}`)}else{const o=await g([m,P].filter(Boolean)),d=o==null?void 0:o.get(m),h=o==null?void 0:o.get(P);l={poolAddress:void 0,displayTokenA:d,displayTokenB:h},n={list:[]},r(!1)}}else(!m||m==="undefined")&&P&&P!=="undefined"&&(l={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await g(P)}),(!P||P==="undefined")&&m&&m!=="undefined"&&(l={poolAddress:void 0,displayTokenA:await g(m),displayTokenB:void 0}),n={list:[]},r(!1);n&&(console.log(n,l,"res, pool"),v(!1),y(n==null?void 0:n.list),l&&(l!=null&&l.poolAddress&&b?(l==null?void 0:l.poolAddress)===b&&p(l):b?await S(b):p(l))),r(!1)}catch(n){if(n!=null&&n.list&&(($=n==null?void 0:n.list)==null?void 0:$.length)===1){v(!0);const l=n==null?void 0:n.list[0];console.log(n==null?void 0:n.list,"setApiPoolInfo"),p(l),y([])}}finally{r(!1)}};return w.useEffect(()=>{e&&e==="undefined"||!e&&e===void 0&&!a&&!f||D({poolId:e,from:a,to:f})},[e,a,f]),{getList:D,relatedPoolList:s}}const ne=(i,e,a,f,u)=>{if(f){if(u&&a>u){let s=a+48;return s<i&&(s=i),s>e&&(s=e),s}}else if(u&&a<u){let s=a-48;return s<i&&(s=i),s>e&&(s=e),s}return u};function de(i,e,a,f,u){return{formatMinMaxBinId:(y,c)=>{if(!e)return;let p,r;if(!i){const g=(e==null?void 0:e.coin_type)===(a==null?void 0:a.coin_type)?f:u,_=(e==null?void 0:e.coin_type)===(a==null?void 0:a.coin_type)?u:f,S=j(g||0).gt(0),D=j(_||0).gt(0);if(S&&!D)return p=c,r=p+y-1,{minBinId:p,maxBinId:r};if(!S&&D)return r=c,p=r-y+1,{minBinId:p,maxBinId:r}}let v,x;if(y%2===1){const g=Math.floor((y-1)/2);v=g,x=g}else{const g=y/2;v=g,x=g-1}return p=c-v,r=c+x,{minBinId:p,maxBinId:r}}}}function ce(i,e,a){const f=(s,y)=>{if(!i||!e||!a)return;const c=q.getPriceFromBinId(s,a,i.decimals,e.decimals),[p,r,v]=T(c);return{tokenA:i,tokenB:e,binId:s,price:c,displayPrice:p,reversePrice:r,displayReversePrice:v,type:y?"lower":"upper",actionSource:"user",triggerFrom:"input"}};return{formatMinMaxPriceData:(s,y)=>{if(!i||!e||!a)return;const c=f(s,!0),p=f(y,!1);return{minPriceData:c,maxPriceData:p}},buildPriceData:f}}function fe({label:i,value:e,loading:a}){const{isApp:f}=C();return f?M.jsx(J,{label:i,value:e,labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"14px",h:"14px",fontWeight:"500"},isLoading:a,skeletonStyle:{valueW:"60px"}}):M.jsx(K,{wrapStyle:{gap:"8px",alignItems:"flex-end"},titleStyle:{fontSize:"12px"},valueStyle:{fontSize:"14px",fontWeight:"500"},title:i,value:e,isLoading:a,skeletonStyle:{valueW:"60px",valueH:"14px"}})}export{fe as S,ae as a,ce as b,ne as c,de as d,le as i,oe as u};
//# sourceMappingURL=StatsInfo-C01_cTX9.js.map
