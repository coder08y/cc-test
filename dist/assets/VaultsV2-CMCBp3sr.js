import{j as t,S as J,w as Z,l as pt,r as m,H as n,V as g,T as l,C as q,ad as ht,i as gt,ai as A,aj as b,Y as at,m as C,al as Et,am as Ut,an as z,ah as Mt,B as I}from"./vendor-CBmAETR3.js";import{I as L,M as H,u as U,S as Y,E as G,B as N,C as Q,ci as nt,aG as $t,l as xt}from"./index-ihcskjKt.js";import"./cross-CbhIs7DK.js";import{N as E}from"./NoData-BFX9XpKb.js";import{u as tt,a as et}from"./useGetPythTokenPrice-DxHNOitR.js";import{C as jt}from"./CoinPairInfo-CDiS7h0Q.js";import{a as mt,e as qt,V as bt,f as Gt,g as Jt,h as Qt,c as Kt,i as Xt}from"./VaultsAprBlock-CTWozlz-.js";import{H as R}from"./HTextLabelBox-Cv1F2u1A.js";import{A as yt,V as St}from"./VaultsRewardsBlock-CxnAy6iX.js";import{V as ct}from"./VTextLabelBox-YDTOuudM.js";import{V as wt,a as Zt}from"./VaultsPcTab-DSC6pjys.js";import{V as It,S as dt}from"./SearchInputBlock-DFqrJwWo.js";import{C as ut}from"./CheckBox-CkL01dAe.js";import{R as te}from"./RefreshButton-DtwRJDvy.js";import{S as ee}from"./SortDropBlock-CVcQDwBs.js";import{u as se}from"./useAccountBalance-D7pkS3C9.js";import{u as re}from"./useInterval-FApnpfRj.js";import"./useFavoriteDlmmPool-Kbo6eRe5.js";import"./useGetDlmmPoolList-x-FGvX6E.js";import"./utils-GUDa3Y46.js";import"./useWrapPoolData-CzWcfmSl.js";import"./en_US-KAK2ZBDO-7b1QhAeP.js";import"./useFavoritePool-D10BRIh4.js";import"./useGetPoolList-BxNmDN4c.js";import"./config-DTm0VBgZ.js";import"./PoolTag-DVhitHGR.js";import"./VaultsTab-r6AZjrkT.js";import"./index-DCf0hNUB.js";import"./Loading-DOvYGudd.js";import"./TooltipIcon-CBgjM1b2.js";function vt({isOpen:r,jumpVaultsDetail:s,onExpand:e,isFrozen:d}){return t.jsxs(J,{w:{base:"100%",lg:"auto"},flexDir:{base:"column",lg:"row"},justifyContent:{base:"center",lg:"end"},align:"center",gap:{base:"8px",lg:"20px"},children:[t.jsx(Z,{fontSize:"14px",h:{base:"40px",lg:"32px"},w:{base:"100%",lg:"100px"},variant:"outline",borderRadius:"8px",onClick:s,isDisabled:d,children:"Deposit"}),t.jsx(Z,{variant:"unstyled",_hover:{bg:"button_ghost_hov_bg",svg:{fill:"text_caption"}},w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"72px"},minW:"unset",minH:"unset",bg:"button_ghost_bg",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",onClick:e||(()=>{}),children:t.jsx(L,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})})]})}function Ct(r){var y,S,p,f;const{apiInfo:s,logo_url:e}=r,d=pt(),{currentAccount:j,onWalletModal:u}=H(),{isApp:i}=U(),{vaultsPositionObj:x}=tt(),o=m.useMemo(()=>x[s==null?void 0:s.vaultId],[JSON.stringify(x),s==null?void 0:s.vaultId]);return j?t.jsxs(J,{flexDir:{base:"column",lg:"row"},bg:"bg_primary",w:"100%",gap:"16px",borderRadius:{base:"8px",lg:"20px"},border:"1px solid",borderColor:"border",p:{base:"8px",lg:"10px 52px 10px 16px"},cursor:"pointer",justifyContent:{base:"center",lg:"space-between"},onClick:()=>{s!=null&&s.isFrozen||d(`/vaults-detail/${s==null?void 0:s.vaultId}/${s.category}`)},children:[t.jsxs(n,{gap:"15px",children:[t.jsx(Y,{imageUrl:e,imgBoxStyle:{w:"60px",h:"60px"}}),t.jsxs(g,{gap:"4px",alignItems:"start",children:[t.jsx(l,{color:"primary_gray",children:"Your LP tokens"}),t.jsx(l,{color:"text_caption",children:`${(o==null?void 0:o.balanceDisplay)||"0"} LP`})]})]}),t.jsx(J,{flexDir:{base:"column",lg:"row"},gap:{base:"16px",lg:"8px"},children:i?t.jsxs(t.Fragment,{children:[t.jsx(R,{label:"Pooled assets",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:t.jsxs(J,{gap:{base:"4px",lg:"12px"},flexDir:{base:"column",lg:"row"},align:{base:"flex-end",lg:"center"},children:[t.jsxs(n,{gap:"4px",children:[t.jsx(Y,{imageUrl:s.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),t.jsx(l,{color:"text_caption",children:G(o==null?void 0:o.displayAmountA)}),t.jsx(l,{color:"text_caption",children:(y=s==null?void 0:s.displayTokenA)==null?void 0:y.symbol})]}),t.jsxs(n,{gap:"4px",children:[t.jsx(Y,{imageUrl:s.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),t.jsx(l,{color:"text_caption",children:G(o==null?void 0:o.displayAmountB)}),t.jsx(l,{color:"text_caption",children:(S=s==null?void 0:s.displayTokenB)==null?void 0:S.symbol})]})]})}),t.jsx(R,{label:"Share of pool",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:o==null?void 0:o.shartOfPoolDisplay}),t.jsxs(Z,{variant:"outline",h:"32px",gap:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",children:[t.jsx(l,{color:"primary_gray",children:"Details"}),t.jsx(N,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",w:"fit-content",children:t.jsx(q,{w:"20px",h:"20px",children:t.jsx(L,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(q,{mr:"90px",children:t.jsx(ct,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Pooled assets",titleStyle:{color:"primary_gray"},value:t.jsxs(n,{gap:"4px",children:[t.jsx(Y,{imageUrl:s.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),t.jsx(l,{color:"text_caption",children:G(o==null?void 0:o.displayAmountA)}),t.jsx(l,{color:"text_caption",mr:"8px",children:(p=s==null?void 0:s.displayTokenA)==null?void 0:p.symbol}),t.jsx(Y,{imageUrl:s.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),t.jsx(l,{color:"text_caption",children:G(o==null?void 0:o.displayAmountB)}),t.jsx(l,{color:"text_caption",children:(f=s==null?void 0:s.displayTokenB)==null?void 0:f.symbol})]})})}),t.jsx(q,{mr:"110px",children:t.jsx(ct,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Share of pool",titleStyle:{color:"primary_gray"},value:o==null?void 0:o.shartOfPoolDisplay})}),t.jsxs(n,{gap:"8px",children:[t.jsx(l,{color:"primary_gray",children:"Details"}),t.jsx(N,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",children:t.jsx(q,{w:"20px",h:"20px",children:t.jsx(L,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]})})]}):t.jsx(E,{type:"nowallet",onboard:()=>{u(!0)}})}function le({openExpend:r,onExpand:s,apiInfo:e,logo_url:d,jumpVaultsDetail:j,isShowPowered:u,isShowAumLimit:i}){const{currentVaultsFarm:x,isVaultsFarming:o}=mt(e==null?void 0:e.vaultId);return qt(x),t.jsxs(g,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",bg:"bg_fifth",children:[t.jsx(n,{children:t.jsx(jt,{versionBlockPosition:"right",poolInfo:{...e,poolAddress:e==null?void 0:e.vaultId,poolType:(e==null?void 0:e.category)!=="cetus-dlmm"?"clmm":"dlmm"},isShowPowered:u,symbolFontSize:"15px",isShowVaultsFarmIcon:o,showPoolTypeTag:!0,type:"row"})}),t.jsxs(g,{w:"100%",gap:"16px",mt:"4px",children:[i?t.jsx(R,{label:"TVL",value:t.jsx(g,{alignItems:"flex-end",children:Number(e.hardCapUSD)==0?t.jsx(Q,{tooltip:" No capacity limit ",children:t.jsxs(g,{gap:"4px",children:[t.jsx(l,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:e.vaultsTvlDisplay}),t.jsx(l,{h:"12px",lineHeight:"12px",color:"primary",bg:"primary_opacity.10",p:"0px 8px",borderRadius:"12px",children:"∞"})]})}):t.jsx(yt,{depositRatio:e.depositRatio,hardCapUSD:e.hardCapUSD,vaultTvl:e.vaultsTvl,textStyle:{textDecoration:"none"},value:t.jsxs(g,{alignItems:"flex-end",children:[t.jsx(l,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:e.vaultsTvlDisplay}),t.jsx(ht,{h:"4px",w:"80px",value:Number(e.depositRatio),bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})})}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}):t.jsx(R,{label:"TVL",value:t.jsx(l,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:e.vaultsTvlDisplay}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),t.jsx(R,{label:t.jsxs(n,{justify:"flex-end",gap:"2px",children:[t.jsx(l,{children:"APY"}),t.jsx(Q,{placement:"auto-start",tooltip:t.jsx(l,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:t.jsx(L,{xlinkHref:"#icon-icon_tips"})})]}),value:t.jsx(bt,{vaultId:e==null?void 0:e.vaultId,farmingTextStyle:{h:"20px",p:"4px 6px"}}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),t.jsx(R,{label:"Rewards",value:t.jsx(St,{rewardList:e.vaultsRewards}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),t.jsx(R,{label:"Your Holdings",value:t.jsx(wt,{vaultId:e.vaultId,category:e.category}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}})]}),t.jsxs(g,{w:"100%",gap:"8px",children:[t.jsx(vt,{isOpen:r,isFrozen:e==null?void 0:e.isFrozen,jumpVaultsDetail:()=>{j(e.vaultId)},onExpand:s}),r&&t.jsx(Ct,{apiInfo:e,logo_url:d})]})]})}function oe({openExpend:r,onExpand:s,apiInfo:e,logo_url:d,jumpVaultsDetail:j,isShowPowered:u,isShowAumLimit:i}){const{isVaultsFarming:x}=mt(e==null?void 0:e.vaultId);return t.jsxs(gt.Fragment,{children:[t.jsxs(A,{cursor:"pointer",h:"106px",onClick:s,sx:{td:{pb:"16px"}},children:[t.jsx(b,{w:"28%",children:t.jsx(jt,{versionBlockPosition:"right",poolInfo:{...e,poolAddress:e==null?void 0:e.vaultId,poolType:(e==null?void 0:e.category)!=="cetus-dlmm"?"clmm":"dlmm"},isShowPowered:u,symbolFontSize:"15px",isShowVaultsFarmIcon:x,showPoolTypeTag:!0,type:"column"})}),i?t.jsx(b,{textAlign:"right",w:"14%",children:Number(e==null?void 0:e.hardCapUSD)==0?t.jsx(Q,{tooltip:" No capacity limit ",children:t.jsxs(g,{gap:"4px",children:[t.jsx(l,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:e.vaultsTvlDisplay}),t.jsx(l,{h:"12px",lineHeight:"12px",color:"primary",bg:"primary_opacity.10",p:"0px 8px",borderRadius:"12px",children:"∞"})]})}):t.jsx(yt,{depositRatio:e.depositRatio,hardCapUSD:e.hardCapUSD,vaultTvl:e.vaultsTvl,textStyle:{textDecoration:"none"},value:t.jsxs(g,{alignItems:"flex-end",children:[t.jsx(l,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:e.vaultsTvlDisplay}),t.jsx(ht,{h:"4px",w:"80px",value:Number(e.depositRatio),bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})})}):t.jsx(b,{textAlign:"right",w:"14%",children:t.jsx(l,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:e.vaultsTvlDisplay})}),t.jsx(b,{textAlign:"right",w:"13%",children:t.jsx(bt,{vaultId:e==null?void 0:e.vaultId,wrapStyle:{alignItems:"flex-end"},farmingTextStyle:{h:"20px",p:"0 4px"}})}),t.jsx(b,{textAlign:"right",w:"13%",children:t.jsx(St,{rewardList:e.vaultsRewards})}),t.jsx(b,{textAlign:"right",w:"13%",children:t.jsx(wt,{vaultId:e.vaultId,category:e.category})}),t.jsx(b,{textAlign:"right",w:"20%",children:t.jsx(vt,{isOpen:r,isFrozen:e==null?void 0:e.isFrozen,jumpVaultsDetail:()=>{j(e.vaultId)}})})]}),!r&&t.jsx(A,{h:"16px"}),t.jsx(A,{cursor:"pointer",position:"relative",top:"-16px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:r&&t.jsx(b,{colSpan:6,children:t.jsx(N,{p:"16px",borderTop:"none",borderRadius:" 0 0 16px 16px ",children:t.jsx(Ct,{apiInfo:e,logo_url:d})})})})]},e.vaultId)}function ft(r){const s=pt(),{apiInfo:e,isShowPowered:d}=r,{lpTokenInfoObj:j}=et(),{currentAccount:u}=H(),i=m.useMemo(()=>j[e==null?void 0:e.lpTokenType],[e==null?void 0:e.lpTokenType,JSON.stringify(j)]),[x,o]=m.useState(!1),y=w=>{s(`/vaults-detail/${w}/${e==null?void 0:e.category}`)},S=()=>{o(!x)},{isApp:p}=U(),f=m.useMemo(()=>nt!=="mainnet",[nt]);return p?t.jsx(le,{openExpend:x,onExpand:S,apiInfo:e,logo_url:i==null?void 0:i.logo_url,jumpVaultsDetail:y,isShowPowered:d,isShowAumLimit:f}):t.jsx(oe,{openExpend:x,onExpand:S,apiInfo:e,logo_url:i==null?void 0:i.logo_url,jumpVaultsDetail:y,isShowPowered:d,isShowAumLimit:f})}function ie({dataList:r,showSkeletonLoading:s,showNoWallet:e,isShowPowered:d}){const{onWalletModal:j}=H();return!e&&!s&&r.length===0?t.jsx(E,{type:"nodata",text:"No vaults found",border:"none"}):e?t.jsx(E,{type:"nowallet",onboard:()=>j(!0),border:"none"}):s?t.jsx(ae,{itemList:[1,2,3]}):t.jsx(g,{w:"100%",mt:"20px",children:r==null?void 0:r.map(u=>t.jsx(ft,{apiInfo:u,isShowPowered:d&&u.category=="haedal"},u.clmmPoolAddress))})}function ae({itemList:r}){return t.jsx(g,{w:"100%",mt:"20px",children:r.map(s=>t.jsxs(g,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",children:[t.jsxs(n,{gap:"0",children:[t.jsx(at,{size:"9"}),t.jsx(at,{size:"9"}),t.jsxs(n,{gap:"4px",ml:"4px",align:"flex-start",children:[t.jsx(C,{height:"4",width:"100px"}),t.jsx(C,{height:"4",width:"60px"})]})]}),t.jsx(g,{w:"100%",gap:"16px",mt:"4px",children:[1,2,3,4].map(e=>t.jsxs(n,{w:"100%",justify:"space-between",children:[t.jsx(C,{height:"4",width:"100px"}),t.jsx(C,{height:"4",width:"100px"})]},e))}),t.jsxs(g,{w:"100%",gap:"8px",children:[t.jsx(C,{height:"8",width:"100%"}),t.jsx(C,{height:"8",width:"100%"})]})]},s))})}function ne({dataList:r,showSkeletonLoading:s,showNoWallet:e,isShowPowered:d}){const{onWalletModal:j}=H();return t.jsxs(Et,{variant:"simple_list",w:"100%",mt:"20px",children:[t.jsx(Ut,{children:t.jsxs(A,{children:[t.jsx(z,{children:"Vaults"}),t.jsx(z,{textAlign:"right",children:"TVL"}),t.jsx(z,{textAlign:"right",children:t.jsxs(n,{justify:"flex-end",gap:"2px",children:[t.jsx(l,{children:"APY"}),t.jsx(Q,{tooltip:t.jsx(l,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:t.jsx(L,{xlinkHref:"#icon-icon_tips"})})]})}),t.jsx(z,{textAlign:"right",children:"Earnings"}),t.jsx(z,{textAlign:"right",children:"Your Holdings"}),t.jsx(z,{textAlign:"right",children:"Action"})]})}),t.jsxs(Mt,{children:[!e&&!s&&r.length===0&&t.jsx(A,{children:t.jsx(b,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:t.jsx(E,{type:"nodata",text:"No vaults found",border:"none"})})}),e&&t.jsx(A,{children:t.jsx(b,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:t.jsx(E,{type:"nowallet",onboard:()=>j(!0),border:"none"})})}),s&&t.jsx(xe,{itemList:[1,2,3]}),!s&&r.map(u=>t.jsx(ft,{apiInfo:u,isShowPowered:d&&u.category=="haedal"},u.clmmPoolAddress))]})]})}function xe({itemList:r}){return r.map(s=>t.jsxs(gt.Fragment,{children:[t.jsxs(A,{h:"106px",sx:{td:{pb:"16px"}},children:[t.jsx(b,{w:"28%",children:t.jsx(C,{w:"220px"})}),t.jsx(b,{textAlign:"right",w:"14%",children:t.jsx(n,{justifyContent:"end",children:t.jsx(C,{})})}),t.jsx(b,{textAlign:"right",w:"13%",children:t.jsx(n,{justifyContent:"end",children:t.jsx(C,{})})}),t.jsx(b,{textAlign:"right",w:"13%",children:t.jsx(n,{justifyContent:"end",children:t.jsx(C,{})})}),t.jsx(b,{textAlign:"right",w:"13%",children:t.jsx(n,{justifyContent:"end",children:t.jsx(C,{})})}),t.jsx(b,{textAlign:"right",w:"20%",children:t.jsx(n,{justifyContent:"end",children:t.jsx(C,{})})})]}),t.jsx(A,{h:"16px"})]},s))}function ce(){const{vaultsTotalTvlDisplay:r}=et(),{isApp:s}=U();return t.jsx(g,{w:"100%",pos:"absolute",alignItems:"start",bgColor:"#000",backgroundImage:{base:"url('/images/vaults_h5.png')",lg:"url('/images/vaults.png')"},backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backdropFilter:"blur(20px)",h:{base:"260px",lg:"240px"},children:t.jsxs(g,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 16px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"10px",alignItems:"start",h:"100%",children:[t.jsx(n,{w:"100%",justify:"space-between",children:t.jsx(l,{color:"text_caption",fontSize:"28px",fontWeight:"500",children:"Vaults"})}),t.jsxs(l,{fontSize:"16px",whiteSpace:"wrap",lineHeight:"20px",children:["Automate your liquidity to enjoy high yield with ease. ",s&&t.jsxs(n,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[t.jsx(l,{fontSize:"16px",cursor:"pointer",children:"Details"}),t.jsx(L,{xlinkHref:"#icon-icon_link1",svgHover:"primary",fontSize:"16px"})]})]}),!s&&t.jsxs(n,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[t.jsx(l,{fontSize:"16px",cursor:"pointer",children:"Details"}),t.jsx(L,{xlinkHref:"#icon-icon_link1",svgHover:"primary",fontSize:"16px"})]}),t.jsx(l,{color:"text_caption",fontSize:"14px",mt:"20px",children:"Total Value Locked"}),t.jsx(C,{isLoaded:!!r,children:t.jsx(l,{fontWeight:"600",color:"primary",fontSize:"20px",mt:"3px",children:r})})]})})}function de(r){const{sortByList:s,currSortType:e,onSortByChange:d,sortRule:j,handleRefresh:u,handleChangeSortRule:i,selectCoinList:x,onClickSelectCoinList:o,onDeleteSelectCoinList:y,isYourHoldings:S,onClickIsYourHoldings:p,whiteTokenList:f,showSkeletonLoading:w,onClickVaultsTab:P,currentTab:M}=r,{isApp:V}=U(),{currentAccount:h}=H(),[D,B]=m.useState(!0);return m.useEffect(()=>{x.length==0&&B(!0)},[x]),t.jsxs(g,{w:"100%",mt:{base:"20px",lg:"28px"},justify:"space-between",children:[t.jsxs(n,{w:"100%",justify:"space-between",children:[V?D&&t.jsx(It,{currentTab:M,onClickVaultsTab:O=>P(O),showSkeletonLoading:w}):t.jsx(Zt,{currentTab:M,onClickVaultsTab:O=>P(O),showSkeletonLoading:w}),!V&&(h==null?void 0:h.address)&&t.jsx(N,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:t.jsxs(n,{h:"100%",justify:"space-between",children:[t.jsx(ut,{checked:S,onClick:p}),t.jsx(l,{color:S?"text_caption":"text_paragraph",children:"Your Holdings"})]})}),V&&t.jsx(I,{w:{base:D?"40px":"100%"},sx:{"> button":{minW:"100% !important"}},children:t.jsx(dt,{selectCoinList:x,onClickSelectCoinList:o,onDeleteSelectCoinList:y,whiteTokenList:f,setIsSmall:B,isSmall:D,isVault:!1})})]}),t.jsxs(n,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[!V&&t.jsx(I,{w:{base:"100%",lg:"unset"},sx:{"> button":{minW:"100% !important"}},children:t.jsx(dt,{selectCoinList:x,onClickSelectCoinList:o,onDeleteSelectCoinList:y,whiteTokenList:f,isVault:!1})}),t.jsxs(n,{children:[t.jsx(ee,{sortText:"Sort by",xlinkHref:j=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{i(j==="asc"?"desc":"asc")},minW:V?"calc(100vw - 126px)":"120px",currentSort:e,sortByList:s,onSortByChange:d,wrapStyle:{borderRadius:{base:"8px",lg:"12px"}}}),t.jsx(te,{handleRefresh:()=>{w||u()},borderRadius:{base:"8px",lg:"12px"}})]})]}),V&&t.jsxs(n,{w:"100%",justify:"space-between",children:[t.jsx(l,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),(h==null?void 0:h.address)&&t.jsx(N,{w:{base:"70%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:t.jsxs(n,{h:"100%",justify:"space-between",children:[t.jsx(ut,{checked:S,onClick:p}),t.jsx(l,{color:S?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]})]})}function Ee(){const{vaultListLoading:r,setVaultListLoading:s,vaultsList:e,vaultsTokenList:d}=et(),{setVaultsPositionObj:j}=tt(),{fetchAccountBalance:u}=se(),{currentAccount:i}=H(),{vaultPageList:x,fetchVaultList:o,filterVaultList:y,sortVaultList:S}=Gt(),[p,f]=m.useState(!1),[w,P]=m.useState([]),{clearVaultsPositionObj:M,vaultsPositionObj:V}=tt(),[h,D]=m.useState({sortRule:"desc",sortType:"tvl"}),B=[{label:"APY",value:"apr"},{label:"TVL",value:"tvl"}],[O,Vt]=m.useState(B[1]);m.useEffect(()=>{o({sortOptions:h,currentTab:_.value,isYourHoldings:p,selectCoinList:w})},[]),m.useEffect(()=>{i!=null&&i.address||(f(!1),M())},[i==null?void 0:i.address]),m.useEffect(()=>{Object.values(V).length==e.length&&(y({sortOptions:h,currentTab:_.value,isYourHoldings:p,selectCoinList:w}),s(!1))},[V,e]);const{isApp:K}=U(),[st,T]=m.useState(0),Tt=K?12e4:6e4,_t=K?30:60;re({interval:Tt,callback:()=>{T(st+1),st>=_t&&(T(0),o({sortOptions:h,currentTab:_.value,isYourHoldings:p,selectCoinList:w},!1))}});const kt=c=>{T(0);const v={...h,sortType:c.value};Vt(c),D(v),S(v,x)},At=c=>{T(0);const v={...h,sortRule:c};D(v),S(v,x)},Rt=c=>{T(0),P(v=>{if(v.some(W=>(W==null?void 0:W.coin_type)===(c==null?void 0:c.coin_type)))return v;const k=[...v,c];return y({sortOptions:h,currentTab:_.value,isYourHoldings:p,selectCoinList:k}),k})},Lt=c=>{T(0),P(v=>{const F=v.filter(k=>(k==null?void 0:k.coin_type)!==(c==null?void 0:c.coin_type));return y({sortOptions:h,currentTab:_.value,isYourHoldings:p,selectCoinList:F}),F})},Dt=()=>{T(0),f(!p),y({sortOptions:h,currentTab:_.value,isYourHoldings:!p,selectCoinList:w})},zt=()=>{T(0),s(!0),u(),o({sortOptions:h,currentTab:_.value,isYourHoldings:p,selectCoinList:w})},{getVaultsContractInfo:Ht}=Jt(),{isInitialized:rt}=$t(),{getVaultPosition:Pt}=Qt(),{vaultsFarmObj:$}=Kt();m.useEffect(()=>{console.log("🚀🚀🚀 ~ VaultsV2.tsx:157 ~ useEffect ~ currentAccount?.address:",i==null?void 0:i.address),i!=null&&i.address&&rt&&xt($)&&(j({}),Ft())},[i==null?void 0:i.address,e.length,rt,$]);const[_,Bt]=m.useState({label:"All",value:"all"}),Ot=c=>{Bt(c),y({sortOptions:h,currentTab:c.value,isYourHoldings:p,selectCoinList:w})},Ft=async()=>{const{lstVaultContractInfoObj:c,haedalVaultContractInfoObj:v,allClmmPoolContractInfoObj:F,allDlmmPoolContractInfoObj:k,dlmmVaultContractInfoObj:W}=await Ht(e);for(let X=0;X<e.length;X++){const a=e[X],Yt=c[a==null?void 0:a.vaultId],Nt=v[a==null?void 0:a.vaultId],lt=F[a==null?void 0:a.clmmPoolAddress],ot=k[a==null?void 0:a.dlmmPoolAddress],it=(a==null?void 0:a.category)=="cetus"?Yt:(a==null?void 0:a.category)=="haedal"?Nt:W[a==null?void 0:a.vaultId];it&&((a==null?void 0:a.category)=="cetus-dlmm"?ot:lt)&&Pt(a,(a==null?void 0:a.category)=="cetus-dlmm"?ot:lt,it)}},{getHaedalFarmingList:Wt}=Xt();return m.useEffect(()=>{xt($)||Wt()},[$]),t.jsxs(g,{gap:"0px",w:"100%",children:[t.jsx(ce,{}),t.jsx(I,{h:{base:"260px",lg:"240px"}}),t.jsx(de,{sortByList:B,whiteTokenList:d,selectCoinList:w,onClickSelectCoinList:Rt,onDeleteSelectCoinList:Lt,showSkeletonLoading:r,currSortType:O,onSortByChange:kt,sortRule:h.sortRule,handleChangeSortRule:At,handleRefresh:zt,isYourHoldings:p,onClickIsYourHoldings:Dt,onClickVaultsTab:Ot,currentTab:_}),K?t.jsx(ie,{isShowPowered:!0,dataList:x,showSkeletonLoading:r}):t.jsx(ne,{isShowPowered:!0,dataList:x,showSkeletonLoading:r})]})}export{Ee as default};
//# sourceMappingURL=VaultsV2-CMCBp3sr.js.map
