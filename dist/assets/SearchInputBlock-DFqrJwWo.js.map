{"version":3,"file":"SearchInputBlock-DFqrJwWo.js","sources":["../../src/components/vaults-v2/list/common/VaultsH5Tab.tsx","../../src/components/pools/SearchInputBlock.tsx"],"sourcesContent":["import { Icon } from '@cetus/ui-kit'\nimport { Button, HStack, Menu, MenuButton, MenuList, Skeleton, VStack } from '@chakra-ui/react'\nimport { VaultsTabItem, default as VaultsTabList } from './VaultsTab'\n\ntype VaultsH5Tab = {\n  currentTab: any\n  onClickVaultsTab: (data: any) => void\n  showSkeletonLoading: boolean\n}\nconst vaultsTabList = [\n  {\n    text: 'All Vaults',\n    value: 'all'\n  },\n  {\n    text: 'LST',\n    value: 'cetus',\n    isLST: true,\n    beforeLogo: 'https://archive.cetus.zone/assets/image/sui/sui.png',\n    afterLogo: 'https://archive.cetus.zone/assets/image/sui/hasui.png'\n  },\n  {\n    text: 'SUI',\n    value: '0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI',\n    beforeLogo: 'https://archive.cetus.zone/assets/image/sui/sui.png'\n  },\n  {\n    text: 'USDC',\n    value: '0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC',\n    beforeLogo: 'https://uploader.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h'\n  },\n  {\n    text: 'haSUI',\n    value: '0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI',\n    beforeLogo: 'https://archive.cetus.zone/assets/image/sui/hasui.png'\n  }\n]\nexport default function VaultsH5Tab(props: VaultsH5Tab) {\n  const { currentTab, onClickVaultsTab, showSkeletonLoading } = props\n\n  return (\n    <>\n      {showSkeletonLoading && <Skeleton w=\"100%\" h=\"40px\" borderRadius=\"12px\" />}\n      {!showSkeletonLoading && (\n        <Menu isLazy>\n          {({ isOpen, onClose }) => (\n            <>\n              <MenuButton\n                as={Button}\n                variant=\"outline\"\n                h=\"40px\"\n                w=\"100%\"\n                border=\"1px solid\"\n                bg=\"bg_secondary !important\"\n                borderRadius=\"12px\"\n                height=\"40px\"\n                lineHeight=\"16px\"\n                _hover={{ bg: 'none' }}\n                _active={{ bg: 'none' }}\n                onClick={() => {\n                  console.log('Menu opened or toggled')\n                }}\n              >\n                <HStack gap=\"0\" justify=\"center\">\n                  {/* <Text color=\"primary_gray\" fontSize={{ base: '14px', lg: '13px' }}>\n                {currentTab.label}\n              </Text> */}\n                  <VaultsTabItem\n                    key={currentTab.value}\n                    {...vaultsTabList.filter(ele => ele.value == currentTab.value)[0]}\n                    currentTab={currentTab.value}\n                    isShowSelect={true}\n                  />\n                  <Icon mt=\"1px\" xlinkHref=\"#icon-icon_arrow\" svgW=\"16px\" svgH=\"16px\" />\n                </HStack>\n              </MenuButton>\n\n              <MenuList zIndex={9999} p=\"4px\" w=\"calc(100vw - 24px)\" minW=\"150px\">\n                <VStack>\n                  <VaultsTabList\n                    currentTab={currentTab}\n                    onClickVaultsTab={data => {\n                      onClickVaultsTab(data)\n                      onClose()\n                    }}\n                    vaultsTabWrapStyle={{\n                      w: '100%',\n                      flexDirection: 'column'\n                    }}\n                    vaultsTabItemStyle={{\n                      width: '100%',\n                      justifyContent: 'flex-start'\n                    }}\n                  />\n                </VStack>\n              </MenuList>\n            </>\n          )}\n        </Menu>\n      )}\n    </>\n  )\n}\n","import { Block, PoolsDropSelect } from '@cetus/design'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { Token } from '@cetus/types'\nimport { SingleCoinImage } from '@cetus/ui-kit'\nimport Icon from '@cetus/ui-kit/src/components/Icon'\nimport { cancelBubble, textEllipses } from '@cetus/utils'\nimport {\n  Center,\n  Flex,\n  HStack,\n  Popover,\n  PopoverBody,\n  PopoverContent,\n  PopoverContentProps,\n  PopoverTrigger,\n  Text,\n  useDisclosure\n} from '@chakra-ui/react'\nimport { useEffect, useRef } from 'react'\n\ninterface SearchInputProps {\n  selectCoinList: Token[]\n  onClickSelectCoinList: (tokenInfo: Token) => void\n  onDeleteSelectCoinList: (tokenInfo: Token) => void\n  whiteTokenList?: Token[]\n  isProfile?: boolean\n  wrapStyle?: PopoverContentProps\n  isSmall?: boolean\n  setIsSmall?: (status: boolean) => void\n  isVault?: boolean\n}\nexport default function SearchInputBlock({\n  whiteTokenList,\n  selectCoinList,\n  onClickSelectCoinList,\n  onDeleteSelectCoinList,\n  wrapStyle = { width: { base: 'calc(100vw - 20px)', lg: '292px' } },\n  isSmall,\n  setIsSmall,\n  isVault,\n  isProfile = false\n}: SearchInputProps) {\n  const { isApp } = useWindowWidth()\n  const firstItemRef = useRef(null)\n  const popoverRef = useRef<HTMLDivElement>(null)\n  const { isOpen, onOpen, onClose } = useDisclosure()\n\n  // 监听全局点击，关闭 Popover\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (isOpen && popoverRef.current && !popoverRef.current.contains(e.target as Node)) {\n        onClose()\n        if (selectCoinList.length == 0) {\n          setIsSmall?.(true)\n        }\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [isOpen, onClose, selectCoinList])\n\n  useEffect(() => {\n    if (isVault && selectCoinList.length == 0 && isApp) {\n      onClose()\n    }\n  }, [isVault, selectCoinList])\n\n  const handleSelectCoinList = (item: any) => {\n    onClickSelectCoinList(item)\n    if (isApp) {\n      onClose()\n    }\n  }\n  return (\n    <div\n      style={{\n        width: '100%'\n      }}\n      ref={popoverRef}\n    >\n      <Popover\n        isLazy\n        placement=\"bottom-start\"\n        modifiers={[\n          {\n            name: 'flip',\n            enabled: false // Disable automatic flip\n          },\n          {\n            name: 'shift',\n            enabled: false // Disable automatic shift\n          }\n        ]}\n        initialFocusRef={firstItemRef}\n        isOpen={isOpen}\n        trigger=\"click\"\n        onClose={() => {\n          onClose()\n          if (selectCoinList.length == 0) {\n            setIsSmall?.(true)\n          }\n        }}\n        onOpen={onOpen}\n      >\n        <PopoverTrigger>\n          <Center\n            ref={firstItemRef}\n            as=\"button\"\n            minW={{\n              base: isProfile ? '100%' : isSmall ? '40px' : '100%',\n              lg: '292px'\n            }}\n            width={{\n              base: isSmall ? '40px' : '100%'\n              // lg: '292px'\n            }}\n          >\n            <Block\n              cursor={selectCoinList.length >= 2 ? 'not-allowed' : 'pointer'}\n              h=\"40px\"\n              borderRadius=\"12px\"\n              minW=\"100%\"\n              w=\"unset\"\n              p={!isSmall && isApp ? '0px 4px 0 10px' : '0px 4px 0 8px'}\n              onClick={() => {\n                setIsSmall?.(false)\n                onOpen()\n              }}\n            >\n              <HStack w={isSmall ? '40px' : '100%'} justify=\"space-between\" h=\"100%\" align=\"center\">\n                <Flex align=\"center\" h=\"100%\" w={isSmall ? '40px' : '100%'}>\n                  <Icon xlinkHref=\"#icon-icon_search\" svgHover=\"text_paragraph\" />\n                  {(!isSmall || !isApp) && (\n                    <Text ml=\"4px\" whiteSpace=\"nowrap\">\n                      {isApp && selectCoinList.length >= 2 ? '' : 'Filter by token'}\n                    </Text>\n                  )}\n                </Flex>\n                <HStack>\n                  {selectCoinList?.map((item: Token) => {\n                    return (\n                      <HStack gap=\"4px\" align=\"center\" bg=\"button_ghost_bg\" borderRadius=\"8px\" p=\"5px 8px\" key={item?.coin_type}>\n                        <SingleCoinImage imageUrl={item?.logo_url} w=\"20px\" h=\"20px\" />\n                        <Text ml=\"2px\" color=\"text_caption\">\n                          {isApp ? textEllipses(item?.symbol || '', 5) : textEllipses(item?.symbol || '', 10)}\n                        </Text>\n                        <Icon\n                          xlinkHref=\"#icon-icon_close\"\n                          onClick={(e: any) => {\n                            cancelBubble(e)\n                            onDeleteSelectCoinList(item)\n                            onClose()\n                          }}\n                        />\n                      </HStack>\n                    )\n                  })}\n                </HStack>\n              </HStack>\n            </Block>\n          </Center>\n        </PopoverTrigger>\n        {isOpen && selectCoinList?.length < 2 && (\n          <PopoverContent\n            w={{\n              base: isProfile ? 'calc(100vw - 24px)' : 'calc(100vw - 68px)',\n              lg: '292px'\n            }}\n            {...wrapStyle}\n          >\n            <PopoverBody p=\"0px\">\n              <PoolsDropSelect\n                whiteTokenList={whiteTokenList}\n                selectTokenList={selectCoinList}\n                onDeleteToken={onDeleteSelectCoinList}\n                onClickToken={handleSelectCoinList}\n                isVault={isVault}\n              />\n            </PopoverBody>\n          </PopoverContent>\n        )}\n      </Popover>\n    </div>\n  )\n}\n"],"names":["vaultsTabList","VaultsH5Tab","props","currentTab","onClickVaultsTab","showSkeletonLoading","jsxs","Fragment","Skeleton","jsx","Menu","isOpen","onClose","MenuButton","Button","HStack","VaultsTabItem","ele","Icon","MenuList","VStack","VaultsTabList","data","SearchInputBlock","whiteTokenList","selectCoinList","onClickSelectCoinList","onDeleteSelectCoinList","wrapStyle","isSmall","setIsSmall","isVault","isProfile","isApp","useWindowWidth","firstItemRef","useRef","popoverRef","onOpen","useDisclosure","useEffect","handleClickOutside","e","handleSelectCoinList","item","Popover","PopoverTrigger","Center","Block","Flex","Text","SingleCoinImage","textEllipses","cancelBubble","PopoverContent","PopoverBody","PoolsDropSelect"],"mappings":"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"}