{"version":3,"mappings":"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","names":["store","set","get","deepBookPools","deepBookPoolsObj","deepBookPoolLoading","currentDeepBookPool","deepBookOrderBookLoading","deepBookAskList","deepBookBidList","queryDeepBookPoolLoading","queryDeepBookPools","walletAddress","currentBalanceManagerInfo","state","balanceManagerList","managerBalanceObjs","deepBookOpenOrders","showOpenOrdersNum","cancelOrderLoading","orderListLoading","isCheckedAllMarkets","deepBookOrderHistory","_a","item","deepBookOrderHistoryLoading","showDeepBookOrderHistoryNum","deepBookSettleList","deepBookSettleListLoading","claimSettleLoading","depositAssetsLoading","withdrawAssetsLoading","localDeepBookPools","placeOrderPrice","orderType","value","useDeepBookStore","create","persist","currentBalanceManagerInfoMap","useGetDeepBookManagerBalance","deepBookSDK","usePeripherySDKStore","setBalanceManagerList","setCurrentBalanceManagerInfo","getCurrentBalanceManagerInfo","setManagerBalanceObjs","currentAccount","useAccountStore","currentAccountRef","useRef","useEffect","getManagerBalance","list","account","balanceManager","coins","deepBookAccount","accounts","getBalanceManagerInfo","_b","res","error","address","currentBalanceManagerLocal","isAvailableObject","useGetDeepBookBalance","baseFreeBalance","useMemo","quoteFreeBalance","baseBalance","useGetTokenBalance","quoteBalance","allBaseBalance","d","allQuoteBalance","AssetsInfoModal","token","title","isOpen","onClose","onConfirm","isBaseAsset","inputValue","setInputValue","useState","slideValue","setSlideValue","inputSource","setInputSource","tabList","getTokenAmountValue","useTokenPrice","amountValue","currentBalance","isSuiCoin","CoinAssist","currentTab","changeSlideValue","useCallback","source","percent","handleTabChange","tab","handleSliderChange","handleInputChange","remainAmount","formatNumberWithDown","percentage","clampedPercentage","btnInfo","jsxs","Modal","jsx","ModalOverlay","ModalContent","ModalHeader","ModalCloseButton","ModalBody","VStack","TradeInput","HStack","Text","SelectTab","Box","Slider","SliderTrack","SliderFilledTrack","SliderThumb","Button","ChangeAccountModal","getExplorerUrl","useExplorer","CheckBox","AddressCopyLink","useGetDeepBookOrderBook","setDeepBookAskList","setDeepBookBidList","setDeepBookOrderBookLoading","deepBookPrice","getRequestPool","poolInfo","_c","_d","enhanceOrders","tickSize","isRefresh","length","pool","unit","priceIntW","priceInt","askList","bidList","useGetDeepBookAssetsPayload","quantity","coin","tx","assetType","useDeepBookAssetsActions","setDepositAssetsLoading","setWithdrawAssetsLoading","getDeepBookAssetsDepositPayload","getDeepBookAssetsWithdrawPayload","transactionConfirmation","useTransactionModal","signAndExecuteTransaction","useTransaction","mevProtect","maxCapForGas","transactionMode","customGasPrice","useGlobalStore","fetchAccountBalance","useAccountBalance","amount","tokenInfo","toastInfo","status","balanceChanges","description","info","TokenAssetItem","onDeposit","onWithdraw","freeBalance","balanceInfo","lockBalance","isLoading","SkeletonCircle","Skeleton","SingleCoinImage","CetusTooltip","Icon","HTextLabelBox","AssetsInfo","isOpenModal","setIsOpenModal","isOpenAccountModal","setIsOpenAccountModal","modalTitle","setModalTitle","setTokenInfo","deposit","withdraw","lockInfo","result","baseLock","quoteLock","handleDeposit","handleWithdraw","handleRefresh","size","useDocumentSize","isApp","useWindowWidth","RefreshButton","addressAbridge","globalWebSocket","globalMessageHandlers","globalState","isManualDisconnect","visibilityDisconnectTimer","activeSubscriptions","heartbeatTimer","hasInitialSubscription","subscriptionCount","lastDisconnectTime","reconnectCompensationCallbacks","addReconnectCompensationCallback","callback","removeReconnectCompensationCallback","executeReconnectCompensation","now","disconnectDuration","useDeepbookWebSocket","options","setState","reconnectCount","setReconnectCount","messageHandlersRef","optionsRef","reconnectAttemptsRef","isHiddenTime","updateGlobalState","newState","getSubscriptionOp","resetSubscriptionState","sendHeartbeat","pingMsg","startHeartbeat","interval","stopHeartbeat","message","config","addr","handleMessage","event","globalHandlers","handler","componentHandlers","internalSend","connect","url","subscription","maxAttempts","prev","disconnect","handleVisibilityChange","disconnectDelay","subscribe","messageType","send","isSubscription","success","key","unsubscribe","unsubscribeMsg","subscribePoolPrice","poolAddresses","getSubscriptionStats","ping","dateType","latestRequestId","useGetDeepbookKlineData","currentPoolId","currentResolution","currentCallback","unsubscribeRef","addReconnectCompensation","removeReconnectCompensation","compensationCallback","disconnectStartTime","disconnectEndTime","startTimestamp","endTimestamp","type","apiUrl","envConfigs","data","compensationData","a","b","poolId","resolution","from","to","firstDataRequest","onErrorCallback","requestId","v4","fetchData","sleepTime","op","subscribeMsg","_e","DataFeed","getHistoricalData","subscribeKlineData","onChangePrice","__publicField","symbolName","onSymbolResolvedCallback","onResolveErrorCallback","arr","symbol","symbolInfo","periodParams","onHistoryCallback","_poolId","onRealtimeCallback","subscriberUID","onResetCacheNeededCallback","DeepbookTradingViewChart","onChartReady","poolPriceUnit","chartContainerRef","tvWidgetRef","isMounted","indicators","setIndicators","setIsInitialized","setCurrentPoolId","getDeepbookHistoricalData","disconnectDeepbookWs","widget","widgetOptions","minTick","price","signPositive","formatUSDPrice","tvWidget","DeepbookChart","setDeepbookPrice","handleDeepbookPriceChange","getPriceUnit","ChartLoading","FooterBlock","Block","Image","activeStyle","OrderBookTab","orderBookTab","setOrderBookTab","OrderBookTabList","Fragment","placeholderImg","OrderBookTable","visibleRows","setPlaceOrderPrice","deepbookPrice","changedOrders","setChangedOrders","prevDataRef","isFirstRenderRef","orderBookData","changed","createDataHash","order","createHashMap","orders","hashMap","hash","currentAsksHashMap","currentBidsHashMap","prevAsksHashMap","prevBidsHashMap","currentAsk","currentBid","timer","asksToShow","bidsToShow","maxTotal","askMax","ask","bidMax","bid","calculateDepthPercentage","total","spread","renderOrderRow","isAsk","index","depthPercentage","depthColor","priceColor","dataHash","orderKey","isChanged","getTickSizeNumber","priceDecimal","tickSizeDecimal","remainder","formatNumber","formatNumberWithKMB","renderSpread","renderTableContent","_","TickSizeSelect","tickSizeList","defaultTickSize","setDefaultTickSize","getOrderBook","setIsOpen","buttonWidth","setButtonWidth","buttonRef","selectTickSize","Menu","MenuButton","MenuList","MenuItem","OrderBookBlock","isOpenCard","orderBookBlockRef","containerHeight","setContainerHeight","lastHeightRef","roundWith67Rule","num","integer","decimal","headerHeight","spreadHeight","availableHeight","rowsPerSide","debouncedSetHeight","useDebounceFunction","height","resizeObserver","entries","entry","initialHeight","refreshCount","setRefreshCount","useInterval","abandonedPools","useGetDeepBookPools","fetchByApi","useFetch","setDeepBookPools","setDeepBookPoolLoading","setCurrentDeepBookPool","setQueryDeepBookPoolLoading","setQueryDeepBookPools","setDeepBookPoolsObj","setLocalDeepBookPools","navigate","useNavigate","getDeepBookPools","poolIds","queryPoolIds","DeepBookPoolsPath","wrapDeepBookPool","currentPool","newLocalPools","acc","getCurrentDeepBookPool","DeepBookPoolInfoPath","base_asset","quote_asset","high","low","vol_usd_day","in_white_list","price_change","lot_size","tick_size","min_size","vol_24h","vol_24h_usd","taker_fee_rate","baseDecimals","quoteDecimals","lotSize","minSize","formatPercentage","localDeepBookPool","DeepBookPoolsV2Path","poolList","ManageModal","queryDeepBookPoolByValue","debouncedQueryDeepBookPool","regValue","showCommonToast","useGlobalToast","importDeepBookPool","newPools","newQueryDeepBookPools","removeDeepBookPool","SearchInput","Loading","CoinPairInfo","e","ManagePool","menuDisclosure","useDisclosure","isOpenManageModal","setIsOpenManageModal","isHover","setIsHover","CoinPairImage","_f","Table","getColumns","ManageModalModal","priceDisplay","priceChange","PriceReference","lazy","MarketDetailsModal","onCloseDetails","Suspense","PriceChange","isNegative","displayValue","PriceDisplay","priceUsd","symbolDataDisplayProcessing","VolumeDisplay","vol24hDisplay","vol24hUsdDisplay","HighLowDisplay","DetailsButton","onClick","setIsOpenCard","TopDataBlock","windowWidth","shouldHideHighLow","commonProps","isOpenDetails","setIsOpenDetails","useGetDeepBookOpenOrders","setDeepBookOpenOrders","setOrderListLoading","setCancelOrderLoading","isCheckedAllMarketsRef","currentBalanceManagerInfoRef","getDeepBookOpenOrders","wrapDeepBookOpenOrders","order_id","isBid","filled_quantity","baseAssets","quoteAssets","originalQuantity","filledQuantity","allList","i","useGetDeepBookEstFee","quantityInput","priceInput","Decimal","feeCoinDecimals","useGetOrderBestPrice","useGetPlaceLimitOrderPayload","maxFee","usePlaceMarketOrder","deepBookSlippage","slippageQuoteValue","quoteQuantity","fixD","useTradeCard","getEstimatedMaxFee","getPlaceMarketOrderPayload","getOrderBestPrice","getPlaceLimitOrderPayload","getDeepBookAllOpenOrders","tradeType","setTradeType","placeOrderLoading","setPlaceOrderLoading","setOrderType","setAmount","amoutRef","placeOrderPriceRef","isShowOrderVolumeError","estTotal","marketTotal","tValue","limitTotal","estTotalUsd","available","setMaxFee","maxFeeIsLoading","setMaxFeeIsLoading","isBuy","feeAmount","requiredBalance","requiredAmount","getOrders","placeMarketOrder","placeLimitOrder","getDecimalPlaces","decimalPart","tickSizeUnit","minSizeUnit","InputBlock","props","onChange","isMarket","decimals","fromRef","focused","setFocused","Input","NumericFormatInput","OrderVolumeError","baseSymbol","InputBlockGroup","tradeBlockTabList","TradeBlockTab","setCurrentTab","orderBlockTabList","OrderBlockTab","Slippage","OrderInfoBlock","currentOrderType","TradeBlock","setPrice","onWalletModal","useGetCancelOrderPayload","orderId","orderList","useGetDeepBookClaimSettlePayload","useGetDeepBookSettleList","setDeepBookSettleList","setDeepBookSettleListLoading","getSettleList","pools","wrapSettle","baseSettle","quoteSettle","deepSettle","canClaim","useDeepBookOrderActions","getCancelOrderPayload","getcancellAllOrderPayload","setClaimSettleLoading","getClaimSettlePayload","OpenOrdersTableBlock","setShowOpenOrdersNum","cancelOrder","setType","dataSource","NoData","TypeCon","colorMap","color","bg","SettledBalanceTableBlock","claimSettled","TradeHistoryTableBlock","setShowDeepBookOrderHistoryNum","deepBookOrderHistoryList","ActionContent","isShowAllMarkets","setIsCheckedAllMarkets","isShowCancelAll","cancelAllOrder","wrapStyle","Switch","TradeTableTab","TradeTableBlock","tradeTableTabList","DeepBookH5","currentH5Menu","setCurrentH5Menu","h5MenuList","handleChangeTab","__defProp","__defNormalProp","obj","_Orientation","name","Orientation","Rect","x","y","width","json","round","element","rect","style2","paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","contentWidth","contentHeight","domRect","r","position","insets","outerRect","orientation","prefSize","_DockLocation","_name","_orientation","_indexPlus","bl","br","r1","r2","DockLocation","I18nLabel","I18nLabel2","CLASSES","CLASSES2","Action","_Actions","toNodeId","location","select","fromNodeId","tabNodeId","tabsetNodeId","text","windowId","nodeId","weights","pos","attributes","layout","Actions","Attribute","modelName","defaultValue","alwaysWriteJson","AttributeDefinitions","attr","conversion","jsonObj","fromValue","childAttributes","pairedAttr","parentAttributes","lines","sorted","c","inherited","defValue","required","sb","DropInfo","node","className","BorderSet","_model","model","borderSet","borderJson","BorderNode","border","borderNode","fn","path","dragNode","dropInfo","Node","id","params","val","level","newPath","parent","weight","rtn","child","childNode","_TabNode","addToModel","TabSetNode","Model","layoutWindow","visible","scrollTop","scrollLeft","rendered","stamp","altName","attributeDefinitions","TabNode","isDesktop","getRenderStateEx","iconAngle","leadingContent","titleContent","renderState","isAuxMouseEvent","auxEvent","enablePointerOnIFrames","enable","currentDocument","iframes","getElementsByTagName","iframe","tag","startDrag","doc","drag","dragEnd","dragCancel","pointerMove","ev","pointerCancel","pointerUp","canDockToWindow","copyInlineStyles","target","sourceStyle","targetStyle","isSafari","userAgent","adjustSelectedIndex","removedIndex","selectedIndex","randomUUID","_TabSetNode","newLayoutNode","jsonChild","selected","dockLocation","outlineRect","yy","h","p","childCenter","dragParent","fromIndex","insertPos","RowNode","moveNode","parentRow","newRow","_RowNode","DefaultMin","DefaultMax","ss","fr","lr","q","n","initialSizes","sum","s","startRect","startPosition","splitterPos","sn","smax","sizes","shift","altShift","m","first","childChildren","subchild","subChildrenTotal","subChildChildren","ssc","j","subsubChild","attrs","xx","w","margin","half","horz","vrow","hrow","LayoutWindow","windowJson","count","_Model","action","returnVal","newNode","toNode","fromNode","fromWindow","children","isMaximized","oldLayoutWindow","row","tabsetId","window2","tabNode","tabsetNode","listener","global","windows","onAllowDrop","onCreateTabSet","l","emptyWindows","_BorderNode","defaultSize","tabBorderSize","selectedNode","min","nodeMin","max","nodeMax","whenOpen","childRect","childY","childHeight","childX","childWidth","useMinSize","pBounds","maxSize","rootRow","innerRect","splitterSize","maxPos","splitter","splitterDragging","Splitter","horizontal","dragging","setDragging","React.useState","selfRef","React.useRef","extendedRef","outlineDiv","handleDiv","dragStartX","dragStartY","initalSizes","extra","React.useEffect","onTouchStart","_a2","_b2","onPointerDown","onDragMove","onDragEnd","onDragCancel","rootdiv","cm","clientRect","getBoundPosition","updateLayout","realtime","init","bounds","handle","style22","className2","BorderTab","show","React.useLayoutEffect","contentRect","ICloseType","ICloseType2","BorderButton","icons","contentRef","onDragStart","onAuxMouseClick","onContextMenu","isClosable","closeType","onClosePointerDown","onTextBoxPointerDown","onTextBoxKeyPress","classNames","content","leading","closeTitle","TabButtonStamp","showPopup","triggerElement","parentNode","items","onSelect","layoutDiv","classNameMapper","triggerRect","layoutRect","elm","onHide","onElementPointerDown","onDocPointerDown","_event","PopupMenu","divRef","onItemClick","handleKeyDown","itemElements","classes","useTabOverflow","tabStripRef","miniScrollRef","tabClassName","hiddenTabs","setHiddenTabs","isShowHiddenTabs","setShowHiddenTabs","isDockStickyButtons","setDockStickyButtons","userControlledPositionRef","updateHiddenTabsTimerRef","hiddenTabsRef","thumbInternalPos","repositioningRef","setScrollPosition","checkForOverflow","scrollIntoView","updateScrollMetrics","updateHiddenTabs","onWheel","selectedTabNode","stripRect","selectedRect","getNear","getSize","getScrollPosition","getFar","t","getElementSize","scrollSize","getScrollSize","thumbSize","adjust","thumbPos","showHidden","findHiddenTabs","newHiddenTabs2","arraysEqual","onScroll","onScrollPointerDown","thumb","scrollPos","tabContainer","offset","dock","hidden","strip","visibleNear","visibleFar","tabRect","onMouseWheel","delta","newPos","maxScroll","arr1","arr2","BorderTabSet","toolbarRef","overflowbuttonRef","stickyButtonsRef","tabStripInnerRef","onInterceptPointerDown","onOverflowClick","onOverflowItemSelect","onPopoutTab","tabButtons","layoutTab","isSelected","borderClasses","buttons","stickyButtons","overflowTitle","overflowContent","popoutTitle","toolbar","innerStyle","outerStyle","borderHeight","miniScrollbar","leadingContainer","DragContainer","PopoutWindow","onCloseWindow","onSetWindow","popoutWindow","setContent","styleMap","closedWindow","popoutDocument","popoutContent","copyStyles","observer","mutationsList","handleStyleMutations","createPortal","mutation","addition","copyStyle","removal","popoutStyle","popoutDoc","promises","styleElements","linkElement","resolve","styleElement","style","CloseIcon","MaximizeIcon","OverflowIcon","EdgeIcon","PopoutIcon","RestoreIcon","AsterickIcon","Overlay","TabButton","onDoubleClick","onRename","onEndEdit","isStretch","baseClassName","TabSet","buttonBarRef","newContentRect","onMaximizeToggle","onCloseTab","tabs","isTabStretch","showClose","minTitle","maxTitle","buttonbar","tabStrip","tabStripClasses","emptyTabset","placeHolderCallback","tabset","Row","Tab","firstSelect","handleScroll","overlay","overlayStyle","ErrorBoundary","React.Component","errorInfo","SizeTracker","React.memo","arePropsEqual","prevProps","nextProps","Layout","React.createRef","onDrop","component","LayoutInternal","_LayoutInternal","borderBarSize","defaultClassName","windowLayout","control","portal","DragState","dragComponent","offsetX","offsetY","isInVerticalBorder","externalDrag","tempNode","speed","dragState","defaultSupportsPopout","defaultIcons","sourceElement","targetElement","inner","outer","reorderedTabs","floatingWindows","reorderedTabMoveables","tabStamps","metricElements","tabMoveables","classMain","borders","borderSetComponents","borderSetContentComponents","classBorderOuter","classBorderInner","innerWithBorderTabs","edges","arrowIcon","edgeRectLength","edgeRectWidth","radius","renderTab","overEdge","components","ids","nextIds","nextIdsSet","reordered","outcome","div","moveableElement","inRect","navHeight","navWidth","renderValues","tabSetNode","param","dragElement","tempDiv","createRoot","overWindow","mainLayout","dragSource","dragJson","fnNewNodeDropped","DeepBookPC","factory","TopDataBlockWrapper","splitters","tradeTableHeight","tradeTableElement","chartOrderBookRow","chartOrderBookHeight","chartElement","orderBookElement","useGetDeepBookOrderHistory","setDeepBookOrderHistoryLoading","setDeepBookOrderHistory","poolInfoCache","getDeepBookOrderHistory","DeepBookTradeHistoryPath","poolIdsToQuery","poolIdsArray","history","wrapDeepBookOrderHistory","block_time","is_bid","pool_id","quantityFilled","filled","timeFormatUTC","DeepBook","useParams","fetchTokenPrices","getDeepBookTokenPrice","coinTypeList"],"ignoreList":[42],"sources":["../../src/store/deepbook/index.ts","../../src/hooks/deepbook/useGetDeepBookManagerBalance.ts","../../src/hooks/deepbook/useGetDeepBookBalance.ts","../../src/components/deepbook/AssetsInfoModal.tsx","../../src/components/deepbook/ChangeAccountModal.tsx","../../src/hooks/deepbook/useGetDeepBookOrderBook.ts","../../src/hooks/deepbook/useGetDeepBookAssetsPayload.ts","../../src/hooks/deepbook/useDeepBookAssetsActions.ts","../../src/components/deepbook/AssetsInfo.tsx","../../src/hooks/deepbook/useDeepbookWebsocket.ts","../../src/hooks/deepbook/useGetDeepbookKline.ts","../../src/components/tradingViewDeepbookChart/datafeed.ts","../../src/components/tradingViewDeepbookChart/index.tsx","../../src/components/deepbook/DeepbookChart.tsx","../../src/components/deepbook/FooterBlock.tsx","../../src/components/deepbook/OrderBookBlock/OrderBookTab.tsx","../../src/components/deepbook/OrderBookBlock/OrderBookTable.tsx","../../src/components/deepbook/OrderBookBlock/TickSizeSelect.tsx","../../src/components/deepbook/OrderBookBlock/index.tsx","../../src/hooks/deepbook/useGetDeepBookPools.ts","../../src/components/deepbook/ManageModal.tsx","../../src/components/deepbook/ManagePool.tsx","../../src/components/deepbook/MarketDetailsModal.tsx","../../src/components/deepbook/TopDataBlock.tsx","../../src/hooks/deepbook/useGetDeepBookOpenOrders.ts","../../src/hooks/deepbook/useGetDeepBookEstFee.ts","../../src/hooks/deepbook/useGetOrderBestPrice.ts","../../src/hooks/deepbook/usePlaceLimitOrder.ts","../../src/hooks/deepbook/usePlaceMarketOrder.ts","../../src/hooks/deepbook/useTradeCard.ts","../../src/components/deepbook/InputBlock.tsx","../../src/components/deepbook/InputBlockGroup.tsx","../../src/components/deepbook/TradeBlock.tsx","../../src/hooks/deepbook/useGetCancelOrderPayload.ts","../../src/hooks/deepbook/useGetDeepBookClaimSettlePayload.ts","../../src/hooks/deepbook/useGetDeepBookSettleList.ts","../../src/hooks/deepbook/useDeepBookOrderActions.ts","../../src/components/deepbook/OpenOrdersTableBlock.tsx","../../src/components/deepbook/SettledBalanceTableBlock.tsx","../../src/components/deepbook/TradeHistoryTableBlock.tsx","../../src/components/deepbook/TradeTableBlock.tsx","../../src/components/deepbook/DeepBookH5.tsx","../../../../node_modules/.pnpm/flexlayout-react@0.8.17_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/flexlayout-react/dist/index.js","../../src/components/deepbook/DeepBookPC.tsx","../../src/hooks/deepbook/useGetDeepBookOrderHistory.ts","../../src/pages/DeepBook.tsx"],"sourcesContent":["import { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\n\nexport type DeepbookPrice = {\n  price: string\n  poolId: string\n}\n\ninterface DeepBookState {\n  deepBookPools: any[]\n  setDeepBookPools: (deepBookPools: any[]) => void\n\n  deepBookPoolsObj: Record<string, any>\n  setDeepBookPoolsObj: (deepBookPoolsObj: Record<string, any>) => void\n\n  deepBookPoolLoading: boolean\n  setDeepBookPoolLoading: (deepBookPoolLoading: boolean) => void\n\n  currentDeepBookPool: any\n  setCurrentDeepBookPool: (currentDeepBookPool: any) => void\n\n  deepBookOrderBookLoading: boolean\n  setDeepBookOrderBookLoading: (deepBookOrderBookLoading: boolean) => void\n\n  deepBookAskList: any[]\n  setDeepBookAskList: (deepBookAskList: any[]) => void\n\n  deepBookBidList: any[]\n  setDeepBookBidList: (deepBookBidList: any[]) => void\n\n  queryDeepBookPoolLoading: boolean\n  setQueryDeepBookPoolLoading: (queryDeepBookPoolLoading: boolean) => void\n\n  queryDeepBookPools: any[]\n  setQueryDeepBookPools: (queryDeepBookPools: any[]) => void\n\n  // 改为以钱包地址为key的对象\n  currentBalanceManagerInfoMap: Record<string, any>\n  setCurrentBalanceManagerInfo: (walletAddress: string, currentBalanceManagerInfo: any) => void\n  getCurrentBalanceManagerInfo: (walletAddress: string) => any\n\n  balanceManagerList: any[]\n  setBalanceManagerList: (balanceManagerList: any[]) => void\n\n  managerBalanceObjs: any[]\n  setManagerBalanceObjs: (managerBalanceObjs: any[]) => void\n\n  deepBookOpenOrders: any[]\n  setDeepBookOpenOrders: (deepBookOpenOrders: any[]) => void\n\n  cancelOrderLoading: boolean\n  setCancelOrderLoading: (cancelOrderLoading: boolean) => void\n\n  orderListLoading: boolean\n  setOrderListLoading: (orderListLoading: boolean) => void\n\n  isCheckedAllMarkets: boolean\n  setIsCheckedAllMarkets: (isCheckedAllMarkets: boolean) => void\n\n  deepBookOrderHistory: any[]\n  setDeepBookOrderHistory: (deepBookOrderHistory: any[]) => void\n\n  showDeepBookOrderHistoryNum: number\n  setShowDeepBookOrderHistoryNum: (showDeepBookOrderHistoryNum: number) => void\n\n  deepBookOrderHistoryLoading: boolean\n  setDeepBookOrderHistoryLoading: (deepBookOrderHistoryLoading: boolean) => void\n\n  deepBookSettleList: any[]\n  setDeepBookSettleList: (deepBookSettleList: any[]) => void\n\n  deepBookSettleListLoading: boolean\n  setDeepBookSettleListLoading: (deepBookSettleListLoading: boolean) => void\n\n  claimSettleLoading: boolean\n  setClaimSettleLoading: (claimSettleLoading: boolean) => void\n\n  depositAssetsLoading: boolean\n  setDepositAssetsLoading: (depositAssetsLoading: boolean) => void\n\n  withdrawAssetsLoading: boolean\n  setWithdrawAssetsLoading: (withdrawAssetsLoading: boolean) => void\n\n  localDeepBookPools: any[]\n  setLocalDeepBookPools: (localDeepBookPools: any[]) => void\n\n  placeOrderPrice: string\n  setPlaceOrderPrice: (placeOrderPrice: string) => void\n\n  orderType: 'Market' | 'Limit'\n  setOrderType: (orderType: 'Market' | 'Limit') => void\n\n  deepbookPrice: DeepbookPrice | undefined\n  setDeepbookPrice: (value: DeepbookPrice) => void\n}\n\nconst store = (set: any, get: any) => ({\n  deepBookPools: [],\n  setDeepBookPools: deepBookPools => set({ deepBookPools }),\n\n  deepBookPoolsObj: {},\n  setDeepBookPoolsObj: deepBookPoolsObj => set({ deepBookPoolsObj }),\n\n  deepBookPoolLoading: false,\n  setDeepBookPoolLoading: deepBookPoolLoading => set({ deepBookPoolLoading }),\n\n  currentDeepBookPool: {} as any,\n  setCurrentDeepBookPool: currentDeepBookPool => set({ currentDeepBookPool }),\n\n  deepBookOrderBookLoading: true,\n  setDeepBookOrderBookLoading: deepBookOrderBookLoading => set({ deepBookOrderBookLoading }),\n\n  deepBookAskList: [],\n  setDeepBookAskList: deepBookAskList => set({ deepBookAskList }),\n\n  deepBookBidList: [],\n  setDeepBookBidList: deepBookBidList => set({ deepBookBidList }),\n\n  queryDeepBookPoolLoading: false,\n  setQueryDeepBookPoolLoading: queryDeepBookPoolLoading => set({ queryDeepBookPoolLoading }),\n\n  queryDeepBookPools: [],\n  setQueryDeepBookPools: queryDeepBookPools => set({ queryDeepBookPools }),\n\n  // 以钱包地址为key的映射对象\n  currentBalanceManagerInfoMap: {},\n  setCurrentBalanceManagerInfo: (walletAddress: string, currentBalanceManagerInfo: any) =>\n    set(state => ({\n      currentBalanceManagerInfoMap: {\n        ...state.currentBalanceManagerInfoMap,\n        [walletAddress]: currentBalanceManagerInfo\n      }\n    })),\n  getCurrentBalanceManagerInfo: (walletAddress: string) => {\n    const state = get()\n    return state.currentBalanceManagerInfoMap[walletAddress] || null\n  },\n\n  balanceManagerList: [],\n  setBalanceManagerList: (balanceManagerList: any[]) => set({ balanceManagerList }),\n\n  managerBalanceObjs: [] as any,\n  setManagerBalanceObjs: (managerBalanceObjs: any[]) => set({ managerBalanceObjs }),\n\n  deepBookOpenOrders: [],\n  setDeepBookOpenOrders: deepBookOpenOrders => set({ deepBookOpenOrders }),\n\n  showOpenOrdersNum: 0,\n  setShowOpenOrdersNum: showOpenOrdersNum => set({ showOpenOrdersNum }),\n\n  cancelOrderLoading: false,\n  setCancelOrderLoading: cancelOrderLoading => set({ cancelOrderLoading }),\n\n  orderListLoading: false,\n  setOrderListLoading: orderListLoading => set({ orderListLoading }),\n\n  isCheckedAllMarkets: false,\n  setIsCheckedAllMarkets: isCheckedAllMarkets => set({ isCheckedAllMarkets }),\n\n  deepBookOrderHistory: [],\n  setDeepBookOrderHistory: deepBookOrderHistory =>\n    set({\n      deepBookOrderHistory,\n      showDeepBookOrderHistoryNum: deepBookOrderHistory?.filter(\n        (item: any) => item?.poolId === get().currentDeepBookPool?.address || get().isCheckedAllMarkets\n      )?.length\n    }),\n\n  deepBookOrderHistoryLoading: true,\n  setDeepBookOrderHistoryLoading: deepBookOrderHistoryLoading => set({ deepBookOrderHistoryLoading }),\n\n  showDeepBookOrderHistoryNum: 0,\n  setShowDeepBookOrderHistoryNum: showDeepBookOrderHistoryNum => set({ showDeepBookOrderHistoryNum }),\n\n  deepBookSettleList: [],\n  setDeepBookSettleList: deepBookSettleList => set({ deepBookSettleList }),\n\n  deepBookSettleListLoading: false,\n  setDeepBookSettleListLoading: deepBookSettleListLoading => set({ deepBookSettleListLoading }),\n\n  claimSettleLoading: false,\n  setClaimSettleLoading: claimSettleLoading => set({ claimSettleLoading }),\n\n  depositAssetsLoading: false,\n  setDepositAssetsLoading: depositAssetsLoading => set({ depositAssetsLoading }),\n\n  withdrawAssetsLoading: false,\n  setWithdrawAssetsLoading: withdrawAssetsLoading => set({ withdrawAssetsLoading }),\n\n  localDeepBookPools: [],\n  setLocalDeepBookPools: localDeepBookPools => set({ localDeepBookPools }),\n\n  placeOrderPrice: '',\n  setPlaceOrderPrice: placeOrderPrice => set({ placeOrderPrice }),\n\n  orderType: 'Market',\n  setOrderType: orderType => set({ orderType }),\n\n  deepbookPrice: undefined,\n  setDeepbookPrice: (value: DeepbookPrice) => {\n    set(() => ({\n      deepbookPrice: value\n    }))\n  }\n})\n\nconst useDeepBookStore = create(\n  persist(store, {\n    name: 'useDeepBookStore',\n    partialize: state => {\n      const { currentBalanceManagerInfoMap, localDeepBookPools } = state\n      return { currentBalanceManagerInfoMap, localDeepBookPools }\n    },\n    version: 1\n  })\n)\n\nexport default useDeepBookStore\n","import useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport { isAvailableObject } from '@cetus/utils'\nimport { useEffect, useRef } from 'react'\n\nexport default function useGetDeepBookManagerBalance() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { setBalanceManagerList, setCurrentBalanceManagerInfo, getCurrentBalanceManagerInfo, setManagerBalanceObjs } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n  const currentAccountRef = useRef(currentAccount?.address as string)\n  useEffect(() => {\n    currentAccountRef.current = currentAccount?.address as string\n  }, [currentAccount?.address])\n\n  // 获取balanceManager账户里的余额\n  const getManagerBalance = async (list: any, account: string, balanceManager?: string) => {\n    try {\n      const coins = list.map((item: any) => {\n        return {\n          coinType: item.coin_type,\n          decimals: item.decimals\n        }\n      })\n\n      if (coins.length < 1) return []\n\n      let deepBookAccount = balanceManager ? balanceManager : getCurrentBalanceManagerInfo(account)?.balanceManager\n\n      if (!deepBookAccount) {\n        const accounts = await getBalanceManagerInfo(account)\n        if (accounts?.length > 0) {\n          deepBookAccount = accounts?.[0]?.balanceManager\n        }\n      }\n\n      const res = await deepBookSDK.DeepbookUtils.getManagerBalance({\n        account,\n        balanceManager: deepBookAccount,\n        coins: [...coins]\n      })\n      setManagerBalanceObjs(res)\n    } catch (error) {\n      console.log('🚀 ~ file: useDeepbook.ts:245 ~ getManagerBalance ~ error:', error)\n    }\n  }\n\n  // 获取balanceManager账户列表\n  const getBalanceManagerInfo = async (address: string) => {\n    const res = await deepBookSDK.DeepbookUtils.getBalanceManager(address)\n    console.log('🚀🚀🚀 ~ useGetDeepBookManagerBalance.ts:43 ~ getBalanceManagerInfo ~ res:', res)\n    setBalanceManagerList(res)\n    const currentBalanceManagerLocal = getCurrentBalanceManagerInfo(address)\n    if (currentAccountRef.current == address) {\n      if (currentBalanceManagerLocal && isAvailableObject(currentBalanceManagerLocal)) {\n        setCurrentBalanceManagerInfo(address, currentBalanceManagerLocal)\n      } else if (res && res.length > 0) {\n        setCurrentBalanceManagerInfo(address, res[0])\n      } else {\n        setCurrentBalanceManagerInfo(address, {})\n      }\n      return res\n    }\n  }\n\n  return { getBalanceManagerInfo, getManagerBalance }\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport { useGetTokenBalance } from '@cetus/hooks/src/useTokenBalance'\nimport { d } from '@cetus/utils'\nimport { useMemo } from 'react'\n\nexport default function useGetDeepBookBalance() {\n  const { currentDeepBookPool, managerBalanceObjs } = useDeepBookStore()\n  const baseFreeBalance = useMemo(() => {\n    if (currentDeepBookPool?.address) {\n      return managerBalanceObjs[currentDeepBookPool?.baseAssets?.coin_type]?.adjusted_balance\n    }\n    return '0'\n  }, [currentDeepBookPool?.address, managerBalanceObjs])\n\n  const quoteFreeBalance = useMemo(() => {\n    if (currentDeepBookPool?.address) {\n      return managerBalanceObjs[currentDeepBookPool?.quoteAssets?.coin_type]?.adjusted_balance\n    }\n    return '0'\n  }, [currentDeepBookPool?.address, managerBalanceObjs])\n\n  const { balanceInfo: baseBalance } = useGetTokenBalance(currentDeepBookPool?.baseAssets)\n  const { balanceInfo: quoteBalance } = useGetTokenBalance(currentDeepBookPool?.quoteAssets)\n\n  const allBaseBalance = useMemo(() => {\n    return d(baseFreeBalance)\n      .add(baseBalance?.balanceFormat ?? 0)\n      .toString()\n  }, [baseFreeBalance, baseBalance])\n\n  const allQuoteBalance = useMemo(() => {\n    return d(quoteFreeBalance)\n      .add(quoteBalance?.balanceFormat ?? 0)\n      .toString()\n  }, [quoteFreeBalance, quoteBalance])\n\n  return {\n    baseFreeBalance,\n    quoteFreeBalance,\n    baseBalance,\n    quoteBalance,\n    allBaseBalance,\n    allQuoteBalance\n  }\n}\n","import useGetDeepBookBalance from '@/hooks/deepbook/useGetDeepBookBalance'\nimport { SelectTab, TradeInput } from '@cetus/design'\nimport { Tab } from '@cetus/design/src/components/common/SelectTab'\nimport useTokenPrice from '@cetus/hooks/src/useTokenPrice'\nimport { Token } from '@cetus/types'\nimport { formatNumberWithDown } from '@cetus/utils'\nimport { d } from '@cetusprotocol/common-sdk'\nimport { CoinAssist } from '@cetusprotocol/deepbook-utils'\nimport {\n  Box,\n  Button,\n  HStack,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalHeader,\n  ModalOverlay,\n  Slider,\n  SliderFilledTrack,\n  SliderThumb,\n  SliderTrack,\n  Text,\n  VStack\n} from '@chakra-ui/react'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\n\ntype AssetsInfoModalProps = {\n  token: Token\n  title: 'Deposit' | 'Withdraw'\n  isOpen: boolean\n  onClose: (isManualClose?: boolean) => void\n  onConfirm: (amount: string) => void\n  isBaseAsset: boolean\n}\n\n// 操作来源枚举\ntype InputSource = 'slider' | 'input' | 'tab'\n\nexport default function AssetsInfoModal({ token, title, isOpen, onClose, onConfirm, isBaseAsset }: AssetsInfoModalProps) {\n  const [inputValue, setInputValue] = useState<string>('')\n  const [slideValue, setSlideValue] = useState<number>(25)\n  const [inputSource, setInputSource] = useState<InputSource>('slider')\n\n  const tabList: Tab[] = [{ label: '25%' }, { label: '50%' }, { label: '75%' }, { label: 'MAX' }]\n  const { getTokenAmountValue } = useTokenPrice()\n  const amountValue = getTokenAmountValue(token?.coin_type, inputValue)\n\n  const { baseFreeBalance, quoteFreeBalance, baseBalance, quoteBalance } = useGetDeepBookBalance()\n\n  // 优化：提取余额计算逻辑\n  const currentBalance = useMemo(() => {\n    if (title === 'Deposit') {\n      return isBaseAsset ? baseBalance?.balanceFormat : quoteBalance?.balanceFormat\n    }\n    return isBaseAsset ? baseFreeBalance : quoteFreeBalance\n  }, [title, isBaseAsset, baseBalance?.balanceFormat, quoteBalance?.balanceFormat, baseFreeBalance, quoteFreeBalance])\n\n  // 优化：提取 SUI 币种判断\n  const isSuiCoin = useMemo(() => {\n    return CoinAssist.isSuiCoin(token?.coin_type || '')\n  }, [token?.coin_type])\n\n  const currentTab = useMemo(() => {\n    return slideValue === 100 ? 'MAX' : `${slideValue}%`\n  }, [slideValue])\n\n  const changeSlideValue = useCallback((value: string | number, source: InputSource = 'slider') => {\n    setInputSource(source)\n    if (value === 'MAX' || value === 100) {\n      setSlideValue(100)\n    } else {\n      const percent = Number(String(value).replace('%', ''))\n      setSlideValue(percent)\n    }\n  }, [])\n\n  const handleTabChange = useCallback(\n    (tab: Tab) => {\n      if (tab.label === 'MAX') {\n        changeSlideValue(100, 'tab')\n      } else {\n        changeSlideValue(tab.label, 'tab')\n      }\n    },\n    [changeSlideValue]\n  )\n\n  const handleSliderChange = useCallback(\n    (value: number) => {\n      changeSlideValue(`${value}%`, 'slider')\n    },\n    [changeSlideValue]\n  )\n\n  const handleInputChange = useCallback((value: string) => {\n    setInputSource('input')\n    setInputValue(value)\n  }, [])\n\n  // 优化：简化滑块/标签页更新输入值的逻辑\n  useEffect(() => {\n    console.log('🚀🚀🚀 ~ AssetsInfoModal.tsx:103 ~ AssetsInfoModal ~ slideValue:', slideValue)\n    if (slideValue && (inputSource === 'slider' || inputSource === 'tab') && currentBalance) {\n      const remainAmount = isSuiCoin && title == 'Deposit' && slideValue == 100 ? 0.05 : 0\n      const value = formatNumberWithDown(d(currentBalance).mul(slideValue).div(100).sub(remainAmount).toString(), token?.decimals, true)\n      setInputValue(value)\n    }\n  }, [slideValue, inputSource, currentBalance, token?.decimals, isSuiCoin, title])\n\n  // 优化：简化输入框更新滑块值的逻辑\n  useEffect(() => {\n    if (inputValue && inputSource === 'input' && currentBalance) {\n      console.log('🚀🚀🚀 ~ AssetsInfoModal.tsx:112 ~ AssetsInfoModal ~ inputValue:', inputValue)\n      const remainAmount = isSuiCoin && title == 'Deposit' ? 0.05 : 0\n      const percentage = d(inputValue).add(remainAmount).div(d(currentBalance)).mul(100)\n      const clampedPercentage = d(percentage).gt(100) ? 100 : Number(percentage)\n      console.log('🚀🚀🚀 ~ AssetsInfoModal.tsx:118 ~ AssetsInfoModal ~ clampedPercentage:', clampedPercentage)\n      setSlideValue(clampedPercentage)\n    }\n  }, [inputValue, inputSource, currentBalance])\n\n  // 移除调试信息\n  // useEffect(() => {\n  //   console.log('操作来源:', inputSource, '输入值:', inputValue, '滑块值:', slideValue)\n  // }, [inputSource, inputValue, slideValue])\n\n  const btnInfo = useMemo(() => {\n    if (!+inputValue) {\n      return { text: '', disabled: true }\n    }\n\n    const inputAmount = d(inputValue)\n    const hasInsufficientBalance = inputAmount.gt(currentBalance || 0)\n\n    if (hasInsufficientBalance) {\n      return {\n        text: `Insufficient ${token?.symbol} balance`,\n        disabled: true\n      }\n    }\n\n    return {\n      text: title === 'Deposit' ? 'Deposit' : 'Withdraw',\n      disabled: false\n    }\n  }, [inputValue, currentBalance, token?.symbol, title])\n\n  return (\n    <Modal autoFocus={false} returnFocusOnClose={false} trapFocus={false} isOpen={isOpen} onClose={() => onClose(false)} isCentered>\n      <ModalOverlay />\n      <ModalContent>\n        <ModalHeader>{title}</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody textAlign=\"center\" p=\"0 16px 16px\">\n          <VStack w=\"100%\" gap=\"20px\">\n            <TradeInput\n              wrapStyle={{ h: 'unset' }}\n              placeholder=\"0.0\"\n              value={inputValue}\n              needRemainBalance={title === 'Deposit' && isSuiCoin}\n              amountValue={amountValue}\n              onChange={handleInputChange}\n              balance={currentBalance}\n              token={token}\n              balanceLabel={title === 'Deposit' ? '' : 'Available'}\n              inputStyle={{ width: '100%' }}\n              half={false}\n              max={false}\n            />\n\n            <HStack w=\"100%\" justify=\"space-between\">\n              <Text fontSize=\"20px\" color=\"text_caption\" whiteSpace=\"nowrap\">\n                {d(slideValue).gt(0) && slideValue < 0.01 ? '<0.01' : `${formatNumberWithDown(slideValue, 2)}%`}\n              </Text>\n\n              <SelectTab\n                type=\"outlineTab\"\n                tabList={tabList}\n                currentTab={currentTab}\n                handleChangeTab={handleTabChange}\n                wrapStyle={{\n                  w: { base: '220px', lg: '350px' },\n                  h: '32px',\n                  p: '3px',\n                  borderRadius: '8px'\n                }}\n                itemStyle={{\n                  flex: 1,\n                  fontSize: '14px',\n                  margin: 0\n                }}\n              />\n            </HStack>\n\n            <Box w=\"100%\" mt=\"-10px\">\n              <Slider aria-label=\"assets-info-slider\" min={0} max={100} focusThumbOnChange={false} value={slideValue} onChange={handleSliderChange}>\n                <SliderTrack bg=\"bg_secondary\" h=\"8px\">\n                  <SliderFilledTrack h=\"4px\" />\n                </SliderTrack>\n                <SliderThumb />\n              </Slider>\n            </Box>\n\n            <Button w=\"100%\" fontWeight=\"500\" onClick={() => onConfirm(inputValue)} isDisabled={btnInfo.disabled}>\n              {btnInfo.text || title}\n            </Button>\n          </VStack>\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  )\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport { AddressCopyLink } from '@cetus/design'\nimport useExplorer from '@cetus/hooks/src/useExplorer'\nimport { useAccountStore } from '@cetus/stores'\nimport { CheckBox } from '@cetus/ui-kit'\nimport { HStack, Modal, ModalBody, ModalCloseButton, ModalContent, ModalHeader, ModalOverlay, VStack } from '@chakra-ui/react'\nimport { useMemo } from 'react'\n\ntype ChangeAccountProps = {\n  isOpen: boolean\n  onClose: (isManualClose?: boolean) => void\n}\n\nexport default function ChangeAccountModal({ isOpen, onClose }: ChangeAccountProps) {\n  const { currentAccount } = useAccountStore()\n  const { getExplorerUrl } = useExplorer()\n  const { balanceManagerList, getCurrentBalanceManagerInfo, currentBalanceManagerInfoMap, setCurrentBalanceManagerInfo } = useDeepBookStore()\n\n  const currentBalanceManagerInfo = useMemo(() => {\n    if (currentAccount?.address) {\n      return getCurrentBalanceManagerInfo(currentAccount?.address)\n    }\n    return null\n  }, [currentAccount?.address, currentBalanceManagerInfoMap])\n\n  return (\n    <Modal autoFocus={false} returnFocusOnClose={false} trapFocus={false} isOpen={isOpen} onClose={() => onClose(false)} isCentered>\n      <ModalOverlay />\n      <ModalContent w=\"326px\">\n        <ModalHeader>Change Account</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody textAlign=\"center\" pb=\"20px\">\n          <VStack w=\"100%\" gap=\"20px\" align=\"flex-start\">\n            {balanceManagerList?.map((account: any) => {\n              return (\n                <HStack\n                  key={account?.address}\n                  sx={{ _hover: { p: { color: 'text_caption' } } }}\n                  cursor=\"pointer\"\n                  onClick={() => {\n                    setCurrentBalanceManagerInfo(currentAccount?.address, account)\n                    onClose()\n                  }}\n                >\n                  <CheckBox checked={currentBalanceManagerInfo?.balanceManager == account?.balanceManager} onClick={() => {}} />\n                  <AddressCopyLink\n                    subStringLengthStart={12}\n                    subStringLengthEnd={12}\n                    address={account?.balanceManager}\n                    fontSize=\"14px\"\n                    isAddressCancelBubble={false}\n                    hasUnderline={false}\n                    color={currentBalanceManagerInfo?.balanceManager == account?.balanceManager ? 'text_caption' : 'text_paragraph'}\n                    onAddressClick={() => setCurrentBalanceManagerInfo(currentAccount?.address, account)}\n                    onClickLink={() => window.open(getExplorerUrl(account?.balanceManager, 'account'))}\n                  />\n                </HStack>\n              )\n            })}\n          </VStack>\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  )\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\n\nexport type OrderType = 'bid' | 'ask' | 'all'\n\nexport default function useGetDeepBookOrderBook() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { currentDeepBookPool, setDeepBookAskList, setDeepBookBidList, setDeepBookOrderBookLoading, deepBookPrice } = useDeepBookStore()\n\n  // 获取 deepbook pool 格式化结构\n  const getRequestPool = (poolInfo: any) => ({\n    address: poolInfo?.address,\n    baseCoin: {\n      coinType: poolInfo?.baseAssets?.coin_type,\n      decimals: poolInfo?.baseAssets?.decimals\n    },\n    quoteCoin: {\n      coinType: poolInfo?.quoteAssets?.coin_type,\n      decimals: poolInfo?.quoteAssets?.decimals\n    }\n  })\n\n  const enhanceOrders = (list: any[]) =>\n    list.map(item => ({\n      ...item,\n      total: item.price * item.quantity\n    }))\n\n  const getOrderBook = async (orderType: OrderType, tickSize: string, isRefresh: boolean = false, length: number = 9) => {\n    try {\n      if (!currentDeepBookPool?.price) return\n      if (isRefresh) setDeepBookOrderBookLoading(true)\n\n      const pool = getRequestPool(currentDeepBookPool)\n      const unit = tickSize.split('.')[1] ? tickSize.split('.')[1].length : 0\n\n      const priceIntW = currentDeepBookPool?.price?.split('.')?.[0]?.length || 0\n      const priceInt = unit < priceIntW ? priceIntW + 1 : unit\n\n      const res = await deepBookSDK.DeepbookUtils.getOrderBook(pool, orderType, priceInt)\n      console.log('🚀🚀🚀 ~ useGetDeepBookOrderBook.ts:41 ~ getOrderBook ~ res:', res)\n      const askList = enhanceOrders(JSON.parse(JSON.stringify(res.ask)))\n      const bidList = enhanceOrders(JSON.parse(JSON.stringify(res.bid)))\n      if (orderType === 'ask' || orderType === 'all') {\n        setDeepBookAskList(askList)\n      }\n\n      if (orderType === 'bid' || orderType === 'all') {\n        setDeepBookBidList(bidList)\n      }\n      setDeepBookOrderBookLoading(false)\n    } catch (error) {\n      console.error('getOrderBook error:', error)\n    }\n  }\n\n  return { getOrderBook, getRequestPool }\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function useGetDeepBookAssetsPayload() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { getCurrentBalanceManagerInfo } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n  const { getBalanceManagerInfo } = useGetDeepBookManagerBalance()\n  // 存款\n  const getDeepBookAssetsDepositPayload = async (poolInfo: any, quantity: string, isBaseAsset: boolean) => {\n    const pool = getRequestPool(poolInfo)\n    let deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n    if (!deepBookAccount) {\n      const accounts = await getBalanceManagerInfo(currentAccount?.address as string)\n      if (accounts?.length > 0) {\n        deepBookAccount = accounts?.[0]?.balanceManager\n      }\n    }\n    const account = currentAccount?.address as string\n    const coin = isBaseAsset ? pool.baseCoin : pool.quoteCoin\n\n    let tx: any = null\n    if (deepBookAccount) {\n      tx = deepBookSDK.DeepbookUtils.depositIntoManager({\n        account,\n        balanceManager: deepBookAccount,\n        coin,\n        amountToDeposit: quantity\n      })\n    } else {\n      tx = deepBookSDK.DeepbookUtils.createAndDepsit({\n        account,\n        coin,\n        amountToDeposit: quantity\n      })\n    }\n\n    console.log('toDeposit tx:', tx)\n\n    return tx\n  }\n\n  // 提取\n  const getDeepBookAssetsWithdrawPayload = async (poolInfo: any, quantity: string, assetType: 'base' | 'quote') => {\n    const pool = getRequestPool(poolInfo)\n    const deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n    const account = currentAccount?.address as string\n    const coin = assetType === 'base' ? pool.baseCoin : pool.quoteCoin\n\n    const tx = await deepBookSDK.DeepbookUtils.withdrawFromManager({\n      account,\n      balanceManager: deepBookAccount,\n      coin,\n      amountToWithdraw: quantity\n    })\n\n    return tx\n  }\n\n  return {\n    getDeepBookAssetsDepositPayload,\n    getDeepBookAssetsWithdrawPayload\n  }\n}\n","import useGlobalStore from '@/store/common/global'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useAccountBalance } from '@cetus/hooks'\nimport useTransactionModal from '@cetus/hooks/src/useTransactionModal'\nimport { useAccountStore } from '@cetus/stores'\nimport { BalanceChanges, CommonTypeInfo, TransactionStatusType } from '@cetus/types'\nimport { d } from '@cetus/utils'\nimport useTransaction from '../common/useTransaction'\nimport useGetDeepBookAssetsPayload from './useGetDeepBookAssetsPayload'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\n\nexport default function useDeepBookAssetsActions() {\n  const { currentDeepBookPool, setDepositAssetsLoading, setWithdrawAssetsLoading, getCurrentBalanceManagerInfo } = useDeepBookStore()\n  const { getDeepBookAssetsDepositPayload, getDeepBookAssetsWithdrawPayload } = useGetDeepBookAssetsPayload()\n  const { transactionConfirmation } = useTransactionModal()\n  const { signAndExecuteTransaction } = useTransaction()\n  const { mevProtect, maxCapForGas, transactionMode, customGasPrice } = useGlobalStore()\n  const { fetchAccountBalance } = useAccountBalance()\n  const { getManagerBalance } = useGetDeepBookManagerBalance()\n  const { currentAccount } = useAccountStore()\n\n  const deposit = async (amount: string, isBaseAsset: boolean) => {\n    try {\n      setDepositAssetsLoading(true)\n      const tokenInfo = isBaseAsset ? currentDeepBookPool?.baseAssets : currentDeepBookPool?.quoteAssets\n      const quantity = d(amount)\n        .mul(d(Math.pow(10, tokenInfo?.decimals)))\n        .toString()\n\n      let toastInfo = {\n        getShowInfo: (status: TransactionStatusType, balanceChanges?: Record<string, BalanceChanges>) => {\n          const description = `Deposit ${amount} ${tokenInfo?.symbol}`\n          const info: CommonTypeInfo = {\n            modalDescriptionText: description,\n            toastTitleText: description\n          }\n          if (status === 'success') {\n            info.toastDescriptionContent = `Deposit ${amount} ${tokenInfo?.symbol}`\n            info.modalDescriptionText = `Deposit ${amount} ${tokenInfo?.symbol}`\n            info.toastTitleText = `Deposit successful`\n          }\n          return info\n        }\n      }\n      transactionConfirmation(toastInfo)\n      const tx = await getDeepBookAssetsDepositPayload(currentDeepBookPool, quantity, isBaseAsset)\n      const res = await signAndExecuteTransaction(tx, toastInfo, {\n        useMev: mevProtect,\n        useFastMode: transactionMode === 'Fast Mode',\n        maxCapForGas,\n        customGasPrice,\n        msafeParams: {}\n      })\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:135 ~ placeMarketOrder ~ res:', res)\n      if (res) {\n        // 重新拿数据\n        fetchAccountBalance()\n        getManagerBalance(\n          [\n            { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n            { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n          ],\n          currentAccount?.address as string,\n          getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n        )\n      }\n      setTimeout(() => {\n        setDepositAssetsLoading(false)\n      }, 2000)\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useDeepBookAssetsInfo.ts:14 ~ deposit ~ error:', error)\n    }\n  }\n\n  const withdraw = async (amount: string, isBaseAsset: boolean) => {\n    try {\n      setWithdrawAssetsLoading(true)\n      const tokenInfo = isBaseAsset ? currentDeepBookPool?.baseAssets : currentDeepBookPool?.quoteAssets\n      console.log('🚀🚀🚀 ~ useDeepBookAssetsActions.ts:80 ~ deposit ~ tokenInfo:', tokenInfo)\n      const quantity = d(amount)\n        .mul(d(Math.pow(10, tokenInfo?.decimals)))\n        .toString()\n\n      let toastInfo = {\n        getShowInfo: (status: TransactionStatusType, balanceChanges?: Record<string, BalanceChanges>) => {\n          const description = `Withdraw ${amount} ${tokenInfo?.symbol}`\n          const info: CommonTypeInfo = {\n            modalDescriptionText: description,\n            toastTitleText: description\n          }\n          if (status === 'success') {\n            info.toastDescriptionContent = 'Withdraw successful'\n            info.modalDescriptionText = `Withdraw ${amount} ${tokenInfo?.symbol}`\n            info.toastTitleText = `Withdraw ${amount} ${tokenInfo?.symbol}`\n          }\n          return info\n        }\n      }\n      transactionConfirmation(toastInfo)\n      const tx = await getDeepBookAssetsWithdrawPayload(currentDeepBookPool, quantity, isBaseAsset ? 'base' : 'quote')\n      const res = await signAndExecuteTransaction(tx, toastInfo, {\n        useMev: mevProtect,\n        useFastMode: transactionMode === 'Fast Mode',\n        maxCapForGas,\n        customGasPrice,\n        msafeParams: {}\n      })\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:135 ~ placeMarketOrder ~ res:', res)\n      if (res) {\n        // 重新拿数据\n        fetchAccountBalance()\n        getManagerBalance(\n          [\n            { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n            { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n          ],\n          currentAccount?.address as string,\n          getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n        )\n      }\n      setTimeout(() => {\n        setWithdrawAssetsLoading(false)\n      }, 2000)\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useDeepBookAssetsInfo.ts:14 ~ deposit ~ error:', error)\n    }\n  }\n\n  return {\n    deposit,\n    withdraw\n  }\n}\n","import useGetDeepBookManagerBalance from '@/hooks/deepbook/useGetDeepBookManagerBalance'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport { Token } from '@cetus/types'\nimport { Icon, RefreshButton } from '@cetus/ui-kit'\nimport { addressAbridge } from '@cetus/utils'\nimport { Box, HStack, SkeletonCircle, Text, VStack } from '@chakra-ui/react'\nimport { useEffect, useMemo, useState } from 'react'\nimport AssetsInfoModal from './AssetsInfoModal'\nimport ChangeAccountModal from './ChangeAccountModal'\n\nimport useDeepBookAssetsActions from '@/hooks/deepbook/useDeepBookAssetsActions'\nimport useGetDeepBookBalance from '@/hooks/deepbook/useGetDeepBookBalance'\nimport { CetusTooltip } from '@cetus/design'\nimport { useAccountBalance } from '@cetus/hooks'\nimport useDocumentSize from '@cetus/hooks/src/useDocumentSize'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { HTextLabelBox, SingleCoinImage } from '@cetus/ui-kit'\nimport { d, formatNumberWithDown } from '@cetus/utils'\nimport { Button, Skeleton } from '@chakra-ui/react'\n\ninterface TokenAssetItemProps {\n  token: Token\n  onDeposit: (token: Token) => void\n  onWithdraw: (token: Token) => void\n  freeBalance: string\n  balanceInfo: any\n  lockBalance: string\n}\n\nfunction TokenAssetItem({ token, onDeposit, onWithdraw, freeBalance, balanceInfo, lockBalance }: TokenAssetItemProps) {\n  const isLoading = !token?.symbol\n  return (\n    <VStack align=\"flex-start\" w=\"100%\" height=\"160px\" gap=\"12px\" mt=\"12px\">\n      {isLoading ? (\n        <HStack w=\"100%\">\n          <SkeletonCircle />\n          <Skeleton />\n        </HStack>\n      ) : (\n        <HStack w=\"100%\">\n          <SingleCoinImage imageUrl={token?.logo_url} imgBoxStyle={{ w: '24px', h: '24px' }} imageStyle={{ w: '24px', h: '24px' }} />\n          <Text color=\"text_caption\">{token?.symbol}</Text>\n        </HStack>\n      )}\n\n      <HStack w=\"100%\" h=\"20px\" justify=\"space-between\">\n        <HStack gap=\"4px\">\n          <Text>Locked</Text>\n          <CetusTooltip tooltip={<Text fontSize=\"12px\">Locked in Limit Orders</Text>} placement=\"top\">\n            <Icon xlinkHref=\"#icon-icon_tips\" svgW=\"20px\" svgH=\"20px\" />\n          </CetusTooltip>\n        </HStack>\n        {isLoading ? <Skeleton /> : <Text color=\"text_caption\">{lockBalance}</Text>}\n      </HStack>\n\n      <HTextLabelBox\n        isLoading={false}\n        label=\"Free Balance\"\n        value={isLoading ? <Skeleton /> : (freeBalance ?? '0.00')}\n        labelStyle={{ fontSize: '14px', h: '20px', lineHeight: '20px' }}\n        valueStyle={{ fontSize: '14px', h: '20px', lineHeight: '20px' }}\n        skeletonStyle={{ valueW: '96px', valueH: '16px' }}\n      />\n\n      <HTextLabelBox\n        isLoading={false}\n        label=\"Wallet Balance\"\n        value={isLoading ? <Skeleton /> : formatNumberWithDown(balanceInfo?.balanceFormat ?? 0)}\n        labelStyle={{ fontSize: '14px', h: '20px', lineHeight: '20px' }}\n        valueStyle={{ fontSize: '14px', h: '20px', lineHeight: '20px' }}\n        skeletonStyle={{ valueW: '96px', valueH: '16px' }}\n      />\n\n      <HStack w=\"100%\">\n        <Button\n          variant=\"outline\"\n          h=\"28px\"\n          w=\"50%\"\n          borderRadius=\"8px\"\n          isDisabled={d(balanceInfo?.balanceFormat ?? 0).lte(0)}\n          fontSize=\"12px\"\n          onClick={() => onDeposit(token)}\n        >\n          Deposit\n        </Button>\n        <Button\n          variant=\"ghost\"\n          h=\"28px\"\n          w=\"50%\"\n          borderRadius=\"8px\"\n          isDisabled={d(freeBalance ?? 0).lte(0)}\n          fontSize=\"12px\"\n          borderColor=\"transparent !important\"\n          onClick={() => onWithdraw(token)}\n        >\n          Withdraw\n        </Button>\n      </HStack>\n    </VStack>\n  )\n}\n\nfunction AssetsInfo() {\n  const { currentDeepBookPool, currentBalanceManagerInfoMap, deepBookOpenOrders } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n  const [isOpenModal, setIsOpenModal] = useState(false)\n  const [isOpenAccountModal, setIsOpenAccountModal] = useState(false)\n  const [modalTitle, setModalTitle] = useState<'Deposit' | 'Withdraw'>('Deposit')\n  const [tokenInfo, setTokenInfo] = useState<any>()\n  const { getCurrentBalanceManagerInfo, balanceManagerList } = useDeepBookStore()\n\n  // const currentBalanceManagerInfo = useMemo(() => {\n  //   if (currentAccount?.address) {\n  //     return getCurrentBalanceManagerInfo(currentAccount?.address)\n  //   }\n  //   return null\n  // }, [currentAccount?.address, currentBalanceManagerInfoMap])\n\n  const currentBalanceManagerInfo = useDeepBookStore((state: any) => {\n    const address = currentAccount?.address\n    if (!address) return null\n    return state.currentBalanceManagerInfoMap[address] || null\n  })\n  const { getManagerBalance } = useGetDeepBookManagerBalance()\n  const { deposit, withdraw } = useDeepBookAssetsActions()\n\n  useEffect(() => {\n    if (currentBalanceManagerInfo?.balanceManager && currentDeepBookPool?.address && currentAccount?.address) {\n      getManagerBalance(\n        [\n          { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n          { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n        ],\n        currentAccount?.address,\n        currentBalanceManagerInfo?.balanceManager\n      )\n    }\n  }, [currentBalanceManagerInfo, currentAccount?.address, currentDeepBookPool])\n\n  const { baseFreeBalance, quoteFreeBalance, baseBalance, quoteBalance } = useGetDeepBookBalance()\n\n  const lockInfo = useMemo(() => {\n    const result = {\n      baseLock: '0',\n      quoteLock: '0'\n    }\n    if (deepBookOpenOrders?.length > 0) {\n      let baseLock = '0'\n      let quoteLock = '0'\n      deepBookOpenOrders.forEach((item: any) => {\n        if (currentDeepBookPool?.address === item?.address) {\n          if (item?.side == 'Buy') {\n            quoteLock = d(quoteLock)\n              .add(d(item.originalQuantity).sub(d(item.filledQuantity)).mul(item.price))\n              .toString()\n          } else {\n            baseLock = d(baseLock)\n              .add(d(item.originalQuantity).sub(d(item.filledQuantity)))\n              .toString()\n          }\n        }\n      })\n\n      result['baseLock'] = baseLock\n      result['quoteLock'] = quoteLock\n    }\n\n    return result\n  }, [deepBookOpenOrders, currentDeepBookPool])\n\n  const handleDeposit = (token: Token) => {\n    setTokenInfo(token)\n    setModalTitle('Deposit')\n    setIsOpenModal(true)\n  }\n\n  const handleWithdraw = (token: Token) => {\n    setTokenInfo(token)\n    setModalTitle('Withdraw')\n    setIsOpenModal(true)\n  }\n\n  const { fetchAccountBalance } = useAccountBalance()\n\n  const handleRefresh = () => {\n    if (currentDeepBookPool?.address && currentAccount?.address) {\n      getManagerBalance(\n        [\n          { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n          { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n        ],\n        currentAccount?.address,\n        currentBalanceManagerInfo?.balanceManager\n      )\n      fetchAccountBalance()\n    }\n  }\n\n  const { size } = useDocumentSize()\n  const { isApp } = useWindowWidth()\n\n  return (\n    <VStack w=\"100%\" align=\"flex-start\" bg=\"bg_secondary\" borderRadius=\"12px\" h=\"100%\">\n      <Box w=\"100%\" p=\"16px 16px 0\">\n        <HStack w=\"100%\" borderBottom=\"1px solid\" borderColor=\"border\" pb=\"12px\">\n          <HStack w=\"100%\">\n            <Text fontSize=\"16px\" color=\"text_caption\">\n              Asset Info\n            </Text>\n            {isApp && <RefreshButton handleRefresh={handleRefresh} w=\"28px\" h=\"28px\" minW=\"28px\" innerStyle={{ bg: 'none' }} />}\n          </HStack>\n          {balanceManagerList?.length > 1 && (\n            <VStack p=\"6px 8px 8px\" bg=\"primary_opacity.10\" borderRadius=\"8px\" justify=\"center\">\n              <HStack\n                w=\"auto\"\n                gap=\"0px\"\n                cursor=\"pointer\"\n                align=\"flex-end\"\n                onClick={() => setIsOpenAccountModal(true)}\n                _hover={{ svg: { fill: 'text_caption' } }}\n                lineHeight=\"40px\"\n              >\n                <Text lineHeight=\"1\" color=\"primary\">\n                  {addressAbridge(currentBalanceManagerInfo?.balanceManager)}\n                </Text>\n                <Icon xlinkHref=\"#icon-icon_descending_nor\" svgW=\"20px\" svgH=\"20px\" mb=\"-3px\" transform={'rotate(-90deg)'} />\n              </HStack>\n            </VStack>\n          )}\n        </HStack>\n      </Box>\n      <VStack\n        w=\"100%\"\n        align=\"flex-start\"\n        p=\"0 16px 16px\"\n        minHeight=\"334px\"\n        h={{ base: '100%', lg: size?.h - 80 - 430 - 8 - 46 - 40 }}\n        overflow=\"auto\"\n        bg=\"bg_secondary\"\n      >\n        <TokenAssetItem\n          token={currentDeepBookPool?.baseAssets}\n          onDeposit={handleDeposit}\n          onWithdraw={handleWithdraw}\n          depositDisabled={d(baseBalance?.balanceFormat ?? 0).lte(0)}\n          withdrawDisabled={d(baseFreeBalance ?? 0).lte(0)}\n          freeBalance={baseFreeBalance}\n          balanceInfo={baseBalance}\n          lockBalance={lockInfo?.baseLock}\n        />\n        <TokenAssetItem\n          token={currentDeepBookPool?.quoteAssets}\n          onDeposit={handleDeposit}\n          onWithdraw={handleWithdraw}\n          depositDisabled={d(quoteBalance?.balanceFormat ?? 0).lte(0)}\n          withdrawDisabled={d(quoteFreeBalance ?? 0).lte(0)}\n          balanceInfo={quoteBalance}\n          freeBalance={quoteFreeBalance}\n          lockBalance={lockInfo?.quoteLock}\n        />\n        {isOpenModal && (\n          <AssetsInfoModal\n            token={tokenInfo}\n            title={modalTitle}\n            isOpen={isOpenModal}\n            isBaseAsset={tokenInfo?.symbol === currentDeepBookPool?.baseAssets?.symbol}\n            onClose={() => setIsOpenModal(false)}\n            onConfirm={inputValue => {\n              if (modalTitle === 'Deposit') {\n                deposit(inputValue, tokenInfo?.symbol === currentDeepBookPool?.baseAssets?.symbol).then(() => {\n                  setIsOpenModal(false)\n                })\n              } else {\n                withdraw(inputValue, tokenInfo?.symbol === currentDeepBookPool?.baseAssets?.symbol).then(() => {\n                  setIsOpenModal(false)\n                })\n              }\n            }}\n          />\n        )}\n        {isOpenAccountModal && <ChangeAccountModal isOpen={isOpenAccountModal} onClose={() => setIsOpenAccountModal(false)} />}\n      </VStack>\n    </VStack>\n  )\n}\n\nexport default AssetsInfo\n","// hooks/useWebSocket.ts\nimport { useCallback, useEffect, useRef, useState } from 'react'\n\ntype WebSocketMessage = {\n  op?: string\n  source?: string\n  category?: string\n  sub_addrs?: string[]\n  data?: any\n  [key: string]: any // 允许其他字段\n}\n\ntype MessageHandler<T = any> = (data: T) => void\n\ntype PendingSubscription = {\n  op: string\n  source?: string\n  category?: string\n  sub_addrs?: string[]\n  data?: any\n}\n\n// 订阅配置类型\ntype SubscriptionConfig = {\n  // 按消息类型订阅（如 'pool-price', 'subscribe' 等）\n  messageType?: string\n  // 按消息来源订阅（如 'deepbookv3'）\n  source?: string\n  // 按消息分类订阅（如 'pool-price'）\n  category?: string\n  // 按池地址订阅\n  poolAddresses?: string[]\n  // 自定义消息匹配函数\n  matcher?: (message: WebSocketMessage) => boolean\n}\n\ninterface UseWebSocketOptions {\n  /** WebSocket 服务器 URL */\n  url?: string\n  /** 是否自动连接 (默认为 false) */\n  autoConnect?: boolean\n  /** 离开标签页后延迟断开连接的时间（毫秒），默认 5000 */\n  visibilityDisconnectDelay?: number\n  /** 重连间隔时间（毫秒），默认 5000 */\n  reconnectInterval?: number\n  /** 最大重连次数，默认 5 */\n  maxReconnectAttempts?: number\n  /** 心跳间隔时间（毫秒），默认 30000 */\n  heartbeatInterval?: number\n}\n\ntype WebSocketState = 'connecting' | 'connected' | 'disconnecting' | 'disconnected' | 'error'\n\n// 共享的全局状态\nlet globalWebSocket: WebSocket | null = null\nlet globalMessageHandlers: Map<string, Set<MessageHandler>> = new Map()\nlet globalState: WebSocketState = 'disconnected'\nlet isManualDisconnect = false\nlet visibilityDisconnectTimer: NodeJS.Timeout | null = null\nlet pendingSubscriptions: PendingSubscription[] = []\nlet activeSubscriptions: Map<string, PendingSubscription> = new Map()\n\n// 心跳检测相关状态\nlet heartbeatTimer: NodeJS.Timeout | null = null\n\n// 订阅状态跟踪 - 用于区分第一次订阅和后续订阅\nlet hasInitialSubscription = false\nlet subscriptionCount = 0\n\n// 重连补偿机制相关状态\nlet lastDisconnectTime = 0\nlet reconnectCompensationCallbacks: Set<(disconnectStartTime: number, disconnectEndTime: number) => void> = new Set()\n\n// 添加重连补偿回调函数\nconst addReconnectCompensationCallback = (callback: (disconnectStartTime: number, disconnectEndTime: number) => void) => {\n  reconnectCompensationCallbacks.add(callback)\n}\n\n// 移除重连补偿回调函数\nconst removeReconnectCompensationCallback = (callback: (disconnectStartTime: number, disconnectEndTime: number) => void) => {\n  reconnectCompensationCallbacks.delete(callback)\n}\n\n// 执行重连补偿\nconst executeReconnectCompensation = () => {\n  const now = Date.now()\n  const disconnectDuration = now - lastDisconnectTime\n\n  // 如果断开时间超过5秒，需要补偿数据\n  if (disconnectDuration > 5000) {\n    console.log(`WebSocket reconnected after ${disconnectDuration}ms, executing compensation...`)\n    console.log(`Compensation time range: ${new Date(lastDisconnectTime).toISOString()} to ${new Date(now).toISOString()}`)\n\n    // 传递精确的断开时间范围给补偿回调\n    reconnectCompensationCallbacks.forEach(callback => {\n      try {\n        callback(lastDisconnectTime, now)\n      } catch (error) {\n        console.error('Error executing reconnection compensation callback:', error)\n      }\n    })\n  }\n}\n\n/**\n * Deepbook WebSocket Hook\n *\n * 使用示例:\n *\n * ```tsx\n * const {\n *   state,\n *   isConnected,\n *   connect,\n *   disconnect,\n *   subscribe,\n *   send,\n *   subscribePoolPrice,\n *   ping,\n *   getSubscriptionStats\n * } = useDeepbookWebSocket({\n *   autoConnect: true,\n *   maxReconnectAttempts: 5\n * })\n *\n * // 订阅池价格\n * const handleSubscribe = () => {\n *   subscribePoolPrice([\n *     \"0xb663828d6217467c8a1838a03793da896cbe745b150ebd57d82f814ca579fc22\",\n *     \"0xf948981b806057580f91622417534f491da5f61aeaf33d0ed8e69fd5691c95ce\"\n *   ])\n * }\n *\n * // 订阅特定消息类型\n * useEffect(() => {\n *   const unsubscribe = subscribe('pool-price', (message) => {\n *     console.log('Received pool price update:', message)\n *   })\n *\n *   return unsubscribe\n * }, [subscribe])\n *\n * // 查看订阅统计信息\n * const stats = getSubscriptionStats()\n * console.log('Subscription stats:', stats)\n * ```\n *\n * 订阅逻辑说明：\n * - 第一次订阅时，op 字段自动设置为 'subscribe'\n * - 后续订阅时，op 字段自动设置为 'change_sub'\n * - 连接断开后重新连接时，订阅状态会重置\n */\nconst useDeepbookWebSocket = <T = any>(options?: UseWebSocketOptions) => {\n  const [state, setState] = useState<WebSocketState>(globalState)\n  const [reconnectCount, setReconnectCount] = useState(0)\n  const messageHandlersRef = useRef<Map<string, Set<MessageHandler>>>(new Map())\n  const optionsRef = useRef(options)\n  optionsRef.current = options\n  const reconnectAttemptsRef = useRef(0)\n  const isHiddenTime = useRef(0) // 标签不可见的开始时间\n\n  // 更新全局状态\n  const updateGlobalState = useCallback((newState: WebSocketState) => {\n    globalState = newState\n    setState(newState)\n  }, [])\n\n  // 获取正确的订阅操作类型\n  const getSubscriptionOp = useCallback(() => {\n    if (!hasInitialSubscription) {\n      hasInitialSubscription = true\n      subscriptionCount = 1\n      return 'subscribe'\n    } else {\n      subscriptionCount++\n      return 'change_sub'\n    }\n  }, [])\n\n  // 重置订阅状态（当连接断开时）\n  const resetSubscriptionState = useCallback(() => {\n    hasInitialSubscription = false\n    subscriptionCount = 0\n  }, [])\n\n  // 发送心跳\n  const sendHeartbeat = useCallback(() => {\n    if (globalWebSocket && globalWebSocket.readyState === WebSocket.OPEN) {\n      try {\n        const pingMsg = {\n          op: 'ping'\n        }\n        globalWebSocket.send(JSON.stringify(pingMsg))\n        console.log('Sent ping message')\n      } catch (error) {\n        console.error('Failed to send heartbeat:', error)\n      }\n    }\n  }, [])\n\n  // 启动心跳检测\n  const startHeartbeat = useCallback(() => {\n    if (heartbeatTimer) {\n      clearInterval(heartbeatTimer)\n    }\n\n    const interval = optionsRef.current?.heartbeatInterval || 30000\n    heartbeatTimer = setInterval(() => {\n      sendHeartbeat()\n    }, interval)\n  }, [sendHeartbeat])\n\n  // 停止心跳检测\n  const stopHeartbeat = useCallback(() => {\n    if (heartbeatTimer) {\n      clearInterval(heartbeatTimer)\n      heartbeatTimer = null\n    }\n  }, [])\n\n  // 检查消息是否匹配订阅条件\n  const isMessageMatch = useCallback((message: WebSocketMessage, config: SubscriptionConfig): boolean => {\n    // 如果提供了自定义匹配函数，优先使用\n    if (config.matcher) {\n      return config.matcher(message)\n    }\n\n    // 按消息类型匹配\n    if (config.messageType && message.op === config.messageType) {\n      return true\n    }\n\n    // 按来源匹配\n    if (config.source && message.source === config.source) {\n      return true\n    }\n\n    // 按分类匹配\n    if (config.category && message.category === config.category) {\n      return true\n    }\n\n    // 按池地址匹配\n    if (config.poolAddresses && config.poolAddresses.length > 0) {\n      if (message.sub_addrs && message.sub_addrs.some(addr => config.poolAddresses!.includes(addr))) {\n        return true\n      }\n      // 也检查data中的tokenId或poolId\n      if (message.data?.tokenId && config.poolAddresses.includes(message.data.tokenId)) {\n        return true\n      }\n      if (message.data?.poolId && config.poolAddresses.includes(message.data.poolId)) {\n        return true\n      }\n    }\n\n    return false\n  }, [])\n\n  // 处理消息\n  const handleMessage = useCallback((event: MessageEvent) => {\n    try {\n      const message: WebSocketMessage = JSON.parse(event.data)\n      console.log('Received message:', message)\n\n      // 通知全局订阅者 - 按消息类型\n      if (message.op) {\n        const globalHandlers = globalMessageHandlers.get(message.op)\n        if (globalHandlers) {\n          globalHandlers.forEach(handler => handler(message))\n        }\n\n        // 通知当前组件的订阅者\n        const componentHandlers = messageHandlersRef.current.get(message.op)\n        if (componentHandlers) {\n          componentHandlers.forEach(handler => handler(message))\n        }\n      }\n\n      // 通知全局订阅者 - 按消息分类（如 'pool-price'）\n      if (message.category) {\n        const globalHandlers = globalMessageHandlers.get(message.category)\n        if (globalHandlers) {\n          globalHandlers.forEach(handler => handler(message))\n        }\n\n        // 通知当前组件的订阅者\n        const componentHandlers = messageHandlersRef.current.get(message.category)\n        if (componentHandlers) {\n          componentHandlers.forEach(handler => handler(message))\n        }\n      }\n\n      // 通知全局订阅者 - 按来源\n      if (message.source) {\n        const globalHandlers = globalMessageHandlers.get(message.source)\n        if (globalHandlers) {\n          globalHandlers.forEach(handler => handler(message))\n        }\n\n        // 通知当前组件的订阅者\n        const componentHandlers = messageHandlersRef.current.get(message.source)\n        if (componentHandlers) {\n          componentHandlers.forEach(handler => handler(message))\n        }\n      }\n    } catch (error) {\n      console.error('Error parsing WebSocket message:', error)\n    }\n  }, [])\n\n  // 实际发送消息的内部函数\n  const internalSend = useCallback((message: PendingSubscription) => {\n    if (globalWebSocket && globalWebSocket.readyState === WebSocket.OPEN) {\n      globalWebSocket.send(JSON.stringify(message))\n      return true\n    }\n    return false\n  }, [])\n\n  // 连接 WebSocket\n  const connect = useCallback(() => {\n    // 重置手动断开标记\n    isManualDisconnect = false\n\n    console.log('deepbook websocket  connect')\n\n    if (globalWebSocket) {\n      if (globalWebSocket.readyState === WebSocket.OPEN) {\n        updateGlobalState('connected')\n        startHeartbeat()\n        return\n      }\n      if (globalWebSocket.readyState === WebSocket.CONNECTING) {\n        updateGlobalState('connecting')\n        return\n      }\n    }\n\n    const url = optionsRef.current?.url || 'wss://stream.cetus.zone/ws'\n    updateGlobalState('connecting')\n\n    try {\n      globalWebSocket = new WebSocket(url)\n\n      globalWebSocket.onopen = () => {\n        reconnectAttemptsRef.current = 0\n        updateGlobalState('connected')\n        setReconnectCount(0)\n        console.log('WebSocket connected')\n\n        // 启动心跳检测\n        startHeartbeat()\n\n        // 重新连接后重新发送所有活跃的订阅\n        activeSubscriptions.forEach(subscription => {\n          internalSend(subscription)\n        })\n\n        // 执行重连补偿机制\n        executeReconnectCompensation()\n      }\n\n      globalWebSocket.onmessage = handleMessage\n\n      globalWebSocket.onclose = () => {\n        updateGlobalState('disconnected')\n        console.log('WebSocket disconnected')\n\n        // 停止心跳检测\n        stopHeartbeat()\n\n        // 重置订阅状态\n        resetSubscriptionState()\n\n        // 记录断开时间\n        lastDisconnectTime = Date.now()\n\n        // 只有非手动断开且标签页可见时才重连\n        if (!isManualDisconnect && document.visibilityState === 'visible') {\n          const maxAttempts = optionsRef.current?.maxReconnectAttempts || 5\n          const shouldReconnect = reconnectAttemptsRef.current < maxAttempts\n\n          if (shouldReconnect) {\n            const interval = optionsRef.current?.reconnectInterval || 5000\n            setTimeout(() => {\n              reconnectAttemptsRef.current += 1\n              setReconnectCount(prev => prev + 1)\n              connect()\n            }, interval)\n          }\n        }\n      }\n\n      globalWebSocket.onerror = error => {\n        updateGlobalState('error')\n        console.error('WebSocket error:', error)\n      }\n    } catch (error) {\n      console.error('Dial error:', error)\n      // 连接失败时重试\n      const maxAttempts = optionsRef.current?.maxReconnectAttempts || 5\n      if (reconnectAttemptsRef.current < maxAttempts) {\n        setTimeout(() => {\n          reconnectAttemptsRef.current += 1\n          connect()\n        }, optionsRef.current?.reconnectInterval || 5000)\n      }\n    }\n  }, [handleMessage, internalSend, updateGlobalState, startHeartbeat, stopHeartbeat, resetSubscriptionState])\n\n  // 断开 WebSocket 连接\n  const disconnect = useCallback(() => {\n    // 标记为手动断开\n    isManualDisconnect = true\n\n    // 停止心跳检测\n    stopHeartbeat()\n\n    if (globalWebSocket) {\n      updateGlobalState('disconnecting')\n      globalWebSocket.close()\n      globalWebSocket = null\n      updateGlobalState('disconnected')\n    }\n  }, [updateGlobalState, stopHeartbeat])\n\n  // 处理标签页可见性变化\n  const handleVisibilityChange = useCallback(() => {\n    const disconnectDelay = optionsRef.current?.visibilityDisconnectDelay || 60000\n\n    if (document.visibilityState === 'hidden') {\n      isHiddenTime.current = new Date().getTime()\n      // 标签页变为不可见，延迟断开连接\n      if (visibilityDisconnectTimer) {\n        clearTimeout(visibilityDisconnectTimer)\n      }\n\n      visibilityDisconnectTimer = setTimeout(() => {\n        if (globalWebSocket && globalWebSocket.readyState === WebSocket.OPEN) {\n          disconnect()\n        }\n      }, disconnectDelay)\n    } else {\n      // 标签页变为可见，取消延迟断开并尝试重新连接\n      if (visibilityDisconnectTimer) {\n        clearTimeout(visibilityDisconnectTimer)\n        visibilityDisconnectTimer = null\n\n        console.log('')\n      }\n\n      const gap = new Date().getTime() - isHiddenTime.current\n      if (gap > 300000) {\n        // 超过五分钟重新加载页面\n        window.location.reload()\n        return\n      }\n\n      if (!globalWebSocket || globalWebSocket.readyState === WebSocket.CLOSED) {\n        connect()\n      }\n    }\n  }, [connect, disconnect])\n\n  // 订阅消息 - 支持多种订阅方式\n  const subscribe = useCallback(<T = any>(messageType: string, handler: MessageHandler<T>, config?: SubscriptionConfig) => {\n    // 添加到全局订阅\n    if (!globalMessageHandlers.has(messageType)) {\n      globalMessageHandlers.set(messageType, new Set())\n    }\n    globalMessageHandlers.get(messageType)?.add(handler)\n\n    // 添加到当前组件订阅\n    if (!messageHandlersRef.current.has(messageType)) {\n      messageHandlersRef.current.set(messageType, new Set())\n    }\n    messageHandlersRef.current.get(messageType)?.add(handler)\n\n    // 返回取消订阅函数\n    return () => {\n      globalMessageHandlers.get(messageType)?.delete(handler)\n      messageHandlersRef.current.get(messageType)?.delete(handler)\n    }\n  }, [])\n\n  // 发送消息\n  const send = useCallback(\n    (message: PendingSubscription, { isSubscription = false }: { isSubscription?: boolean } = {}) => {\n      // 如果是订阅消息，自动设置正确的操作类型\n      if (isSubscription && message.op === 'subscribe') {\n        message.op = getSubscriptionOp()\n        console.log(`Subscription operation: ${message.op} (count: ${subscriptionCount})`)\n      }\n\n      const success = internalSend(message)\n\n      // 如果是订阅消息且发送成功，保存到活跃订阅\n      if (isSubscription && success) {\n        const key = `${message.op}_${message.source}_${message.category}`\n        activeSubscriptions.set(key, message)\n      }\n\n      return success\n    },\n    [internalSend, getSubscriptionOp]\n  )\n\n  // 取消订阅\n  const unsubscribe = useCallback(\n    (message: PendingSubscription) => {\n      const key = `${message.op}_${message.source}_${message.category}`\n      // 从活跃订阅中移除\n      activeSubscriptions.delete(key)\n\n      // 发送取消订阅消息（如果需要）\n      const unsubscribeMsg = {\n        op: 'unsubscribe',\n        source: message.source,\n        category: message.category,\n        sub_addrs: message.sub_addrs\n      }\n      internalSend(unsubscribeMsg)\n    },\n    [internalSend]\n  )\n\n  // 订阅 Deepbook 池价格\n  const subscribePoolPrice = useCallback(\n    (poolAddresses: string[]) => {\n      const subscribeMsg: PendingSubscription = {\n        op: 'subscribe', // 这里会自动转换为正确的操作类型\n        source: 'deepbookv3',\n        category: 'pool-price',\n        sub_addrs: poolAddresses\n      }\n\n      return send(subscribeMsg, { isSubscription: true })\n    },\n    [send]\n  )\n\n  // 获取当前订阅统计信息\n  const getSubscriptionStats = useCallback(() => {\n    return {\n      hasInitialSubscription,\n      subscriptionCount,\n      activeSubscriptionsCount: activeSubscriptions.size\n    }\n  }, [])\n\n  // 手动发送心跳\n  const ping = useCallback(() => {\n    sendHeartbeat()\n  }, [sendHeartbeat])\n\n  // 初始化\n  useEffect(() => {\n    // 同步初始状态\n    setState(globalState)\n\n    // 如果设置了自动连接且当前未连接\n    if (optionsRef.current?.autoConnect && globalState === 'disconnected') {\n      connect()\n    }\n\n    // 添加 visibilitychange 事件监听\n    document.addEventListener('visibilitychange', handleVisibilityChange)\n\n    // 清理函数\n    return () => {\n      // 清理当前组件的订阅\n      messageHandlersRef.current.clear()\n\n      // 移除事件监听\n      document.removeEventListener('visibilitychange', handleVisibilityChange)\n\n      // 清除可能的延迟断开计时器\n      if (visibilityDisconnectTimer) {\n        clearTimeout(visibilityDisconnectTimer)\n      }\n    }\n  }, [connect, handleVisibilityChange])\n\n  return {\n    state,\n    isConnected: state === 'connected',\n    reconnectCount,\n    connect,\n    disconnect,\n    subscribe,\n    send,\n    unsubscribe,\n    getSocket: () => globalWebSocket,\n    // 心跳检测相关方法\n    ping,\n    subscribePoolPrice,\n    getSubscriptionStats, // 添加新的方法\n    // 重连补偿机制相关方法\n    addReconnectCompensation: addReconnectCompensationCallback,\n    removeReconnectCompensation: removeReconnectCompensationCallback,\n    getConnectionHealth: () => ({\n      state: globalState,\n      isConnected: globalState === 'connected',\n      isConnecting: globalState === 'connecting',\n      isDisconnected: globalState === 'disconnected',\n      isError: globalState === 'error',\n      isDisconnecting: globalState === 'disconnecting'\n    })\n  }\n}\n\nexport default useDeepbookWebSocket\n","import envConfigs from '@cetus/types/src/config/envConfigs'\nimport { d, sleepTime } from '@cetus/utils'\nimport { useEffect, useRef } from 'react'\nimport { v4 } from 'uuid'\nimport useDeepbookWebSocket from './useDeepbookWebsocket'\n\nconst dateType: any = {\n  '1': '1min',\n  '10': '10min',\n  '15': '15min',\n  '30': '30min',\n  '60': 'hour',\n  '240': '4hour',\n  '1D': 'day',\n  '1W': 'week'\n}\n\nexport interface Bar {\n  time: number // 时间戳 (秒级)\n  open: number\n  high: number\n  low: number\n  close: number\n  volume: number\n}\n\n// 定义一个全局变量来存储当前的最新请求 ID\nlet latestRequestId: string | null = null\n\nexport default function useGetDeepbookKlineData() {\n  // const { setCoinBvPrice } = useProStore()\n  const currentPoolId = useRef<any>()\n  const currentResolution = useRef<string>()\n  const currentCallback = useRef<any>()\n  const unsubscribeRef = useRef<() => void>()\n  const { subscribe, send, disconnect, addReconnectCompensation, removeReconnectCompensation } = useDeepbookWebSocket({\n    autoConnect: true,\n    maxReconnectAttempts: 5\n  })\n\n  // 重连补偿机制 - 获取缺失的K线数据\n  const compensationCallback = useRef<(disconnectStartTime: number, disconnectEndTime: number) => void>()\n\n  // 初始化重连补偿回调\n  useEffect(() => {\n    compensationCallback.current = async (disconnectStartTime: number, disconnectEndTime: number) => {\n      if (currentPoolId.current && currentResolution.current && currentCallback.current) {\n        console.log('🔄 Executing reconnection compensation for K-line data...')\n        console.log(`🔄 Compensation time range: ${new Date(disconnectStartTime).toISOString()} to ${new Date(disconnectEndTime).toISOString()}`)\n\n        try {\n          // 计算需要补偿的时间范围（精确的断开时间段）\n          const startTimestamp = Math.floor(disconnectStartTime / 1000)\n          const endTimestamp = Math.floor(disconnectEndTime / 1000)\n\n          console.log(`🔄 Compensation timestamps: ${startTimestamp} to ${endTimestamp}`)\n\n          // 通过API获取补偿数据\n          const type = dateType[currentResolution.current as keyof typeof dateType]\n          const apiUrl = `${envConfigs?.cetus_api}/v3/sui/deepbookv3/prices?date_type=${type}&start_timestamp=${startTimestamp}&end_timestamp=${endTimestamp}&address=${currentPoolId.current}`\n\n          console.log('🔄 Compensation API URL:', apiUrl)\n\n          const response = await fetch(apiUrl)\n          const data = await response.json()\n\n          if (data?.code === 0 && data?.data?.lists && Array.isArray(data.data.lists)) {\n            const compensationData = data.data.lists.map((item: any) => ({\n              time: d(item.timestamp).mul(1000).toNumber(),\n              high: Number(item.high),\n              low: Number(item.low),\n              open: Number(item.open),\n              close: Number(item.settle)\n            }))\n\n            console.log(`🔄 Compensation successful: got ${compensationData.length} data points`)\n\n            // 按时间排序，确保数据顺序正确\n            compensationData.sort((a: Bar, b: Bar) => a.time - b.time)\n\n            // 调用回调函数处理补偿数据\n            compensationData.forEach((item: Bar) => {\n              currentCallback.current(item)\n            })\n          } else {\n            console.warn('🔄 Compensation API returned no data or error')\n          }\n        } catch (error) {\n          console.error('🔄 Compensation failed:', error)\n        }\n      }\n    }\n\n    // 注册重连补偿回调\n    addReconnectCompensation(compensationCallback.current)\n\n    // 清理函数\n    return () => {\n      if (compensationCallback.current) {\n        removeReconnectCompensation(compensationCallback.current)\n      }\n    }\n  }, [addReconnectCompensation, removeReconnectCompensation])\n\n  // 获取历史数据\n  const getDeepbookHistoricalData = async ({\n    poolId,\n    resolution,\n    from,\n    to,\n    firstDataRequest,\n    callback,\n    onErrorCallback\n  }: {\n    poolId: string\n    resolution: string\n    from: number\n    to: number\n    callback: any\n    onErrorCallback: any\n    firstDataRequest?: boolean\n  }) => {\n    // 对接ws后打开\n    // if (currentPoolId.current && currentPoolId.current !== poolId) {\n    //   send('UNSUBSCRIBE_OHLCV')\n    // }\n    currentPoolId.current = poolId\n\n    // 生成当前请求的唯一标识\n    const requestId = v4()\n    latestRequestId = requestId // 更新全局变量，表明这是最新的请求\n\n    const type = dateType[resolution as keyof typeof dateType]\n\n    const apiUrl = `${envConfigs?.cetus_api}/v3/sui/deepbookv3/prices?date_type=${type}&start_timestamp=${from}&end_timestamp=${to}&address=${poolId}`\n\n    // 内部请求函数\n    const fetchData = async (): Promise<Bar[] | null> => {\n      try {\n        // const response = await fetch(apiUrl, {\n        //   method: 'GET',\n        //   headers: {\n        //     accept: 'application/json'\n        //   }\n        // })\n        const response = await fetch(apiUrl)\n        const data = await response.json()\n\n        if (data?.code === 500) {\n          throw new Error('Server Error: 500')\n        }\n\n        if (data?.code === 0 && data?.data?.length === 0) {\n          return null\n        }\n\n        const list = data?.data?.lists || []\n        const result = list?.map((item: any) => ({\n          time: d(item.timestamp).mul(1000).toNumber(), // 转换为毫秒级时间戳\n          high: Number(item.high),\n          low: Number(item.low),\n          open: Number(item.open),\n          close: Number(item.settle)\n          // volume: item.volume\n        }))\n\n        return result || []\n      } catch (error) {\n        console.error('getDeepbookHistoricalData 🚀 ~ fetchData Error:', error)\n\n        // 检查当前请求是否是最新请求\n        if (latestRequestId !== requestId) {\n          console.log('🚀 ~ Request aborted due to poolId change.')\n          return [] // 如果不是最新请求，直接返回空数组\n        }\n\n        console.log('Retrying in 5 seconds...')\n        await sleepTime(5000) // 等待 5 秒后重试\n\n        if (latestRequestId !== requestId) {\n          console.log('🚀 ~ Request aborted due to poolId change.')\n          return [] // 如果不是最新请求，直接返回空数组\n        }\n\n        return await fetchData() // 递归调用\n      }\n    }\n\n    const list = await fetchData() // 开始请求数据\n    if (list) {\n      callback(list, { noData: false })\n    } else {\n      callback([], { noData: true })\n    }\n  }\n\n  // 订阅交易数据\n  const subscribeKlineData = ({ poolId, resolution, callback }: { poolId: string; resolution: string; callback: any }) => {\n    console.log(`🚀 ~ subscribeKlineData ~ { poolId, resolution, callback }:`, { poolId, resolution, callback })\n\n    if (!resolution || !dateType?.[resolution] || !poolId) return () => {}\n\n    // 保存当前订阅信息，供补偿机制使用\n    currentPoolId.current = poolId\n    currentResolution.current = resolution\n    currentCallback.current = callback\n\n    const op = unsubscribeRef.current ? 'change_sub' : 'subscribe'\n    // 先取消之前的订阅\n    if (unsubscribeRef.current) {\n      unsubscribeRef.current()\n    }\n\n    // 设置新的订阅 - 订阅 'pool-price' 类型的消息\n    unsubscribeRef.current = subscribe('pool-price', (data: any) => {\n      console.log('Received pool-price message:', data)\n\n      // 检查消息是否包含相关数据\n      if (!data?.body || data?.op !== 'data') {\n        console.log('Message does not contain valid list data')\n        return\n      }\n\n      const value = data?.body\n      if (!value) {\n        console.log('No valid data in list')\n        return\n      }\n\n      // 检查池ID是否匹配\n      // if (fixCoinType(poolId) !== data?.sub_addr) {\n      if (!data?.sub_addr?.includes(poolId)) {\n        console.log('Pool ID mismatch:', { poolId, messageTokenId: data?.sub_addr })\n        return\n      }\n\n      const result = {\n        time: d(value.timestamp).mul(1000).toNumber(), // 转换为毫秒级时间戳\n        high: Number(value.high),\n        low: Number(value.low),\n        open: Number(value.open),\n        close: Number(value.settle)\n        // volume: value.volume\n      }\n\n      callback(result)\n    })\n\n    // 发送订阅消息到WebSocket服务器\n    const subscribeMsg = {\n      op,\n      source: 'deepbookv3',\n      category: 'pool-price',\n      sub_addr: poolId,\n      data_types: [dateType[resolution]]\n    }\n\n    const success = send(subscribeMsg, { isSubscription: true })\n    if (success) {\n      console.log('Successfully sent subscription message for pool:', poolId)\n    } else {\n      console.error('Failed to send subscription message for pool:', poolId)\n    }\n\n    // 返回取消订阅函数\n    return () => {\n      if (unsubscribeRef.current) {\n        unsubscribeRef.current()\n        unsubscribeRef.current = undefined\n      }\n      // 清除当前订阅信息\n      currentPoolId.current = undefined\n      currentResolution.current = undefined\n      currentCallback.current = undefined\n    }\n  }\n\n  const getLatestKlineData = async ({\n    poolId,\n    resolution,\n    from,\n    to,\n    firstDataRequest,\n    callback,\n    onErrorCallback\n  }: {\n    poolId: string\n    resolution: string\n    from: number\n    to: number\n    callback: any\n    onErrorCallback: any\n    firstDataRequest?: boolean\n  }) => {\n    try {\n      const type = dateType[resolution as keyof typeof dateType]\n      // 替换为你的 API 地址\n      const apiUrl = `${envConfigs?.cetus_api}/v3/sui/deepbookv3/prices?date_type=${type}&start_timestamp=${from}&end_timestamp=${to}&address=${poolId}`\n      const response = await fetch(apiUrl, {\n        method: 'GET',\n        headers: {\n          accept: 'application/json'\n          // 'x-api-key': '2uZYBhmZMcACCbGxbFLbf5R6QCb'\n        }\n      })\n      const data = await response.json()\n\n      const value = data?.data?.lists?.[data?.data?.lists?.length - 1]\n      if (!value) return []\n      const result = {\n        time: d(value.timestamp).mul(1000).toNumber(), // 转换为毫秒级时间戳\n        high: Number(value.high),\n        low: Number(value.low),\n        open: Number(value.open),\n        close: Number(value.settle)\n      }\n\n      return [result]\n    } catch (error) {\n      console.log('🚀 ~ getLatestKlineData ~ error:', error)\n      return []\n    }\n  }\n\n  return {\n    getDeepbookHistoricalData,\n    subscribeKlineData,\n    getLatestKlineData,\n    disconnectDeepbookWs: disconnect\n  }\n}\n","// src/services/datafeed.ts\n\n// import { Bar, getHistoricalData, getLatestKlineData } from './api'\nimport { Bar } from './api'\n\n// toDo: 具体根据后端接口参数调整映射\nconst dateType: any = {\n  '1': '1m',\n  '10': '10m',\n  '15': '15m',\n  '30': '30m',\n  '60': '1h',\n  '240': '4h',\n  '1D': '1d',\n  '1W': '1w'\n  // '1M': '1M'\n}\n\nconst secondObj: any = {\n  '1': 60,\n  '10': 60 * 10,\n  '15': 60 * 15,\n  '30': 60 * 30,\n  '60': 60 * 60,\n  '240': 240 * 60,\n  '1D': 24 * 60 * 60,\n  '1W': 7 * 24 * 60 * 60\n}\nexport class DataFeed {\n  private poolId: string\n  private resolution: string\n  onChangePrice: (data: { poolId: string; price: string }) => void\n\n  getHistoricalData: (params: {\n    poolId: string\n    resolution: string\n    from: number\n    to: number\n    callback: any\n    onErrorCallback: any\n    firstDataRequest?: boolean\n  }) => void\n  subscribeKlineData: (params: { poolId: string; resolution: string; callback: any }) => void\n  // getLatestKlineData: (params: any) => void\n\n  constructor(\n    poolId: string,\n    resolution: string,\n    getHistoricalData: (params: {\n      poolId: string\n      resolution: string\n      from: number\n      to: number\n      callback: any\n      onErrorCallback: any\n      firstDataRequest?: boolean\n    }) => void,\n    subscribeKlineData: (params: { poolId: string; resolution: string; callback: any }) => void,\n    // getLatestKlineData: (params: any) => void,\n    onChangePrice: (data: { poolId: string; price: string }) => void\n  ) {\n    this.poolId = poolId?.split('::')?.[1] || ''\n    this.resolution = resolution\n    this.onChangePrice = onChangePrice\n    this.getHistoricalData = getHistoricalData\n    this.subscribeKlineData = subscribeKlineData\n    // this.getLatestKlineData = getLatestKlineData\n  }\n\n  /**\n   * 初始化配置\n   */\n  onReady(callback: (config: any) => void): void {\n    setTimeout(() => {\n      callback({\n        supported_resolutions: ['1', '10', '15', '30', '60', '240', 'D', 'W'], // 支持的时间周期\n        supports_time: true\n      })\n    }, 0)\n  }\n\n  /**\n   * 解析交易对信息\n   */\n  resolveSymbol(symbolName: string, onSymbolResolvedCallback: (symbolInfo: any) => void, onResolveErrorCallback: (error: string) => void): void {\n    console.log('🚀 ~ DataFeed ~ resolveSymbol ~ symbolName:', symbolName)\n    console.log('🚀 ~ DataFeed ~ resolveSymbol ~ symbolInfo:')\n    const arr = symbolName.split('::')\n    const symbol = arr[0]\n    const unit = Number(arr[2]) || 2\n    console.log('🚀 ~ DataFeed ~ resolveSymbol ~ unit:', unit)\n    // toDo: 可将当前交易对的current price传进来，最好用map结构维护，根据symbolName对应的current pirce 动态调整pricascale\n    setTimeout(() => {\n      onSymbolResolvedCallback({\n        name: symbol,\n        ticker: symbol,\n        type: 'crypto',\n        session: '24x7',\n        timezone: 'Etc/UTC',\n        minmov: 1,\n        format: 'price',\n        pricescale: Math.pow(10, unit), // 价格精度\n        has_intraday: true,\n        has_empty_bars: true,\n        has_daily: true,\n        has_weekly_and_monthly: true,\n        supported_resolutions: ['1', '10', '15', '30', '60', '240', 'D', 'W'],\n        volume_precision: 2\n      })\n    }, 0)\n  }\n\n  /**\n   * 获取历史数据\n   */\n  getBars(\n    symbolInfo: any,\n    resolution: string,\n    periodParams: any,\n    onHistoryCallback: (bars: Bar[], { noData }: { noData: boolean }) => void,\n    onErrorCallback: (error: string) => void\n  ): void {\n    const { from, to, firstDataRequest } = periodParams\n    console.log('🚀 ~ DataFeed getBars ~ resolution111:', resolution, symbolInfo)\n    console.log('🚀 ~ DataFeed getBars ~ periodParams:', periodParams)\n\n    const _poolId = this.poolId\n\n    this.getHistoricalData({\n      poolId: _poolId,\n      resolution: resolution,\n      from,\n      to,\n      callback: onHistoryCallback,\n      onErrorCallback: onErrorCallback,\n      firstDataRequest\n    })\n  }\n\n  /**\n   * 订阅实时数据（轮询）\n   */\n  subscribeBars(\n    symbolInfo: any,\n    resolution: string,\n    onRealtimeCallback: (bar: Bar) => void,\n    subscriberUID: string,\n    onResetCacheNeededCallback: () => void\n  ): void {\n    console.log('subscribeBar 🚀 ~ DataFeed ~ symbolInfo:', symbolInfo)\n    console.log('subscribeBar 🚀 ~ DataFeed ~ this poolId:', this.poolId)\n    // const interval = 5000 // 每 5 秒轮询\n    // const _this = this\n    // const poller = setInterval(async () => {\n    //   const now = new Date().getTime()\n    //   const to = d(now).div(1000).floor().toNumber()\n    //   const step = secondObj[resolution]\n    //   const from = d(to).minus(step).toNumber()\n    //   const type = dateType[resolution]\n\n    //   const bars: any = await _this.getLatestKlineData({\n    //     poolId: _this.poolId,\n    //     resolution,\n    //     from,\n    //     to\n    //   })\n    //   console.log('subscribeBar 🚀 ~ DataFeed ~ poller ~ bars:', bars)\n    //   if (bars.length) {\n    //     try {\n    //       const _poolId = this.poolId\n    //       _this.onChangePrice({\n    //         poolId: _poolId,\n    //         price: String(bars[0]?.close || '')\n    //       })\n    //     } catch (error) {\n    //       console.log('🚀 ~ DataFeed ~ poller ~ error:', error)\n    //     }\n\n    //     onRealtimeCallback(bars[0]) // 推送最新数据\n    //   }\n    // }, interval)\n    // ;(this as any)[subscriberUID] = poller\n\n    // ws对接后用下面的\n    const _poolId = this.poolId\n    this.subscribeKlineData({\n      poolId: _poolId,\n      resolution: resolution,\n      callback: onRealtimeCallback\n    })\n  }\n\n  /**\n   * 取消实时数据订阅\n   */\n  unsubscribeBars(subscriberUID: string): void {\n    clearInterval((this as any)[subscriberUID])\n  }\n}\n","import useGetDeepbookKlineData from '@/hooks/deepbook/useGetDeepbookKline'\nimport { formatUSDPrice } from '@cetus/utils'\nimport { VStack } from '@chakra-ui/react'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport {\n  ChartingLibraryWidgetOptions,\n  IChartingLibraryWidget,\n  ResolutionString,\n  SymbolValueFormatterFormatOptions,\n  widget\n} from '../../../public/charting_library_new'\n\nimport { DataFeed } from './datafeed'\ninterface TradingViewChartProps {\n  poolId: string\n  poolPriceUnit: string\n  onChangePrice: (data: { poolId: string; price: string }) => void\n  onChartReady?: () => void // 可以用来控制loading\n}\n\nconst DeepbookTradingViewChart: React.FC<TradingViewChartProps> = ({ poolId, onChartReady, poolPriceUnit, onChangePrice }) => {\n  const chartContainerRef = useRef<HTMLDivElement | null>(null)\n  const tvWidgetRef = useRef<IChartingLibraryWidget | null>(null)\n  const isMounted = useRef<boolean>(false)\n  const [indicators, setIndicators] = useState<string[]>([])\n  const [, setIsInitialized] = useState(false)\n  const [currentPoolId, setCurrentPoolId] = useState('')\n  const { getDeepbookHistoricalData, getLatestKlineData, subscribeKlineData, disconnectDeepbookWs } = useGetDeepbookKlineData()\n\n  useEffect(() => {\n    console.log('tv chart component Mounted')\n    isMounted.current = true\n\n    return () => {\n      disconnectDeepbookWs()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!chartContainerRef.current || !poolId || !poolPriceUnit || !widget) return\n    console.log('chart poolPriceUnit: ', poolPriceUnit)\n\n    console.log('tv chart init useEffect isMounted.current: ', isMounted.current)\n    setCurrentPoolId(poolId)\n\n    const widgetOptions: ChartingLibraryWidgetOptions = {\n      symbol: `${poolId}::${poolPriceUnit}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone as any,\n      interval: '15' as any, // 默认时间周期（1分钟）\n      container: 'tv_chart_container',\n      // datafeed: new DataFeed(poolId, '1', getDeepbookHistoricalData, getLatestKlineData, onChangePrice) as any, // 使用自定义 DataFeed\n      datafeed: new DataFeed(poolId, '1', getDeepbookHistoricalData, subscribeKlineData, onChangePrice) as any, // 使用自定义 DataFeed\n      library_path: '/charting_library_new/',\n      locale: 'en',\n      autosize: true,\n      theme: 'dark',\n      settings_overrides: {},\n      // 精度设置\n      overrides: {\n        'paneProperties.backgroundGradientStartColor': '#0F0F0F', // 窗格背景渐变开始颜色。\n        'paneProperties.backgroundGradientEndColor': '#0F0F0F', // 窗格背景渐变结束颜色。\n        'paneProperties.background': '#0F0F0F',\n        'paneProperties.backgroundType': 'solid',\n        'Overlay.barStyle.upColor': '#68FFD8',\n        'Overlay.barStyle.downColor': '#FF5073',\n        'mainSeriesProperties.priceLineWidth': 1, // 主价格线宽度\n        'priceScale.precision': 2, // 价格精度\n        'priceScale.minMove': 0.01, // 最小变化单位\n        'mainSeriesProperties.style': 1\n      },\n      custom_css_url: '/css/tv-chart-dart.css',\n      // disabled_features: ['header_symbol_search', 'header_compare', 'header_widget'],\n      disabled_features: [\n        'header_symbol_search',\n        'header_compare',\n        'timeframes_toolbar',\n        'volume_force_overlay',\n        'create_volume_indicator_by_default'\n      ],\n      // enabled_features: ['chart_style_hilo_last_price', 'hide_left_toolbar_by_default', 'header_resolutions'],\n      enabled_features: [\n        'header_widget',\n        'chart_style_hilo_last_price',\n        'hide_left_toolbar_by_default',\n        'hide_resolution_in_legend',\n        'two_character_bar_marks_labels'\n      ],\n      custom_formatters: {\n        priceFormatterFactory: (symbolInfo: any, minTick: any) => {\n          console.log('🚀 ~ priceFormatterFactory ~ symbolInfo:', symbolInfo)\n\n          // if (symbolInfo?.fractional || (minTick !== 'default' && minTick.split(',')[2] === 'true')) {\n          if (symbolInfo) {\n            return {\n              format: (price: number, signPositive?: SymbolValueFormatterFormatOptions): string => {\n                // console.log('🚀 ~ priceFormatterFactory ~ price.toString():', price)\n\n                // if (d(price).gte(100000)) {\n                //   console.log('🚀 ~ useEffect ~ numericAbbreviation(price.toString(), 0):', numericAbbreviation(price.toString(), 0))\n                //   return String(numericAbbreviation(price.toString(), 0, 0))\n                // }\n\n                // const decimals = Math.log10(symbolInfo.pricescale)\n\n                // if (d(price).abs().lt(0.0000001)) {\n                //   return String(formatNumberWithDown(convertScientificToDecimal(price.toString(), decimals), decimals))\n                // }\n\n                // return String(formatNumberWithDown(price.toString(), decimals))\n                return formatUSDPrice(price)\n              }\n            }\n          }\n          return null\n        }\n      },\n      favorites: {\n        intervals: ['60'] as any,\n        indicators: ['Awesome Oscillator', 'Bollinger Bands'],\n        // drawingTools: ['LineToolBrush', 'LineToolCallout', 'LineToolCircle'],\n        chartTypes: ['Candles', 'Line']\n      }\n      // header_widget_buttons_mode: 'fullsize'\n      // studies_overrides: {\n      //   'volume.volume.color.0': '#00FFFF'\n      // }\n      // 设置价格精度\n      // time_frames: [\n      //   { text: '50y', resolution: '6M', description: '50 Years' },\n      //   { text: '3y', resolution: '1W', description: '3 Years', title: '3yr' },\n      //   { text: '8m', resolution: '1D', description: '8 Month' },\n      //   { text: '3d', resolution: '5', description: '3 Days' }\n      //   // { text: '1000y', resolution: '1W', description: 'All', title: 'All' }\n      // ],\n      // enabled_timeframes: ['1m', '1h', '1D', '1W']\n      // header_resolutions: ['1', '60', '240', 'D', 'W']\n\n      // saved_data: {\n      //   'left_toolbar.state': 'hidden' // 初始化为折叠状态\n      // }\n    }\n\n    console.log('🚀 ~ useEffect ~ document.getElementById(tv_chart_container):', document.getElementById('tv_chart_container'))\n    // 初始化图表\n    const tvWidget = new widget(widgetOptions)\n    tvWidgetRef.current = tvWidget\n    console.log('🚀 ~ useEffect ~ tvWidgetRef.current:', tvWidgetRef.current)\n\n    tvWidget.onChartReady(() => {\n      console.log('🚀 ~ useEffect ~ tvWidget.onChartReady:')\n      // const chart = tvWidget.chart()\n      // const studies = chart.getAllStudies()\n      // const volumeStudy = studies.find(s => s.name === 'Volume')\n\n      // const studiesList = tvWidget.getStudiesList()\n      // setIndicators(studiesList)\n\n      // // Remove existing volume study if it exists\n      // if (volumeStudy) {\n      //   chart.removeEntity(volumeStudy.id)\n      // }\n\n      setIsInitialized(true)\n\n      onChartReady?.()\n    })\n\n    // Then remove the TradingView widget\n    return () => {\n      if (tvWidgetRef.current) {\n        try {\n          tvWidgetRef.current.remove()\n        } catch (error) {\n          console.error('Error removing TradingView widget:', error)\n        }\n        tvWidgetRef.current = null\n        setIsInitialized(false)\n      }\n    }\n  }, [poolId, isMounted.current, poolPriceUnit, widget]) // 当 symbol 改变时重新初始化图表\n\n  // useEffect(() => {\n  //   console.log('tvWidgetRef.current###', tvWidgetRef.current)\n  // }, [tvWidgetRef.current])\n\n  // 切换时间周期\n  const handleChangeResolution = (value: ResolutionString) => {\n    if (tvWidgetRef.current) {\n      tvWidgetRef.current.chart().setResolution(value)\n    }\n  }\n\n  // 切换图表类型\n  const handleSetChartType = (chartType: number) => {\n    if (tvWidgetRef.current) {\n      tvWidgetRef.current.activeChart().setChartType(chartType)\n      // setCurrentChartType(chartType);\n    }\n  }\n\n  // 全屏\n  const handleToggleFullScreen = useCallback(() => {\n    if (!tvWidgetRef.current) return\n\n    try {\n      tvWidgetRef.current.startFullscreen()\n    } catch (error) {\n      console.error('Error toggling fullscreen:', error)\n    }\n  }, [])\n\n  // 前进后退\n  const handleUndoRedo = (action: 'undo' | 'redo') => {\n    if (!tvWidgetRef.current) return\n    const chart = tvWidgetRef.current.chart()\n    if (action === 'undo') {\n      chart.executeActionById('undo')\n    } else {\n      chart.executeActionById('redo')\n    }\n  }\n\n  return (\n    <VStack w=\"100%\" h=\"100%\">\n      {/* <ChartHeader onChangeResolution={handleChangeResolution}></ChartHeader> */}\n      <div id=\"tv_chart_container\" ref={chartContainerRef} style={{ width: '100%', height: '100%' }} />\n    </VStack>\n  )\n}\n\nexport default DeepbookTradingViewChart\n","import ChartLoading from '@/components/chart/ChartLoading'\n// import useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport useDeepBookStore from '@/store/deepbook'\nimport { getPriceUnit } from '@cetus/utils'\nimport { Box, VStack } from '@chakra-ui/react'\nimport { useMemo } from 'react'\nimport DeepbookTradingViewChart from '../tradingViewDeepbookChart'\n\nexport default function DeepbookChart({ currentDeepBookPool }: { currentDeepBookPool: any }) {\n  const { setDeepbookPrice } = useDeepBookStore()\n  const handleDeepbookPriceChange = (data: { poolId: string; price: string }) => {\n    if (data?.poolId && data?.price) {\n      setDeepbookPrice({ ...data })\n    }\n  }\n  // const { isApp } = useWindowWidth()\n  const poolId = useMemo(() => {\n    return `${currentDeepBookPool?.baseAssets?.symbol}-${currentDeepBookPool?.quoteAssets?.symbol}::${currentDeepBookPool?.address}` || ''\n  }, [currentDeepBookPool?.address])\n\n  const poolPriceUnit = useMemo(() => {\n    if (currentDeepBookPool?.price) {\n      return String(getPriceUnit(currentDeepBookPool?.price))\n    }\n    return '4'\n  }, [currentDeepBookPool?.address])\n\n  return (\n    <VStack w=\"100%\" h=\"100%\">\n      <Box p=\"0\" overflow=\"hidden\" position=\"relative\" borderRadius=\"12px\" w=\"100%\" h=\"100%\">\n        {!poolId || (poolPriceUnit === undefined && <ChartLoading />)}\n        {poolId && poolPriceUnit !== undefined && (\n          <DeepbookTradingViewChart poolId={poolId} poolPriceUnit={poolPriceUnit} onChangePrice={handleDeepbookPriceChange} />\n        )}\n      </Box>\n    </VStack>\n  )\n}\n","import { Block } from '@cetus/design'\nimport { Icon } from '@cetus/ui-kit'\nimport { HStack, Image, Text } from '@chakra-ui/react'\n\nfunction FooterBlock() {\n  return (\n    <Block minWidth={{ base: '100%', lg: '1160px' }} borderRadius=\"8px\" border=\"none\" minH={{ base: '68px', lg: '40px' }} p=\"0\" gap=\"0\">\n      <HStack\n        h=\"100%\"\n        w=\"100%\"\n        justify=\"center\"\n        gap={{ base: '12px', lg: '40px' }}\n        flexDirection={{ base: 'row', lg: 'row' }}\n        p={{ base: '12px', lg: '0' }}\n        justifyContent={{ base: 'center', lg: 'center' }}\n      >\n        <HStack gap=\"4px\">\n          <Text fontSize=\"12px\">Settlement Venue:</Text>\n          <Image w=\"75px\" h=\"12px\" src=\"/images/deepbook/logo_deepbook@2x.png\" />\n        </HStack>\n        <HStack gap=\"4px\">\n          {/* <Text fontSize=\"12px\">Switch to</Text> */}\n          <HStack\n            _hover={{ textDecoration: 'underline', color: 'text_caption' }}\n            sx={{\n              _hover: {\n                '&>p': {\n                  textDecoration: 'underline',\n                  color: 'text_caption'\n                },\n                '&>div>svg': {\n                  fill: 'text_caption'\n                }\n              }\n            }}\n          >\n            <Text\n              cursor=\"pointer\"\n              onClick={() => {\n                window.open('https://deepbook.cetus.zone/v2', '_blank')\n              }}\n              fontSize=\"12px\"\n            >\n              DeepBook V2\n            </Text>\n            <Icon xlinkHref=\"#icon-icon_link2\" fontSize=\"14px\" />\n          </HStack>\n        </HStack>\n      </HStack>\n    </Block>\n  )\n}\n\nexport default FooterBlock\n","import { OrderType } from '@/hooks/deepbook/useGetDeepBookOrderBook'\nimport { placeholderImg } from '@cetus/ui-kit/src/components/SingleCoinImage'\nimport { HStack, Image } from '@chakra-ui/react'\n\nconst activeStyle = {\n  background: 'rgba(118,200,255,0.1)',\n  border: '1px solid rgba(118,200,255,0.2)'\n}\n\nconst OrderBookTab = ({ orderBookTab, setOrderBookTab }: { orderBookTab: OrderType; setOrderBookTab: (tab: OrderType) => void }) => {\n  const OrderBookTabList = [\n    {\n      key: 'all',\n      image: '/images/deepbook/icon_greenredprice@2x.png'\n    },\n    {\n      key: 'bid',\n      image: '/images/deepbook/icon_greenprice@2x.png'\n    },\n    {\n      key: 'ask',\n      image: '/images/deepbook/icon_redprice@2x.png'\n    }\n  ]\n  return (\n    <>\n      {OrderBookTabList.map(item => (\n        <HStack\n          key={item.key}\n          cursor=\"pointer\"\n          borderRadius=\"4px\"\n          p=\"2px\"\n          border=\"1px solid transparent\"\n          {...(orderBookTab === item.key && activeStyle)}\n          _hover={\n            orderBookTab !== item.key\n              ? {\n                  ...activeStyle,\n                  border: '1px solid transparent'\n                }\n              : {}\n          }\n        >\n          <Image w=\"16px\" h=\"16px\" src={item.image} fallbackSrc={placeholderImg} onClick={() => setOrderBookTab(item.key)} />\n        </HStack>\n      ))}\n    </>\n  )\n}\n\nexport default OrderBookTab\n","import useDeepBookStore from '@/store/deepbook'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { Icon } from '@cetus/ui-kit'\nimport { d, formatNumber, formatNumberWithKMB } from '@cetus/utils'\nimport { Box, HStack, Skeleton, Text, VStack } from '@chakra-ui/react'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\n\nconst OrderBookTable = ({ orderBookTab, tickSize, visibleRows }: { orderBookTab: string; tickSize: string; visibleRows: number }) => {\n  const { deepBookAskList, deepBookBidList, deepBookOrderBookLoading, currentDeepBookPool, setPlaceOrderPrice, orderType, deepbookPrice } =\n    useDeepBookStore()\n  const [changedOrders, setChangedOrders] = useState<Set<string>>(new Set())\n  const { isApp } = useWindowWidth()\n\n  // 使用 useRef 来跟踪上一次的数据，避免重复检测\n  const prevDataRef = useRef<{ asks: any[]; bids: any[] }>({ asks: [], bids: [] })\n  const isFirstRenderRef = useRef(true)\n\n  // 直接使用真实数据\n  const orderBookData = useMemo(\n    () => ({\n      asks: deepBookAskList.sort((a, b) => parseFloat(b.price) - parseFloat(a.price)).reverse() || [],\n      bids: deepBookBidList.sort((a, b) => parseFloat(b.price) - parseFloat(a.price)) || []\n    }),\n    [deepBookAskList, deepBookBidList]\n  )\n\n  // 优化数据变化检测 - 使用数据哈希映射\n  useEffect(() => {\n    if (orderBookData.asks.length === 0 && orderBookData.bids.length === 0) {\n      return\n    }\n    if (isFirstRenderRef.current) {\n      // 首次渲染，不触发动画\n      prevDataRef.current = orderBookData\n      isFirstRenderRef.current = false\n      return\n    }\n\n    const changed = new Set<string>()\n\n    // 创建数据哈希函数\n    const createDataHash = (order: any) => {\n      return `${order.price}-${order.total}-${order.quantity}`\n    }\n\n    // 创建哈希映射对象\n    const createHashMap = (orders: any[]) => {\n      const hashMap = new Map<string, any>()\n      orders.forEach(order => {\n        const hash = createDataHash(order)\n        hashMap.set(hash, order)\n      })\n      return hashMap\n    }\n\n    // 创建当前和上一次的哈希映射\n    const currentAsksHashMap = createHashMap(orderBookData.asks)\n    const currentBidsHashMap = createHashMap(orderBookData.bids)\n    const prevAsksHashMap = createHashMap(prevDataRef.current.asks)\n    const prevBidsHashMap = createHashMap(prevDataRef.current.bids)\n\n    // 检查 asks 变化和新增\n    currentAsksHashMap.forEach((currentAsk, hash) => {\n      const prevAsk = prevAsksHashMap.get(hash)\n      if (!prevAsk) {\n        // 数据不存在，说明是新增的\n        changed.add(`ask-${hash}`)\n      }\n    })\n\n    // 检查 bids 变化和新增\n    currentBidsHashMap.forEach((currentBid, hash) => {\n      const prevBid = prevBidsHashMap.get(hash)\n      if (!prevBid) {\n        // 数据不存在，说明是新增的\n        changed.add(`bid-${hash}`)\n      }\n    })\n\n    if (changed.size > 0) {\n      setChangedOrders(changed)\n      const timer = setTimeout(() => {\n        setChangedOrders(new Set())\n      }, 1000)\n      prevDataRef.current = orderBookData\n      return () => clearTimeout(timer)\n    }\n  }, [orderBookData])\n\n  useEffect(() => {\n    if (currentDeepBookPool?.address) {\n      prevDataRef.current = { asks: [], bids: [] }\n      isFirstRenderRef.current = true\n    }\n  }, [currentDeepBookPool?.address])\n\n  // 优化表格内容渲染 - 分离依赖项\n  const asksToShow = useMemo(() => orderBookData.asks.slice(0, visibleRows).reverse(), [orderBookData.asks, visibleRows])\n  const bidsToShow = useMemo(() => orderBookData.bids.slice(0, visibleRows), [orderBookData.bids, visibleRows])\n\n  // 计算最大总量用于深度显示\n  const maxTotal = useMemo(() => {\n    const askMax = asksToShow.length > 0 ? Math.max(...asksToShow.map(ask => ask.total || 0)) : 0\n    const bidMax = bidsToShow.length > 0 ? Math.max(...bidsToShow.map(bid => bid.total || 0)) : 0\n    return Math.max(askMax, bidMax)\n  }, [asksToShow, bidsToShow])\n\n  // 计算深度百分比 - 使用 useCallback 优化\n  const calculateDepthPercentage = useCallback((total: number, maxTotal: number) => {\n    if (maxTotal === 0) return 0\n    return (total / maxTotal) * 100\n  }, [])\n\n  // 计算 Spread\n  const spread = useMemo(() => {\n    if (deepbookPrice && deepbookPrice?.price && deepbookPrice?.poolId == currentDeepBookPool?.address) {\n      return deepbookPrice?.price\n    }\n    return ''\n  }, [currentDeepBookPool?.address, deepbookPrice])\n\n  // 优化 renderOrderRow - 使用哈希作为标识符\n  const renderOrderRow = useCallback(\n    (order: any, isAsk: boolean, index: number, isApp: boolean) => {\n      const depthPercentage = calculateDepthPercentage(order.total || 0, maxTotal)\n      const depthColor = isAsk ? 'rgba(255, 80, 116, 0.1)' : 'rgba(103, 255, 216, 0.1)'\n      const priceColor = isAsk ? '#FF5074' : '#67FFD8'\n\n      // 创建数据哈希\n      const createDataHash = (order: any) => {\n        return `${order.price}-${order.total}-${order.quantity}`\n      }\n      const dataHash = createDataHash(order)\n      const orderKey = `${isAsk ? 'ask' : 'bid'}-${dataHash}`\n      const isChanged = changedOrders.has(orderKey)\n\n      const getTickSizeNumber = (price: string, tickSize: string) => {\n        const priceDecimal = d(price)\n        const tickSizeDecimal = d(tickSize)\n        const remainder = priceDecimal.mod(tickSizeDecimal)\n        return priceDecimal.sub(remainder).toString()\n      }\n\n      return (\n        <HStack\n          as=\"div\"\n          role=\"group\"\n          key={`${orderKey}-${order.size}-${order.total}`}\n          w=\"100%\"\n          h=\"20px\"\n          cursor=\"pointer\"\n          position=\"relative\"\n          spacing={0}\n          justify=\"space-between\"\n          p=\"0 1px\"\n          transition=\"all 0.3s ease-in-out\"\n          _hover={{ bg: 'rgba(118,200,255,0.05)' }}\n          onClick={() => (orderType == 'Limit' ? setPlaceOrderPrice(order.price) : null)}\n        >\n          {/* 深度背景 */}\n          <Box\n            position=\"absolute\"\n            top=\"0\"\n            bottom=\"0\"\n            h=\"20px\"\n            bg={depthColor}\n            width={`calc(${depthPercentage}% - 2px)`}\n            zIndex=\"0\"\n            transition=\"all 0.3s ease-in-out\"\n            _groupHover={{\n              bg: isAsk ? 'rgba(255, 80, 116, 0.2)' : 'rgba(103, 255, 216, 0.2)'\n            }}\n            // H5端买单区域深度在右边，卖单区域深度在左边\n            left={isApp && !isAsk ? 'auto' : '1px'}\n            right={isApp && !isAsk ? '1px' : 'auto'}\n          />\n\n          {/* 变化时显示插入效果 */}\n          {isChanged && (\n            <Box\n              position=\"absolute\"\n              top=\"0\"\n              bottom=\"0\"\n              h=\"20px\"\n              bg={isAsk ? 'rgba(255, 80, 116, 0.2)' : 'rgba(103, 255, 216, 0.2)'}\n              zIndex=\"0\"\n              animation=\"slideIn 0.5s ease-out\"\n              // H5端买单区域深度在右边，卖单区域深度在左边\n              left={isApp && !isAsk ? 'auto' : '1px'}\n              right={isApp && !isAsk ? '1px' : 'auto'}\n            />\n          )}\n\n          {/* 在app版本中调整顺序：Size在前，Price在后 */}\n          {isApp && !isAsk ? (\n            <>\n              {/* Size */}\n              <Text\n                position=\"relative\"\n                zIndex=\"1\"\n                fontSize=\"12px\"\n                color=\"text_caption\"\n                textAlign=\"left\"\n                flex=\"1\"\n                pl={isAsk ? '0px' : '16px'}\n                transition=\"all 0.3s ease-in-out\"\n              >\n                {formatNumber(order.quantity || 0, 2)}\n              </Text>\n\n              {/* Price */}\n              <Text\n                position=\"relative\"\n                zIndex=\"1\"\n                fontSize=\"12px\"\n                fontWeight=\"500\"\n                color={priceColor}\n                textAlign=\"right\"\n                flex=\"1\"\n                pr={isAsk ? '16px' : '0px'}\n                transition=\"all 0.3s ease-in-out\"\n                _groupHover={{\n                  textDecoration: 'underline'\n                }}\n              >\n                {formatNumber(getTickSizeNumber(order.price, tickSize) || 0, 6)}\n              </Text>\n            </>\n          ) : (\n            <>\n              {/* Price */}\n              <Text\n                position=\"relative\"\n                zIndex=\"1\"\n                pl={{ base: '0px', lg: '16px' }}\n                fontSize=\"12px\"\n                fontWeight=\"500\"\n                color={priceColor}\n                textAlign=\"left\"\n                flex=\"1\"\n                transition=\"all 0.3s ease-in-out\"\n                _groupHover={{\n                  textDecoration: 'underline'\n                }}\n              >\n                {formatNumber(getTickSizeNumber(order.price, tickSize) || 0, 6)}\n              </Text>\n\n              {/* Size */}\n              <Text\n                position=\"relative\"\n                pr={{ base: '16px', lg: '0px' }}\n                zIndex=\"1\"\n                fontSize=\"12px\"\n                color=\"text_caption\"\n                textAlign=\"right\"\n                flex=\"1\"\n                transition=\"all 0.3s ease-in-out\"\n              >\n                {formatNumber(order.quantity || 0, 2)}\n              </Text>\n            </>\n          )}\n\n          {/* Total */}\n          {!isApp && (\n            <Text\n              position=\"relative\"\n              zIndex=\"1\"\n              pr=\"16px\"\n              fontSize=\"12px\"\n              color=\"text_caption\"\n              textAlign=\"right\"\n              flex=\"1\"\n              transition=\"all 0.3s ease-in-out\"\n            >\n              {formatNumberWithKMB(order.total || 0, 4)}\n            </Text>\n          )}\n        </HStack>\n      )\n    },\n    [calculateDepthPercentage, maxTotal, changedOrders, orderType, setPlaceOrderPrice, tickSize]\n  )\n\n  // 渲染 Spread 组件\n  const renderSpread = useCallback(\n    () => (\n      <HStack\n        w=\"100%\"\n        h=\"36px\"\n        justify=\"flex-start\"\n        p=\"0px 16px\"\n        bg=\"card_bg\"\n        m={orderBookTab == 'all' ? '4px 0' : orderBookTab == 'bid' ? '4px 0 0 0' : '0'}\n        gap=\"4px\"\n      >\n        {!currentDeepBookPool?.price ? (\n          <Skeleton isLoaded={!currentDeepBookPool} w=\"100%\" h=\"33px\" />\n        ) : (\n          <>\n            <Icon\n              xlinkHref=\"#icon-icon_arrow\"\n              boxW=\"12px\"\n              boxH=\"12px\"\n              svgFill={currentDeepBookPool?.priceChange?.includes('-') ? 'primary_red' : 'primary_green'}\n              transform={currentDeepBookPool?.priceChange?.includes('-') ? 'rotate(0deg)' : 'rotate(180deg)'}\n            />\n            <Text fontSize=\"16px\" color={currentDeepBookPool?.priceChange?.includes('-') ? 'primary_red' : 'primary_green'}>\n              {formatNumber(spread, 6)}\n            </Text>\n          </>\n        )}\n      </HStack>\n    ),\n    [spread, currentDeepBookPool]\n  )\n  // console.log('🚀🚀🚀 ~ OrderBookTable.tsx:336 ~ asksToShow:', asksToShow)\n\n  const renderTableContent = useMemo(() => {\n    if (orderBookTab === 'all') {\n      // H5端并列显示买单卖单\n      if (isApp) {\n        return (\n          <HStack w=\"100%\" spacing=\"0\" h=\"calc(100% - 34px)\" justify=\"space-between\" gap=\"8px\">\n            {/* 买单区域 */}\n            <VStack w=\"50%\" spacing=\"4px\" h=\"100%\" justify={asksToShow?.length == visibleRows ? 'flex-end' : 'flex-start'}>\n              {deepBookOrderBookLoading\n                ? Array.from({ length: visibleRows }, (_, index) => <Skeleton key={`empty-bid-${index}`} w=\"calc(100% - 16px)\" h=\"20px\" />)\n                : bidsToShow.map((bid, index) => renderOrderRow(bid, false, index, isApp))}\n            </VStack>\n\n            {/* 分隔线 */}\n\n            {/* 卖单区域 */}\n            <VStack w=\"50%\" spacing=\"4px\" h=\"100%\" justify={asksToShow?.length == visibleRows ? 'flex-end' : 'flex-start'}>\n              {deepBookOrderBookLoading\n                ? Array.from({ length: visibleRows }, (_, index) => <Skeleton key={`empty-ask-${index}`} w=\"calc(100% - 16px)\" h=\"20px\" />)\n                : asksToShow.reverse().map((ask, index) => renderOrderRow(ask, true, index, isApp))}\n            </VStack>\n          </HStack>\n        )\n      }\n\n      // PC端保持原有布局\n      return (\n        <VStack w=\"100%\" spacing=\"4px\" h=\"calc(100% - 22px)\" justify=\"center\">\n          {/* Asks (卖单) */}\n          {deepBookOrderBookLoading\n            ? Array.from({ length: visibleRows }, (_, index) => (\n                <Skeleton key={`empty-ask-${index}`} w={{ base: '100%', lg: 'calc(100% - 32px)' }} h=\"20px\" />\n              ))\n            : asksToShow.map((ask, index) => renderOrderRow(ask, true, index))}\n\n          {/* Spread */}\n          {renderSpread()}\n\n          {/* Bids (买单) */}\n          {deepBookOrderBookLoading\n            ? Array.from({ length: visibleRows }, (_, index) => <Skeleton key={`empty-bid-${index}`} w=\"calc(100% - 32px)\" h=\"20px\" />)\n            : bidsToShow.map((bid, index) => renderOrderRow(bid, false, index))}\n        </VStack>\n      )\n    } else if (orderBookTab === 'bid') {\n      return (\n        <VStack w=\"100%\" spacing=\"4px\" h=\"calc(100% - 22px)\" justify=\"flex-start\">\n          {/* Spread */}\n          {renderSpread()}\n\n          {/* 买单显示更多数据 */}\n          {deepBookOrderBookLoading\n            ? Array.from({ length: visibleRows }, (_, index) => <Skeleton key={`empty-bid-${index}`} w=\"calc(100% - 32px)\" h=\"20px\" />)\n            : bidsToShow.map((bid, index) => renderOrderRow(bid, false, index))}\n        </VStack>\n      )\n    } else if (orderBookTab === 'ask') {\n      return (\n        <VStack w=\"100%\" spacing=\"4px\" h=\"calc(100% - 22px)\" justify=\"flex-end\">\n          {/* 卖单显示更多数据 */}\n          {deepBookOrderBookLoading\n            ? Array.from({ length: visibleRows }, (_, index) => <Skeleton key={`empty-ask-${index}`} w=\"calc(100% - 32px)\" h=\"20px\" />)\n            : asksToShow.map((ask, index) => renderOrderRow(ask, true, index))}\n\n          {/* Spread */}\n          {renderSpread()}\n        </VStack>\n      )\n    }\n  }, [orderBookTab, asksToShow, bidsToShow, visibleRows, renderOrderRow, renderSpread, deepBookOrderBookLoading, isApp])\n\n  return (\n    <Box w=\"100%\" h=\"100%\" overflow=\"hidden\">\n      {/* CSS Animations - 只保留插入效果 */}\n      <style>\n        {`\n          @keyframes slideIn {\n            from {\n              transform: translateX(-10px);\n              opacity: 0;\n            }\n            to {\n              transform: translateX(0);\n              opacity: 1;\n            }\n          }\n        `}\n      </style>\n\n      {/* Header */}\n      {!isApp && (\n        <HStack w=\"100%\" spacing={0} justify=\"space-between\" p=\"10px 16px 0px\" bg=\"bg_secondary\" position=\"relative\" zIndex=\"99\">\n          <Text fontSize=\"12px\" w=\"100%\" color=\"primary_gray\" fontWeight=\"500\">\n            Price ({currentDeepBookPool?.quoteAssets?.symbol || '--'})\n          </Text>\n          <Text fontSize=\"12px\" w=\"100%\" color=\"primary_gray\" fontWeight=\"500\" textAlign=\"right\">\n            Amt. ({currentDeepBookPool?.baseAssets?.symbol || '--'})\n          </Text>\n          <Text fontSize=\"12px\" textAlign=\"right\" w=\"100%\" color=\"primary_gray\" fontWeight=\"500\">\n            Total ({currentDeepBookPool?.quoteAssets?.symbol || '--'})\n          </Text>\n        </HStack>\n      )}\n\n      {isApp && (\n        <HStack w=\"100%\" spacing={0} gap=\"8px\" justify=\"space-between\" p=\"10px 16px\" bg=\"bg_secondary\" position=\"relative\" zIndex=\"99\">\n          <HStack w=\"50%\" justifyContent=\"space-between\">\n            <Text fontSize=\"12px\" w=\"100%\" color=\"primary_gray\" fontWeight=\"500\">\n              Total ({currentDeepBookPool?.quoteAssets?.symbol || '--'})\n            </Text>\n            <Text fontSize=\"12px\" w=\"100%\" color=\"primary_gray\" fontWeight=\"500\" textAlign=\"right\">\n              Price\n            </Text>\n          </HStack>\n          <HStack w=\"50%\" justifyContent=\"space-between\">\n            <Text fontSize=\"12px\" w=\"100%\" color=\"primary_gray\" fontWeight=\"500\">\n              Price\n            </Text>\n            <Text fontSize=\"12px\" textAlign=\"right\" w=\"100%\" color=\"primary_gray\" fontWeight=\"500\">\n              Total ({currentDeepBookPool?.quoteAssets?.symbol || '--'})\n            </Text>\n          </HStack>\n        </HStack>\n      )}\n\n      {/* Content */}\n      {renderTableContent}\n    </Box>\n  )\n}\n\nexport default OrderBookTable\n","import useGetDeepBookOrderBook, { OrderType } from '@/hooks/deepbook/useGetDeepBookOrderBook'\nimport { Icon } from '@cetus/ui-kit'\nimport { HStack, Menu, MenuButton, MenuItem, MenuList, Text } from '@chakra-ui/react'\nimport { useEffect, useRef, useState } from 'react'\n\nconst TickSizeSelect = ({\n  orderBookTab,\n  tickSizeList,\n  defaultTickSize,\n  setDefaultTickSize\n}: {\n  orderBookTab: OrderType\n  tickSizeList: string[]\n  defaultTickSize: string\n  setDefaultTickSize: (tickSize: string) => void\n}) => {\n  const { getOrderBook } = useGetDeepBookOrderBook()\n  const [isOpen, setIsOpen] = useState(false)\n  const [buttonWidth, setButtonWidth] = useState<number>(0)\n  const buttonRef = useRef<HTMLDivElement>(null)\n\n  const selectTickSize = (tickSize: string) => {\n    setDefaultTickSize(tickSize)\n    getOrderBook(orderBookTab, tickSize, false, 9)\n  }\n\n  // 获取按钮宽度\n  useEffect(() => {\n    if (buttonRef.current) {\n      setButtonWidth(buttonRef.current.offsetWidth)\n    }\n  }, [defaultTickSize])\n\n  return (\n    <Menu onOpen={() => setIsOpen(true)} onClose={() => setIsOpen(false)}>\n      <MenuButton>\n        <HStack\n          ref={buttonRef}\n          border=\"1px solid\"\n          borderRadius=\"8px\"\n          p=\"6px 8px\"\n          cursor=\"pointer\"\n          minW=\"40px\"\n          w=\"auto\"\n          h=\"24px\"\n          justifyContent=\"space-between\"\n          borderColor=\"border\"\n        >\n          <Text color={isOpen ? 'text_caption' : 'text_paragraph'}>{defaultTickSize}</Text>\n          <Icon\n            xlinkHref=\"#icon-icon_arrow\"\n            boxW=\"12px\"\n            boxH=\"12px\"\n            transform={isOpen ? 'rotate(180deg)' : 'rotate(0deg)'}\n            transition=\"transform 0.2s ease-in-out\"\n            svgFill={isOpen ? 'text_caption' : 'text_paragraph'}\n          />\n        </HStack>\n      </MenuButton>\n      <MenuList\n        p=\"0\"\n        minW=\"unset\"\n        zIndex={99999}\n        borderRadius=\"8px\"\n        border=\"1px solid\"\n        borderColor=\"border\"\n        w={`${buttonWidth}px`} // 使用按钮的实际宽度\n      >\n        {tickSizeList.map(item => (\n          <MenuItem\n            key={item}\n            onClick={() => selectTickSize(item)}\n            p=\"8px\"\n            bg=\"none\"\n            justifyContent=\"flex-start\"\n            cursor=\"pointer\"\n            _hover={{ color: 'text_caption' }}\n          >\n            {item}\n          </MenuItem>\n        ))}\n      </MenuList>\n    </Menu>\n  )\n}\n\nexport default TickSizeSelect\n","import useGetDeepBookOrderBook, { OrderType } from '@/hooks/deepbook/useGetDeepBookOrderBook'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useDebounceFunction, useInterval } from '@cetus/hooks'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { d } from '@cetus/utils'\nimport { Box, HStack, Text, VStack } from '@chakra-ui/react'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport OrderBookTab from './OrderBookTab'\nimport OrderBookTable from './OrderBookTable'\nimport TickSizeSelect from './TickSizeSelect'\n\nexport default function OrderBookBlock({ isOpenCard }: { isOpenCard?: boolean }) {\n  const { currentDeepBookPool } = useDeepBookStore()\n\n  const [orderBookTab, setOrderBookTab] = useState<OrderType>('all')\n  const tickSizeList = useMemo(() => {\n    if (currentDeepBookPool?.address) {\n      const tickSize = currentDeepBookPool.tickSize\n      return [d(tickSize).toString(), d(tickSize).mul(10).toString(), d(tickSize).mul(100).toString()]\n    } else {\n      return [d(0.0001).toString(), d(0.001).toString(), d(0.01).toString()]\n    }\n  }, [currentDeepBookPool?.address])\n  const [defaultTickSize, setDefaultTickSize] = useState('0.0001')\n  useEffect(() => {\n    if (currentDeepBookPool?.address) {\n      setDefaultTickSize(currentDeepBookPool.tickSize)\n    }\n  }, [currentDeepBookPool?.address])\n  const orderBookBlockRef = useRef<HTMLDivElement>(null)\n  const [containerHeight, setContainerHeight] = useState(0)\n\n  // 使用 useRef 避免重复创建防抖函数\n  const lastHeightRef = useRef(0)\n\n  // 6舍7入\n  function roundWith67Rule(num: number): number {\n    const integer = Math.floor(num)\n    const decimal = (num - integer) * 10\n\n    if (decimal >= 7) {\n      return integer + 1\n    } else if (decimal >= 6) {\n      return integer // 舍去\n    } else {\n      return Math.round(num)\n    }\n  }\n\n  const { isApp } = useWindowWidth()\n\n  // 计算可见行数\n  const visibleRows = useMemo(() => {\n    if (!containerHeight) return 6 // 默认值\n\n    // 计算可用高度 (减去header和spread的高度)\n    const headerHeight = isApp ? 22 : 44 // 头部高度\n    const spreadHeight = isApp ? 0 : 48 // spread区域高度\n\n    const availableHeight = containerHeight - headerHeight - spreadHeight\n\n    // 计算每边可以显示的行数 (每行高度20px + 间距4px)\n    const rowHeight = 24 // 20px高度 + 4px间距\n    const rowsPerSide = Math.max(5, roundWith67Rule(availableHeight / (2 * rowHeight))) // 最少显示1行\n\n    return orderBookTab !== 'all' ? rowsPerSide * 2 : isApp ? rowsPerSide * 2 : rowsPerSide\n  }, [containerHeight, orderBookTab, isApp])\n\n  // 创建防抖函数 - 使用 useCallback 优化\n  const debouncedSetHeight = useCallback(\n    useDebounceFunction((height: number) => {\n      console.log('🚀🚀🚀 ~ index.tsx:76 ~ OrderBookBlock ~ height:', height)\n      // 添加阈值检查，避免微小变化触发更新\n      const heightDiff = Math.abs(height - lastHeightRef.current)\n      if (heightDiff > 2) {\n        // 只有高度变化超过2px才更新\n        setContainerHeight(height)\n        lastHeightRef.current = height\n      }\n    }, 300),\n    []\n  )\n\n  // 监听容器高度变化\n  useEffect(() => {\n    const resizeObserver = new ResizeObserver(entries => {\n      for (const entry of entries) {\n        const height = Math.round(entry.contentRect.height)\n        debouncedSetHeight(height)\n      }\n    })\n\n    if (orderBookBlockRef.current) {\n      resizeObserver.observe(orderBookBlockRef.current)\n      const initialHeight = Math.round(orderBookBlockRef.current.clientHeight)\n      console.log('🚀🚀🚀 ~ index.tsx:100 ~ OrderBookBlock ~ initialHeight:', initialHeight)\n      setContainerHeight(initialHeight)\n      lastHeightRef.current = initialHeight\n    }\n\n    return () => {\n      resizeObserver.disconnect()\n    }\n  }, [debouncedSetHeight, isOpenCard])\n\n  const { getOrderBook } = useGetDeepBookOrderBook()\n\n  // useEffect(() => {\n  //   if (currentDeepBookPool?.address) {\n  //     getOrderBook('all', currentDeepBookPool.tickSize, true, 9)\n  //   }\n  // }, [currentDeepBookPool?.address])\n\n  const [refreshCount, setRefreshCount] = useState<number>(0)\n  useInterval({\n    interval: 1000,\n    callback: () => {\n      setRefreshCount(refreshCount + 1)\n      if (refreshCount >= 10) {\n        setRefreshCount(0)\n        if (currentDeepBookPool?.address) {\n          getOrderBook(orderBookTab, defaultTickSize, false)\n        }\n      }\n    }\n  })\n\n  // // 定期刷新数据 - 使用 useCallback 优化\n  // const refreshOrderBook = useCallback(() => {\n  //   if (currentDeepBookPool?.address) {\n  //     getOrderBook('all', Number(defaultTickSize))\n  //   }\n  // }, [currentDeepBookPool?.address, defavisibleRowsultTickSize, getOrderBook])\n\n  // useEffect(() => {\n  //   const interval = setInterval(refreshOrderBook, 5000) // 每5秒刷新一次数据\n  //   return () => clearInterval(interval)\n  // }, [refreshOrderBook])\n\n  return (\n    <VStack bg=\"bg_secondary\" w=\"100%\" h=\"100%\" borderRadius=\"8px\" gap=\"0px\">\n      <VStack w=\"100%\" justifyContent=\"space-between\" p={{ base: '0px 16px 0px', lg: '12px 16px 0px' }}>\n        <HStack w=\"100%\" justifyContent=\"space-between\" justify=\"center\">\n          <Text color=\"text_caption\" fontSize=\"14px\" fontWeight=\"500\">\n            Orderbook\n          </Text>\n          <HStack>\n            {!isApp && <OrderBookTab orderBookTab={orderBookTab} setOrderBookTab={setOrderBookTab} />}\n            <TickSizeSelect\n              orderBookTab={orderBookTab}\n              tickSizeList={tickSizeList}\n              defaultTickSize={defaultTickSize}\n              setDefaultTickSize={setDefaultTickSize}\n            />\n          </HStack>\n        </HStack>\n        <Box w=\"100%\" height=\"1px\" bg=\"border\" />\n      </VStack>\n\n      {/* OrderBook Table */}\n      <Box w=\"100%\" flex=\"1\" h=\"100%\" ref={orderBookBlockRef}>\n        <OrderBookTable orderBookTab={orderBookTab} tickSize={defaultTickSize} visibleRows={visibleRows} />\n      </Box>\n    </VStack>\n  )\n}\n","import { DeepBookPoolInfoPath, DeepBookPoolsPath, DeepBookPoolsV2Path } from '@/apis/path'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useFetch } from '@cetus/hooks'\nimport { d, formatNumber, formatPercentage } from '@cetus/utils'\nimport { useNavigate } from 'react-router-dom'\nconst abandonedPools = [\n  '0xde096bb2c59538a25c89229127fe0bc8b63ecdbe52a3693099cc40a1d8a2cfd4',\n  '0xe9aecf5859310f8b596fbe8488222a7fb15a55003455c9f42d1b60fab9cca9ba',\n  '0xc69f7755fec146583e276a104bcf91e0c9f0cab91dcdb1c202e8d76a5a5a1101',\n  '0x52f9bf16d9e7eff79da73d5e3dea39fe1ef8c77684bf4ec2c6566b41396404d0'\n]\n\nexport default function useGetDeepBookPools() {\n  const { fetchByApi } = useFetch()\n  const {\n    setDeepBookPools,\n    setDeepBookPoolLoading,\n    setCurrentDeepBookPool,\n    setQueryDeepBookPoolLoading,\n    setQueryDeepBookPools,\n    setDeepBookPoolsObj,\n    deepBookPools,\n    localDeepBookPools,\n    setLocalDeepBookPools,\n    setDeepbookPrice\n  } = useDeepBookStore()\n  const navigate = useNavigate()\n\n  // 获取池子列表\n  const getDeepBookPools = async (address?: string) => {\n    try {\n      const poolIds = localDeepBookPools.map((item: any) => item.address)\n      console.log('🚀🚀🚀 ~ useGetDeepBookPools.ts:33 ~ getDeepBookPools ~ poolIds:', poolIds)\n      if (address && !poolIds.includes(address)) {\n        poolIds.push(address)\n      }\n      const queryPoolIds = [...new Set(poolIds)]\n      const { data } = await fetchByApi(DeepBookPoolsPath, 'POST', { pool_ids: queryPoolIds })\n      if (data && data?.list.length > 0) {\n        const result = data.list.map((item: any) => {\n          return wrapDeepBookPool(item, poolIds)\n        })\n        console.log('🚀🚀🚀 ~ useGetDeepBookPools.ts:43 ~ getDeepBookPools ~ result:', result)\n        const currentPool = address ? result.find((item: any) => item.address === address) : result[0]\n\n        // import里没有 是通过地址栏拼接打开的\n        const importPoolIds = localDeepBookPools.map((item: any) => item.address)\n        if (!importPoolIds.includes(address) && !currentPool?.inWhiteList) {\n          const importPool = { ...currentPool, isLocal: true }\n          const newLocalPools = [importPool, ...localDeepBookPools]\n          setLocalDeepBookPools(newLocalPools)\n        }\n\n        setDeepBookPools(result)\n        setDeepBookPoolsObj(\n          result.reduce((acc: Record<string, any>, item: any) => {\n            acc[item.address] = item\n            return acc\n          }, {})\n        )\n        setDeepBookPoolLoading(false)\n        setCurrentDeepBookPool(currentPool)\n        setDeepbookPrice({ poolId: currentPool.address, price: currentPool.price })\n        navigate(`/deepbook/${currentPool.address}`)\n        return result\n      }\n    } catch (error) {\n      setDeepBookPools([])\n      setDeepBookPoolLoading(false)\n      console.error('🚀🚀🚀 ~ useGetDeepBookPools.ts:14 ~ getDeepBookPools ~ error:', error)\n      return []\n    }\n  }\n\n  // 获取当前池子信息\n  const getCurrentDeepBookPool = async (address?: string) => {\n    const { data } = await fetchByApi(DeepBookPoolInfoPath, 'POST', { pool_id: address })\n    if (data) {\n      const result = wrapDeepBookPool(data)\n      console.log('🚀🚀🚀 ~ useGetDeepBookPools.ts:62 ~ getCurrentDeepBookPool ~ result:', result)\n      return result\n    }\n  }\n  const wrapDeepBookPool = (item: any, poolIds = []) => {\n    const {\n      base_asset,\n      quote_asset,\n      address,\n      high,\n      low,\n      vol_usd_day,\n      price,\n      in_white_list,\n      price_change,\n      lot_size,\n      tick_size,\n      min_size,\n      vol_24h,\n      vol_24h_usd,\n      taker_fee_rate\n    } = item\n    const baseDecimals = base_asset.decimals\n    const quoteDecimals = quote_asset.decimals\n    const lotSize = d(lot_size).div(Math.pow(10, base_asset.decimals)).toString()\n    const tickSize = d(tick_size)\n      .div(d(Math.pow(10, quoteDecimals - baseDecimals + 9)))\n      .toString()\n    const minSize = d(min_size).div(Math.pow(10, base_asset.decimals)).toString()\n\n    return {\n      address,\n      baseAssets: { ...base_asset, is_verified: true, logo_url: base_asset.icon_url },\n      quoteAssets: { ...quote_asset, is_verified: true, logo_url: quote_asset.icon_url },\n      high,\n      low,\n      volUsdDay: vol_usd_day,\n      price,\n      priceDisplay: formatNumber(price),\n      inWhiteList: in_white_list,\n      priceChange: formatPercentage(price_change),\n      lotSize,\n      tickSize,\n      minSize,\n      vol24h: vol_24h,\n      vol24hDisplay: formatNumber(vol_24h),\n      vol24hUsdDisplay: formatNumber(vol_24h_usd),\n      isAbandoned: abandonedPools.includes(address),\n      takerFeeRate: taker_fee_rate,\n      sort: abandonedPools.includes(address) ? 0 : 1,\n      isLocal:\n        !in_white_list && (localDeepBookPools.some((localDeepBookPool: any) => localDeepBookPool.address === address) || poolIds.includes(address))\n    }\n  }\n\n  const queryDeepBookPoolByValue = async (value: string) => {\n    try {\n      setQueryDeepBookPoolLoading(true)\n      const { data } = await fetchByApi(DeepBookPoolsV2Path, 'POST', { text: value })\n      if (data && data?.list.length > 0) {\n        const result = data.list\n          .map((item: any) => {\n            return {\n              ...wrapDeepBookPool(item),\n              isLocal: localDeepBookPools.some((localDeepBookPool: any) => localDeepBookPool.address === item.address)\n            }\n          })\n          .sort((a: any, b: any) => b.sort - a.sort)\n        console.log(result, 'result##')\n        setQueryDeepBookPools(result)\n        setTimeout(() => {\n          setQueryDeepBookPoolLoading(false)\n        }, 500)\n        return result\n      }\n    } catch (error) {\n      console.error('🚀🚀🚀 ~ useGetDeepBookPools.ts:96 ~ queryDeepBookPoolByValue ~ error:', error)\n      setQueryDeepBookPoolLoading(false)\n      return null\n    }\n  }\n\n  return { getDeepBookPools, queryDeepBookPoolByValue, getCurrentDeepBookPool }\n}\n","import useGetDeepBookPools from '@/hooks/deepbook/useGetDeepBookPools'\nimport useDeepBookStore from '@/store/deepbook'\nimport { CetusTooltip, Loading, useGlobalToast } from '@cetus/design'\nimport { useDebounceFunction } from '@cetus/hooks'\nimport { Icon, SearchInput } from '@cetus/ui-kit'\nimport { Box, Button, HStack, Modal, ModalBody, ModalCloseButton, ModalContent, ModalHeader, ModalOverlay, Text, VStack } from '@chakra-ui/react'\nimport { useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport CoinPairInfo from '../common/CoinPairInfo'\n\ntype ManageModalProps = {\n  isOpen: boolean\n  onClose: (isManualClose?: boolean) => void\n}\nconst poolList = []\nexport default function ManageModal({ isOpen, onClose }: ManageModalProps) {\n  const [inputValue, setInputValue] = useState('')\n  const { queryDeepBookPoolByValue } = useGetDeepBookPools()\n  const { queryDeepBookPoolLoading, currentDeepBookPool, setDeepbookPrice } = useDeepBookStore()\n\n  // 创建防抖版本的查询函数\n  const debouncedQueryDeepBookPool = useDebounceFunction((value: string) => {\n    queryDeepBookPoolByValue(value)\n  }, 300)\n\n  const handleInputChange = (value: string) => {\n    const regValue = value.replace(/[^[a-zA-Z0-9\\s]+$/g, '')\n    setInputValue(regValue)\n    if (regValue) {\n      debouncedQueryDeepBookPool(regValue)\n    }\n  }\n\n  const navigate = useNavigate()\n\n  const {\n    deepBookPools,\n    queryDeepBookPools,\n    setDeepBookPools,\n    localDeepBookPools,\n    setLocalDeepBookPools,\n    setCurrentDeepBookPool,\n    setQueryDeepBookPools\n  } = useDeepBookStore()\n  const { showCommonToast } = useGlobalToast()\n\n  const importDeepBookPool = (pool: any) => {\n    const newPools = [{ ...pool, isLocal: true }, ...deepBookPools] as any\n    console.log('🚀🚀🚀 ~ ManageModal.tsx:43 ~ importDeepBookPool ~ newPools:', newPools)\n    setDeepBookPools(newPools)\n    const newLocalPools = [{ ...pool, isLocal: true }, ...localDeepBookPools] as any\n    console.log('🚀🚀🚀 ~ ManageModal.tsx:45 ~ importDeepBookPool ~ newLocalPools:', newLocalPools)\n    setLocalDeepBookPools(newLocalPools)\n    setCurrentDeepBookPool({ ...pool, isLocal: true })\n    setDeepbookPrice({ poolId: pool.address, price: pool.price })\n    navigate(`/deepbook/${pool.address}`)\n    showCommonToast('Added', 'success')\n\n    if (inputValue) {\n      const newQueryDeepBookPools = queryDeepBookPools.map((item: any) => {\n        if (item.address == pool.address) {\n          return { ...item, isLocal: true }\n        }\n        return item\n      })\n      setQueryDeepBookPools(newQueryDeepBookPools)\n    }\n\n    // onClose(false)\n  }\n\n  const removeDeepBookPool = (pool: any) => {\n    const newPools = deepBookPools.filter((item: any) => item.address !== pool.address)\n    console.log('🚀🚀🚀 ~ ManageModal.tsx:54 ~ removeDeepBookPool ~ newPools:', newPools)\n    setDeepBookPools(newPools)\n    console.log('🚀🚀🚀 ~ ManageModal.tsx:57 ~ removeDeepBookPool ~ localDeepBookPools:', localDeepBookPools)\n    const newLocalPools = localDeepBookPools.filter((item: any) => item.address !== pool.address)\n    setLocalDeepBookPools(newLocalPools)\n    console.log('🚀🚀🚀 ~ ManageModal.tsx:58 ~ removeDeepBookPool ~ currentDeepBookPool?.address:', currentDeepBookPool?.address)\n    console.log('🚀🚀🚀 ~ ManageModal.tsx:59 ~ removeDeepBookPool ~ pool.address:', pool.address)\n    if (currentDeepBookPool?.address === pool.address) {\n      console.log('🚀🚀🚀 ~ ManageModal.tsx:62 ~ removeDeepBookPool ~ newPools[0]:', newPools[0])\n      setCurrentDeepBookPool(newPools[0])\n      setDeepbookPrice({ poolId: newPools[0]?.address, price: newPools[0]?.price })\n      navigate(`/deepbook/${newPools[0]?.address}`)\n    }\n    console.log('🚀🚀🚀 ~ ManageModal.tsx:86 ~ removeDeepBookPool ~ inputValue:', inputValue)\n    if (inputValue) {\n      const newQueryDeepBookPools = queryDeepBookPools\n        .filter((item: any) => item.address !== inputValue)\n        .map((item: any) => {\n          if (item.address == pool.address) {\n            return { ...item, isLocal: false }\n          }\n          return item\n        })\n\n      console.log('🚀🚀🚀 ~ ManageModal.tsx:88 ~ removeDeepBookPool ~ newQueryDeepBookPools:', newQueryDeepBookPools)\n      if (newQueryDeepBookPools.length == 0) {\n        onClose(false)\n        setInputValue('')\n      }\n      setQueryDeepBookPools(newQueryDeepBookPools)\n    }\n    showCommonToast('Removed', 'success')\n  }\n\n  return (\n    <Modal autoFocus={false} returnFocusOnClose={false} trapFocus={false} isOpen={isOpen} onClose={() => onClose(false)} isCentered>\n      <ModalOverlay />\n      <ModalContent w={{ base: '100%', lg: '356px' }} overflow=\"hidden\">\n        <ModalHeader>Manage</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody textAlign=\"center\" p=\"0\">\n          <Box w=\"100%\" p=\"0 16px 12px\">\n            <SearchInput\n              borderRadius=\"8px\"\n              placeholder=\"Search by token or pool address\"\n              searchText={inputValue}\n              onChange={(value: string) => handleInputChange(value)}\n            />\n          </Box>\n          <VStack\n            w=\"100%\"\n            gap=\"0px\"\n            h={poolList?.length > 4 ? '235px' : queryDeepBookPoolLoading ? '337px' : 'auto'}\n            overflowY=\"auto\"\n            maxH=\"337px\"\n            position=\"relative\"\n          >\n            {queryDeepBookPoolLoading ? (\n              <Loading positionStyle=\"absolute\" />\n            ) : (\n              (inputValue ? queryDeepBookPools : deepBookPools)?.map((item: any) => {\n                return (\n                  <HStack\n                    key={item?.poolAddress}\n                    w=\"100%\"\n                    borderRadius=\"12px\"\n                    p=\"0px 16px\"\n                    justify=\"space-between\"\n                    _hover={{ bg: 'primary_opacity.10' }}\n                    onClick={() => {\n                      if (!item.isAbandoned && !item.isLocal && !item.inWhiteList) {\n                        importDeepBookPool(item)\n                        onClose(false)\n                      } else {\n                        setCurrentDeepBookPool(item)\n                        setDeepbookPrice({ poolId: item.address, price: item.price })\n                        navigate(`/deepbook/${item.address}`)\n                        onClose(false)\n                      }\n                    }}\n                  >\n                    <CoinPairInfo\n                      showFee={false}\n                      poolInfo={{\n                        ...item,\n                        poolAddress: item?.address,\n                        displayTokenA: { ...item?.baseAssets, is_verified: true, logo_url: item?.baseAssets?.icon_url },\n                        displayTokenB: { ...item?.quoteAssets, is_verified: true, logo_url: item?.quoteAssets?.icon_url }\n                      }}\n                      imgStyle={{ w: '28px', h: '28px', filter: item.isAbandoned ? 'grayscale(100%)' : 'none' }}\n                    />\n                    {item?.isAbandoned && (\n                      <Text fontSize=\"12px\" bg=\"primary_opacity.10\" color=\"primary\" p=\"4px\" borderRadius=\"4px\">\n                        Sunset\n                      </Text>\n                    )}\n                    {!item?.inWhiteList && !item?.isLocal && (\n                      <Button\n                        variant=\"ghost\"\n                        w=\"60px\"\n                        h=\"24px\"\n                        fontSize=\"12px\"\n                        onClick={e => {\n                          e.stopPropagation()\n                          importDeepBookPool(item)\n                        }}\n                        cursor=\"pointer\"\n                      >\n                        +Add\n                      </Button>\n                    )}\n                    {item?.isLocal && (\n                      <CetusTooltip tooltip={<Text fontSize=\"12px\">Remove</Text>} placement=\"top\">\n                        <Icon\n                          xlinkHref=\"#icon-icon_del\"\n                          w=\"20px\"\n                          h=\"20px\"\n                          onClick={e => {\n                            e.stopPropagation()\n                            removeDeepBookPool(item)\n                          }}\n                        />\n                      </CetusTooltip>\n                    )}\n                  </HStack>\n                )\n              })\n            )}\n          </VStack>\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  )\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { CoinPairImage, Icon, Table } from '@cetus/ui-kit'\nimport { Box, Button, HStack, Menu, MenuButton, MenuItem, MenuList, Skeleton, Text, useDisclosure } from '@chakra-ui/react'\nimport { useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport ManageModalModal from './ManageModal'\n\nfunction ManagePool({ currentDeepBookPool }: { currentDeepBookPool: any }) {\n  const menuDisclosure = useDisclosure()\n  const [isOpenManageModal, setIsOpenManageModal] = useState(false)\n  const [isHover, setIsHover] = useState(false)\n  const navigate = useNavigate()\n  const { deepBookPools, setCurrentDeepBookPool, setDeepbookPrice } = useDeepBookStore()\n  const { isApp } = useWindowWidth()\n\n  return (\n    <HStack\n      w={{ base: 'auto', lg: 'auto' }}\n      position=\"relative\"\n      zIndex=\"100\"\n      cursor=\"pointer\"\n      onMouseEnter={() => setIsHover(true)}\n      onMouseLeave={() => setIsHover(false)}\n    >\n      <Menu isOpen={menuDisclosure.isOpen} onClose={menuDisclosure.onClose} placement=\"bottom-start\" gutter={8} strategy=\"fixed\">\n        <MenuButton\n          as={Button}\n          bg=\"none\"\n          _hover={{ bg: 'none' }}\n          _active={{ bg: 'none' }}\n          p=\"0\"\n          onClick={menuDisclosure.onOpen}\n          w={{ base: 'auto', lg: 'auto' }}\n          h=\"40px\"\n        >\n          <Skeleton isLoaded={currentDeepBookPool?.price}>\n            <HStack>\n              <CoinPairImage\n                coinACoinType={currentDeepBookPool?.baseAssets?.coin_type}\n                coinBCoinType={currentDeepBookPool?.quoteAssets?.coin_type}\n                coinAIconUrl={currentDeepBookPool?.baseAssets?.icon_url}\n                coinBIconUrl={currentDeepBookPool?.quoteAssets?.icon_url}\n              />\n              <Text fontSize=\"16px\" color=\"text_caption\" fontWeight=\"500\">\n                {`${currentDeepBookPool?.baseAssets?.symbol || ''} - ${currentDeepBookPool?.quoteAssets?.symbol || ''}`}\n              </Text>\n              <Icon\n                fontSize=\"12px\"\n                xlinkHref=\"#icon-icon_arrow\"\n                transition=\"transform 0.5s\"\n                transform={menuDisclosure.isOpen ? 'rotate(180deg)' : 'rotate(0deg)'}\n                svgFill={isHover ? 'text_caption' : 'text_paragraph'}\n              />\n            </HStack>\n          </Skeleton>\n        </MenuButton>\n        <MenuList\n          w={{ base: '370px', lg: '466px' }}\n          borderRadius=\"12px\"\n          p=\"0px\"\n          mt=\"0\"\n          zIndex=\"9999\"\n          maxH=\"400px\"\n          overflow=\"hidden\"\n          boxShadow=\"0px 4px 20px rgba(0, 0, 0, 0.15)\"\n        >\n          <MenuItem closeOnSelect={false} p=\"0\" w=\"100%\">\n            <Box w=\"100%\" maxH=\"240px\" overflowY=\"auto\" p=\"4px 0px\" sx={{ scrollbarGutter: 'stable both-edges' }}>\n              <Table\n                rowKey=\"address\"\n                columns={getColumns(isApp)}\n                dataSource={deepBookPools}\n                skeletonLength={3}\n                loading={false}\n                trPadding=\"12px\"\n                tableContainerWrapStyle={{\n                  minH: '200px'\n                }}\n                onRowClick={(item: any) => {\n                  setCurrentDeepBookPool(item)\n                  setDeepbookPrice({ poolId: item.address, price: item.price })\n                  navigate(`/deepbook/${item.address}`)\n                  menuDisclosure.onClose()\n                }}\n                rowStyle={{\n                  h: '52px',\n                  cursor: 'pointer',\n                  _hover: { bg: 'primary_opacity.10)' }\n                }}\n              />\n            </Box>\n          </MenuItem>\n          <HStack justify=\"center\" w=\"100%\" borderTop=\"1px solid\" borderColor=\"border\">\n            <Button\n              w=\"166px\"\n              m=\"16px\"\n              h=\"28px\"\n              borderRadius=\"8px\"\n              fontSize=\"14px\"\n              variant=\"outline\"\n              onClick={() => {\n                setIsOpenManageModal(true)\n                menuDisclosure.onClose()\n              }}\n            >\n              Manage Pool\n            </Button>\n          </HStack>\n        </MenuList>\n      </Menu>\n      {isOpenManageModal && <ManageModalModal isOpen={isOpenManageModal} onClose={() => setIsOpenManageModal(false)} />}\n    </HStack>\n  )\n}\n\nconst getColumns = (isApp: boolean) => {\n  return [\n    {\n      title: (\n        <Text fontSize=\"12px\" fontWeight=\"500\">\n          Pool\n        </Text>\n      ),\n      thConfig: {\n        w: '50%'\n      },\n      key: 'token',\n      render: (item: any) => {\n        return (\n          <HStack justify=\"flex-start\" sx={{ minW: 'unset', p: { margin: '0' } }} m=\"-12px 0\">\n            <Skeleton isLoaded={true}>\n              <HStack>\n                <HStack filter={item?.isAbandoned ? 'grayscale(100%)' : 'none'}>\n                  <CoinPairImage\n                    coinACoinType={item?.baseAssets?.coin_type}\n                    coinBCoinType={item?.quoteAssets?.coin_type}\n                    coinAIconUrl={item?.baseAssets?.icon_url}\n                    coinBIconUrl={item?.quoteAssets?.icon_url}\n                    w=\"28px\"\n                    h=\"28px\"\n                  />\n                  <Text fontSize=\"14px\" color=\"text_caption\">\n                    {`${item?.baseAssets?.symbol || ''} - ${item?.quoteAssets?.symbol || ''}`}\n                  </Text>\n                </HStack>\n                {item?.isAbandoned && (\n                  <Text fontSize=\"12px\" bg=\"primary_opacity.10\" color=\"primary\" p=\"2px 4px\" borderRadius=\"4px\">\n                    Sunset\n                  </Text>\n                )}\n              </HStack>\n            </Skeleton>\n          </HStack>\n        )\n      }\n    },\n    {\n      title: (\n        <Text fontSize=\"12px\" fontWeight=\"500\" textAlign=\"right\">\n          Price\n        </Text>\n      ),\n      thConfig: {\n        w: '25%'\n      },\n      key: 'price24h',\n      render: ({ priceDisplay }: { priceDisplay: string }) => {\n        return (\n          <HStack gap=\"0\" justify=\"flex-end\">\n            <Text color=\"text_caption\">{priceDisplay}</Text>\n          </HStack>\n        )\n      }\n    },\n    !isApp && {\n      title: (\n        <Text fontSize=\"12px\" fontWeight=\"500\">\n          24H Change\n        </Text>\n      ),\n      thConfig: {\n        w: '25%'\n      },\n      key: 'vol24h',\n      render: ({ priceChange }: { priceChange: string }) => {\n        return (\n          <HStack gap=\"2px\" justify=\"flex-end\">\n            {priceChange !== '0%' && (\n              <Icon\n                fontSize=\"12px\"\n                xlinkHref=\"#icon-icon_arrow\"\n                transition=\"transform 0.5s\"\n                transform={priceChange?.includes('-') ? 'rotate(0deg)' : 'rotate(180deg)'}\n                svgFill={priceChange?.includes('-') ? 'primary_red' : 'primary_green'}\n              />\n            )}\n            <Text color={priceChange?.includes('-') ? 'primary_red' : priceChange === '0%' ? 'text_caption' : 'primary_green'}>\n              {priceChange?.includes('-') ? priceChange?.split('-')[1] : priceChange}\n            </Text>\n          </HStack>\n        )\n      }\n    }\n  ]\n}\nexport default ManagePool\n","import useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport {\n  HStack,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalHeader,\n  ModalOverlay,\n  Skeleton,\n  SkeletonCircle,\n  Text,\n  VStack\n} from '@chakra-ui/react'\nimport { lazy, Suspense } from 'react'\nconst PriceReference = lazy(() => import('../swap/PriceReference'))\n\ntype MarketDetailsModalProps = {\n  currentDeepBookPool: any\n  isOpen: boolean\n  onClose: (isManualClose?: boolean) => void\n  onCloseDetails: () => void\n}\nexport default function MarketDetailsModal({ currentDeepBookPool, isOpen, onClose, onCloseDetails }: MarketDetailsModalProps) {\n  // const { fetchTokenPrices } = useTokenPrice()\n  // const refreshMarketPrice = () => {\n  //   const list = []\n  //   if (currentDeepBookPool?.baseAssets) {\n  //     list.push(currentDeepBookPool?.baseAssets?.coin_type)\n  //   }\n  //   if (currentDeepBookPool?.quoteAssets) {\n  //     list.push(currentDeepBookPool?.quoteAssets?.coin_type)\n  //   }\n  //   if (list.length > 0) {\n  //     fetchTokenPrices(list)\n  //   }\n  // }\n\n  // useEffect(() => {\n  //   if (currentDeepBookPool) {\n  //     refreshMarketPrice()\n  //   }\n  // }, [currentDeepBookPool?.address])\n  const { isApp } = useWindowWidth()\n\n  return (\n    <Modal autoFocus={false} returnFocusOnClose={false} trapFocus={false} isOpen={isOpen} onClose={() => onClose(false)} isCentered>\n      <ModalOverlay />\n      <ModalContent w={{ base: '100%', lg: '416px' }}>\n        <ModalHeader>\n          {currentDeepBookPool?.baseAssets?.symbol}-{currentDeepBookPool?.quoteAssets?.symbol} Market Details\n        </ModalHeader>\n        <ModalCloseButton />\n        <ModalBody textAlign=\"center\" pb=\"20px\">\n          <VStack w=\"100%\" gap=\"0px\">\n            <HStack justify=\"space-between\" w=\"100%\">\n              <Text color=\"primary_gray\">Min Order Size</Text>\n              <Text color=\"text_caption\">\n                {currentDeepBookPool?.minSize} {currentDeepBookPool?.baseAssets?.symbol}\n              </Text>\n            </HStack>\n            <Suspense\n              fallback={\n                <VStack w=\"100%\" align=\"flex-start\" mt=\"20px\">\n                  <VStack w=\"100%\" align=\"flex-start\">\n                    <HStack w=\"100%\">\n                      <SkeletonCircle w=\"28px\" h=\"28px\" />\n                      <Skeleton h=\"16px\" w=\"60px\" borderRadius=\"4px\" />\n                    </HStack>\n                    <Skeleton h=\"16px\" w=\"120px\" borderRadius=\"4px\" />\n                  </VStack>\n                  <VStack w=\"100%\" align=\"flex-start\" mt=\"20px\">\n                    <HStack w=\"100%\">\n                      <SkeletonCircle w=\"28px\" h=\"28px\" />\n                      <Skeleton h=\"16px\" w=\"60px\" borderRadius=\"4px\" />\n                    </HStack>\n                    <Skeleton h=\"16px\" w=\"120px\" borderRadius=\"4px\" />\n                  </VStack>\n                </VStack>\n              }\n            >\n              <PriceReference\n                fromCoin={currentDeepBookPool?.baseAssets}\n                toCoin={currentDeepBookPool?.quoteAssets}\n                wrapStyle={{ gap: '16px' }}\n                titleStyle={{ height: 'auto', m: '16px 0 4px', sx: { '>p': { color: 'primary_gray' } } }}\n                itemStyle={{ bg: 'bg_secondary', p: '16px', borderRadius: '8px' }}\n                chartStyle={{ flex: isApp ? '0 0 150px' : '' }}\n                type=\"deepbook\"\n              />\n            </Suspense>\n          </VStack>\n        </ModalBody>\n      </ModalContent>\n    </Modal>\n  )\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport { Block } from '@cetus/design'\nimport useTokenPrice from '@cetus/hooks/src/useTokenPrice'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { Icon } from '@cetus/ui-kit'\nimport { formatNumber, symbolDataDisplayProcessing } from '@cetus/utils'\nimport { Box, HStack, Image, Skeleton, Text, VStack } from '@chakra-ui/react'\nimport { useMemo, useState } from 'react'\nimport ManagePool from './ManagePool'\nimport MarketDetailsModal from './MarketDetailsModal'\n\n// 价格变化组件\nconst PriceChange = ({ priceChange, isLoading }: { priceChange?: string; isLoading: boolean }) => {\n  if (isLoading) {\n    return <Skeleton height=\"12px\" width=\"50px\" />\n  }\n\n  if (!priceChange || priceChange === '0%') {\n    return <Text color=\"text_caption\">{priceChange}</Text>\n  }\n\n  const isNegative = priceChange.includes('-')\n  const displayValue = isNegative ? priceChange.split('-')[1] : priceChange\n\n  return (\n    <HStack gap=\"2px\" justify=\"flex-end\">\n      <Icon\n        fontSize=\"12px\"\n        xlinkHref=\"#icon-icon_arrow\"\n        transition=\"transform 0.5s\"\n        transform={isNegative ? 'rotate(0deg)' : 'rotate(180deg)'}\n        svgFill={isNegative ? 'primary_red' : 'primary_green'}\n      />\n      <Text color={isNegative ? 'primary_red' : 'primary_green'} fontSize={{ base: '12px', lg: '14px' }}>\n        {displayValue}\n      </Text>\n    </HStack>\n  )\n}\n\n// 价格显示组件\nconst PriceDisplay = ({\n  priceDisplay,\n  priceUsd,\n  symbol,\n  isLoading\n}: {\n  priceDisplay?: string\n  priceUsd?: string\n  symbol?: string\n  isLoading: boolean\n}) => {\n  return (\n    <VStack align=\"flex-start\" w={{ base: '50%', lg: 'auto' }}>\n      <Text fontSize=\"12px\" fontWeight=\"500\">\n        Price ({symbol || '--'})\n      </Text>\n      <HStack w={{ base: '100%', lg: 'auto' }}>\n        {isLoading ? (\n          <HStack flexDirection={{ base: 'column', lg: 'row' }} alignItems={{ base: 'flex-start', lg: 'center' }} gap={{ base: '4px', lg: '8px' }}>\n            <Skeleton height={{ base: '12px', lg: '12px' }} width={{ base: '80px', lg: '60px' }} />\n            <Skeleton height={{ base: '12px', lg: '12px' }} width={{ base: '100px', lg: '80px' }} />\n          </HStack>\n        ) : (\n          <HStack flexDirection={{ base: 'column', lg: 'row' }} alignItems={{ base: 'flex-start', lg: 'center' }} gap={{ base: '4px', lg: '8px' }}>\n            <Text fontSize={{ base: '12px', lg: '14px' }} fontWeight={{ base: '600', lg: '400' }} color=\"text_caption\">\n              {priceDisplay}\n            </Text>\n            <Text fontSize={{ base: '12px', lg: '14px' }}>{symbolDataDisplayProcessing(priceUsd)}</Text>\n          </HStack>\n        )}\n      </HStack>\n    </VStack>\n  )\n}\n\n// 成交量显示组件\nconst VolumeDisplay = ({\n  vol24hDisplay,\n  vol24hUsdDisplay,\n  symbol,\n  isLoading\n}: {\n  vol24hDisplay?: string\n  vol24hUsdDisplay?: string\n  symbol?: string\n  isLoading: boolean\n}) => {\n  return (\n    <VStack align=\"flex-start\" w={{ base: '50%', lg: 'auto' }}>\n      <Text fontSize=\"12px\" fontWeight={{ base: '500', lg: '400' }}>\n        24h Volume ({symbol || '--'})\n      </Text>\n      {isLoading ? (\n        <HStack flexDirection={{ base: 'column', lg: 'row' }} alignItems={{ base: 'flex-start', lg: 'center' }} gap={{ base: '4px', lg: '8px' }}>\n          <Skeleton height={{ base: '12px', lg: '12px' }} width={{ base: '70px', lg: '70px' }} />\n          <Skeleton height={{ base: '12px', lg: '12px' }} width={{ base: '60px', lg: '90px' }} />\n        </HStack>\n      ) : (\n        <HStack flexDirection={{ base: 'column', lg: 'row' }} alignItems={{ base: 'flex-start', lg: 'center' }} gap={{ base: '4px', lg: '8px' }}>\n          <Text color=\"text_caption\" fontSize={{ base: '12px', lg: '14px' }}>\n            {vol24hDisplay}\n          </Text>\n          <Text fontSize={{ base: '12px', lg: '14px' }}>{symbolDataDisplayProcessing(vol24hUsdDisplay)}</Text>\n        </HStack>\n      )}\n    </VStack>\n  )\n}\n\n// 24h High/Low 显示组件\nconst HighLowDisplay = ({\n  high,\n  low,\n  symbol,\n  isLoading,\n  isApp\n}: {\n  high?: number\n  low?: number\n  symbol?: string\n  isLoading: boolean\n  isApp?: boolean\n}) => {\n  return (\n    <VStack align=\"flex-start\" w={{ base: '50%', lg: 'auto' }}>\n      {!isApp ? (\n        <>\n          <HStack>\n            <Text fontSize=\"12px\" whiteSpace=\"nowrap\" fontWeight=\"500\" display={{ base: 'none', lg: 'block' }}>\n              24h High\n            </Text>\n            {isLoading ? (\n              <>\n                <Skeleton h=\"14px\" w=\"60px\" />\n                <Skeleton h=\"12px\" w=\"60px\" />\n              </>\n            ) : (\n              <HStack>\n                <Text fontSize=\"14px\" color=\"primary_green\">\n                  {formatNumber(high)}\n                </Text>\n                <Text fontSize=\"12px\">{symbol}</Text>\n              </HStack>\n            )}\n          </HStack>\n          <HStack>\n            <Text fontSize=\"12px\" whiteSpace=\"nowrap\" fontWeight=\"500\" display={{ base: 'none', lg: 'block' }}>\n              24h Low\n            </Text>\n            {isLoading ? (\n              <>\n                <Skeleton h=\"14px\" w=\"60px\" />\n                <Skeleton h=\"12px\" w=\"60px\" />\n              </>\n            ) : (\n              <HStack>\n                <Text fontSize=\"14px\" color=\"primary_red\">\n                  {formatNumber(low)}\n                </Text>\n                <Text fontSize=\"12px\">{symbol}</Text>\n              </HStack>\n            )}\n          </HStack>\n        </>\n      ) : (\n        <VStack alignItems=\"flex-start\">\n          <Text fontSize=\"12px\" fontWeight=\"400\" display={{ base: 'block', lg: 'none' }}>\n            24h High/Low\n          </Text>\n\n          <HStack>\n            {isLoading ? (\n              <Skeleton h=\"12px\" w=\"60px\" />\n            ) : (\n              <>\n                <Text fontSize=\"12px\" fontWeight=\"400\" color=\"primary_green\">\n                  {formatNumber(high)}\n                </Text>\n                <Text fontSize=\"12px\">{symbol}</Text>\n              </>\n            )}\n          </HStack>\n\n          <HStack>\n            {isLoading ? (\n              <Skeleton h=\"12px\" w=\"60px\" />\n            ) : (\n              <>\n                <Text fontSize=\"12px\" fontWeight=\"400\" color=\"primary_red\">\n                  {formatNumber(low)}\n                </Text>\n                <Text fontSize=\"12px\">{symbol}</Text>\n              </>\n            )}\n          </HStack>\n        </VStack>\n      )}\n      {/* <Text fontSize=\"12px\" fontWeight=\"500\" display={{ base: 'block', lg: 'none' }}>\n        24h High/Low\n      </Text>\n\n      <Text fontSize=\"12px\" whiteSpace=\"nowrap\" fontWeight=\"500\" display={{ base: 'none', lg: 'block' }}>\n        24h Low\n      </Text>\n      {isLoading ? (\n        <>\n          <Skeleton height={{ base: '14px', lg: '12px' }} width={{ base: '80px', lg: '60px' }} />\n          <Skeleton height={{ base: '14px', lg: '12px' }} width={{ base: '80px', lg: '60px' }} />\n        </>\n      ) : (\n        <>\n          <VStack display={{ base: 'block', lg: 'none' }}>\n            <HStack>\n              <Text fontSize=\"14px\" fontWeight=\"500\" color=\"primary_red\">\n                {formatNumber(low)}\n              </Text>\n              <Text fontSize=\"12px\">{symbol}</Text>\n            </HStack>\n          </VStack>\n          <VStack align=\"flex-start\" ml={{ base: '0', lg: '-16px' }} display={{ base: 'none', lg: 'block' }}>\n            <HStack>\n              <Text color=\"primary_green\">{formatNumber(high)}</Text>\n              <Text fontSize=\"12px\">{symbol}</Text>\n            </HStack>\n            <HStack>\n              <Text color=\"primary_red\">{formatNumber(low)}</Text>\n              <Text fontSize=\"12px\">{symbol}</Text>\n            </HStack>\n          </VStack>\n        </>\n      )} */}\n    </VStack>\n  )\n}\n\n// 详情按钮组件\nconst DetailsButton = ({\n  onClick,\n  isOpenCard,\n  setIsOpenCard,\n  isLoading,\n  isApp\n}: {\n  onClick: () => void\n  setIsOpenCard: (isOpen: boolean) => void\n  isOpenCard: boolean\n  isLoading: boolean\n  isApp: boolean\n}) => {\n  return (\n    <Skeleton isLoaded={!isLoading}>\n      <HStack cursor=\"pointer\" _hover={{ p: { color: 'text_caption' } }}>\n        <HStack onClick={onClick}>\n          <Text fontSize=\"12px\" color=\"primary_gray\">\n            <Box as=\"span\" display={{ base: 'none', lg: 'none' }}>\n              Details\n            </Box>\n            <Box as=\"span\" display={{ base: 'none', lg: 'inline' }}>\n              Market Details\n            </Box>\n          </Text>\n          <Image w={{ base: '24px', lg: '20px' }} h={{ base: '24px', lg: '20px' }} src=\"/images/deepbook/icon_details.png\" />\n        </HStack>\n        {isApp && (\n          <Icon\n            fontSize=\"12px\"\n            xlinkHref=\"#icon-icon_unfold\"\n            w=\"20px\"\n            h=\"20px\"\n            onClick={() => setIsOpenCard(!isOpenCard)}\n            transform={!isOpenCard ? 'rotate(180deg)' : 'rotate(0deg)'}\n            transition=\"transform 0.3s\"\n          />\n        )}\n      </HStack>\n    </Skeleton>\n  )\n}\n\nfunction TopDataBlock({ isOpenCard, setIsOpenCard }: { isOpenCard?: boolean; setIsOpenCard?: (isOpen: boolean) => void }) {\n  const { getTokenAmountValue } = useTokenPrice()\n  const { currentDeepBookPool, deepBookPoolLoading, deepbookPrice } = useDeepBookStore()\n  const { windowWidth, isApp } = useWindowWidth()\n\n  const vol24hUsdDisplay = getTokenAmountValue(currentDeepBookPool?.baseAssets?.coin_type, currentDeepBookPool?.vol24h)\n  const shouldHideHighLow = windowWidth < 1340\n  const isLoading = deepBookPoolLoading || !currentDeepBookPool?.quoteAssets?.symbol\n\n  const commonProps = {\n    symbol: currentDeepBookPool?.quoteAssets?.symbol,\n    isLoading\n  }\n  const [isOpenDetails, setIsOpenDetails] = useState(false)\n\n  // 计算 Spread\n  const spread = useMemo(() => {\n    if (deepbookPrice && deepbookPrice?.price && deepbookPrice?.poolId == currentDeepBookPool?.address) {\n      return currentDeepBookPool?.price\n    }\n    return ''\n  }, [currentDeepBookPool?.address, deepbookPrice])\n\n  const priceUsd = getTokenAmountValue(currentDeepBookPool?.quoteAssets?.coin_type, spread)\n\n  return (\n    <Block borderRadius=\"8px\" border=\"none\" maxHeight=\"100%\" h={{ base: 'auto', lg: '64px' }} p={{ base: '20px 16px 24px', lg: '0 16px' }}>\n      {/* H5 布局 */}\n      <VStack w=\"100%\" gap=\"20px\" display={{ base: 'flex', lg: 'none' }}>\n        <HStack w=\"100%\" justify=\"space-between\">\n          <ManagePool currentDeepBookPool={currentDeepBookPool} />\n          <DetailsButton\n            onClick={() => setIsOpenDetails(true)}\n            isOpenCard={isOpenCard}\n            setIsOpenCard={setIsOpenCard}\n            isLoading={isLoading}\n            isApp={isApp}\n          />\n        </HStack>\n\n        {isOpenCard && (\n          <HStack w=\"100%\">\n            <PriceDisplay priceDisplay={formatNumber(spread)} priceUsd={priceUsd} {...commonProps} />\n            <VStack align=\"flex-start\" flex=\"1\">\n              <Text fontSize=\"12px\" fontWeight=\"500\">\n                24h Change\n              </Text>\n              <PriceChange priceChange={currentDeepBookPool?.priceChange} isLoading={isLoading} />\n            </VStack>\n          </HStack>\n        )}\n\n        {isOpenCard && (\n          <HStack w=\"100%\" justify=\"space-between\" gap=\"16px\">\n            <VolumeDisplay vol24hDisplay={currentDeepBookPool?.vol24hDisplay} vol24hUsdDisplay={vol24hUsdDisplay} {...commonProps} />\n            <HighLowDisplay high={currentDeepBookPool?.high} low={currentDeepBookPool?.low} {...commonProps} isApp={isApp} />\n          </HStack>\n        )}\n      </VStack>\n\n      {/* PC 布局 */}\n      <HStack w=\"100%\" h=\"100%\" justify=\"space-between\" display={{ base: 'none', lg: 'flex' }}>\n        <HStack gap=\"28px\">\n          <ManagePool currentDeepBookPool={currentDeepBookPool} />\n          <Box h=\"32px\" w=\"1px\" bg=\"border\" />\n\n          <PriceDisplay priceDisplay={formatNumber(spread)} priceUsd={priceUsd} {...commonProps} />\n\n          <VStack align=\"flex-start\">\n            <Text fontSize=\"12px\" whiteSpace=\"nowrap\" fontWeight=\"500\">\n              24h Change\n            </Text>\n            <PriceChange priceChange={currentDeepBookPool?.priceChange} isLoading={isLoading} />\n          </VStack>\n\n          <VolumeDisplay vol24hDisplay={currentDeepBookPool?.vol24hDisplay} vol24hUsdDisplay={vol24hUsdDisplay} {...commonProps} />\n\n          {!shouldHideHighLow && <HighLowDisplay high={currentDeepBookPool?.high} low={currentDeepBookPool?.low} {...commonProps} />}\n        </HStack>\n\n        <DetailsButton\n          onClick={() => setIsOpenDetails(true)}\n          isOpenCard={isOpenCard}\n          setIsOpenCard={setIsOpenCard}\n          isLoading={isLoading}\n          isApp={isApp}\n        />\n      </HStack>\n\n      {isOpenDetails && (\n        <MarketDetailsModal\n          currentDeepBookPool={currentDeepBookPool}\n          isOpen={isOpenDetails}\n          onClose={() => setIsOpenDetails(false)}\n          onCloseDetails={() => setIsOpenDetails(false)}\n        />\n      )}\n    </Block>\n  )\n}\n\nexport default TopDataBlock\n","import useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport { d } from '@cetus/utils'\nimport { useEffect, useRef } from 'react'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function useGetDeepBookOpenOrders() {\n  const {\n    currentDeepBookPool,\n    getCurrentBalanceManagerInfo,\n    setDeepBookOpenOrders,\n    deepBookPools,\n    setOrderListLoading,\n    isCheckedAllMarkets,\n    setCancelOrderLoading\n  } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { getBalanceManagerInfo } = useGetDeepBookManagerBalance()\n  const isCheckedAllMarketsRef = useRef(false)\n  useEffect(() => {\n    isCheckedAllMarketsRef.current = isCheckedAllMarkets\n  }, [isCheckedAllMarkets])\n\n  const currentBalanceManagerInfo = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n  const currentBalanceManagerInfoRef = useRef()\n\n  useEffect(() => {\n    currentBalanceManagerInfoRef.current = currentBalanceManagerInfo\n  }, [currentBalanceManagerInfo])\n\n  const getDeepBookOpenOrders = async (poolInfo = currentDeepBookPool, isRefresh = true) => {\n    try {\n      if (isRefresh) {\n        setOrderListLoading(true)\n      }\n      let deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n      if (!deepBookAccount) {\n        const accounts = await deepBookSDK.DeepbookUtils.getBalanceManager(currentAccount?.address as string)\n        if (accounts?.length > 0) {\n          deepBookAccount = accounts?.[0]?.balanceManager\n        }\n      }\n      const pool = getRequestPool(poolInfo)\n      const list = await deepBookSDK.DeepbookUtils.getOpenOrder(pool, currentAccount?.address as string, deepBookAccount)\n      const result = list.map((item: any) => {\n        return wrapDeepBookOpenOrders(item, poolInfo)\n      })\n      if (deepBookAccount == currentBalanceManagerInfoRef.current) {\n        setDeepBookOpenOrders(result)\n        setOrderListLoading(false)\n      }\n      setCancelOrderLoading(false)\n\n      console.log('🚀🚀🚀 ~ useGetDeepBookOpenOrders.ts:18 ~ getDeepBookOpenOrders ~ list:', list)\n      return result\n    } catch (error) {\n      setOrderListLoading(false)\n      console.log('🚀🚀🚀 ~ useGetDeepBookOpenOrders.ts:29 ~ getDeepBookOpenOrders ~ error:', error)\n    }\n  }\n\n  const wrapDeepBookOpenOrders = (item: any, poolInfo: any) => {\n    const { order_id, isBid, price, quantity, filled_quantity } = item\n    const { baseAssets, quoteAssets, address } = poolInfo\n    const quoteDecimals = quoteAssets.decimals\n    const baseDecimals = baseAssets.decimals\n    const originalQuantity = d(quantity).div(Math.pow(10, baseDecimals)).toString()\n    const filledQuantity = d(filled_quantity).div(Math.pow(10, baseDecimals)).toString()\n    return {\n      orderId: order_id,\n      side: isBid ? 'Buy' : 'Sell',\n      baseAsset: poolInfo.baseAssets.symbol,\n      quoteAsset: poolInfo.quoteAssets.symbol,\n      price: d(price.toString())\n        .div(Math.pow(10, quoteDecimals - baseDecimals + 9))\n        .toString(),\n      originalQuantity,\n      filledQuantity,\n      baseAssets,\n      quoteAssets,\n      address\n    }\n  }\n\n  const getDeepBookAllOpenOrders = async (isRefresh = true) => {\n    try {\n      if (isRefresh) {\n        setOrderListLoading(true)\n      }\n      let deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n      console.log('🚀🚀🚀 ~ useGetDeepBookOpenOrders.ts:76 ~ getDeepBookAllOpenOrders ~ deepBookAccount:', deepBookAccount)\n      if (!deepBookAccount) {\n        const accounts = await getBalanceManagerInfo(currentAccount?.address as string)\n        if (accounts?.length > 0) {\n          deepBookAccount = accounts?.[0]?.balanceManager\n        }\n      }\n      const allList = []\n      for (let i = 0; i < deepBookPools.length; i++) {\n        const pool = deepBookPools[i]\n        const poolInfo = getRequestPool(pool)\n        const list = await deepBookSDK.DeepbookUtils.getOpenOrder(poolInfo, currentAccount?.address as string, deepBookAccount)\n        const result = list.map((item: any) => {\n          return wrapDeepBookOpenOrders(item, pool)\n        })\n        allList.push(...result)\n      }\n      console.log('🚀🚀🚀 ~ useGetDeepBookOpenOrders.ts:82 ~ getDeepBookAllOpenOrders ~ allList:', allList)\n      if (isCheckedAllMarketsRef.current && deepBookAccount == currentBalanceManagerInfoRef.current) {\n        setDeepBookOpenOrders(allList)\n        setOrderListLoading(false)\n      }\n    } catch (error) {\n      setOrderListLoading(false)\n      console.log('🚀🚀🚀 ~ useGetDeepBookOpenOrders.ts:85 ~ getDeepBookAllOpenOrders ~ error:', error)\n    }\n  }\n\n  return { getDeepBookOpenOrders, getDeepBookAllOpenOrders }\n}\n","import usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport { Decimal } from '@cetus/utils'\nimport { d } from '@cetusprotocol/deepbook-utils'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function useGetDeepBookEstFee() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n\n  const getEstimatedMaxFee = async (poolInfo: any, quantityInput: string, priceInput: string, orderType: 'bid' | 'ask') => {\n    if (d(poolInfo.takerFeeRate).lte(0)) return '0'\n    const pool = { ...getRequestPool(poolInfo), taker_fee: poolInfo.takerFeeRate }\n    const baseDecimals = poolInfo.baseAssets.decimals\n    const quoteDecimals = poolInfo.quoteAssets.decimals\n    const lotSize = d(poolInfo.lotSize).mul(10 ** baseDecimals)\n    const quantity = d(quantityInput)\n      .mul(10 ** baseDecimals)\n      .div(lotSize)\n      .toDP(0, Decimal.ROUND_HALF_UP)\n      .mul(lotSize)\n      .toString()\n    const price = d(priceInput)\n      .mul(10 ** (quoteDecimals - baseDecimals + 9))\n      .toString()\n\n    console.log('getEstimatedMaxFee params: ', { pool, quantity, price })\n    const res = await deepBookSDK.DeepbookUtils.estimatedMaxFee(pool, quantity, price, false, orderType == 'bid', false)\n    console.log('🚀🚀🚀 ~ useGetDeepBookEstFee.ts:29 ~ getEstimatedMaxFee ~ res:', res)\n    const feeCoinDecimals = orderType == 'bid' ? poolInfo.quoteAssets.decimals : poolInfo.baseAssets.decimals\n    return res?.quantity ? d(res?.quantity).div(Math.pow(10, feeCoinDecimals)).toString() : '0'\n  }\n\n  return { getEstimatedMaxFee }\n}\n","import useDeepBookStore from '@/store/deepbook'\n\nexport default function useGetOrderBestPrice() {\n  const { deepBookAskList, deepBookBidList } = useDeepBookStore()\n\n  const getOrderBestPrice = (orderType: 'bid' | 'ask') => {\n    const price = (orderType === 'bid' ? deepBookAskList[0]?.price : deepBookBidList[0]?.price) || '0'\n    return price\n  }\n\n  return { getOrderBestPrice }\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport { d } from '@cetusprotocol/deepbook-utils'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function useGetPlaceLimitOrderPayload() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { currentAccount } = useAccountStore()\n  const { getCurrentBalanceManagerInfo } = useDeepBookStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n  const { getBalanceManagerInfo } = useGetDeepBookManagerBalance()\n  const getPlaceLimitOrderPayload = async (\n    poolInfo: any,\n    priceInput: string,\n    quantityInput: string,\n    orderType: 'bid' | 'ask',\n    maxFee: string,\n    balanceManager?: string\n  ) => {\n    try {\n      // 将currentDeepBookPool转换为sdk需要的格式\n      const pool = getRequestPool(poolInfo)\n      const baseDecimals = poolInfo.baseAssets.decimals\n      let tx\n      let deepBookAccount = balanceManager ? balanceManager : getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n\n      if (!deepBookAccount) {\n        const accounts = await getBalanceManagerInfo(currentAccount?.address as string)\n        if (accounts?.length > 0) {\n          deepBookAccount = accounts?.[0]?.balanceManager\n        }\n      }\n\n      const lotSize = d(poolInfo.lotSize).mul(10 ** baseDecimals)\n      const quantity = d(quantityInput)\n        .mul(10 ** baseDecimals)\n        .div(lotSize)\n        .floor()\n        .mul(lotSize)\n        .toString()\n\n      if (deepBookAccount) {\n        tx = await deepBookSDK.DeepbookUtils.placeLimitOrder(\n          deepBookAccount,\n          pool,\n          priceInput,\n          quantity,\n          orderType,\n          d(maxFee)\n            .mul(Math.pow(10, orderType == 'bid' ? poolInfo.quoteAssets.decimals : poolInfo.baseAssets.decimals))\n            .toString(),\n          currentAccount?.address as string,\n          false\n        )\n      } else {\n        tx = await deepBookSDK.DeepbookUtils.createDepositThenPlaceLimitOrder(\n          pool,\n          priceInput,\n          quantity,\n          orderType,\n          d(maxFee)\n            .mul(Math.pow(10, orderType == 'bid' ? poolInfo.quoteAssets.decimals : poolInfo.baseAssets.decimals))\n            .toString(),\n          currentAccount?.address as string,\n          false\n        )\n      }\n\n      return { tx }\n    } catch (error) {\n      console.log('🚀 ~ file: useDeepbookV3.ts:365 ~ placeLimitOrder ~ error:', error)\n    }\n  }\n\n  return { getPlaceLimitOrderPayload }\n}\n","import useGlobalStore from '@/store/common/global'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport { d, fixD } from '@cetus/utils'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function usePlaceMarketOrder() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { getCurrentBalanceManagerInfo } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n  const { deepBookSlippage } = useGlobalStore()\n  const { getBalanceManagerInfo } = useGetDeepBookManagerBalance()\n  const getPlaceMarketOrderPayload = async (\n    poolInfo: any,\n    quantityInput: string,\n    orderType: 'bid' | 'ask',\n    slippageQuoteValue: string,\n    maxFee: string\n  ) => {\n    console.log('🚀🚀🚀 ~ usePlaceMarketOrder.ts:23 ~ getPlaceMarketOrderPayload ~ quantityInput:', { quantityInput, slippageQuoteValue })\n    try {\n      let deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string).balanceManager\n      if (!deepBookAccount) {\n        const accounts = await getBalanceManagerInfo(currentAccount?.address as string)\n        if (accounts?.length > 0) {\n          deepBookAccount = accounts?.[0]?.balanceManager\n        }\n      }\n\n      const pool = getRequestPool(poolInfo)\n      console.log('🚀🚀🚀 ~ usePlaceMarketOrder.ts:31 ~ getPlaceMarketOrderPayload ~ poolInfo:', poolInfo)\n      const baseDecimals = poolInfo.baseAssets.decimals\n      const quoteDecimals = poolInfo.quoteAssets.decimals\n      const lotSize = d(poolInfo.lotSize).mul(10 ** baseDecimals)\n      // 对数量按lotSize的倍数做四舍五入处理\n      const quantity = d(quantityInput)\n        .mul(10 ** baseDecimals)\n        .div(lotSize)\n        .floor()\n        .mul(lotSize)\n        .toString()\n\n      const isBid = orderType === 'bid'\n      const quoteQuantity = fixD(\n        d(slippageQuoteValue)\n          .mul(10 ** quoteDecimals)\n          .toString(),\n        0\n      )\n\n      let tx\n      if (deepBookAccount) {\n        tx = await deepBookSDK.DeepbookUtils.placeMarketOrder(\n          deepBookAccount,\n          pool,\n          quantity,\n          String(quoteQuantity),\n          isBid,\n          d(maxFee)\n            .mul(Math.pow(10, orderType == 'bid' ? poolInfo.quoteAssets.decimals : poolInfo.baseAssets.decimals))\n            .toString(),\n          currentAccount?.address as string,\n          false\n        )\n      } else {\n        tx = await deepBookSDK.DeepbookUtils.createDepositThenPlaceMarketOrder(\n          pool,\n          quantity,\n          orderType,\n          d(maxFee)\n            .mul(Math.pow(10, orderType == 'bid' ? poolInfo.quoteAssets.decimals : poolInfo.baseAssets.decimals))\n            .toString(),\n          currentAccount?.address as string,\n          false,\n          Number(deepBookSlippage) / 100\n        )\n      }\n\n      return { tx }\n    } catch (error) {\n      console.log('placeMarketOrder error: ', error)\n    }\n  }\n\n  return { getPlaceMarketOrderPayload }\n}\n","import useGlobalStore from '@/store/common/global'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useAccountBalance } from '@cetus/hooks'\nimport useTokenPrice from '@cetus/hooks/src/useTokenPrice'\nimport useTransactionModal from '@cetus/hooks/src/useTransactionModal'\nimport { useAccountStore } from '@cetus/stores'\nimport { BalanceChanges, CommonTypeInfo, TransactionStatusType } from '@cetus/types'\nimport { d } from '@cetus/utils'\nimport { useEffect, useMemo, useRef, useState } from 'react'\nimport useTransaction from '../common/useTransaction'\nimport useGetDeepBookBalance from './useGetDeepBookBalance'\nimport useGetDeepBookEstFee from './useGetDeepBookEstFee'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOpenOrders from './useGetDeepBookOpenOrders'\nimport useGetOrderBestPrice from './useGetOrderBestPrice'\nimport useGetPlaceLimitOrderPayload from './usePlaceLimitOrder'\nimport usePlaceMarketOrder from './usePlaceMarketOrder'\n\nexport default function useTradeCard() {\n  const {\n    currentDeepBookPool,\n    managerBalanceObjs,\n    getCurrentBalanceManagerInfo,\n    currentBalanceManagerInfoMap,\n    isCheckedAllMarkets,\n    deepBookAskList,\n    deepBookBidList\n  } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n  const { getTokenAmountValue } = useTokenPrice()\n  const { getEstimatedMaxFee } = useGetDeepBookEstFee()\n  const { getPlaceMarketOrderPayload } = usePlaceMarketOrder()\n  const { getOrderBestPrice } = useGetOrderBestPrice()\n  const { mevProtect, maxCapForGas, transactionMode, customGasPrice } = useGlobalStore()\n  const { deepBookSlippage } = useGlobalStore()\n  const { baseFreeBalance, quoteFreeBalance, baseBalance, quoteBalance, allBaseBalance, allQuoteBalance } = useGetDeepBookBalance()\n  const { transactionConfirmation } = useTransactionModal()\n  const { signAndExecuteTransaction } = useTransaction()\n  const { fetchAccountBalance } = useAccountBalance()\n  const { getManagerBalance } = useGetDeepBookManagerBalance()\n  const { getPlaceLimitOrderPayload } = useGetPlaceLimitOrderPayload()\n  const { getDeepBookOpenOrders, getDeepBookAllOpenOrders } = useGetDeepBookOpenOrders()\n\n  const [tradeType, setTradeType] = useState<'Buy' | 'Sell'>('Buy')\n  // const [orderType, setOrderType] = useState<'Market' | 'Limit'>('Market')\n  const [placeOrderLoading, setPlaceOrderLoading] = useState(false)\n  // const [price, setPlaceOrderPrice] = useState('')\n  const { placeOrderPrice, setPlaceOrderPrice, orderType, setOrderType, deepBookPrice } = useDeepBookStore()\n  const [amount, setAmount] = useState('')\n\n  const amoutRef = useRef('')\n  const placeOrderPriceRef = useRef('')\n\n  useEffect(() => {\n    amoutRef.current = amount\n    placeOrderPriceRef.current = placeOrderPrice\n  }, [amount, placeOrderPrice])\n\n  const currentBalanceManagerInfo = useMemo(() => {\n    if (currentAccount?.address) {\n      return getCurrentBalanceManagerInfo(currentAccount?.address)\n    }\n    return null\n  }, [currentAccount?.address, currentBalanceManagerInfoMap])\n\n  const isShowOrderVolumeError = useMemo(() => {\n    return d(amount || '0').gt('0') && d(amount).lt(currentDeepBookPool?.minSize)\n  }, [amount, currentDeepBookPool?.address])\n\n  useEffect(() => {\n    if (currentDeepBookPool?.address) {\n      setAmount('')\n      setPlaceOrderPrice(deepBookPrice?.price || currentDeepBookPool?.price)\n    }\n  }, [currentDeepBookPool?.address, orderType, deepBookPrice])\n\n  const estTotal = useMemo(() => {\n    if (amount && d(amount).gt('0')) {\n      return d(amount || '0')\n        .mul(placeOrderPrice || '0')\n        .toString()\n    }\n    return '--'\n  }, [amount, currentDeepBookPool?.price])\n\n  const marketTotal = useMemo(() => {\n    if (orderType == 'Market') {\n      const isBid = tradeType === 'Buy'\n      const price = getOrderBestPrice(isBid ? 'bid' : 'ask')\n      if (price && amount) {\n        const tValue = d(price).mul(amount)\n        return isBid ? tValue.add(tValue.mul(deepBookSlippage)).toString() : tValue.sub(tValue.mul(deepBookSlippage)).toString()\n      } else if (!amount) {\n        return '0'\n      } else {\n        return '--'\n      }\n    }\n  }, [orderType, amount, deepBookSlippage, tradeType, deepBookAskList, deepBookBidList])\n\n  const limitTotal = useMemo(() => {\n    if (placeOrderPrice !== '--') {\n      const result = d(amount || 0).mul(placeOrderPrice || 0)\n      const totalNum = result\n      return totalNum.toString()\n    } else {\n      if (!amount) {\n        return '0'\n      }\n      return '--'\n    }\n  }, [placeOrderPrice, amount])\n\n  const total = useMemo(() => {\n    return orderType === 'Market' ? marketTotal : limitTotal\n  }, [orderType, marketTotal, limitTotal, deepBookAskList, deepBookBidList])\n\n  const estTotalUsd = getTokenAmountValue(currentDeepBookPool?.quoteAssets?.coin_type, total)\n\n  const available = useMemo(() => {\n    return tradeType === 'Buy' ? allQuoteBalance : allBaseBalance\n  }, [tradeType, allBaseBalance, allQuoteBalance])\n\n  const [maxFee, setMaxFee] = useState('0')\n  const [maxFeeIsLoading, setMaxFeeIsLoading] = useState(false)\n\n  useEffect(() => {\n    if (d(placeOrderPrice || '0').gt(0) && d(amount || '0').gt(0)) {\n      setMaxFeeIsLoading(true)\n      getEstimatedMaxFee(currentDeepBookPool, amount, placeOrderPrice, tradeType === 'Buy' ? 'bid' : 'ask').then(res => {\n        if (amoutRef.current && placeOrderPriceRef.current) {\n          setMaxFee(res)\n        }\n        setMaxFeeIsLoading(false)\n      })\n    } else {\n      setMaxFee('0')\n    }\n  }, [placeOrderPrice, amount, tradeType, deepBookAskList, deepBookBidList])\n\n  const btnInfo = useMemo(() => {\n    if (isShowOrderVolumeError) {\n      return {\n        text: '',\n        disabled: true\n      }\n    }\n\n    if (!+placeOrderPrice) {\n      return {\n        text: '',\n        disabled: true\n      }\n    }\n\n    if (!+total) {\n      return {\n        text: '',\n        disabled: true\n      }\n    }\n\n    if (maxFeeIsLoading) {\n      return {\n        text: '',\n        disabled: true\n      }\n    }\n\n    // 确定需要检查的余额和金额\n    const isBuy = tradeType === 'Buy'\n    const feeAmount = maxFeeIsLoading ? 0 : maxFee\n    const requiredBalance = isBuy ? allQuoteBalance : allBaseBalance\n    const requiredAmount = isBuy ? d(total).add(d(feeAmount)).toString() : d(amount).add(d(feeAmount)).toString()\n\n    // 检查余额是否不足\n    if (requiredAmount !== '--' && d(requiredAmount).gt(requiredBalance ?? 0)) {\n      const insufficientSymbol = isBuy ? currentDeepBookPool?.quoteAssets?.symbol : currentDeepBookPool?.baseAssets?.symbol\n\n      return {\n        text: `Insufficient ${insufficientSymbol} balance`,\n        disabled: true\n      }\n    }\n\n    // Market 订单且金额为空的情况\n    if (orderType === 'Market' && (!amount || amount === '0' || !placeOrderPrice || placeOrderPrice === '0')) {\n      return {\n        text: '',\n        disabled: true\n      }\n    }\n    if (orderType === 'Limit' && (!placeOrderPrice || placeOrderPrice === '0' || !amount || amount === '0')) {\n      return {\n        text: '',\n        disabled: true\n      }\n    }\n\n    return {\n      text: '',\n      disabled: false\n    }\n  }, [\n    isShowOrderVolumeError,\n    estTotal,\n    amount,\n    tradeType,\n    orderType,\n    allQuoteBalance,\n    allBaseBalance,\n    currentDeepBookPool,\n    total,\n    maxFee,\n    maxFeeIsLoading\n  ])\n\n  const getOrders = () => {\n    if (isCheckedAllMarkets) {\n      getDeepBookAllOpenOrders()\n    } else {\n      getDeepBookOpenOrders()\n    }\n  }\n\n  const placeMarketOrder = async () => {\n    try {\n      setPlaceOrderLoading(true)\n      let toastInfo = {\n        getShowInfo: (status: TransactionStatusType, balanceChanges?: Record<string, BalanceChanges>) => {\n          const description = 'Creating order'\n          const info: CommonTypeInfo = {\n            modalDescriptionText: description,\n            toastTitleText: description\n          }\n          if (status === 'success') {\n            info.toastDescriptionContent = 'Order placed successfully'\n            info.modalDescriptionText = description\n            info.toastTitleText = 'Place order Successful'\n          }\n          return info\n        }\n      }\n      transactionConfirmation(toastInfo)\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:225 ~ placeMarketOrder ~ marketTotal:', marketTotal)\n      const { tx } = await getPlaceMarketOrderPayload(currentDeepBookPool, amount, tradeType === 'Buy' ? 'bid' : 'ask', marketTotal as string, maxFee)\n      const res = await signAndExecuteTransaction(tx, toastInfo, {\n        useMev: mevProtect,\n        useFastMode: transactionMode === 'Fast Mode',\n        maxCapForGas,\n        customGasPrice,\n        msafeParams: {}\n      })\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:135 ~ placeMarketOrder ~ res:', res)\n      if (res) {\n        // 重新拿数据\n        fetchAccountBalance()\n        setAmount('')\n        getManagerBalance(\n          [\n            { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n            { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n          ],\n          currentAccount?.address as string,\n          currentBalanceManagerInfo?.balanceManager\n        )\n        getOrders()\n      }\n      setPlaceOrderLoading(false)\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:90 ~ getPlaceMarketOrderPayload ~ error:', error)\n      setPlaceOrderLoading(false)\n    }\n  }\n\n  const placeLimitOrder = async () => {\n    try {\n      setPlaceOrderLoading(true)\n      let toastInfo = {\n        getShowInfo: (status: TransactionStatusType, balanceChanges?: Record<string, BalanceChanges>) => {\n          const description = 'Creating order'\n          const info: CommonTypeInfo = {\n            modalDescriptionText: description,\n            toastTitleText: description\n          }\n          if (status === 'success') {\n            info.toastDescriptionContent = 'Order placed successfully'\n            info.modalDescriptionText = description\n            info.toastTitleText = 'Place order Successful'\n          }\n          return info\n        }\n      }\n      transactionConfirmation(toastInfo)\n      const { tx } = await getPlaceLimitOrderPayload(currentDeepBookPool, placeOrderPrice, amount, tradeType === 'Buy' ? 'bid' : 'ask', maxFee)\n      const res = await signAndExecuteTransaction(tx, toastInfo, {\n        useMev: mevProtect,\n        useFastMode: transactionMode === 'Fast Mode',\n        maxCapForGas,\n        customGasPrice,\n        msafeParams: {}\n      })\n\n      if (res) {\n        setPlaceOrderLoading(false)\n        // 重新拿数据\n        fetchAccountBalance()\n        setAmount('')\n        getManagerBalance(\n          [\n            { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n            { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n          ],\n          currentAccount?.address as string,\n          currentBalanceManagerInfo?.balanceManager\n        )\n        getOrders()\n      }\n      setPlaceOrderLoading(false)\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:173 ~ placeLimitOrder ~ error:', error)\n    }\n  }\n\n  function getDecimalPlaces(num: number): number {\n    const decimalPart = num.toString().split('.')[1]\n    if (!decimalPart) return 0\n    return decimalPart.length > 1 ? decimalPart.length : 0\n  }\n\n  const tickSizeUnit = useMemo(() => {\n    const tickSize = currentDeepBookPool?.tickSize\n    if (tickSize) {\n      const unit = getDecimalPlaces(tickSize)\n      return unit\n    }\n    return 0\n  }, [currentDeepBookPool?.address])\n\n  const minSizeUnit = useMemo(() => {\n    const minSize = currentDeepBookPool?.minSize\n    if (minSize) {\n      const unit = getDecimalPlaces(minSize)\n      return unit\n    }\n    return 0\n  }, [currentDeepBookPool?.address])\n\n  return {\n    currentDeepBookPool,\n    tradeType,\n    setTradeType,\n    orderType,\n    setOrderType,\n    price: placeOrderPrice,\n    setPrice: setPlaceOrderPrice,\n    amount,\n    setAmount,\n    isShowOrderVolumeError,\n    estTotal,\n    estTotalUsd,\n    available,\n    maxFee,\n    maxFeeIsLoading,\n    btnInfo,\n    getPlaceMarketOrderPayload,\n    placeMarketOrder,\n    baseFreeBalance,\n    quoteFreeBalance,\n    placeOrderLoading,\n    placeLimitOrder,\n    total,\n    tickSizeUnit,\n    minSizeUnit\n  }\n}\n","import { NumericFormatInput } from '@cetus/ui-kit'\nimport { HStack, Input, Text, VStack } from '@chakra-ui/react'\nimport { useRef, useState } from 'react'\nimport { InputBlockProps } from './InputBlockGroup'\n\nexport default function InputBlock(props: InputBlockProps) {\n  const { title, symbol, value, onChange, isMarket, decimals } = props\n  const fromRef = useRef<HTMLInputElement | null>(null)\n  const [focused, setFocused] = useState<boolean>(false)\n\n  return (\n    <VStack\n      w=\"100%\"\n      ref={fromRef}\n      p=\"12px\"\n      border=\"1px solid\"\n      borderRadius=\"12px\"\n      bg=\"bg_secondary\"\n      alignItems=\"flex-start\"\n      gap=\"0px\"\n      position=\"relative\"\n      zIndex=\"5\"\n      onFocus={() => {\n        setFocused(true)\n      }}\n      onBlur={() => {\n        setFocused(false)\n      }}\n      borderColor={focused ? 'token_active_border' : 'border'}\n      boxShadow={focused ? '0px 0px 6px 0px #0067AD' : ''}\n    >\n      <Text fontSize=\"12px\" fontWeight=\"500\">\n        {title}\n      </Text>\n      <HStack w=\"100%\" alignItems=\"flex-start\" pt=\"8px\">\n        {isMarket ? (\n          <Input value=\"Market\" disabled placeholder=\"Market\" color=\"text_caption !important\" fontSize=\"18px\" fontWeight=\"500\" h=\"18px\" />\n        ) : (\n          <NumericFormatInput\n            value={value}\n            onChange={onChange}\n            decimals={decimals}\n            placeholder=\"0.0\"\n            style={{\n              width: 'calc(100% - 8px)',\n              background: 'none',\n              whiteSpace: 'nowrap',\n              opacity: 1,\n              outline: 'none',\n              color: 'var(--chakra-colors-text_caption)',\n              fontSize: '18px',\n              height: '18px',\n              lineHeight: '18px',\n              touchAction: 'manipulation',\n              transition: 'all 0.3s',\n              fontWeight: '500'\n            }}\n          />\n        )}\n\n        <Text mt=\"-8px\" fontWeight=\"500\">\n          {symbol}\n        </Text>\n      </HStack>\n    </VStack>\n  )\n}\n","import { formatNumber } from '@cetus/utils'\nimport { Text, VStack } from '@chakra-ui/react'\nimport InputBlock from './InputBlock'\n\nexport type InputBlockProps = {\n  title: string\n  symbol: string\n  value: string\n  onChange: (value: string) => void\n  isMarket?: boolean\n  decimals?: number\n}\n\ntype InputBlockGroupProps = {\n  from: InputBlockProps\n  to: InputBlockProps\n  isShowOrderVolumeError?: boolean\n  minSize?: string\n  isMarket?: boolean\n}\n\nconst OrderVolumeError = ({ minSize, baseSymbol }: { minSize: string; baseSymbol: string }) => {\n  return (\n    <VStack w=\"100%\" h=\"44px\" borderRadius=\"12px\" bg=\"primary_yellow_opacity.10\" mt=\"-30px\" justifyContent=\"flex-end\" pb=\"4px\">\n      <Text fontSize=\"12px\" color=\"primary_yellow\">\n        Order volume must be greater than {formatNumber(minSize)} {baseSymbol}\n      </Text>\n    </VStack>\n  )\n}\nexport default function InputBlockGroup(props: InputBlockGroupProps) {\n  const { from, to, isShowOrderVolumeError, minSize, isMarket } = props\n  return (\n    <VStack w=\"100%\" borderRadius=\"8px\" bg=\"bg_secondary\" position=\"relative\" zIndex=\"5\">\n      <InputBlock {...from} isMarket={isMarket} />\n      <InputBlock {...to} />\n      {isShowOrderVolumeError && <OrderVolumeError minSize={minSize as string} baseSymbol={to.symbol} />}\n    </VStack>\n  )\n}\n","import useGetDeepBookManagerBalance from '@/hooks/deepbook/useGetDeepBookManagerBalance'\nimport useGetDeepBookOpenOrders from '@/hooks/deepbook/useGetDeepBookOpenOrders'\nimport useTradeCard from '@/hooks/deepbook/useTradeCard'\nimport useDeepBookStore from '@/store/deepbook'\nimport { SelectTab } from '@cetus/design'\nimport { useAccountBalance } from '@cetus/hooks'\nimport { useAccountStore } from '@cetus/stores'\nimport { HTextLabelBox, Icon, RefreshButton } from '@cetus/ui-kit'\nimport { Decimal, formatNumber, formatNumberWithKMB } from '@cetus/utils'\nimport { Button, HStack, Skeleton, Text, VStack } from '@chakra-ui/react'\nimport Slippage from '../common/Slippage'\nimport InputBlockGroup from './InputBlockGroup'\n\nconst tradeBlockTabList = [\n  {\n    label: 'Buy'\n  },\n  {\n    label: 'Sell'\n  }\n]\nconst TradeBlockTab = ({ currentTab, setCurrentTab }: { currentTab: 'Buy' | 'Sell'; setCurrentTab: (tab: 'Buy' | 'Sell') => void }) => {\n  return (\n    <SelectTab<any, any>\n      type=\"outlineTab\"\n      tabList={tradeBlockTabList}\n      currentTab={currentTab}\n      handleChangeTab={tab => setCurrentTab(tab?.label)}\n      wrapStyle={{\n        w: '100%',\n        h: '40px',\n        p: '4px',\n        border: '1px solid',\n        borderColor: 'border',\n        borderRadius: '8px',\n        gap: '4px',\n        zIndex: '99'\n      }}\n      itemStyle={{\n        w: '50%',\n        h: '100%',\n        p: '4px 8px',\n        borderRadius: '4px',\n        gap: '4px',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: '14px',\n        fontWeight: '500',\n        // 使用 Chakra UI 的 sx 支持条件样式\n        sx: {\n          '&[data-active=\"true\"]': {\n            backgroundColor: currentTab == 'Buy' ? 'primary_green_opacity.10' : 'primary_red_opacity.10',\n            color: currentTab == 'Buy' ? 'primary_green' : 'primary_red'\n          }\n        }\n      }}\n      selectTabItemTextStyle={{\n        color: 'primary_gray',\n        sx: {\n          '&[data-active=\"true\"]': {\n            color: currentTab == 'Buy' ? 'primary_green' : 'primary_red'\n          }\n        }\n      }}\n    />\n  )\n}\n\nconst orderBlockTabList = [\n  {\n    label: 'Market'\n  },\n  {\n    label: 'Limit'\n  }\n]\nconst OrderBlockTab = ({ currentTab, setCurrentTab }: { currentTab: 'Market' | 'Limit'; setCurrentTab: (tab: 'Market' | 'Limit') => void }) => {\n  const { currentDeepBookPool, isCheckedAllMarkets } = useDeepBookStore()\n  const { getManagerBalance } = useGetDeepBookManagerBalance()\n  const { currentAccount } = useAccountStore()\n  const { getCurrentBalanceManagerInfo } = useDeepBookStore()\n  const currentBalanceManagerInfo = getCurrentBalanceManagerInfo(currentAccount?.address as string)\n  const { fetchAccountBalance } = useAccountBalance()\n  const { getDeepBookAllOpenOrders, getDeepBookOpenOrders } = useGetDeepBookOpenOrders()\n\n  const handleRefresh = () => {\n    getManagerBalance(\n      [\n        { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n        { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n      ],\n      currentAccount?.address as string,\n      currentBalanceManagerInfo?.balanceManager\n    )\n    fetchAccountBalance()\n    if (isCheckedAllMarkets) {\n      getDeepBookAllOpenOrders()\n    } else {\n      getDeepBookOpenOrders(currentDeepBookPool)\n    }\n  }\n  return (\n    <HStack w=\"100%\" borderRadius=\"8px\" bg=\"bg_secondary\" justifyContent=\"space-between\">\n      <SelectTab<any, any>\n        type=\"borderTab\"\n        tabList={orderBlockTabList}\n        currentTab={currentTab}\n        handleChangeTab={tab => setCurrentTab(tab?.label)}\n        wrapStyle={{\n          w: '132px',\n          h: '40px',\n          border: 'none',\n          gap: '32px',\n          pl: '4px'\n        }}\n        itemStyle={{\n          w: '50%',\n          h: '100%',\n          borderRadius: '4px',\n          gap: '4px',\n          justifyContent: 'center',\n          alignItems: 'center',\n          fontSize: '14px',\n          fontWeight: '500'\n        }}\n        selectTabItemTextStyle={{\n          color: 'primary_gray'\n        }}\n      />\n      <HStack>\n        {currentTab == 'Market' && <Slippage slippageType=\"deepbook\" />}\n        <RefreshButton w=\"28px\" h=\"28px\" innerStyle={{ w: '26px', h: '26px', bg: 'none', fontSize: '12px' }} handleRefresh={handleRefresh} />\n      </HStack>\n    </HStack>\n  )\n}\n\nconst OrderInfoBlock = ({\n  currentOrderType,\n  isShowOrderVolumeError,\n  estTotal,\n  currentDeepBookPool,\n  estTotalUsd,\n  available,\n  maxFee,\n  maxFeeIsLoading,\n  tradeType,\n  total,\n  isLoading\n}: {\n  currentOrderType: 'Market' | 'Limit'\n  isShowOrderVolumeError: boolean\n  estTotal: string\n  currentDeepBookPool: any\n  estTotalUsd: string\n  available: string\n  maxFee: string\n  maxFeeIsLoading: boolean\n  tradeType: 'Buy' | 'Sell'\n  total: string\n  isLoading: boolean\n}) => {\n  return (\n    <VStack w=\"100%\" p={isShowOrderVolumeError ? '0px 0px 8px' : '8px 0px'} gap=\"12px\">\n      <HTextLabelBox\n        label={currentOrderType == 'Limit' ? 'Total' : 'Est.Total'}\n        value={\n          total === '--' ? (\n            <Text color=\"text_caption\">--</Text>\n          ) : (\n            <HStack whiteSpace=\"nowrap\" w=\"100%\">\n              <Text color=\"text_caption\">\n                {formatNumber(total)} {currentDeepBookPool?.quoteAssets?.symbol}\n              </Text>\n              <Text>${formatNumberWithKMB(estTotalUsd)}</Text>\n            </HStack>\n          )\n        }\n        labelStyle={{ fontSize: '14px' }}\n        valueStyle={{ fontSize: '14px', maxW: '100%' }}\n        wrapStyle={{ h: '20px', lineHeight: '20px' }}\n      />\n\n      <HTextLabelBox\n        label=\"Available\"\n        value={\n          isLoading ? (\n            <Skeleton />\n          ) : (\n            `${formatNumber(available, undefined, undefined, Decimal.ROUND_DOWN)} ${tradeType === 'Buy' ? currentDeepBookPool?.quoteAssets?.symbol : currentDeepBookPool?.baseAssets?.symbol}`\n          )\n        }\n        labelStyle={{ fontSize: '14px' }}\n        valueStyle={{ fontSize: '14px' }}\n        wrapStyle={{ h: '20px', lineHeight: '20px' }}\n      />\n      <HTextLabelBox\n        label={\n          <HStack gap=\"2px\">\n            <Text>Fee</Text>\n            <Icon xlinkHref=\"#icon-icon_tips\" svgW=\"20px\" svgH=\"20px\" />\n          </HStack>\n        }\n        labelStyle={{\n          textDecoration: 'unset'\n        }}\n        value={\n          maxFeeIsLoading || isLoading ? (\n            <Skeleton />\n          ) : (\n            `${maxFee} ${tradeType === 'Buy' ? currentDeepBookPool?.quoteAssets?.symbol : currentDeepBookPool?.baseAssets?.symbol}`\n          )\n        }\n        valueStyle={{ fontSize: '14px' }}\n        leftTooltip=\"Max fee estimated\"\n        wrapStyle={{ h: '20px', lineHeight: '20px' }}\n      />\n    </VStack>\n  )\n}\n\nfunction TradeBlock() {\n  const {\n    tradeType,\n    setTradeType,\n    orderType,\n    setOrderType,\n    price,\n    setPrice,\n    amount,\n    setAmount,\n    currentDeepBookPool,\n    isShowOrderVolumeError,\n    estTotal,\n    estTotalUsd,\n    available,\n    maxFee,\n    maxFeeIsLoading,\n    btnInfo,\n    placeMarketOrder,\n    placeOrderLoading,\n    placeLimitOrder,\n    total,\n    tickSizeUnit,\n    minSizeUnit\n  } = useTradeCard()\n  const { currentAccount, onWalletModal } = useAccountStore()\n\n  const isLoading = !currentDeepBookPool?.baseAssets?.symbol || !currentDeepBookPool?.quoteAssets?.symbol\n\n  return (\n    <VStack w=\"100%\" bg=\"bg_secondary\" p=\"16px\" borderRadius=\"12px\">\n      <TradeBlockTab currentTab={tradeType} setCurrentTab={setTradeType} />\n      <OrderBlockTab currentTab={orderType} setCurrentTab={setOrderType} />\n      <InputBlockGroup\n        from={{ title: 'Price', symbol: currentDeepBookPool?.quoteAssets?.symbol, value: price, onChange: e => setPrice(e), decimals: tickSizeUnit }}\n        to={{ title: 'Amount', symbol: currentDeepBookPool?.baseAssets?.symbol, value: amount, onChange: e => setAmount(e), decimals: minSizeUnit }}\n        isShowOrderVolumeError={isShowOrderVolumeError}\n        minSize={currentDeepBookPool?.minSize}\n        isMarket={orderType == 'Market'}\n      />\n      <OrderInfoBlock\n        currentOrderType={orderType}\n        isShowOrderVolumeError={isShowOrderVolumeError}\n        estTotal={estTotal}\n        currentDeepBookPool={currentDeepBookPool}\n        estTotalUsd={estTotalUsd}\n        available={available}\n        maxFee={maxFee}\n        maxFeeIsLoading={maxFeeIsLoading}\n        tradeType={tradeType}\n        total={total}\n        isLoading={isLoading}\n      />\n      {currentAccount?.address ? (\n        <Button\n          w=\"100%\"\n          fontSize=\"16px\"\n          fontWeight=\"500\"\n          isDisabled={btnInfo?.disabled}\n          onClick={orderType == 'Market' ? placeMarketOrder : placeLimitOrder}\n          isLoading={placeOrderLoading}\n        >\n          {btnInfo?.text || `Place ${tradeType} Order`}\n        </Button>\n      ) : (\n        <Button w=\"100%\" fontSize=\"16px\" fontWeight=\"500\" onClick={() => onWalletModal(true)}>\n          Connect Wallet\n        </Button>\n      )}\n    </VStack>\n  )\n}\n\nexport default TradeBlock\n","import useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function useGetCancelOrderPayload() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n  const { getCurrentBalanceManagerInfo } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n\n  const getCancelOrderPayload = async (poolInfo: any, orderId: string) => {\n    console.log('🚀🚀🚀 ~ useGetCancelOrderPayload.ts:13 ~ getCancelOrderPayload ~ poolInfo:', poolInfo)\n    console.log('🚀🚀🚀 ~ useGetCancelOrderPayload.ts:13 ~ getCancelOrderPayload ~ orderId:', orderId)\n    const pool = getRequestPool(poolInfo)\n    console.log('🚀🚀🚀 ~ useGetCancelOrderPayload.ts:15 ~ getCancelOrderPayload ~ pool:', pool)\n    const deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n    const payload = await deepBookSDK.DeepbookUtils.cancelOrders(\n      [\n        {\n          orderId,\n          poolInfo: pool\n        }\n      ],\n      deepBookAccount\n    )\n    return payload\n  }\n\n  const getcancellAllOrderPayload = async (orderList: any[]) => {\n    const list = orderList.map((item: any) => {\n      return {\n        orderId: item.orderId,\n        poolInfo: getRequestPool(item)\n      }\n    })\n    const deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n    const payload = await deepBookSDK.DeepbookUtils.cancelOrders(list, deepBookAccount)\n    return payload\n  }\n\n  return { getCancelOrderPayload, getcancellAllOrderPayload }\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function useGetDeepBookClaimSettlePayload() {\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { getCurrentBalanceManagerInfo, currentDeepBookPool } = useDeepBookStore()\n  const { currentAccount } = useAccountStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n  const { getBalanceManagerInfo } = useGetDeepBookManagerBalance()\n  const getClaimSettlePayload = async () => {\n    let deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n    if (!deepBookAccount) {\n      const accounts = await getBalanceManagerInfo(currentAccount?.address as string)\n      if (accounts?.length > 0) {\n        deepBookAccount = accounts?.[0]?.balanceManager\n      }\n    }\n    const pool = getRequestPool(currentDeepBookPool)\n\n    return deepBookSDK.DeepbookUtils.withdrawSettledAmounts({\n      poolInfo: pool,\n      balanceManager: deepBookAccount\n    })\n  }\n  return { getClaimSettlePayload }\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport { d } from '@cetus/utils'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOrderBook from './useGetDeepBookOrderBook'\n\nexport default function useGetDeepBookSettleList() {\n  const { currentAccount } = useAccountStore()\n  const { setDeepBookSettleList, setDeepBookSettleListLoading, getCurrentBalanceManagerInfo, currentDeepBookPool } = useDeepBookStore()\n  const { getRequestPool } = useGetDeepBookOrderBook()\n  const { deepBookSDK } = usePeripherySDKStore()\n  const { getBalanceManagerInfo } = useGetDeepBookManagerBalance()\n  const getSettleList = async () => {\n    setDeepBookSettleListLoading(true)\n    try {\n      let deepBookAccount = getCurrentBalanceManagerInfo(currentAccount?.address as string)?.balanceManager\n      const pools = getRequestPool(currentDeepBookPool)\n\n      if (!deepBookAccount) {\n        const accounts = await getBalanceManagerInfo(currentAccount?.address as string)\n        if (accounts?.length > 0) {\n          deepBookAccount = accounts?.[0]?.balanceManager\n        }\n      }\n\n      const res = await deepBookSDK.DeepbookUtils.getAccount(deepBookAccount, [pools])\n      if (!res) {\n        setDeepBookSettleList([])\n        setDeepBookSettleListLoading(false)\n        return\n      }\n      console.log('🚀🚀🚀 ~ useGetDeepBookSettleList.ts:27 ~ getSettleList ~ res:', res)\n\n      const list = res?.map((item: any) => {\n        return wrapSettle(item)\n      })\n\n      setDeepBookSettleList(list)\n      setDeepBookSettleListLoading(false)\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useGetDeepBookSettleList.ts:58 ~ getSettleList ~ error:', error)\n      setDeepBookSettleList([])\n      setDeepBookSettleListLoading(false)\n    }\n  }\n\n  const wrapSettle = (item: any) => {\n    const { baseAssets, quoteAssets, address } = currentDeepBookPool\n    const baseSettle = d(item?.settled_balances?.base)\n      .div(10 ** baseAssets?.decimals)\n      .toString()\n    const quoteSettle = d(item?.settled_balances?.quote)\n      .div(10 ** quoteAssets?.decimals)\n      .toString()\n    const deepSettle = d(item?.settled_balances?.deep)\n      .div(10 ** 6)\n      .toString()\n    const canClaim = d(baseSettle).gt(0) || d(quoteSettle).gt(0)\n    return {\n      address,\n      baseAssets,\n      quoteAssets,\n      baseSettle,\n      quoteSettle,\n      deepSettle,\n      canClaim\n    }\n  }\n  return { getSettleList }\n}\n","import useGlobalStore from '@/store/common/global'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useAccountBalance } from '@cetus/hooks'\nimport useTransactionModal from '@cetus/hooks/src/useTransactionModal'\nimport { useAccountStore } from '@cetus/stores'\nimport { BalanceChanges, CommonTypeInfo, TransactionStatusType } from '@cetus/types'\nimport { useMemo } from 'react'\nimport useTransaction from '../common/useTransaction'\nimport useGetCancelOrderPayload from './useGetCancelOrderPayload'\nimport useGetDeepBookClaimSettlePayload from './useGetDeepBookClaimSettlePayload'\nimport useGetDeepBookManagerBalance from './useGetDeepBookManagerBalance'\nimport useGetDeepBookOpenOrders from './useGetDeepBookOpenOrders'\nimport useGetDeepBookSettleList from './useGetDeepBookSettleList'\n\nexport default function useDeepBookOrderActions() {\n  const { getCancelOrderPayload, getcancellAllOrderPayload } = useGetCancelOrderPayload()\n  const { currentDeepBookPool, cancelOrderLoading, setCancelOrderLoading, deepBookOpenOrders, setDeepBookOpenOrders, setClaimSettleLoading } =\n    useDeepBookStore()\n  const { transactionConfirmation } = useTransactionModal()\n  const { signAndExecuteTransaction } = useTransaction()\n  const { mevProtect, maxCapForGas, transactionMode, customGasPrice } = useGlobalStore()\n  const { fetchAccountBalance } = useAccountBalance()\n  const { getManagerBalance } = useGetDeepBookManagerBalance()\n  const { currentAccount } = useAccountStore()\n  const { getCurrentBalanceManagerInfo, currentBalanceManagerInfoMap } = useDeepBookStore()\n  const { getDeepBookOpenOrders } = useGetDeepBookOpenOrders()\n  const { getClaimSettlePayload } = useGetDeepBookClaimSettlePayload()\n  const { getSettleList } = useGetDeepBookSettleList()\n\n  const currentBalanceManagerInfo = useMemo(() => {\n    if (currentAccount?.address) {\n      return getCurrentBalanceManagerInfo(currentAccount?.address)\n    }\n    return null\n  }, [currentAccount?.address, currentBalanceManagerInfoMap])\n\n  const cancelOrder = async (poolInfo: any, orderId: string) => {\n    try {\n      setCancelOrderLoading(true)\n      let toastInfo = {\n        getShowInfo: (status: TransactionStatusType, balanceChanges?: Record<string, BalanceChanges>) => {\n          const description = 'Canceling order'\n          const info: CommonTypeInfo = {\n            modalDescriptionText: description,\n            toastTitleText: description\n          }\n          if (status === 'success') {\n            info.toastDescriptionContent = 'Order canceled successfully'\n            info.modalDescriptionText = description\n            info.toastTitleText = 'Cancel order Successful'\n          }\n          return info\n        }\n      }\n      transactionConfirmation(toastInfo)\n      const tx = await getCancelOrderPayload(poolInfo, orderId)\n      const res = await signAndExecuteTransaction(tx, toastInfo, {\n        useMev: mevProtect,\n        useFastMode: transactionMode === 'Fast Mode',\n        maxCapForGas,\n        customGasPrice,\n        msafeParams: {}\n      })\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:135 ~ placeMarketOrder ~ res:', res)\n      if (res) {\n        // 重新拿数据\n        fetchAccountBalance()\n        getManagerBalance(\n          [\n            { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n            { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n          ],\n          currentAccount?.address as string,\n          currentBalanceManagerInfo?.balanceManager\n        )\n      }\n      setTimeout(() => {\n        getDeepBookOpenOrders(poolInfo)\n      }, 2000)\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useOrderActions.ts:10 ~ cancelOrder ~ error:', error)\n    }\n  }\n\n  const cancelAllOrder = async (orderList = deepBookOpenOrders) => {\n    try {\n      setCancelOrderLoading(true)\n      let toastInfo = {\n        getShowInfo: (status: TransactionStatusType, balanceChanges?: Record<string, BalanceChanges>) => {\n          const description = 'Canceling All Order'\n          const info: CommonTypeInfo = {\n            modalDescriptionText: description,\n            toastTitleText: description\n          }\n          if (status === 'success') {\n            info.toastDescriptionContent = 'Order canceled successfully'\n            info.modalDescriptionText = description\n            info.toastTitleText = 'Cancel order Successful'\n          }\n          return info\n        }\n      }\n      transactionConfirmation(toastInfo)\n      const tx = await getcancellAllOrderPayload(orderList)\n      const res = await signAndExecuteTransaction(tx, toastInfo, {\n        useMev: mevProtect,\n        useFastMode: transactionMode === 'Fast Mode',\n        maxCapForGas,\n        customGasPrice,\n        msafeParams: {}\n      })\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:135 ~ placeMarketOrder ~ res:', res)\n      if (res) {\n        // 重新拿数据\n        fetchAccountBalance()\n        getManagerBalance(\n          [\n            { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n            { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n          ],\n          currentAccount?.address as string,\n          currentBalanceManagerInfo?.balanceManager\n        )\n        setDeepBookOpenOrders([])\n      }\n\n      setTimeout(() => {\n        setCancelOrderLoading(false)\n      }, 2000)\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useOrderActions.ts:10 ~ cancelOrder ~ error:', error)\n    }\n  }\n\n  const claimSettled = async () => {\n    try {\n      setClaimSettleLoading(true)\n      let toastInfo = {\n        getShowInfo: (status: TransactionStatusType, balanceChanges?: Record<string, BalanceChanges>) => {\n          const description = 'Claiming settled'\n          const info: CommonTypeInfo = {\n            modalDescriptionText: description,\n            toastTitleText: description\n          }\n          if (status === 'success') {\n            info.toastDescriptionContent = 'Claimed settled successfully'\n            info.modalDescriptionText = description\n            info.toastTitleText = 'Claim settled Successful'\n          }\n          return info\n        }\n      }\n      transactionConfirmation(toastInfo)\n      const tx = await getClaimSettlePayload()\n      const res = await signAndExecuteTransaction(tx, toastInfo, {\n        useMev: mevProtect,\n        useFastMode: transactionMode === 'Fast Mode',\n        maxCapForGas,\n        customGasPrice,\n        msafeParams: {}\n      })\n      console.log('🚀🚀🚀 ~ useTradeCard.ts:135 ~ placeMarketOrder ~ res:', res)\n      if (res) {\n        // 重新拿数据\n        fetchAccountBalance()\n        getManagerBalance(\n          [\n            { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n            { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n          ],\n          currentAccount?.address as string,\n          currentBalanceManagerInfo?.balanceManager\n        )\n        getSettleList()\n      }\n      setTimeout(() => {\n        setClaimSettleLoading(false)\n      }, 2000)\n    } catch (error) {}\n  }\n  return { cancelOrder, cancelAllOrder, claimSettled }\n}\n","import useDeepBookOrderActions from '@/hooks/deepbook/useDeepBookOrderActions'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport { NoData, Table } from '@cetus/ui-kit'\nimport { formatNumber } from '@cetus/utils'\nimport { Button, HStack, Text } from '@chakra-ui/react'\nimport { useEffect, useMemo, useState } from 'react'\nimport CoinPairInfo from '../common/CoinPairInfo'\nimport TypeCon from '../common/proModeAndChart/ProModeTradeTab/TypeCon'\n\nexport default function OpenOrdersTableBlock() {\n  const { deepBookOpenOrders, cancelOrderLoading, orderListLoading, setShowOpenOrdersNum } = useDeepBookStore()\n  const { cancelOrder } = useDeepBookOrderActions()\n  const [type, setType] = useState('')\n  const { currentAccount, onWalletModal } = useAccountStore()\n\n  const dataSource = useMemo(() => {\n    return deepBookOpenOrders.filter((item: any) => (!type ? true : type.split(',').includes(item.side)))\n  }, [deepBookOpenOrders, type])\n\n  useEffect(() => {\n    setShowOpenOrdersNum(dataSource?.length)\n  }, [dataSource?.length])\n\n  return (\n    <Table\n      dataSource={dataSource}\n      columns={getColumns(type, setType, cancelOrder, cancelOrderLoading)}\n      loading={orderListLoading}\n      // isFlexStart\n      fixedHeader\n      // trPadding=\"16px\"\n      headBg=\"bg_secondary\"\n      noData={\n        !currentAccount?.address ? (\n          <NoData type=\"nowallet\" noBorder bg=\"none\" onboard={() => onWalletModal(true)} />\n        ) : dataSource?.length == 0 ? (\n          <NoData type=\"nodata\" text=\"No orders\" noBorder bg=\"none\" />\n        ) : undefined\n      }\n      tableContainerWrapStyle={{\n        h: '100%'\n      }}\n    />\n  )\n}\n\nconst getColumns = (\n  type: string,\n  setType: (val: string) => void,\n  cancelOrder: (poolInfo: any, orderId: string) => void,\n  cancelOrderLoading: boolean\n) => {\n  return [\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Market\n        </Text>\n      ),\n      key: '#',\n      thConfig: {\n        w: '30%'\n      },\n      render: (item: any, index: number) => (\n        <HStack h=\"32px\">\n          <CoinPairInfo\n            poolInfo={{\n              displayTokenA: item?.baseAssets,\n              displayTokenB: item?.quoteAssets,\n              poolAddress: item?.poolId\n            }}\n            imgStyle={{\n              w: '24px',\n              h: '24px'\n            }}\n            showFee={false}\n            coinPairInfoWrapStyle={{\n              p: '0px'\n            }}\n          />\n        </HStack>\n      )\n    },\n    {\n      title: (\n        <HStack justifyContent=\"flex-end\" pt=\"8px\" height=\"24px\" fontWeight=\"500\">\n          <TypeCon type={type} setType={setType} filterList={['Buy', 'Sell']} labelText=\"Side\" />\n        </HStack>\n      ),\n      key: 'side',\n      thConfig: {\n        w: '18%'\n      },\n      render: (item: any) => {\n        const colorMap: any = {\n          Buy: { color: 'primary_green', bg: 'primary_green_opacity.10' },\n          Sell: { color: 'primary_red', bg: 'primary_red_opacity.10' }\n        }\n        const { color, bg } = colorMap[item?.side]\n        return (\n          <HStack w=\"100%\" justifyContent=\"flex-end\">\n            <Text fontSize=\"12px\" color={color} bg={bg} h=\"20px\" p=\"0 8px\" borderRadius=\"4px\" lineHeight=\"20px\">\n              {item?.side?.[0]?.toUpperCase() + item?.side?.slice(1)}\n            </Text>\n          </HStack>\n        )\n      }\n    },\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" textAlign=\"right\" pt=\"8px\" fontWeight=\"500\">\n          Price\n        </Text>\n      ),\n      key: 'price',\n      thConfig: {\n        w: '18%'\n      },\n      render: (item: any) => (\n        <Text w=\"100%\" textAlign=\"right\" color=\"text_caption\">\n          {formatNumber(item?.price)}\n        </Text>\n      )\n    },\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" textAlign=\"right\" pt=\"8px\" fontWeight=\"500\">\n          Filled/Qty\n        </Text>\n      ),\n      key: 'filled',\n      thConfig: {\n        w: '18%'\n      },\n      render: (item: any) => (\n        <HStack w=\"100%\" justify=\"flex-end\" gap=\"0px\">\n          <Text color=\"primary\">{formatNumber(item?.filledQuantity)}</Text>\n          <Text>/</Text>\n          <Text color=\"text_caption\">{formatNumber(item?.originalQuantity)}</Text>\n        </HStack>\n      )\n    },\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Action\n        </Text>\n      ),\n      key: 'action',\n      thConfig: {\n        w: '18%'\n      },\n      render: (item: any) => (\n        <HStack w=\"100%\" justify=\"flex-end\">\n          <Button\n            w=\"80px\"\n            h=\"24px\"\n            borderRadius=\"8px\"\n            fontSize=\"12px\"\n            variant=\"ghost\"\n            borderColor=\"transparent !important\"\n            onClick={() => cancelOrder(item, item.orderId)}\n            isLoading={cancelOrderLoading}\n          >\n            Cancel\n          </Button>\n        </HStack>\n      )\n    }\n  ]\n}\n","import useDeepBookOrderActions from '@/hooks/deepbook/useDeepBookOrderActions'\nimport useGetDeepBookSettleList from '@/hooks/deepbook/useGetDeepBookSettleList'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useAccountStore } from '@cetus/stores'\nimport { NoData, Table } from '@cetus/ui-kit'\nimport { formatNumber } from '@cetus/utils'\nimport { Button, HStack, Text } from '@chakra-ui/react'\nimport { useEffect } from 'react'\nimport CoinPairInfo from '../common/CoinPairInfo'\n\nexport default function SettledBalanceTableBlock() {\n  const { getSettleList } = useGetDeepBookSettleList()\n  const { deepBookPools, deepBookSettleList, deepBookSettleListLoading, currentDeepBookPool } = useDeepBookStore()\n  const { currentAccount, onWalletModal } = useAccountStore()\n\n  useEffect(() => {\n    if (deepBookPools?.length > 0 && currentAccount?.address) {\n      getSettleList()\n    }\n  }, [deepBookPools?.length, currentAccount?.address, currentDeepBookPool?.address])\n\n  const { claimSettled } = useDeepBookOrderActions()\n\n  return (\n    <Table\n      dataSource={deepBookSettleList}\n      columns={getColumns(claimSettled)}\n      loading={deepBookSettleListLoading}\n      // isFlexStart\n      fixedHeader\n      headBg=\"none\"\n      noData={\n        !currentAccount?.address ? (\n          <NoData type=\"nowallet\" noBorder bg=\"none\" onboard={() => onWalletModal(true)} />\n        ) : deepBookSettleList?.length == 0 ? (\n          <NoData type=\"nodata\" text=\"No settled balance\" noBorder bg=\"none\" />\n        ) : undefined\n      }\n    />\n  )\n}\n\nconst getColumns = (claimSettled: (item: any) => void) => {\n  return [\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Market\n        </Text>\n      ),\n      key: '#',\n      thConfig: {\n        w: '60%'\n      },\n      render: (item: any, index: number) => (\n        <HStack h=\"32px\">\n          <CoinPairInfo\n            poolInfo={{\n              displayTokenA: item?.baseAssets,\n              displayTokenB: item?.quoteAssets,\n              poolAddress: item?.address\n            }}\n            imgStyle={{\n              w: '24px',\n              h: '24px'\n            }}\n            showFee={false}\n            coinPairInfoWrapStyle={{\n              p: '0px'\n            }}\n          />\n        </HStack>\n      )\n    },\n\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\" textAlign=\"right\">\n          Tokens\n        </Text>\n      ),\n      key: 'tokens',\n      thConfig: {\n        w: '10%'\n      },\n      render: (item: any) => (\n        <HStack w=\"100%\" justify=\"flex-end\">\n          <Text color=\"text_caption\">\n            {formatNumber(item?.baseSettle)} {item?.baseAssets?.symbol}\n          </Text>\n          <Text color=\"text_caption\" fontSize=\"12px\">\n            |\n          </Text>\n          <Text color=\"text_caption\">\n            {formatNumber(item?.quoteSettle)} {item?.quoteAssets?.symbol}\n          </Text>\n        </HStack>\n      )\n    },\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Action\n        </Text>\n      ),\n      key: 'action',\n      thConfig: {\n        w: '10%'\n      },\n      render: (item: any) => (\n        <HStack w=\"100%\" justify=\"flex-end\">\n          <Button\n            w=\"80px\"\n            h=\"24px\"\n            borderRadius=\"8px\"\n            fontSize=\"12px\"\n            variant=\"ghost\"\n            borderColor=\"transparent !important\"\n            isDisabled={!item.canClaim}\n            onClick={() => claimSettled(item)}\n          >\n            Claim\n          </Button>\n        </HStack>\n      )\n    }\n  ]\n}\n","import useDeepBookStore from '@/store/deepbook'\nimport useExplorer from '@cetus/hooks/src/useExplorer'\nimport { useAccountStore } from '@cetus/stores'\nimport { Icon, NoData, Table } from '@cetus/ui-kit'\nimport { addressAbridge, formatNumber } from '@cetus/utils'\nimport { HStack, Text, VStack } from '@chakra-ui/react'\nimport { useEffect, useMemo, useState } from 'react'\nimport CoinPairInfo from '../common/CoinPairInfo'\nimport TypeCon from '../common/proModeAndChart/ProModeTradeTab/TypeCon'\n\nexport default function TradeHistoryTableBlock() {\n  const {\n    deepBookOrderHistory,\n    deepBookOrderHistoryLoading,\n    currentDeepBookPool,\n    isCheckedAllMarkets,\n    deepBookPools,\n    setShowDeepBookOrderHistoryNum\n  } = useDeepBookStore()\n  const { currentAccount, onWalletModal } = useAccountStore()\n\n  const [type, setType] = useState('')\n  const deepBookOrderHistoryList = useMemo(\n    () => (isCheckedAllMarkets ? deepBookOrderHistory : deepBookOrderHistory?.filter((item: any) => item.poolId == currentDeepBookPool?.address)),\n    [deepBookOrderHistory, currentDeepBookPool, isCheckedAllMarkets]\n  )\n\n  const dataSource = useMemo(() => {\n    return deepBookOrderHistoryList.filter((item: any) => (!type ? true : type.split(',').includes(item.side)))\n  }, [deepBookOrderHistoryList, type])\n\n  useEffect(() => {\n    setShowDeepBookOrderHistoryNum(dataSource?.length)\n  }, [dataSource?.length])\n\n  return (\n    <Table\n      dataSource={dataSource}\n      columns={getColumns(type, setType)}\n      loading={deepBookOrderHistoryLoading}\n      // isFlexStart\n      headBg=\"bg_secondary\"\n      tableContainerWrapStyle={{\n        h: '100%'\n      }}\n      noData={\n        !currentAccount?.address ? (\n          <NoData type=\"nowallet\" noBorder bg=\"none\" onboard={() => onWalletModal(true)} />\n        ) : dataSource?.length == 0 ? (\n          <NoData type=\"nodata\" text=\"No trade history\" noBorder bg=\"none\" />\n        ) : undefined\n      }\n    />\n  )\n}\n\nconst getColumns = (type: string, setType: (val: string) => void) => {\n  const { getExplorerUrl } = useExplorer()\n\n  return [\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Market\n        </Text>\n      ),\n      key: '#',\n      thConfig: {\n        w: '30%'\n      },\n      render: (item: any, index: number) => (\n        <HStack>\n          <CoinPairInfo\n            poolInfo={{\n              displayTokenA: item?.baseAssets,\n              displayTokenB: item?.quoteAssets,\n              poolAddress: item?.poolId\n            }}\n            imgStyle={{\n              w: '24px',\n              h: '24px'\n            }}\n            showFee={false}\n            coinPairInfoWrapStyle={{\n              p: '0px'\n            }}\n          />\n        </HStack>\n      )\n    },\n    // {\n    //   title: (\n    //     <Text color=\"primary_gray\" fontSize=\"12px\" textAlign=\"right\" pt=\"8px\">\n    //       Time\n    //     </Text>\n    //   ),\n    //   key: 'time',\n    //   thConfig: {\n    //     w: '10%'\n    //   },\n    //   render: (item: any) => (\n    //     <Text w=\"100%\" textAlign=\"right\" color=\"text_caption\">\n    //       {item?.blockTime}\n    //     </Text>\n    //   )\n    // },\n    {\n      title: (\n        <HStack justifyContent=\"flex-end\" pt=\"8px\" height=\"24px\" fontWeight=\"500\">\n          <TypeCon type={type} setType={setType} filterList={['Buy', 'Sell']} labelText=\"Side\" />\n        </HStack>\n      ),\n      key: 'side',\n      thConfig: {\n        w: '18%',\n        textAlign: 'right'\n      },\n      render: (item: any) => {\n        const colorMap: any = {\n          Buy: { color: 'primary_green', bg: 'primary_green_opacity.10' },\n          Sell: { color: 'primary_red', bg: 'primary_red_opacity.10' }\n        }\n        const { color, bg } = colorMap[item?.side]\n        return (\n          <HStack w=\"100%\" justify=\"flex-end\">\n            <Text fontSize=\"12px\" color={color} bg={bg} h=\"20px\" p=\"0 8px\" borderRadius=\"4px\" lineHeight=\"20px\">\n              {item?.side?.[0]?.toUpperCase() + item?.side?.slice(1)}\n            </Text>\n          </HStack>\n        )\n      }\n    },\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Order Price\n        </Text>\n      ),\n      key: 'orderPrice',\n      thConfig: {\n        w: '18%',\n        textAlign: 'right'\n      },\n      render: (item: any) => (\n        <Text w=\"100%\" textAlign=\"right\" color=\"text_caption\">\n          {formatNumber(item?.price)}\n        </Text>\n      )\n    },\n    // {\n    //   title: (\n    //     <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\">\n    //       Filled/Total\n    //     </Text>\n    //   ),\n    //   key: 'filled',\n    //   thConfig: {\n    //     w: '10%',\n    //     textAlign: 'right'\n    //   },\n    //   render: (item: any) => (\n    //     <VStack w=\"100%\" justify=\"flex-end\" gap=\"0px\">\n    //       <HStack w=\"100%\" justify=\"flex-end\" gap=\"4px\">\n    //         <Text color=\"text_caption\">{item?.total}</Text>\n    //         <Text>{item?.baseAssets?.symbol}</Text>\n    //       </HStack>\n    //       <HStack w=\"100%\" justify=\"flex-end\" gap=\"4px\">\n    //         <Text color=\"text_caption\">{item?.filled}</Text>\n    //         <Text>{item?.quoteAssets?.symbol}</Text>\n    //       </HStack>\n    //     </VStack>\n    //   )\n    // },\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Qty\n        </Text>\n      ),\n      key: 'filled',\n      thConfig: {\n        w: '18%',\n        textAlign: 'right'\n      },\n      render: (item: any) => (\n        <VStack w=\"100%\" justify=\"flex-end\" gap=\"0px\">\n          <HStack w=\"100%\" justify=\"flex-end\" gap=\"4px\">\n            <Text color=\"text_caption\">{formatNumber(item?.total)}</Text>\n            {/* <Text>{item?.baseAssets?.symbol}</Text> */}\n          </HStack>\n          {/* <HStack w=\"100%\" justify=\"flex-end\" gap=\"4px\">\n            <Text color=\"text_caption\">{item?.filled}</Text>\n            <Text>{item?.quoteAssets?.symbol}</Text>\n          </HStack> */}\n        </VStack>\n      )\n    },\n    // {\n    //   title: (\n    //     <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\">\n    //       Fee\n    //     </Text>\n    //   ),\n    //   key: 'fee',\n    //   thConfig: {\n    //     w: '10%',\n    //     textAlign: 'right'\n    //   },\n    //   render: (item: any) => (\n    //     <HStack w=\"100%\" justify=\"flex-end\" gap=\"4px\">\n    //       <Text color=\"text_caption\">{item?.fee}</Text>\n    //       <Text>{item?.feeCoinSymbol}</Text>\n    //     </HStack>\n    //   )\n    // },\n    // {\n    //   title: (\n    //     <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\">\n    //       Order status\n    //     </Text>\n    //   ),\n    //   key: 'orderStatus',\n    //   thConfig: {\n    //     w: '10%',\n    //     textAlign: 'right'\n    //   },\n    //   render: (item: any) => (\n    //     <Text w=\"100%\" textAlign=\"right\">\n    //       {item?.orderStatus}\n    //     </Text>\n    //   )\n    // },\n    {\n      title: (\n        <Text color=\"primary_gray\" fontSize=\"12px\" pt=\"8px\" fontWeight=\"500\">\n          Txns\n        </Text>\n      ),\n      key: 'action',\n      thConfig: {\n        w: '18%'\n      },\n      render: (item: any) => (\n        <HStack\n          w=\"100%\"\n          justify=\"flex-end\"\n          gap=\"4px\"\n          onClick={() => {\n            window.open(getExplorerUrl(item?.tx, 'tx'), '_blank')\n          }}\n          _hover={{\n            cursor: 'pointer',\n            svg: {\n              fill: 'primary'\n            },\n            '&>p': {\n              color: 'primary',\n              textDecoration: 'underline'\n            }\n          }}\n        >\n          <Text>{addressAbridge(item?.tx)}</Text>\n          <Icon xlinkHref=\"#icon-icon_link1\" fontSize=\"16px\" />\n        </HStack>\n      )\n    }\n  ]\n}\n","import useDeepBookOrderActions from '@/hooks/deepbook/useDeepBookOrderActions'\nimport useDeepBookStore from '@/store/deepbook'\nimport { Block, SelectTab } from '@cetus/design'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { useAccountStore } from '@cetus/stores'\nimport { HStack, StackProps, Switch, Text, VStack } from '@chakra-ui/react'\nimport { useMemo, useState } from 'react'\nimport OpenOrdersTableBlock from './OpenOrdersTableBlock'\nimport SettledBalanceTableBlock from './SettledBalanceTableBlock'\nimport TradeHistoryTableBlock from './TradeHistoryTableBlock'\n\nconst ActionContent = ({\n  isShowAllMarkets,\n  isCheckedAllMarkets,\n  setIsCheckedAllMarkets,\n  isShowCancelAll,\n  cancelAllOrder,\n  wrapStyle\n}: {\n  isShowAllMarkets: boolean\n  isCheckedAllMarkets: boolean\n  setIsCheckedAllMarkets: (isChecked: boolean) => void\n  isShowCancelAll: boolean\n  cancelAllOrder: () => void\n  wrapStyle: StackProps\n}) => {\n  const { isApp } = useWindowWidth()\n  return (\n    <HStack gap=\"12px\" w={{ base: '100%', lg: 'auto' }} {...wrapStyle}>\n      {isShowAllMarkets && (\n        <HStack _hover={{ cursor: 'pointer', _sx: { '& > p': { color: 'text_caption' } } }}>\n          <Text whiteSpace=\"nowrap\" fontSize=\"12px\">\n            All Markets\n          </Text>\n          <Switch isChecked={isCheckedAllMarkets} onChange={() => setIsCheckedAllMarkets(!isCheckedAllMarkets)} />\n        </HStack>\n      )}\n      {isShowCancelAll && (\n        <Text whiteSpace=\"nowrap\" fontSize=\"12px\" _hover={{ cursor: 'pointer', color: 'text_caption' }} onClick={() => cancelAllOrder()}>\n          Cancel All\n        </Text>\n      )}\n    </HStack>\n  )\n}\n\nconst TradeTableTab = ({\n  tabList,\n  currentTab,\n  setCurrentTab,\n  isCheckedAllMarkets,\n  setIsCheckedAllMarkets,\n  isShowCancelAll,\n  cancelAllOrder,\n  isShowAllMarkets\n}: {\n  tabList: any[]\n  currentTab: any\n  setCurrentTab: (tab: any) => void\n  isCheckedAllMarkets: boolean\n  setIsCheckedAllMarkets: (isChecked: boolean) => void\n  isShowCancelAll: boolean\n  cancelAllOrder: () => void\n  isShowAllMarkets: boolean\n}) => {\n  const { isApp } = useWindowWidth()\n\n  return (\n    <HStack p=\"0 16px\" overflow=\"auto\">\n      <HStack borderBottom=\"1px solid\" borderColor=\"border\" minW={{ base: '440px', lg: 'auto' }} w=\"100%\">\n        <SelectTab<any, any>\n          type=\"borderTab\"\n          tabList={tabList}\n          currentTab={currentTab}\n          handleChangeTab={tab => setCurrentTab(tab?.label)}\n          wrapStyle={{\n            w: '100%',\n            h: '44px',\n            border: 'none',\n            gap: '40px'\n          }}\n          itemStyle={{\n            h: '100%',\n            borderRadius: '4px',\n            gap: '4px',\n            justifyContent: 'center',\n            alignItems: 'center',\n            fontSize: '14px',\n            fontWeight: '500',\n            whiteSpace: 'nowrap'\n          }}\n          selectTabItemTextStyle={{\n            color: 'primary_gray'\n          }}\n        />\n        {!isApp && (\n          <ActionContent\n            isShowAllMarkets={isShowAllMarkets}\n            isCheckedAllMarkets={isCheckedAllMarkets}\n            setIsCheckedAllMarkets={setIsCheckedAllMarkets}\n            isShowCancelAll={isShowCancelAll}\n            cancelAllOrder={cancelAllOrder}\n          />\n        )}\n      </HStack>\n    </HStack>\n  )\n}\n\nfunction TradeTableBlock() {\n  const {\n    isCheckedAllMarkets,\n    setIsCheckedAllMarkets,\n    deepBookOpenOrders,\n    deepBookPools,\n    deepBookOrderHistory,\n    currentDeepBookPool,\n    orderListLoading,\n    deepBookOrderHistoryLoading,\n    showOpenOrdersNum,\n    showDeepBookOrderHistoryNum\n  } = useDeepBookStore()\n\n  const { cancelAllOrder } = useDeepBookOrderActions()\n\n  const { currentAccount } = useAccountStore()\n  const [currentTab, setCurrentTab] = useState<any>('Open Orders')\n  const { isApp } = useWindowWidth()\n\n  const tradeTableTabList = useMemo(() => {\n    return [\n      {\n        label: 'Open Orders',\n        num: showOpenOrdersNum > 0 && currentAccount?.address && !orderListLoading ? showOpenOrdersNum : undefined\n      },\n      {\n        label: 'Trade History',\n        num: showDeepBookOrderHistoryNum > 0 && currentAccount?.address && !deepBookOrderHistoryLoading ? showDeepBookOrderHistoryNum : undefined\n      },\n      {\n        label: 'Settled Balance',\n        tooltip:\n          'Settled balance will be claimed automatically to your free balance if you conduct new actions in the same pool. Or you could manually claim it from here.',\n        afterIcon: { xlinkHref: '#icon-icon_tips', fontSize: '20px' },\n        tooltipPlacement: 'top'\n      }\n    ]\n  }, [currentAccount?.address, currentTab, orderListLoading, deepBookOrderHistoryLoading, showOpenOrdersNum, showDeepBookOrderHistoryNum])\n\n  return (\n    <Block p=\"0px\" h=\"100%\" borderRadius=\"8px\" border=\"none\">\n      <TradeTableTab\n        tabList={tradeTableTabList}\n        currentTab={currentTab}\n        setCurrentTab={setCurrentTab}\n        isCheckedAllMarkets={isCheckedAllMarkets}\n        setIsCheckedAllMarkets={setIsCheckedAllMarkets}\n        isShowCancelAll={currentTab == 'Open Orders' && deepBookOpenOrders?.length > 0}\n        isShowAllMarkets={currentTab !== 'Settled Balance'}\n        cancelAllOrder={cancelAllOrder}\n      />\n      {isApp && (\n        <ActionContent\n          isShowAllMarkets={currentTab !== 'Settled Balance'}\n          isCheckedAllMarkets={isCheckedAllMarkets}\n          setIsCheckedAllMarkets={setIsCheckedAllMarkets}\n          isShowCancelAll={currentTab == 'Open Orders' && deepBookOpenOrders?.length > 0}\n          cancelAllOrder={cancelAllOrder}\n          wrapStyle={{\n            p: '8px 16px 0px',\n            justifyContent: 'space-between'\n          }}\n        />\n      )}\n      <VStack w=\"100%\" h={{ base: '180px', lg: 'calc(100% - 44px)' }}>\n        {currentTab == 'Open Orders' && <OpenOrdersTableBlock />}\n        {currentTab == 'Trade History' && <TradeHistoryTableBlock />}\n        {currentTab == 'Settled Balance' && <SettledBalanceTableBlock />}\n      </VStack>\n    </Block>\n  )\n}\n\nexport default TradeTableBlock\n","import AssetsInfo from '@/components/deepbook/AssetsInfo'\nimport DeepbookChart from '@/components/deepbook/DeepbookChart'\nimport FooterBlock from '@/components/deepbook/FooterBlock'\nimport OrderBookBlock from '@/components/deepbook/OrderBookBlock'\nimport TopDataBlock from '@/components/deepbook/TopDataBlock'\nimport TradeBlock from '@/components/deepbook/TradeBlock'\nimport TradeTableBlock from '@/components/deepbook/TradeTableBlock'\nimport { SelectTab } from '@cetus/design'\nimport { HStack, VStack } from '@chakra-ui/react'\nimport { useState } from 'react'\n\ninterface DeepBookH5Props {\n  currentDeepBookPool: any\n  deepBookPools: any[]\n  currentAccount: any\n  currentBalanceManagerInfo: any\n}\n\nfunction DeepBookH5({ currentDeepBookPool, deepBookPools, currentAccount, currentBalanceManagerInfo }: DeepBookH5Props) {\n  // ==================== 本地状态 ====================\n  const [currentTab, setCurrentTab] = useState<any>({\n    label: 'Chart',\n    value: 'chart'\n  })\n  const [isOpenCard, setIsOpenCard] = useState(true)\n  const [currentH5Menu, setCurrentH5Menu] = useState<any>({\n    label: 'Markets',\n    value: 'Markets'\n  })\n\n  // ==================== 常量定义 ====================\n  const tabList = [\n    { label: 'Chart', value: 'chart' },\n    { label: 'Orderbook', value: 'orderBook' }\n  ]\n\n  const h5MenuList = [\n    { label: 'Markets', value: 'Markets' },\n    { label: 'Trade', value: 'trade' },\n    { label: 'Account', value: 'account' }\n  ]\n\n  // ==================== 事件处理函数 ====================\n  const handleChangeTab = (tab: any) => {\n    setCurrentTab(tab)\n  }\n\n  return (\n    <VStack w=\"100%\" paddingBottom=\"68px\">\n      <TopDataBlock isOpenCard={isOpenCard} setIsOpenCard={setIsOpenCard} />\n\n      {currentH5Menu.value === 'Markets' && (\n        <VStack bg=\"bg_secondary\" w=\"100%\" h=\"516px\" gap=\"0\">\n          <HStack padding=\"16px\" w=\"100%\">\n            <SelectTab\n              type=\"outlineTab\"\n              tabList={tabList}\n              currentTab={currentTab?.label}\n              handleChangeTab={handleChangeTab}\n              wrapStyle={{\n                w: '100%',\n                h: '40px',\n                p: '4px',\n                borderRadius: '8px'\n              }}\n              itemStyle={{\n                flex: {\n                  lg: '1',\n                  base: 'auto'\n                },\n                fontSize: '14px',\n                margin: '0px',\n                borderRadius: '4px'\n              }}\n            />\n          </HStack>\n          {currentTab.value === 'chart' && <DeepbookChart currentDeepBookPool={currentDeepBookPool} />}\n          {currentTab.value === 'orderBook' && <OrderBookBlock isOpenCard={isOpenCard} />}\n        </VStack>\n      )}\n\n      {currentH5Menu.value === 'trade' && (\n        <>\n          <TradeBlock />\n          <TradeTableBlock />\n        </>\n      )}\n\n      {currentH5Menu.value === 'account' && <AssetsInfo />}\n\n      <FooterBlock />\n\n      <SelectTab\n        type=\"borderTab\"\n        tabList={h5MenuList}\n        currentTab={currentH5Menu?.label}\n        handleChangeTab={setCurrentH5Menu}\n        wrapStyle={{\n          w: '100%',\n          h: '60px',\n          minH: '60px',\n          borderRadius: '0px',\n          bg: 'bg_secondary',\n          border: 'none',\n          position: 'fixed',\n          bottom: '0px',\n          left: '0px',\n          zIndex: '1000'\n        }}\n        itemStyle={{\n          flex: {\n            lg: '1',\n            base: 'auto'\n          },\n          fontSize: '14px',\n          margin: '0px',\n          borderRadius: '4px'\n        }}\n      />\n    </VStack>\n  )\n}\n\nexport default DeepBookH5\n","/**\n * flexlayout-react\n * @version 0.8.17\n */\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nimport { jsx, jsxs, Fragment } from \"react/jsx-runtime\";\nimport * as React from \"react\";\nimport { useRef, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { createRoot } from \"react-dom/client\";\nconst _Orientation = class _Orientation {\n  /** @internal */\n  constructor(name) {\n    /** @internal */\n    __publicField(this, \"_name\");\n    this._name = name;\n  }\n  static flip(from) {\n    if (from === _Orientation.HORZ) {\n      return _Orientation.VERT;\n    } else {\n      return _Orientation.HORZ;\n    }\n  }\n  getName() {\n    return this._name;\n  }\n  toString() {\n    return this._name;\n  }\n};\n__publicField(_Orientation, \"HORZ\", new _Orientation(\"horz\"));\n__publicField(_Orientation, \"VERT\", new _Orientation(\"vert\"));\nlet Orientation = _Orientation;\nclass Rect {\n  constructor(x, y, width, height) {\n    __publicField(this, \"x\");\n    __publicField(this, \"y\");\n    __publicField(this, \"width\");\n    __publicField(this, \"height\");\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n  static empty() {\n    return new Rect(0, 0, 0, 0);\n  }\n  static fromJson(json) {\n    return new Rect(json.x, json.y, json.width, json.height);\n  }\n  toJson() {\n    return { x: this.x, y: this.y, width: this.width, height: this.height };\n  }\n  snap(round) {\n    this.x = Math.round(this.x / round) * round;\n    this.y = Math.round(this.y / round) * round;\n    this.width = Math.round(this.width / round) * round;\n    this.height = Math.round(this.height / round) * round;\n  }\n  static getBoundingClientRect(element) {\n    const { x, y, width, height } = element.getBoundingClientRect();\n    return new Rect(x, y, width, height);\n  }\n  static getContentRect(element) {\n    const rect = element.getBoundingClientRect();\n    const style2 = window.getComputedStyle(element);\n    const paddingLeft = parseFloat(style2.paddingLeft);\n    const paddingRight = parseFloat(style2.paddingRight);\n    const paddingTop = parseFloat(style2.paddingTop);\n    const paddingBottom = parseFloat(style2.paddingBottom);\n    const borderLeftWidth = parseFloat(style2.borderLeftWidth);\n    const borderRightWidth = parseFloat(style2.borderRightWidth);\n    const borderTopWidth = parseFloat(style2.borderTopWidth);\n    const borderBottomWidth = parseFloat(style2.borderBottomWidth);\n    const contentWidth = rect.width - borderLeftWidth - paddingLeft - paddingRight - borderRightWidth;\n    const contentHeight = rect.height - borderTopWidth - paddingTop - paddingBottom - borderBottomWidth;\n    return new Rect(\n      rect.left + borderLeftWidth + paddingLeft,\n      rect.top + borderTopWidth + paddingTop,\n      contentWidth,\n      contentHeight\n    );\n  }\n  static fromDomRect(domRect) {\n    return new Rect(domRect.x, domRect.y, domRect.width, domRect.height);\n  }\n  relativeTo(r) {\n    return new Rect(this.x - r.x, this.y - r.y, this.width, this.height);\n  }\n  clone() {\n    return new Rect(this.x, this.y, this.width, this.height);\n  }\n  equals(rect) {\n    return this.x === (rect == null ? void 0 : rect.x) && this.y === (rect == null ? void 0 : rect.y) && this.width === (rect == null ? void 0 : rect.width) && this.height === (rect == null ? void 0 : rect.height);\n  }\n  equalSize(rect) {\n    return this.width === (rect == null ? void 0 : rect.width) && this.height === (rect == null ? void 0 : rect.height);\n  }\n  getBottom() {\n    return this.y + this.height;\n  }\n  getRight() {\n    return this.x + this.width;\n  }\n  get bottom() {\n    return this.y + this.height;\n  }\n  get right() {\n    return this.x + this.width;\n  }\n  getCenter() {\n    return { x: this.x + this.width / 2, y: this.y + this.height / 2 };\n  }\n  positionElement(element, position) {\n    this.styleWithPosition(element.style, position);\n  }\n  styleWithPosition(style2, position = \"absolute\") {\n    style2.left = this.x + \"px\";\n    style2.top = this.y + \"px\";\n    style2.width = Math.max(0, this.width) + \"px\";\n    style2.height = Math.max(0, this.height) + \"px\";\n    style2.position = position;\n    return style2;\n  }\n  contains(x, y) {\n    if (this.x <= x && x <= this.getRight() && this.y <= y && y <= this.getBottom()) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  removeInsets(insets) {\n    return new Rect(this.x + insets.left, this.y + insets.top, Math.max(0, this.width - insets.left - insets.right), Math.max(0, this.height - insets.top - insets.bottom));\n  }\n  centerInRect(outerRect) {\n    this.x = (outerRect.width - this.width) / 2;\n    this.y = (outerRect.height - this.height) / 2;\n  }\n  /** @internal */\n  _getSize(orientation) {\n    let prefSize = this.width;\n    if (orientation === Orientation.VERT) {\n      prefSize = this.height;\n    }\n    return prefSize;\n  }\n  toString() {\n    return \"(Rect: x=\" + this.x + \", y=\" + this.y + \", width=\" + this.width + \", height=\" + this.height + \")\";\n  }\n}\nconst _DockLocation = class _DockLocation {\n  /** @internal */\n  constructor(_name, _orientation, _indexPlus) {\n    /** @internal */\n    __publicField(this, \"name\");\n    /** @internal */\n    __publicField(this, \"orientation\");\n    /** @internal */\n    __publicField(this, \"indexPlus\");\n    this.name = _name;\n    this.orientation = _orientation;\n    this.indexPlus = _indexPlus;\n    _DockLocation.values.set(this.name, this);\n  }\n  /** @internal */\n  static getByName(name) {\n    return _DockLocation.values.get(name);\n  }\n  /** @internal */\n  static getLocation(rect, x, y) {\n    x = (x - rect.x) / rect.width;\n    y = (y - rect.y) / rect.height;\n    if (x >= 0.25 && x < 0.75 && y >= 0.25 && y < 0.75) {\n      return _DockLocation.CENTER;\n    }\n    const bl = y >= x;\n    const br = y >= 1 - x;\n    if (bl) {\n      return br ? _DockLocation.BOTTOM : _DockLocation.LEFT;\n    } else {\n      return br ? _DockLocation.RIGHT : _DockLocation.TOP;\n    }\n  }\n  getName() {\n    return this.name;\n  }\n  getOrientation() {\n    return this.orientation;\n  }\n  /** @internal */\n  getDockRect(r) {\n    if (this === _DockLocation.TOP) {\n      return new Rect(r.x, r.y, r.width, r.height / 2);\n    } else if (this === _DockLocation.BOTTOM) {\n      return new Rect(r.x, r.getBottom() - r.height / 2, r.width, r.height / 2);\n    }\n    if (this === _DockLocation.LEFT) {\n      return new Rect(r.x, r.y, r.width / 2, r.height);\n    } else if (this === _DockLocation.RIGHT) {\n      return new Rect(r.getRight() - r.width / 2, r.y, r.width / 2, r.height);\n    } else {\n      return r.clone();\n    }\n  }\n  /** @internal */\n  split(rect, size) {\n    if (this === _DockLocation.TOP) {\n      const r1 = new Rect(rect.x, rect.y, rect.width, size);\n      const r2 = new Rect(rect.x, rect.y + size, rect.width, rect.height - size);\n      return { start: r1, end: r2 };\n    } else if (this === _DockLocation.LEFT) {\n      const r1 = new Rect(rect.x, rect.y, size, rect.height);\n      const r2 = new Rect(rect.x + size, rect.y, rect.width - size, rect.height);\n      return { start: r1, end: r2 };\n    }\n    if (this === _DockLocation.RIGHT) {\n      const r1 = new Rect(rect.getRight() - size, rect.y, size, rect.height);\n      const r2 = new Rect(rect.x, rect.y, rect.width - size, rect.height);\n      return { start: r1, end: r2 };\n    } else {\n      const r1 = new Rect(rect.x, rect.getBottom() - size, rect.width, size);\n      const r2 = new Rect(rect.x, rect.y, rect.width, rect.height - size);\n      return { start: r1, end: r2 };\n    }\n  }\n  /** @internal */\n  reflect() {\n    if (this === _DockLocation.TOP) {\n      return _DockLocation.BOTTOM;\n    } else if (this === _DockLocation.LEFT) {\n      return _DockLocation.RIGHT;\n    }\n    if (this === _DockLocation.RIGHT) {\n      return _DockLocation.LEFT;\n    } else {\n      return _DockLocation.TOP;\n    }\n  }\n  toString() {\n    return \"(DockLocation: name=\" + this.name + \", orientation=\" + this.orientation + \")\";\n  }\n};\n__publicField(_DockLocation, \"values\", /* @__PURE__ */ new Map());\n__publicField(_DockLocation, \"TOP\", new _DockLocation(\"top\", Orientation.VERT, 0));\n__publicField(_DockLocation, \"BOTTOM\", new _DockLocation(\"bottom\", Orientation.VERT, 1));\n__publicField(_DockLocation, \"LEFT\", new _DockLocation(\"left\", Orientation.HORZ, 0));\n__publicField(_DockLocation, \"RIGHT\", new _DockLocation(\"right\", Orientation.HORZ, 1));\n__publicField(_DockLocation, \"CENTER\", new _DockLocation(\"center\", Orientation.VERT, 0));\nlet DockLocation = _DockLocation;\nvar I18nLabel = /* @__PURE__ */ ((I18nLabel2) => {\n  I18nLabel2[\"Close_Tab\"] = \"Close\";\n  I18nLabel2[\"Close_Tabset\"] = \"Close tab set\";\n  I18nLabel2[\"Active_Tabset\"] = \"Active tab set\";\n  I18nLabel2[\"Move_Tabset\"] = \"Move tab set\";\n  I18nLabel2[\"Move_Tabs\"] = \"Move tabs(?)\";\n  I18nLabel2[\"Maximize\"] = \"Maximize tab set\";\n  I18nLabel2[\"Restore\"] = \"Restore tab set\";\n  I18nLabel2[\"Popout_Tab\"] = \"Popout selected tab\";\n  I18nLabel2[\"Overflow_Menu_Tooltip\"] = \"Hidden tabs\";\n  I18nLabel2[\"Error_rendering_component\"] = \"Error rendering component\";\n  I18nLabel2[\"Error_rendering_component_retry\"] = \"Retry\";\n  return I18nLabel2;\n})(I18nLabel || {});\nvar CLASSES = /* @__PURE__ */ ((CLASSES2) => {\n  CLASSES2[\"FLEXLAYOUT__BORDER\"] = \"flexlayout__border\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_\"] = \"flexlayout__border_\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TAB_CONTENTS\"] = \"flexlayout__border_tab_contents\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_BUTTON\"] = \"flexlayout__border_button\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_BUTTON_\"] = \"flexlayout__border_button_\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_BUTTON_CONTENT\"] = \"flexlayout__border_button_content\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_BUTTON_LEADING\"] = \"flexlayout__border_button_leading\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_BUTTON_TRAILING\"] = \"flexlayout__border_button_trailing\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_BUTTON__SELECTED\"] = \"flexlayout__border_button--selected\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_BUTTON__UNSELECTED\"] = \"flexlayout__border_button--unselected\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW\"] = \"flexlayout__border_toolbar_button_overflow\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_\"] = \"flexlayout__border_toolbar_button_overflow_\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_INNER\"] = \"flexlayout__border_inner\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_INNER_\"] = \"flexlayout__border_inner_\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER\"] = \"flexlayout__border_inner_tab_container\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_\"] = \"flexlayout__border_inner_tab_container_\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TAB_DIVIDER\"] = \"flexlayout__border_tab_divider\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_LEADING\"] = \"flexlayout__border_leading\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_SIZER\"] = \"flexlayout__border_sizer\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TOOLBAR\"] = \"flexlayout__border_toolbar\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TOOLBAR_\"] = \"flexlayout__border_toolbar_\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TOOLBAR_BUTTON\"] = \"flexlayout__border_toolbar_button\";\n  CLASSES2[\"FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT\"] = \"flexlayout__border_toolbar_button-float\";\n  CLASSES2[\"FLEXLAYOUT__DRAG_RECT\"] = \"flexlayout__drag_rect\";\n  CLASSES2[\"FLEXLAYOUT__EDGE_RECT\"] = \"flexlayout__edge_rect\";\n  CLASSES2[\"FLEXLAYOUT__EDGE_RECT_TOP\"] = \"flexlayout__edge_rect_top\";\n  CLASSES2[\"FLEXLAYOUT__EDGE_RECT_LEFT\"] = \"flexlayout__edge_rect_left\";\n  CLASSES2[\"FLEXLAYOUT__EDGE_RECT_BOTTOM\"] = \"flexlayout__edge_rect_bottom\";\n  CLASSES2[\"FLEXLAYOUT__EDGE_RECT_RIGHT\"] = \"flexlayout__edge_rect_right\";\n  CLASSES2[\"FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER\"] = \"flexlayout__error_boundary_container\";\n  CLASSES2[\"FLEXLAYOUT__ERROR_BOUNDARY_CONTENT\"] = \"flexlayout__error_boundary_content\";\n  CLASSES2[\"FLEXLAYOUT__FLOATING_WINDOW_CONTENT\"] = \"flexlayout__floating_window_content\";\n  CLASSES2[\"FLEXLAYOUT__LAYOUT\"] = \"flexlayout__layout\";\n  CLASSES2[\"FLEXLAYOUT__LAYOUT_MOVEABLES\"] = \"flexlayout__layout_moveables\";\n  CLASSES2[\"FLEXLAYOUT__LAYOUT_OVERLAY\"] = \"flexlayout__layout_overlay\";\n  CLASSES2[\"FLEXLAYOUT__LAYOUT_TAB_STAMPS\"] = \"flexlayout__layout_tab_stamps\";\n  CLASSES2[\"FLEXLAYOUT__LAYOUT_MAIN\"] = \"flexlayout__layout_main\";\n  CLASSES2[\"FLEXLAYOUT__LAYOUT_BORDER_CONTAINER\"] = \"flexlayout__layout_border_container\";\n  CLASSES2[\"FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER\"] = \"flexlayout__layout_border_container_inner\";\n  CLASSES2[\"FLEXLAYOUT__OUTLINE_RECT\"] = \"flexlayout__outline_rect\";\n  CLASSES2[\"FLEXLAYOUT__OUTLINE_RECT_EDGE\"] = \"flexlayout__outline_rect_edge\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER\"] = \"flexlayout__splitter\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER_EXTRA\"] = \"flexlayout__splitter_extra\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER_\"] = \"flexlayout__splitter_\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER_BORDER\"] = \"flexlayout__splitter_border\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER_DRAG\"] = \"flexlayout__splitter_drag\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER_HANDLE\"] = \"flexlayout__splitter_handle\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER_HANDLE_HORZ\"] = \"flexlayout__splitter_handle_horz\";\n  CLASSES2[\"FLEXLAYOUT__SPLITTER_HANDLE_VERT\"] = \"flexlayout__splitter_handle_vert\";\n  CLASSES2[\"FLEXLAYOUT__ROW\"] = \"flexlayout__row\";\n  CLASSES2[\"FLEXLAYOUT__TAB\"] = \"flexlayout__tab\";\n  CLASSES2[\"FLEXLAYOUT__TAB_POSITION\"] = \"flexlayout__tab_position\";\n  CLASSES2[\"FLEXLAYOUT__TAB_MOVEABLE\"] = \"flexlayout__tab_moveable\";\n  CLASSES2[\"FLEXLAYOUT__TAB_OVERLAY\"] = \"flexlayout__tab_overlay\";\n  CLASSES2[\"FLEXLAYOUT__TABSET\"] = \"flexlayout__tabset\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_CONTAINER\"] = \"flexlayout__tabset_container\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_HEADER\"] = \"flexlayout__tabset_header\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_HEADER_CONTENT\"] = \"flexlayout__tabset_header_content\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_MAXIMIZED\"] = \"flexlayout__tabset-maximized\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_SELECTED\"] = \"flexlayout__tabset-selected\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_TAB_DIVIDER\"] = \"flexlayout__tabset_tab_divider\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_CONTENT\"] = \"flexlayout__tabset_content\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_TABBAR_INNER\"] = \"flexlayout__tabset_tabbar_inner\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_TABBAR_INNER_\"] = \"flexlayout__tabset_tabbar_inner_\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_LEADING\"] = \"flexlayout__tabset_leading\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER\"] = \"flexlayout__tabset_tabbar_inner_tab_container\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_\"] = \"flexlayout__tabset_tabbar_inner_tab_container_\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_TABBAR_OUTER\"] = \"flexlayout__tabset_tabbar_outer\";\n  CLASSES2[\"FLEXLAYOUT__TABSET_TABBAR_OUTER_\"] = \"flexlayout__tabset_tabbar_outer_\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BORDER\"] = \"flexlayout__tab_border\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BORDER_\"] = \"flexlayout__tab_border_\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON\"] = \"flexlayout__tab_button\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_STRETCH\"] = \"flexlayout__tab_button_stretch\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_CONTENT\"] = \"flexlayout__tab_button_content\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_LEADING\"] = \"flexlayout__tab_button_leading\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_OVERFLOW\"] = \"flexlayout__tab_button_overflow\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT\"] = \"flexlayout__tab_button_overflow_count\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_TEXTBOX\"] = \"flexlayout__tab_button_textbox\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_TRAILING\"] = \"flexlayout__tab_button_trailing\";\n  CLASSES2[\"FLEXLAYOUT__TAB_BUTTON_STAMP\"] = \"flexlayout__tab_button_stamp\";\n  CLASSES2[\"FLEXLAYOUT__TAB_TOOLBAR\"] = \"flexlayout__tab_toolbar\";\n  CLASSES2[\"FLEXLAYOUT__TAB_TOOLBAR_BUTTON\"] = \"flexlayout__tab_toolbar_button\";\n  CLASSES2[\"FLEXLAYOUT__TAB_TOOLBAR_ICON\"] = \"flexlayout__tab_toolbar_icon\";\n  CLASSES2[\"FLEXLAYOUT__TAB_TOOLBAR_BUTTON_\"] = \"flexlayout__tab_toolbar_button-\";\n  CLASSES2[\"FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT\"] = \"flexlayout__tab_toolbar_button-float\";\n  CLASSES2[\"FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER\"] = \"flexlayout__tab_toolbar_sticky_buttons_container\";\n  CLASSES2[\"FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE\"] = \"flexlayout__tab_toolbar_button-close\";\n  CLASSES2[\"FLEXLAYOUT__POPUP_MENU_CONTAINER\"] = \"flexlayout__popup_menu_container\";\n  CLASSES2[\"FLEXLAYOUT__POPUP_MENU_ITEM\"] = \"flexlayout__popup_menu_item\";\n  CLASSES2[\"FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED\"] = \"flexlayout__popup_menu_item--selected\";\n  CLASSES2[\"FLEXLAYOUT__POPUP_MENU\"] = \"flexlayout__popup_menu\";\n  CLASSES2[\"FLEXLAYOUT__MINI_SCROLLBAR\"] = \"flexlayout__mini_scrollbar\";\n  CLASSES2[\"FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER\"] = \"flexlayout__mini_scrollbar_container\";\n  return CLASSES2;\n})(CLASSES || {});\nclass Action {\n  constructor(type, data) {\n    __publicField(this, \"type\");\n    __publicField(this, \"data\");\n    this.type = type;\n    this.data = data;\n  }\n}\nconst _Actions = class _Actions {\n  /**\n   * Adds a tab node to the given tabset node\n   * @param json the json for the new tab node e.g {type:\"tab\", component:\"table\"}\n   * @param toNodeId the new tab node will be added to the tabset with this node id\n   * @param location the location where the new tab will be added, one of the DockLocation enum values.\n   * @param index for docking to the center this value is the index of the tab, use -1 to add to the end.\n   * @param select (optional) whether to select the new tab, overriding autoSelectTab\n   * @returns {Action} the action\n   */\n  static addNode(json, toNodeId, location, index, select) {\n    return new Action(_Actions.ADD_NODE, {\n      json,\n      toNode: toNodeId,\n      location: location.getName(),\n      index,\n      select\n    });\n  }\n  /**\n   * Moves a node (tab or tabset) from one location to another\n   * @param fromNodeId the id of the node to move\n   * @param toNodeId the id of the node to receive the moved node\n   * @param location the location where the moved node will be added, one of the DockLocation enum values.\n   * @param index for docking to the center this value is the index of the tab, use -1 to add to the end.\n   * @param select (optional) whether to select the moved tab(s) in new tabset, overriding autoSelectTab\n   * @returns {Action} the action\n   */\n  static moveNode(fromNodeId, toNodeId, location, index, select) {\n    return new Action(_Actions.MOVE_NODE, {\n      fromNode: fromNodeId,\n      toNode: toNodeId,\n      location: location.getName(),\n      index,\n      select\n    });\n  }\n  /**\n   * Deletes a tab node from the layout\n   * @param tabNodeId the id of the tab node to delete\n   * @returns {Action} the action\n   */\n  static deleteTab(tabNodeId) {\n    return new Action(_Actions.DELETE_TAB, { node: tabNodeId });\n  }\n  /**\n   * Deletes a tabset node and all it's child tab nodes from the layout\n   * @param tabsetNodeId the id of the tabset node to delete\n   * @returns {Action} the action\n   */\n  static deleteTabset(tabsetNodeId) {\n    return new Action(_Actions.DELETE_TABSET, { node: tabsetNodeId });\n  }\n  /**\n   * Change the given nodes tab text\n   * @param tabNodeId the id of the node to rename\n   * @param text the test of the tab\n   * @returns {Action} the action\n   */\n  static renameTab(tabNodeId, text) {\n    return new Action(_Actions.RENAME_TAB, { node: tabNodeId, text });\n  }\n  /**\n   * Selects the given tab in its parent tabset\n   * @param tabNodeId the id of the node to set selected\n   * @returns {Action} the action\n   */\n  static selectTab(tabNodeId) {\n    return new Action(_Actions.SELECT_TAB, { tabNode: tabNodeId });\n  }\n  /**\n   * Set the given tabset node as the active tabset\n   * @param tabsetNodeId the id of the tabset node to set as active\n   * @returns {Action} the action\n   */\n  static setActiveTabset(tabsetNodeId, windowId) {\n    return new Action(_Actions.SET_ACTIVE_TABSET, { tabsetNode: tabsetNodeId, windowId });\n  }\n  /**\n   * Adjust the weights of a row, used when the splitter is moved\n   * @param nodeId the row node whose childrens weights are being adjusted\n   * @param weights an array of weights to be applied to the children \n   * @returns {Action} the action\n   */\n  static adjustWeights(nodeId, weights) {\n    return new Action(_Actions.ADJUST_WEIGHTS, { nodeId, weights });\n  }\n  static adjustBorderSplit(nodeId, pos) {\n    return new Action(_Actions.ADJUST_BORDER_SPLIT, { node: nodeId, pos });\n  }\n  /**\n   * Maximizes the given tabset\n   * @param tabsetNodeId the id of the tabset to maximize\n   * @returns {Action} the action\n   */\n  static maximizeToggle(tabsetNodeId, windowId) {\n    return new Action(_Actions.MAXIMIZE_TOGGLE, { node: tabsetNodeId, windowId });\n  }\n  /**\n   * Updates the global model jsone attributes\n   * @param attributes the json for the model attributes to update (merge into the existing attributes)\n   * @returns {Action} the action\n   */\n  static updateModelAttributes(attributes) {\n    return new Action(_Actions.UPDATE_MODEL_ATTRIBUTES, { json: attributes });\n  }\n  /**\n   * Updates the given nodes json attributes\n   * @param nodeId the id of the node to update\n   * @param attributes the json attributes to update (merge with the existing attributes)\n   * @returns {Action} the action\n   */\n  static updateNodeAttributes(nodeId, attributes) {\n    return new Action(_Actions.UPDATE_NODE_ATTRIBUTES, { node: nodeId, json: attributes });\n  }\n  /**\n   * Pops out the given tab node into a new browser window\n   * @param nodeId the tab node to popout\n   * @returns \n   */\n  static popoutTab(nodeId) {\n    return new Action(_Actions.POPOUT_TAB, { node: nodeId });\n  }\n  /**\n   * Pops out the given tab set node into a new browser window\n   * @param nodeId the tab set node to popout\n   * @returns \n   */\n  static popoutTabset(nodeId) {\n    return new Action(_Actions.POPOUT_TABSET, { node: nodeId });\n  }\n  /**\n   * Closes the popout window\n   * @param windowId the id of the popout window to close\n   * @returns \n   */\n  static closeWindow(windowId) {\n    return new Action(_Actions.CLOSE_WINDOW, { windowId });\n  }\n  /**\n   * Creates a new empty popout window with the given layout\n   * @param layout the json layout for the new window\n   * @param rect the window rectangle in screen coordinates\n   * @returns \n   */\n  static createWindow(layout, rect) {\n    return new Action(_Actions.CREATE_WINDOW, { layout, rect });\n  }\n};\n__publicField(_Actions, \"ADD_NODE\", \"FlexLayout_AddNode\");\n__publicField(_Actions, \"MOVE_NODE\", \"FlexLayout_MoveNode\");\n__publicField(_Actions, \"DELETE_TAB\", \"FlexLayout_DeleteTab\");\n__publicField(_Actions, \"DELETE_TABSET\", \"FlexLayout_DeleteTabset\");\n__publicField(_Actions, \"RENAME_TAB\", \"FlexLayout_RenameTab\");\n__publicField(_Actions, \"SELECT_TAB\", \"FlexLayout_SelectTab\");\n__publicField(_Actions, \"SET_ACTIVE_TABSET\", \"FlexLayout_SetActiveTabset\");\n__publicField(_Actions, \"ADJUST_WEIGHTS\", \"FlexLayout_AdjustWeights\");\n__publicField(_Actions, \"ADJUST_BORDER_SPLIT\", \"FlexLayout_AdjustBorderSplit\");\n__publicField(_Actions, \"MAXIMIZE_TOGGLE\", \"FlexLayout_MaximizeToggle\");\n__publicField(_Actions, \"UPDATE_MODEL_ATTRIBUTES\", \"FlexLayout_UpdateModelAttributes\");\n__publicField(_Actions, \"UPDATE_NODE_ATTRIBUTES\", \"FlexLayout_UpdateNodeAttributes\");\n__publicField(_Actions, \"POPOUT_TAB\", \"FlexLayout_PopoutTab\");\n__publicField(_Actions, \"POPOUT_TABSET\", \"FlexLayout_PopoutTabset\");\n__publicField(_Actions, \"CLOSE_WINDOW\", \"FlexLayout_CloseWindow\");\n__publicField(_Actions, \"CREATE_WINDOW\", \"FlexLayout_CreateWindow\");\nlet Actions = _Actions;\nclass Attribute {\n  constructor(name, modelName, defaultValue, alwaysWriteJson) {\n    __publicField(this, \"name\");\n    __publicField(this, \"alias\");\n    __publicField(this, \"modelName\");\n    __publicField(this, \"pairedAttr\");\n    __publicField(this, \"pairedType\");\n    __publicField(this, \"defaultValue\");\n    __publicField(this, \"alwaysWriteJson\");\n    __publicField(this, \"type\");\n    __publicField(this, \"required\");\n    __publicField(this, \"fixed\");\n    __publicField(this, \"description\");\n    this.name = name;\n    this.alias = void 0;\n    this.modelName = modelName;\n    this.defaultValue = defaultValue;\n    this.alwaysWriteJson = alwaysWriteJson;\n    this.required = false;\n    this.fixed = false;\n    this.type = \"any\";\n  }\n  setType(value) {\n    this.type = value;\n    return this;\n  }\n  setAlias(value) {\n    this.alias = value;\n    return this;\n  }\n  setDescription(value) {\n    this.description = value;\n  }\n  setRequired() {\n    this.required = true;\n    return this;\n  }\n  setFixed() {\n    this.fixed = true;\n    return this;\n  }\n  // sets modelAttr for nodes, and nodeAttr for model\n  setpairedAttr(value) {\n    this.pairedAttr = value;\n  }\n  setPairedType(value) {\n    this.pairedType = value;\n  }\n}\n__publicField(Attribute, \"NUMBER\", \"number\");\n__publicField(Attribute, \"STRING\", \"string\");\n__publicField(Attribute, \"BOOLEAN\", \"boolean\");\nclass AttributeDefinitions {\n  constructor() {\n    __publicField(this, \"attributes\");\n    __publicField(this, \"nameToAttribute\");\n    this.attributes = [];\n    this.nameToAttribute = /* @__PURE__ */ new Map();\n  }\n  addWithAll(name, modelName, defaultValue, alwaysWriteJson) {\n    const attr = new Attribute(name, modelName, defaultValue, alwaysWriteJson);\n    this.attributes.push(attr);\n    this.nameToAttribute.set(name, attr);\n    return attr;\n  }\n  addInherited(name, modelName) {\n    return this.addWithAll(name, modelName, void 0, false);\n  }\n  add(name, defaultValue, alwaysWriteJson) {\n    return this.addWithAll(name, void 0, defaultValue, alwaysWriteJson);\n  }\n  getAttributes() {\n    return this.attributes;\n  }\n  getModelName(name) {\n    const conversion = this.nameToAttribute.get(name);\n    if (conversion !== void 0) {\n      return conversion.modelName;\n    }\n    return void 0;\n  }\n  toJson(jsonObj, obj) {\n    for (const attr of this.attributes) {\n      const fromValue = obj[attr.name];\n      if (attr.alwaysWriteJson || fromValue !== attr.defaultValue) {\n        jsonObj[attr.name] = fromValue;\n      }\n    }\n  }\n  fromJson(jsonObj, obj) {\n    for (const attr of this.attributes) {\n      let fromValue = jsonObj[attr.name];\n      if (fromValue === void 0 && attr.alias) {\n        fromValue = jsonObj[attr.alias];\n      }\n      if (fromValue === void 0) {\n        obj[attr.name] = attr.defaultValue;\n      } else {\n        obj[attr.name] = fromValue;\n      }\n    }\n  }\n  update(jsonObj, obj) {\n    for (const attr of this.attributes) {\n      if (Object.prototype.hasOwnProperty.call(jsonObj, attr.name)) {\n        const fromValue = jsonObj[attr.name];\n        if (fromValue === void 0) {\n          delete obj[attr.name];\n        } else {\n          obj[attr.name] = fromValue;\n        }\n      }\n    }\n  }\n  setDefaults(obj) {\n    for (const attr of this.attributes) {\n      obj[attr.name] = attr.defaultValue;\n    }\n  }\n  pairAttributes(type, childAttributes) {\n    for (const attr of childAttributes.attributes) {\n      if (attr.modelName && this.nameToAttribute.has(attr.modelName)) {\n        const pairedAttr = this.nameToAttribute.get(attr.modelName);\n        pairedAttr.setpairedAttr(attr);\n        attr.setpairedAttr(pairedAttr);\n        pairedAttr.setPairedType(type);\n      }\n    }\n  }\n  toTypescriptInterface(name, parentAttributes) {\n    var _a, _b;\n    const lines = [];\n    const sorted = this.attributes.sort((a, b) => a.name.localeCompare(b.name));\n    lines.push(\"export interface I\" + name + \"Attributes {\");\n    for (let i = 0; i < sorted.length; i++) {\n      const c = sorted[i];\n      let type = c.type;\n      let defaultValue = void 0;\n      let attr = c;\n      let inherited = void 0;\n      if (attr.defaultValue !== void 0) {\n        defaultValue = attr.defaultValue;\n      } else if (attr.modelName !== void 0 && parentAttributes !== void 0 && parentAttributes.nameToAttribute.get(attr.modelName) !== void 0) {\n        inherited = attr.modelName;\n        attr = parentAttributes.nameToAttribute.get(inherited);\n        defaultValue = attr.defaultValue;\n        type = attr.type;\n      }\n      const defValue = JSON.stringify(defaultValue);\n      const required = attr.required ? \"\" : \"?\";\n      let sb = \"\t/**\\n\t  \";\n      if (c.description) {\n        sb += c.description;\n      } else if (c.pairedType && ((_a = c.pairedAttr) == null ? void 0 : _a.description)) {\n        sb += `Value for ${c.pairedType} attribute ${c.pairedAttr.name} if not overridden`;\n        sb += \"\\n\\n\t  \";\n        sb += (_b = c.pairedAttr) == null ? void 0 : _b.description;\n      }\n      sb += \"\\n\\n\t  \";\n      if (c.fixed) {\n        sb += `Fixed value: ${defValue}`;\n      } else if (inherited) {\n        sb += `Default: inherited from Global attribute ${c.modelName} (default ${defValue})`;\n      } else {\n        sb += `Default: ${defValue}`;\n      }\n      sb += \"\\n\t */\";\n      lines.push(sb);\n      lines.push(\"\t\" + c.name + required + \": \" + type + \";\\n\");\n    }\n    lines.push(\"}\");\n    return lines.join(\"\\n\");\n  }\n}\nclass DropInfo {\n  constructor(node, rect, location, index, className) {\n    __publicField(this, \"node\");\n    __publicField(this, \"rect\");\n    __publicField(this, \"location\");\n    __publicField(this, \"index\");\n    __publicField(this, \"className\");\n    this.node = node;\n    this.rect = rect;\n    this.location = location;\n    this.index = index;\n    this.className = className;\n  }\n}\nclass BorderSet {\n  /** @internal */\n  constructor(_model) {\n    /** @internal */\n    __publicField(this, \"borders\");\n    /** @internal */\n    __publicField(this, \"borderMap\");\n    /** @internal */\n    __publicField(this, \"layoutHorizontal\");\n    this.borders = [];\n    this.borderMap = /* @__PURE__ */ new Map();\n    this.layoutHorizontal = true;\n  }\n  /** @internal */\n  static fromJson(json, model) {\n    const borderSet = new BorderSet(model);\n    borderSet.borders = json.map((borderJson) => BorderNode.fromJson(borderJson, model));\n    for (const border of borderSet.borders) {\n      borderSet.borderMap.set(border.getLocation(), border);\n    }\n    return borderSet;\n  }\n  toJson() {\n    return this.borders.map((borderNode) => borderNode.toJson());\n  }\n  /** @internal */\n  getLayoutHorizontal() {\n    return this.layoutHorizontal;\n  }\n  /** @internal */\n  getBorders() {\n    return this.borders;\n  }\n  /** @internal */\n  getBorderMap() {\n    return this.borderMap;\n  }\n  /** @internal */\n  forEachNode(fn) {\n    for (const borderNode of this.borders) {\n      fn(borderNode, 0);\n      for (const node of borderNode.getChildren()) {\n        node.forEachNode(fn, 1);\n      }\n    }\n  }\n  /** @internal */\n  setPaths() {\n    for (const borderNode of this.borders) {\n      const path = \"/border/\" + borderNode.getLocation().getName();\n      borderNode.setPath(path);\n      let i = 0;\n      for (const node of borderNode.getChildren()) {\n        node.setPath(path + \"/t\" + i);\n        i++;\n      }\n    }\n  }\n  /** @internal */\n  findDropTargetNode(dragNode, x, y) {\n    for (const border of this.borders) {\n      if (border.isShowing()) {\n        const dropInfo = border.canDrop(dragNode, x, y);\n        if (dropInfo !== void 0) {\n          return dropInfo;\n        }\n      }\n    }\n    return void 0;\n  }\n}\nclass Node {\n  /** @internal */\n  constructor(_model) {\n    /** @internal */\n    __publicField(this, \"model\");\n    /** @internal */\n    __publicField(this, \"attributes\");\n    /** @internal */\n    __publicField(this, \"parent\");\n    /** @internal */\n    __publicField(this, \"children\");\n    /** @internal */\n    __publicField(this, \"rect\");\n    /** @internal */\n    __publicField(this, \"path\");\n    /** @internal */\n    __publicField(this, \"listeners\");\n    this.model = _model;\n    this.attributes = {};\n    this.children = [];\n    this.rect = Rect.empty();\n    this.listeners = /* @__PURE__ */ new Map();\n    this.path = \"\";\n  }\n  getId() {\n    let id = this.attributes.id;\n    if (id !== void 0) {\n      return id;\n    }\n    id = this.model.nextUniqueId();\n    this.setId(id);\n    return id;\n  }\n  getModel() {\n    return this.model;\n  }\n  getType() {\n    return this.attributes.type;\n  }\n  getParent() {\n    return this.parent;\n  }\n  getChildren() {\n    return this.children;\n  }\n  getRect() {\n    return this.rect;\n  }\n  getPath() {\n    return this.path;\n  }\n  getOrientation() {\n    if (this.parent === void 0) {\n      return this.model.isRootOrientationVertical() ? Orientation.VERT : Orientation.HORZ;\n    } else {\n      return Orientation.flip(this.parent.getOrientation());\n    }\n  }\n  // event can be: resize, visibility, maximize (on tabset), close\n  setEventListener(event, callback) {\n    this.listeners.set(event, callback);\n  }\n  removeEventListener(event) {\n    this.listeners.delete(event);\n  }\n  /** @internal */\n  setId(id) {\n    this.attributes.id = id;\n  }\n  /** @internal */\n  fireEvent(event, params) {\n    if (this.listeners.has(event)) {\n      this.listeners.get(event)(params);\n    }\n  }\n  /** @internal */\n  getAttr(name) {\n    let val = this.attributes[name];\n    if (val === void 0) {\n      const modelName = this.getAttributeDefinitions().getModelName(name);\n      if (modelName !== void 0) {\n        val = this.model.getAttribute(modelName);\n      }\n    }\n    return val;\n  }\n  /** @internal */\n  forEachNode(fn, level) {\n    fn(this, level);\n    level++;\n    for (const node of this.children) {\n      node.forEachNode(fn, level);\n    }\n  }\n  /** @internal */\n  setPaths(path) {\n    let i = 0;\n    for (const node of this.children) {\n      let newPath = path;\n      if (node.getType() === \"row\") {\n        newPath += \"/r\" + i;\n      } else if (node.getType() === \"tabset\") {\n        newPath += \"/ts\" + i;\n      } else if (node.getType() === \"tab\") {\n        newPath += \"/t\" + i;\n      }\n      node.path = newPath;\n      node.setPaths(newPath);\n      i++;\n    }\n  }\n  /** @internal */\n  setParent(parent) {\n    this.parent = parent;\n  }\n  /** @internal */\n  setRect(rect) {\n    this.rect = rect;\n  }\n  /** @internal */\n  setPath(path) {\n    this.path = path;\n  }\n  /** @internal */\n  setWeight(weight) {\n    this.attributes.weight = weight;\n  }\n  /** @internal */\n  setSelected(index) {\n    this.attributes.selected = index;\n  }\n  /** @internal */\n  findDropTargetNode(windowId, dragNode, x, y) {\n    let rtn;\n    if (this.rect.contains(x, y)) {\n      if (this.model.getMaximizedTabset(windowId) !== void 0) {\n        rtn = this.model.getMaximizedTabset(windowId).canDrop(dragNode, x, y);\n      } else {\n        rtn = this.canDrop(dragNode, x, y);\n        if (rtn === void 0) {\n          if (this.children.length !== 0) {\n            for (const child of this.children) {\n              rtn = child.findDropTargetNode(windowId, dragNode, x, y);\n              if (rtn !== void 0) {\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n    return rtn;\n  }\n  /** @internal */\n  canDrop(dragNode, x, y) {\n    return void 0;\n  }\n  /** @internal */\n  canDockInto(dragNode, dropInfo) {\n    if (dropInfo != null) {\n      if (dropInfo.location === DockLocation.CENTER && dropInfo.node.isEnableDrop() === false) {\n        return false;\n      }\n      if (dropInfo.location === DockLocation.CENTER && dragNode.getType() === \"tabset\" && dragNode.getName() !== void 0) {\n        return false;\n      }\n      if (dropInfo.location !== DockLocation.CENTER && dropInfo.node.isEnableDivide() === false) {\n        return false;\n      }\n      if (this.model.getOnAllowDrop()) {\n        return this.model.getOnAllowDrop()(dragNode, dropInfo);\n      }\n    }\n    return true;\n  }\n  /** @internal */\n  removeChild(childNode) {\n    const pos = this.children.indexOf(childNode);\n    if (pos !== -1) {\n      this.children.splice(pos, 1);\n    }\n    return pos;\n  }\n  /** @internal */\n  addChild(childNode, pos) {\n    if (pos != null) {\n      this.children.splice(pos, 0, childNode);\n    } else {\n      this.children.push(childNode);\n      pos = this.children.length - 1;\n    }\n    childNode.parent = this;\n    return pos;\n  }\n  /** @internal */\n  removeAll() {\n    this.children = [];\n  }\n  /** @internal */\n  styleWithPosition(style2) {\n    if (style2 == null) {\n      style2 = {};\n    }\n    return this.rect.styleWithPosition(style2);\n  }\n  /** @internal */\n  isEnableDivide() {\n    return true;\n  }\n  /** @internal */\n  toAttributeString() {\n    return JSON.stringify(this.attributes, void 0, \"\t\");\n  }\n}\nconst _TabNode = class _TabNode extends Node {\n  /** @internal */\n  constructor(model, json, addToModel = true) {\n    super(model);\n    /** @internal */\n    __publicField(this, \"tabRect\", Rect.empty());\n    /** @internal */\n    __publicField(this, \"moveableElement\");\n    /** @internal */\n    __publicField(this, \"tabStamp\");\n    /** @internal */\n    __publicField(this, \"renderedName\");\n    /** @internal */\n    __publicField(this, \"extra\");\n    /** @internal */\n    __publicField(this, \"visible\");\n    /** @internal */\n    __publicField(this, \"rendered\");\n    /** @internal */\n    __publicField(this, \"scrollTop\");\n    /** @internal */\n    __publicField(this, \"scrollLeft\");\n    this.extra = {};\n    this.moveableElement = null;\n    this.tabStamp = null;\n    this.rendered = false;\n    this.visible = false;\n    _TabNode.attributeDefinitions.fromJson(json, this.attributes);\n    if (addToModel === true) {\n      model.addNode(this);\n    }\n  }\n  /** @internal */\n  static fromJson(json, model, addToModel = true) {\n    const newLayoutNode = new _TabNode(model, json, addToModel);\n    return newLayoutNode;\n  }\n  getName() {\n    return this.getAttr(\"name\");\n  }\n  getHelpText() {\n    return this.getAttr(\"helpText\");\n  }\n  getComponent() {\n    return this.getAttr(\"component\");\n  }\n  getWindowId() {\n    if (this.parent instanceof TabSetNode) {\n      return this.parent.getWindowId();\n    }\n    return Model.MAIN_WINDOW_ID;\n  }\n  getWindow() {\n    const layoutWindow = this.model.getwindowsMap().get(this.getWindowId());\n    if (layoutWindow) {\n      return layoutWindow.window;\n    }\n    return void 0;\n  }\n  /**\n   * Returns the config attribute that can be used to store node specific data that\n   * WILL be saved to the json. The config attribute should be changed via the action Actions.updateNodeAttributes rather\n   * than directly, for example:\n   * this.state.model.doAction(\n   *   FlexLayout.Actions.updateNodeAttributes(node.getId(), {config:myConfigObject}));\n   */\n  getConfig() {\n    return this.attributes.config;\n  }\n  /**\n   * Returns an object that can be used to store transient node specific data that will\n   * NOT be saved in the json.\n   */\n  getExtraData() {\n    return this.extra;\n  }\n  isPoppedOut() {\n    return this.getWindowId() !== Model.MAIN_WINDOW_ID;\n  }\n  isSelected() {\n    return this.getParent().getSelectedNode() === this;\n  }\n  getIcon() {\n    return this.getAttr(\"icon\");\n  }\n  isEnableClose() {\n    return this.getAttr(\"enableClose\");\n  }\n  getCloseType() {\n    return this.getAttr(\"closeType\");\n  }\n  isEnablePopout() {\n    return this.getAttr(\"enablePopout\");\n  }\n  isEnablePopoutIcon() {\n    return this.getAttr(\"enablePopoutIcon\");\n  }\n  isEnablePopoutOverlay() {\n    return this.getAttr(\"enablePopoutOverlay\");\n  }\n  isEnableDrag() {\n    return this.getAttr(\"enableDrag\");\n  }\n  isEnableRename() {\n    return this.getAttr(\"enableRename\");\n  }\n  isEnableWindowReMount() {\n    return this.getAttr(\"enableWindowReMount\");\n  }\n  getClassName() {\n    return this.getAttr(\"className\");\n  }\n  getContentClassName() {\n    return this.getAttr(\"contentClassName\");\n  }\n  getTabSetClassName() {\n    return this.getAttr(\"tabsetClassName\");\n  }\n  isEnableRenderOnDemand() {\n    return this.getAttr(\"enableRenderOnDemand\");\n  }\n  getMinWidth() {\n    return this.getAttr(\"minWidth\");\n  }\n  getMinHeight() {\n    return this.getAttr(\"minHeight\");\n  }\n  getMaxWidth() {\n    return this.getAttr(\"maxWidth\");\n  }\n  getMaxHeight() {\n    return this.getAttr(\"maxHeight\");\n  }\n  isVisible() {\n    return this.visible;\n  }\n  toJson() {\n    const json = {};\n    _TabNode.attributeDefinitions.toJson(json, this.attributes);\n    return json;\n  }\n  /** @internal */\n  saveScrollPosition() {\n    if (this.moveableElement) {\n      this.scrollLeft = this.moveableElement.scrollLeft;\n      this.scrollTop = this.moveableElement.scrollTop;\n    }\n  }\n  /** @internal */\n  restoreScrollPosition() {\n    if (this.scrollTop) {\n      requestAnimationFrame(() => {\n        if (this.moveableElement) {\n          if (this.scrollTop) {\n            this.moveableElement.scrollTop = this.scrollTop;\n            this.moveableElement.scrollLeft = this.scrollLeft;\n          }\n        }\n      });\n    }\n  }\n  /** @internal */\n  setRect(rect) {\n    if (!rect.equals(this.rect)) {\n      this.fireEvent(\"resize\", { rect });\n      this.rect = rect;\n    }\n  }\n  /** @internal */\n  setVisible(visible) {\n    if (visible !== this.visible) {\n      this.visible = visible;\n      this.fireEvent(\"visibility\", { visible });\n    }\n  }\n  /** @internal */\n  getScrollTop() {\n    return this.scrollTop;\n  }\n  /** @internal */\n  setScrollTop(scrollTop) {\n    this.scrollTop = scrollTop;\n  }\n  /** @internal */\n  getScrollLeft() {\n    return this.scrollLeft;\n  }\n  /** @internal */\n  setScrollLeft(scrollLeft) {\n    this.scrollLeft = scrollLeft;\n  }\n  /** @internal */\n  isRendered() {\n    return this.rendered;\n  }\n  /** @internal */\n  setRendered(rendered) {\n    this.rendered = rendered;\n  }\n  /** @internal */\n  getTabRect() {\n    return this.tabRect;\n  }\n  /** @internal */\n  setTabRect(rect) {\n    this.tabRect = rect;\n  }\n  /** @internal */\n  getTabStamp() {\n    return this.tabStamp;\n  }\n  /** @internal */\n  setTabStamp(stamp) {\n    this.tabStamp = stamp;\n  }\n  /** @internal */\n  getMoveableElement() {\n    return this.moveableElement;\n  }\n  /** @internal */\n  setMoveableElement(element) {\n    this.moveableElement = element;\n  }\n  /** @internal */\n  setRenderedName(name) {\n    this.renderedName = name;\n  }\n  /** @internal */\n  getNameForOverflowMenu() {\n    const altName = this.getAttr(\"altName\");\n    if (altName !== void 0) {\n      return altName;\n    }\n    return this.renderedName;\n  }\n  /** @internal */\n  setName(name) {\n    this.attributes.name = name;\n  }\n  /** @internal */\n  delete() {\n    this.parent.remove(this);\n    this.fireEvent(\"close\", {});\n  }\n  /** @internal */\n  updateAttrs(json) {\n    _TabNode.attributeDefinitions.update(json, this.attributes);\n  }\n  /** @internal */\n  getAttributeDefinitions() {\n    return _TabNode.attributeDefinitions;\n  }\n  /** @internal */\n  setBorderWidth(width) {\n    this.attributes.borderWidth = width;\n  }\n  /** @internal */\n  setBorderHeight(height) {\n    this.attributes.borderHeight = height;\n  }\n  /** @internal */\n  static getAttributeDefinitions() {\n    return _TabNode.attributeDefinitions;\n  }\n  /** @internal */\n  static createAttributeDefinitions() {\n    const attributeDefinitions = new AttributeDefinitions();\n    attributeDefinitions.add(\"type\", _TabNode.TYPE, true).setType(Attribute.STRING).setFixed();\n    attributeDefinitions.add(\"id\", void 0).setType(Attribute.STRING).setDescription(\n      `the unique id of the tab, if left undefined a uuid will be assigned`\n    );\n    attributeDefinitions.add(\"name\", \"[Unnamed Tab]\").setType(Attribute.STRING).setDescription(\n      `name of tab to be displayed in the tab button`\n    );\n    attributeDefinitions.add(\"altName\", void 0).setType(Attribute.STRING).setDescription(\n      `if there is no name specifed then this value will be used in the overflow menu`\n    );\n    attributeDefinitions.add(\"helpText\", void 0).setType(Attribute.STRING).setDescription(\n      `An optional help text for the tab to be displayed upon tab hover.`\n    );\n    attributeDefinitions.add(\"component\", void 0).setType(Attribute.STRING).setDescription(\n      `string identifying which component to run (for factory)`\n    );\n    attributeDefinitions.add(\"config\", void 0).setType(\"any\").setDescription(\n      `a place to hold json config for the hosted component`\n    );\n    attributeDefinitions.add(\"tabsetClassName\", void 0).setType(Attribute.STRING).setDescription(\n      `class applied to parent tabset when this is the only tab and it is stretched to fill the tabset`\n    );\n    attributeDefinitions.add(\"enableWindowReMount\", false).setType(Attribute.BOOLEAN).setDescription(\n      `if enabled the tab will re-mount when popped out/in`\n    );\n    attributeDefinitions.addInherited(\"enableClose\", \"tabEnableClose\").setType(Attribute.BOOLEAN).setDescription(\n      `allow user to close tab via close button`\n    );\n    attributeDefinitions.addInherited(\"closeType\", \"tabCloseType\").setType(\"ICloseType\").setDescription(\n      `see values in ICloseType`\n    );\n    attributeDefinitions.addInherited(\"enableDrag\", \"tabEnableDrag\").setType(Attribute.BOOLEAN).setDescription(\n      `allow user to drag tab to new location`\n    );\n    attributeDefinitions.addInherited(\"enableRename\", \"tabEnableRename\").setType(Attribute.BOOLEAN).setDescription(\n      `allow user to rename tabs by double clicking`\n    );\n    attributeDefinitions.addInherited(\"className\", \"tabClassName\").setType(Attribute.STRING).setDescription(\n      `class applied to tab button`\n    );\n    attributeDefinitions.addInherited(\"contentClassName\", \"tabContentClassName\").setType(Attribute.STRING).setDescription(\n      `class applied to tab content`\n    );\n    attributeDefinitions.addInherited(\"icon\", \"tabIcon\").setType(Attribute.STRING).setDescription(\n      `the tab icon`\n    );\n    attributeDefinitions.addInherited(\"enableRenderOnDemand\", \"tabEnableRenderOnDemand\").setType(Attribute.BOOLEAN).setDescription(\n      `whether to avoid rendering component until tab is visible`\n    );\n    attributeDefinitions.addInherited(\"enablePopout\", \"tabEnablePopout\").setType(Attribute.BOOLEAN).setAlias(\"enableFloat\").setDescription(\n      `enable popout (in popout capable browser)`\n    );\n    attributeDefinitions.addInherited(\"enablePopoutIcon\", \"tabEnablePopoutIcon\").setType(Attribute.BOOLEAN).setDescription(\n      `whether to show the popout icon in the tabset header if this tab enables popouts`\n    );\n    attributeDefinitions.addInherited(\"enablePopoutOverlay\", \"tabEnablePopoutOverlay\").setType(Attribute.BOOLEAN).setDescription(\n      `if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)\n            then enabling this option will gray out this tab`\n    );\n    attributeDefinitions.addInherited(\"borderWidth\", \"tabBorderWidth\").setType(Attribute.NUMBER).setDescription(\n      `width when added to border, -1 will use border size`\n    );\n    attributeDefinitions.addInherited(\"borderHeight\", \"tabBorderHeight\").setType(Attribute.NUMBER).setDescription(\n      `height when added to border, -1 will use border size`\n    );\n    attributeDefinitions.addInherited(\"minWidth\", \"tabMinWidth\").setType(Attribute.NUMBER).setDescription(\n      `the min width of this tab`\n    );\n    attributeDefinitions.addInherited(\"minHeight\", \"tabMinHeight\").setType(Attribute.NUMBER).setDescription(\n      `the min height of this tab`\n    );\n    attributeDefinitions.addInherited(\"maxWidth\", \"tabMaxWidth\").setType(Attribute.NUMBER).setDescription(\n      `the max width of this tab`\n    );\n    attributeDefinitions.addInherited(\"maxHeight\", \"tabMaxHeight\").setType(Attribute.NUMBER).setDescription(\n      `the max height of this tab`\n    );\n    return attributeDefinitions;\n  }\n};\n__publicField(_TabNode, \"TYPE\", \"tab\");\n/** @internal */\n__publicField(_TabNode, \"attributeDefinitions\", _TabNode.createAttributeDefinitions());\nlet TabNode = _TabNode;\nfunction isDesktop() {\n  const desktop = typeof window !== \"undefined\" && window.matchMedia && window.matchMedia(\"(hover: hover) and (pointer: fine)\").matches;\n  return desktop;\n}\nfunction getRenderStateEx(layout, node, iconAngle) {\n  let leadingContent = void 0;\n  const titleContent = node.getName();\n  const name = node.getName();\n  if (iconAngle === void 0) {\n    iconAngle = 0;\n  }\n  if (leadingContent === void 0 && node.getIcon() !== void 0) {\n    if (iconAngle !== 0) {\n      leadingContent = /* @__PURE__ */ jsx(\"img\", { style: { width: \"1em\", height: \"1em\", transform: \"rotate(\" + iconAngle + \"deg)\" }, src: node.getIcon(), alt: \"leadingContent\" });\n    } else {\n      leadingContent = /* @__PURE__ */ jsx(\"img\", { style: { width: \"1em\", height: \"1em\" }, src: node.getIcon(), alt: \"leadingContent\" });\n    }\n  }\n  const buttons = [];\n  const renderState = { leading: leadingContent, content: titleContent, name, buttons };\n  layout.customizeTab(node, renderState);\n  node.setRenderedName(renderState.name);\n  return renderState;\n}\nfunction isAuxMouseEvent(event) {\n  let auxEvent = false;\n  if (event.nativeEvent instanceof MouseEvent) {\n    if (event.nativeEvent.button !== 0 || event.ctrlKey || event.altKey || event.metaKey || event.shiftKey) {\n      auxEvent = true;\n    }\n  }\n  return auxEvent;\n}\nfunction enablePointerOnIFrames(enable, currentDocument) {\n  const iframes = [\n    ...getElementsByTagName(\"iframe\", currentDocument),\n    ...getElementsByTagName(\"webview\", currentDocument)\n  ];\n  for (const iframe of iframes) {\n    iframe.style.pointerEvents = enable ? \"auto\" : \"none\";\n  }\n}\nfunction getElementsByTagName(tag, currentDocument) {\n  return [...currentDocument.getElementsByTagName(tag)];\n}\nfunction startDrag(doc, event, drag, dragEnd, dragCancel) {\n  event.preventDefault();\n  const pointerMove = (ev) => {\n    ev.preventDefault();\n    drag(ev.clientX, ev.clientY);\n  };\n  const pointerCancel = (ev) => {\n    ev.preventDefault();\n    dragCancel();\n  };\n  const pointerUp = () => {\n    doc.removeEventListener(\"pointermove\", pointerMove);\n    doc.removeEventListener(\"pointerup\", pointerUp);\n    doc.removeEventListener(\"pointercancel\", pointerCancel);\n    dragEnd();\n  };\n  doc.addEventListener(\"pointermove\", pointerMove);\n  doc.addEventListener(\"pointerup\", pointerUp);\n  doc.addEventListener(\"pointercancel\", pointerCancel);\n}\nfunction canDockToWindow(node) {\n  if (node instanceof TabNode) {\n    return node.isEnablePopout();\n  } else if (node instanceof TabSetNode) {\n    for (const child of node.getChildren()) {\n      if (child.isEnablePopout() === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\nfunction copyInlineStyles(source, target) {\n  const sourceStyle = source.getAttribute(\"style\");\n  const targetStyle = target.getAttribute(\"style\");\n  if (sourceStyle === targetStyle) return false;\n  if (sourceStyle) {\n    target.setAttribute(\"style\", sourceStyle);\n  } else {\n    target.removeAttribute(\"style\");\n  }\n  return true;\n}\nfunction isSafari() {\n  const userAgent = navigator.userAgent;\n  return userAgent.includes(\"Safari\") && !userAgent.includes(\"Chrome\") && !userAgent.includes(\"Chromium\");\n}\nfunction adjustSelectedIndex(parent, removedIndex) {\n  if (parent !== void 0 && (parent instanceof TabSetNode || parent instanceof BorderNode)) {\n    const selectedIndex = parent.getSelected();\n    if (selectedIndex !== -1) {\n      if (removedIndex === selectedIndex && parent.getChildren().length > 0) {\n        if (removedIndex >= parent.getChildren().length) {\n          parent.setSelected(parent.getChildren().length - 1);\n        }\n      } else if (removedIndex < selectedIndex) {\n        parent.setSelected(selectedIndex - 1);\n      } else if (removedIndex > selectedIndex) ;\n      else {\n        parent.setSelected(-1);\n      }\n    }\n  }\n}\nfunction randomUUID() {\n  return (\"10000000-1000-4000-8000\" + -1e11).replace(\n    /[018]/g,\n    (c) => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n  );\n}\nconst _TabSetNode = class _TabSetNode extends Node {\n  /** @internal */\n  constructor(model, json) {\n    super(model);\n    /** @internal */\n    __publicField(this, \"tabStripRect\", Rect.empty());\n    /** @internal */\n    __publicField(this, \"contentRect\", Rect.empty());\n    /** @internal */\n    __publicField(this, \"calculatedMinHeight\");\n    /** @internal */\n    __publicField(this, \"calculatedMinWidth\");\n    /** @internal */\n    __publicField(this, \"calculatedMaxHeight\");\n    /** @internal */\n    __publicField(this, \"calculatedMaxWidth\");\n    this.calculatedMinHeight = 0;\n    this.calculatedMinWidth = 0;\n    this.calculatedMaxHeight = 0;\n    this.calculatedMaxWidth = 0;\n    _TabSetNode.attributeDefinitions.fromJson(json, this.attributes);\n    model.addNode(this);\n  }\n  /** @internal */\n  static fromJson(json, model, layoutWindow) {\n    const newLayoutNode = new _TabSetNode(model, json);\n    if (json.children != null) {\n      for (const jsonChild of json.children) {\n        const child = TabNode.fromJson(jsonChild, model);\n        newLayoutNode.addChild(child);\n      }\n    }\n    if (newLayoutNode.children.length === 0) {\n      newLayoutNode.setSelected(-1);\n    }\n    if (json.maximized && json.maximized === true) {\n      layoutWindow.maximizedTabSet = newLayoutNode;\n    }\n    if (json.active && json.active === true) {\n      layoutWindow.activeTabSet = newLayoutNode;\n    }\n    return newLayoutNode;\n  }\n  getName() {\n    return this.getAttr(\"name\");\n  }\n  isEnableActiveIcon() {\n    return this.getAttr(\"enableActiveIcon\");\n  }\n  getSelected() {\n    const selected = this.attributes.selected;\n    if (selected !== void 0) {\n      return selected;\n    }\n    return -1;\n  }\n  getSelectedNode() {\n    const selected = this.getSelected();\n    if (selected !== -1) {\n      return this.children[selected];\n    }\n    return void 0;\n  }\n  getWeight() {\n    return this.getAttr(\"weight\");\n  }\n  getAttrMinWidth() {\n    return this.getAttr(\"minWidth\");\n  }\n  getAttrMinHeight() {\n    return this.getAttr(\"minHeight\");\n  }\n  getMinWidth() {\n    return this.calculatedMinWidth;\n  }\n  getMinHeight() {\n    return this.calculatedMinHeight;\n  }\n  /** @internal */\n  getMinSize(orientation) {\n    if (orientation === Orientation.HORZ) {\n      return this.getMinWidth();\n    } else {\n      return this.getMinHeight();\n    }\n  }\n  getAttrMaxWidth() {\n    return this.getAttr(\"maxWidth\");\n  }\n  getAttrMaxHeight() {\n    return this.getAttr(\"maxHeight\");\n  }\n  getMaxWidth() {\n    return this.calculatedMaxWidth;\n  }\n  getMaxHeight() {\n    return this.calculatedMaxHeight;\n  }\n  /** @internal */\n  getMaxSize(orientation) {\n    if (orientation === Orientation.HORZ) {\n      return this.getMaxWidth();\n    } else {\n      return this.getMaxHeight();\n    }\n  }\n  /**\n   * Returns the config attribute that can be used to store node specific data that\n   * WILL be saved to the json. The config attribute should be changed via the action Actions.updateNodeAttributes rather\n   * than directly, for example:\n   * this.state.model.doAction(\n   *   FlexLayout.Actions.updateNodeAttributes(node.getId(), {config:myConfigObject}));\n   */\n  getConfig() {\n    return this.attributes.config;\n  }\n  isMaximized() {\n    return this.model.getMaximizedTabset(this.getWindowId()) === this;\n  }\n  isActive() {\n    return this.model.getActiveTabset(this.getWindowId()) === this;\n  }\n  isEnableDeleteWhenEmpty() {\n    return this.getAttr(\"enableDeleteWhenEmpty\");\n  }\n  isEnableDrop() {\n    return this.getAttr(\"enableDrop\");\n  }\n  isEnableTabWrap() {\n    return this.getAttr(\"enableTabWrap\");\n  }\n  isEnableDrag() {\n    return this.getAttr(\"enableDrag\");\n  }\n  isEnableDivide() {\n    return this.getAttr(\"enableDivide\");\n  }\n  isEnableMaximize() {\n    return this.getAttr(\"enableMaximize\");\n  }\n  isEnableClose() {\n    return this.getAttr(\"enableClose\");\n  }\n  isEnableSingleTabStretch() {\n    return this.getAttr(\"enableSingleTabStretch\");\n  }\n  isEnableTabStrip() {\n    return this.getAttr(\"enableTabStrip\");\n  }\n  isAutoSelectTab() {\n    return this.getAttr(\"autoSelectTab\");\n  }\n  isEnableTabScrollbar() {\n    return this.getAttr(\"enableTabScrollbar\");\n  }\n  getClassNameTabStrip() {\n    return this.getAttr(\"classNameTabStrip\");\n  }\n  getTabLocation() {\n    return this.getAttr(\"tabLocation\");\n  }\n  toJson() {\n    const json = {};\n    _TabSetNode.attributeDefinitions.toJson(json, this.attributes);\n    json.children = this.children.map((child) => child.toJson());\n    if (this.isActive()) {\n      json.active = true;\n    }\n    if (this.isMaximized()) {\n      json.maximized = true;\n    }\n    return json;\n  }\n  /** @internal */\n  calcMinMaxSize() {\n    this.calculatedMinHeight = this.getAttrMinHeight();\n    this.calculatedMinWidth = this.getAttrMinWidth();\n    this.calculatedMaxHeight = this.getAttrMaxHeight();\n    this.calculatedMaxWidth = this.getAttrMaxWidth();\n    for (const child of this.children) {\n      const c = child;\n      this.calculatedMinWidth = Math.max(this.calculatedMinWidth, c.getMinWidth());\n      this.calculatedMinHeight = Math.max(this.calculatedMinHeight, c.getMinHeight());\n      this.calculatedMaxWidth = Math.min(this.calculatedMaxWidth, c.getMaxWidth());\n      this.calculatedMaxHeight = Math.min(this.calculatedMaxHeight, c.getMaxHeight());\n    }\n    this.calculatedMinHeight += this.tabStripRect.height;\n    this.calculatedMaxHeight += this.tabStripRect.height;\n  }\n  /** @internal */\n  canMaximize() {\n    if (this.isEnableMaximize()) {\n      if (this.getModel().getMaximizedTabset(this.getWindowId()) === this) {\n        return true;\n      }\n      if (this.getParent() === this.getModel().getRoot(this.getWindowId()) && this.getModel().getRoot(this.getWindowId()).getChildren().length === 1) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  }\n  /** @internal */\n  setContentRect(rect) {\n    this.contentRect = rect;\n  }\n  /** @internal */\n  getContentRect() {\n    return this.contentRect;\n  }\n  /** @internal */\n  setTabStripRect(rect) {\n    this.tabStripRect = rect;\n  }\n  /** @internal */\n  setWeight(weight) {\n    this.attributes.weight = weight;\n  }\n  /** @internal */\n  setSelected(index) {\n    this.attributes.selected = index;\n  }\n  getWindowId() {\n    return this.parent.getWindowId();\n  }\n  /** @internal */\n  canDrop(dragNode, x, y) {\n    let dropInfo;\n    if (dragNode === this) {\n      const dockLocation = DockLocation.CENTER;\n      const outlineRect = this.tabStripRect;\n      dropInfo = new DropInfo(this, outlineRect, dockLocation, -1, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n    } else if (this.getWindowId() !== Model.MAIN_WINDOW_ID && !canDockToWindow(dragNode)) {\n      return void 0;\n    } else if (this.contentRect.contains(x, y)) {\n      let dockLocation = DockLocation.CENTER;\n      if (this.model.getMaximizedTabset(this.parent.getWindowId()) === void 0) {\n        dockLocation = DockLocation.getLocation(this.contentRect, x, y);\n      }\n      const outlineRect = dockLocation.getDockRect(this.rect);\n      dropInfo = new DropInfo(this, outlineRect, dockLocation, -1, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n    } else if (this.tabStripRect != null && this.tabStripRect.contains(x, y)) {\n      let r;\n      let yy;\n      let h;\n      if (this.children.length === 0) {\n        r = this.tabStripRect.clone();\n        yy = r.y + 3;\n        h = r.height - 4;\n        r.width = 2;\n      } else {\n        let child = this.children[0];\n        r = child.getTabRect();\n        yy = r.y;\n        h = r.height;\n        let p = this.tabStripRect.x;\n        let childCenter = 0;\n        for (let i = 0; i < this.children.length; i++) {\n          child = this.children[i];\n          r = child.getTabRect();\n          if (r.y !== yy) {\n            yy = r.y;\n            p = this.tabStripRect.x;\n          }\n          childCenter = r.x + r.width / 2;\n          if (p <= x && x < childCenter && r.y < y && y < r.getBottom()) {\n            const dockLocation = DockLocation.CENTER;\n            const outlineRect = new Rect(r.x - 2, r.y, 3, r.height);\n            if (this.rect.x < r.x && r.x < this.rect.getRight()) {\n              dropInfo = new DropInfo(this, outlineRect, dockLocation, i, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n              break;\n            } else {\n              return void 0;\n            }\n          }\n          p = childCenter;\n        }\n      }\n      if (dropInfo == null && r.getRight() < this.rect.getRight()) {\n        const dockLocation = DockLocation.CENTER;\n        const outlineRect = new Rect(r.getRight() - 2, yy, 3, h);\n        dropInfo = new DropInfo(this, outlineRect, dockLocation, this.children.length, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n      }\n    }\n    if (!dragNode.canDockInto(dragNode, dropInfo)) {\n      return void 0;\n    }\n    return dropInfo;\n  }\n  /** @internal */\n  delete() {\n    this.parent.removeChild(this);\n  }\n  /** @internal */\n  remove(node) {\n    const removedIndex = this.removeChild(node);\n    this.model.tidy();\n    adjustSelectedIndex(this, removedIndex);\n  }\n  /** @internal */\n  drop(dragNode, location, index, select) {\n    const dockLocation = location;\n    if (this === dragNode) {\n      return;\n    }\n    let dragParent = dragNode.getParent();\n    let fromIndex = 0;\n    if (dragParent !== void 0) {\n      fromIndex = dragParent.removeChild(dragNode);\n      if (dragParent instanceof BorderNode && dragParent.getSelected() === fromIndex) {\n        dragParent.setSelected(-1);\n      } else {\n        adjustSelectedIndex(dragParent, fromIndex);\n      }\n    }\n    if (dragNode instanceof TabNode && dragParent === this && fromIndex < index && index > 0) {\n      index--;\n    }\n    if (dockLocation === DockLocation.CENTER) {\n      let insertPos = index;\n      if (insertPos === -1) {\n        insertPos = this.children.length;\n      }\n      if (dragNode instanceof TabNode) {\n        this.addChild(dragNode, insertPos);\n        if (select || select !== false && this.isAutoSelectTab()) {\n          this.setSelected(insertPos);\n        }\n      } else if (dragNode instanceof RowNode) {\n        dragNode.forEachNode((child, level) => {\n          if (child instanceof TabNode) {\n            this.addChild(child, insertPos);\n            insertPos++;\n          }\n        }, 0);\n      } else {\n        for (let i = 0; i < dragNode.getChildren().length; i++) {\n          const child = dragNode.getChildren()[i];\n          this.addChild(child, insertPos);\n          insertPos++;\n        }\n        if (this.getSelected() === -1 && this.children.length > 0) {\n          this.setSelected(0);\n        }\n      }\n      this.model.setActiveTabset(this, this.parent.getWindowId());\n    } else {\n      let moveNode = dragNode;\n      if (dragNode instanceof TabNode) {\n        const callback = this.model.getOnCreateTabSet();\n        moveNode = new _TabSetNode(this.model, callback ? callback(dragNode) : {});\n        moveNode.addChild(dragNode);\n        dragParent = moveNode;\n      } else if (dragNode instanceof RowNode) {\n        const parent = this.getParent();\n        if (dragNode.getOrientation() === parent.getOrientation() && (location.getOrientation() === parent.getOrientation() || location === DockLocation.CENTER)) {\n          const node = new RowNode(this.model, this.getWindowId(), {});\n          node.addChild(dragNode);\n          moveNode = node;\n        }\n      } else {\n        moveNode = dragNode;\n      }\n      const parentRow = this.parent;\n      const pos = parentRow.getChildren().indexOf(this);\n      if (parentRow.getOrientation() === dockLocation.orientation) {\n        moveNode.setWeight(this.getWeight() / 2);\n        this.setWeight(this.getWeight() / 2);\n        parentRow.addChild(moveNode, pos + dockLocation.indexPlus);\n      } else {\n        const newRow = new RowNode(this.model, this.getWindowId(), {});\n        newRow.setWeight(this.getWeight());\n        newRow.addChild(this);\n        this.setWeight(50);\n        moveNode.setWeight(50);\n        newRow.addChild(moveNode, dockLocation.indexPlus);\n        parentRow.removeChild(this);\n        parentRow.addChild(newRow, pos);\n      }\n      if (moveNode instanceof _TabSetNode) {\n        this.model.setActiveTabset(moveNode, this.getWindowId());\n      }\n    }\n    this.model.tidy();\n  }\n  /** @internal */\n  updateAttrs(json) {\n    _TabSetNode.attributeDefinitions.update(json, this.attributes);\n  }\n  /** @internal */\n  getAttributeDefinitions() {\n    return _TabSetNode.attributeDefinitions;\n  }\n  /** @internal */\n  static getAttributeDefinitions() {\n    return _TabSetNode.attributeDefinitions;\n  }\n  /** @internal */\n  static createAttributeDefinitions() {\n    const attributeDefinitions = new AttributeDefinitions();\n    attributeDefinitions.add(\"type\", _TabSetNode.TYPE, true).setType(Attribute.STRING).setFixed();\n    attributeDefinitions.add(\"id\", void 0).setType(Attribute.STRING).setDescription(\n      `the unique id of the tab set, if left undefined a uuid will be assigned`\n    );\n    attributeDefinitions.add(\"weight\", 100).setType(Attribute.NUMBER).setDescription(\n      `relative weight for sizing of this tabset in parent row`\n    );\n    attributeDefinitions.add(\"selected\", 0).setType(Attribute.NUMBER).setDescription(\n      `index of selected/visible tab in tabset`\n    );\n    attributeDefinitions.add(\"name\", void 0).setType(Attribute.STRING);\n    attributeDefinitions.add(\"config\", void 0).setType(\"any\").setDescription(\n      `a place to hold json config used in your own code`\n    );\n    attributeDefinitions.addInherited(\"enableDeleteWhenEmpty\", \"tabSetEnableDeleteWhenEmpty\").setDescription(\n      `whether to delete this tabset when is has no tabs`\n    );\n    attributeDefinitions.addInherited(\"enableDrop\", \"tabSetEnableDrop\").setDescription(\n      `allow user to drag tabs into this tabset`\n    );\n    attributeDefinitions.addInherited(\"enableDrag\", \"tabSetEnableDrag\").setDescription(\n      `allow user to drag tabs out this tabset`\n    );\n    attributeDefinitions.addInherited(\"enableDivide\", \"tabSetEnableDivide\").setDescription(\n      `allow user to drag tabs to region of this tabset, splitting into new tabset`\n    );\n    attributeDefinitions.addInherited(\"enableMaximize\", \"tabSetEnableMaximize\").setDescription(\n      `allow user to maximize tabset to fill view via maximize button`\n    );\n    attributeDefinitions.addInherited(\"enableClose\", \"tabSetEnableClose\").setDescription(\n      `allow user to close tabset via a close button`\n    );\n    attributeDefinitions.addInherited(\"enableSingleTabStretch\", \"tabSetEnableSingleTabStretch\").setDescription(\n      `if the tabset has only a single tab then stretch the single tab to fill area and display in a header style`\n    );\n    attributeDefinitions.addInherited(\"classNameTabStrip\", \"tabSetClassNameTabStrip\").setDescription(\n      `a class name to apply to the tab strip`\n    );\n    attributeDefinitions.addInherited(\"enableTabStrip\", \"tabSetEnableTabStrip\").setDescription(\n      `enable tab strip and allow multiple tabs in this tabset`\n    );\n    attributeDefinitions.addInherited(\"minWidth\", \"tabSetMinWidth\").setDescription(\n      `minimum width (in px) for this tabset`\n    );\n    attributeDefinitions.addInherited(\"minHeight\", \"tabSetMinHeight\").setDescription(\n      `minimum height (in px) for this tabset`\n    );\n    attributeDefinitions.addInherited(\"maxWidth\", \"tabSetMaxWidth\").setDescription(\n      `maximum width (in px) for this tabset`\n    );\n    attributeDefinitions.addInherited(\"maxHeight\", \"tabSetMaxHeight\").setDescription(\n      `maximum height (in px) for this tabset`\n    );\n    attributeDefinitions.addInherited(\"enableTabWrap\", \"tabSetEnableTabWrap\").setDescription(\n      `wrap tabs onto multiple lines`\n    );\n    attributeDefinitions.addInherited(\"tabLocation\", \"tabSetTabLocation\").setDescription(\n      `the location of the tabs either top or bottom`\n    );\n    attributeDefinitions.addInherited(\"autoSelectTab\", \"tabSetAutoSelectTab\").setType(Attribute.BOOLEAN).setDescription(\n      `whether to select new/moved tabs in tabset`\n    );\n    attributeDefinitions.addInherited(\"enableActiveIcon\", \"tabSetEnableActiveIcon\").setType(Attribute.BOOLEAN).setDescription(\n      `whether the active icon (*) should be displayed when the tabset is active`\n    );\n    attributeDefinitions.addInherited(\"enableTabScrollbar\", \"tabSetEnableTabScrollbar\").setType(Attribute.BOOLEAN).setDescription(\n      `whether to show a mini scrollbar for the tabs`\n    );\n    return attributeDefinitions;\n  }\n};\n__publicField(_TabSetNode, \"TYPE\", \"tabset\");\n/** @internal */\n__publicField(_TabSetNode, \"attributeDefinitions\", _TabSetNode.createAttributeDefinitions());\nlet TabSetNode = _TabSetNode;\nconst _RowNode = class _RowNode extends Node {\n  /** @internal */\n  constructor(model, windowId, json) {\n    super(model);\n    /** @internal */\n    __publicField(this, \"windowId\");\n    /** @internal */\n    __publicField(this, \"minHeight\");\n    /** @internal */\n    __publicField(this, \"minWidth\");\n    /** @internal */\n    __publicField(this, \"maxHeight\");\n    /** @internal */\n    __publicField(this, \"maxWidth\");\n    this.windowId = windowId;\n    this.minHeight = DefaultMin;\n    this.minWidth = DefaultMin;\n    this.maxHeight = DefaultMax;\n    this.maxWidth = DefaultMax;\n    _RowNode.attributeDefinitions.fromJson(json, this.attributes);\n    this.normalizeWeights();\n    model.addNode(this);\n  }\n  /** @internal */\n  static fromJson(json, model, layoutWindow) {\n    const newLayoutNode = new _RowNode(model, layoutWindow.windowId, json);\n    if (json.children != null) {\n      for (const jsonChild of json.children) {\n        if (jsonChild.type === TabSetNode.TYPE) {\n          const child = TabSetNode.fromJson(jsonChild, model, layoutWindow);\n          newLayoutNode.addChild(child);\n        } else {\n          const child = _RowNode.fromJson(jsonChild, model, layoutWindow);\n          newLayoutNode.addChild(child);\n        }\n      }\n    }\n    return newLayoutNode;\n  }\n  getWeight() {\n    return this.attributes.weight;\n  }\n  toJson() {\n    const json = {};\n    _RowNode.attributeDefinitions.toJson(json, this.attributes);\n    json.children = [];\n    for (const child of this.children) {\n      json.children.push(child.toJson());\n    }\n    return json;\n  }\n  /** @internal */\n  getWindowId() {\n    return this.windowId;\n  }\n  setWindowId(windowId) {\n    this.windowId = windowId;\n  }\n  /** @internal */\n  setWeight(weight) {\n    this.attributes.weight = weight;\n  }\n  /** @internal */\n  getSplitterBounds(index) {\n    const h = this.getOrientation() === Orientation.HORZ;\n    const c = this.getChildren();\n    const ss = this.model.getSplitterSize();\n    const fr = c[0].getRect();\n    const lr = c[c.length - 1].getRect();\n    let p = h ? [fr.x, lr.getRight()] : [fr.y, lr.getBottom()];\n    const q = h ? [fr.x, lr.getRight()] : [fr.y, lr.getBottom()];\n    for (let i = 0; i < index; i++) {\n      const n = c[i];\n      p[0] += h ? n.getMinWidth() : n.getMinHeight();\n      q[0] += h ? n.getMaxWidth() : n.getMaxHeight();\n      if (i > 0) {\n        p[0] += ss;\n        q[0] += ss;\n      }\n    }\n    for (let i = c.length - 1; i >= index; i--) {\n      const n = c[i];\n      p[1] -= (h ? n.getMinWidth() : n.getMinHeight()) + ss;\n      q[1] -= (h ? n.getMaxWidth() : n.getMaxHeight()) + ss;\n    }\n    p = [Math.max(q[1], p[0]), Math.min(q[0], p[1])];\n    return p;\n  }\n  /** @internal */\n  getSplitterInitials(index) {\n    const h = this.getOrientation() === Orientation.HORZ;\n    const c = this.getChildren();\n    const ss = this.model.getSplitterSize();\n    const initialSizes = [];\n    let sum = 0;\n    for (let i = 0; i < c.length; i++) {\n      const n = c[i];\n      const r = n.getRect();\n      const s = h ? r.width : r.height;\n      initialSizes.push(s);\n      sum += s;\n    }\n    const startRect = c[index].getRect();\n    const startPosition = (h ? startRect.x : startRect.y) - ss;\n    return { initialSizes, sum, startPosition };\n  }\n  /** @internal */\n  calculateSplit(index, splitterPos, initialSizes, sum, startPosition) {\n    const h = this.getOrientation() === Orientation.HORZ;\n    const c = this.getChildren();\n    const sn = c[index];\n    const smax = h ? sn.getMaxWidth() : sn.getMaxHeight();\n    const sizes = [...initialSizes];\n    if (splitterPos < startPosition) {\n      let shift = startPosition - splitterPos;\n      let altShift = 0;\n      if (sizes[index] + shift > smax) {\n        altShift = sizes[index] + shift - smax;\n        sizes[index] = smax;\n      } else {\n        sizes[index] += shift;\n      }\n      for (let i = index - 1; i >= 0; i--) {\n        const n = c[i];\n        const m = h ? n.getMinWidth() : n.getMinHeight();\n        if (sizes[i] - shift > m) {\n          sizes[i] -= shift;\n          break;\n        } else {\n          shift -= sizes[i] - m;\n          sizes[i] = m;\n        }\n      }\n      for (let i = index + 1; i < c.length; i++) {\n        const n = c[i];\n        const m = h ? n.getMaxWidth() : n.getMaxHeight();\n        if (sizes[i] + altShift < m) {\n          sizes[i] += altShift;\n          break;\n        } else {\n          altShift -= m - sizes[i];\n          sizes[i] = m;\n        }\n      }\n    } else {\n      let shift = splitterPos - startPosition;\n      let altShift = 0;\n      if (sizes[index - 1] + shift > smax) {\n        altShift = sizes[index - 1] + shift - smax;\n        sizes[index - 1] = smax;\n      } else {\n        sizes[index - 1] += shift;\n      }\n      for (let i = index; i < c.length; i++) {\n        const n = c[i];\n        const m = h ? n.getMinWidth() : n.getMinHeight();\n        if (sizes[i] - shift > m) {\n          sizes[i] -= shift;\n          break;\n        } else {\n          shift -= sizes[i] - m;\n          sizes[i] = m;\n        }\n      }\n      for (let i = index - 1; i >= 0; i--) {\n        const n = c[i];\n        const m = h ? n.getMaxWidth() : n.getMaxHeight();\n        if (sizes[i] + altShift < m) {\n          sizes[i] += altShift;\n          break;\n        } else {\n          altShift -= m - sizes[i];\n          sizes[i] = m;\n        }\n      }\n    }\n    const weights = sizes.map((s) => Math.max(0.1, s) * 100 / sum);\n    return weights;\n  }\n  /** @internal */\n  getMinSize(orientation) {\n    if (orientation === Orientation.HORZ) {\n      return this.getMinWidth();\n    } else {\n      return this.getMinHeight();\n    }\n  }\n  /** @internal */\n  getMinWidth() {\n    return this.minWidth;\n  }\n  /** @internal */\n  getMinHeight() {\n    return this.minHeight;\n  }\n  /** @internal */\n  getMaxSize(orientation) {\n    if (orientation === Orientation.HORZ) {\n      return this.getMaxWidth();\n    } else {\n      return this.getMaxHeight();\n    }\n  }\n  /** @internal */\n  getMaxWidth() {\n    return this.maxWidth;\n  }\n  /** @internal */\n  getMaxHeight() {\n    return this.maxHeight;\n  }\n  /** @internal */\n  calcMinMaxSize() {\n    this.minHeight = DefaultMin;\n    this.minWidth = DefaultMin;\n    this.maxHeight = DefaultMax;\n    this.maxWidth = DefaultMax;\n    let first = true;\n    for (const child of this.children) {\n      const c = child;\n      c.calcMinMaxSize();\n      if (this.getOrientation() === Orientation.VERT) {\n        this.minHeight += c.getMinHeight();\n        this.maxHeight += c.getMaxHeight();\n        if (!first) {\n          this.minHeight += this.model.getSplitterSize();\n          this.maxHeight += this.model.getSplitterSize();\n        }\n        this.minWidth = Math.max(this.minWidth, c.getMinWidth());\n        this.maxWidth = Math.min(this.maxWidth, c.getMaxWidth());\n      } else {\n        this.minWidth += c.getMinWidth();\n        this.maxWidth += c.getMaxWidth();\n        if (!first) {\n          this.minWidth += this.model.getSplitterSize();\n          this.maxWidth += this.model.getSplitterSize();\n        }\n        this.minHeight = Math.max(this.minHeight, c.getMinHeight());\n        this.maxHeight = Math.min(this.maxHeight, c.getMaxHeight());\n      }\n      first = false;\n    }\n  }\n  /** @internal */\n  tidy() {\n    let i = 0;\n    while (i < this.children.length) {\n      const child = this.children[i];\n      if (child instanceof _RowNode) {\n        child.tidy();\n        const childChildren = child.getChildren();\n        if (childChildren.length === 0) {\n          this.removeChild(child);\n        } else if (childChildren.length === 1) {\n          const subchild = childChildren[0];\n          this.removeChild(child);\n          if (subchild instanceof _RowNode) {\n            let subChildrenTotal = 0;\n            const subChildChildren = subchild.getChildren();\n            for (const ssc of subChildChildren) {\n              const subsubChild = ssc;\n              subChildrenTotal += subsubChild.getWeight();\n            }\n            for (let j = 0; j < subChildChildren.length; j++) {\n              const subsubChild = subChildChildren[j];\n              subsubChild.setWeight(child.getWeight() * subsubChild.getWeight() / subChildrenTotal);\n              this.addChild(subsubChild, i + j);\n            }\n          } else {\n            subchild.setWeight(child.getWeight());\n            this.addChild(subchild, i);\n          }\n        } else {\n          i++;\n        }\n      } else if (child instanceof TabSetNode && child.getChildren().length === 0) {\n        if (child.isEnableDeleteWhenEmpty()) {\n          this.removeChild(child);\n          if (child === this.model.getMaximizedTabset(this.windowId)) {\n            this.model.setMaximizedTabset(void 0, this.windowId);\n          }\n        } else {\n          i++;\n        }\n      } else {\n        i++;\n      }\n    }\n    if (this === this.model.getRoot(this.windowId) && this.children.length === 0) {\n      const callback = this.model.getOnCreateTabSet();\n      let attrs = callback ? callback() : {};\n      attrs = { ...attrs, selected: -1 };\n      const child = new TabSetNode(this.model, attrs);\n      this.model.setActiveTabset(child, this.windowId);\n      this.addChild(child);\n    }\n  }\n  /** @internal */\n  canDrop(dragNode, x, y) {\n    const yy = y - this.rect.y;\n    const xx = x - this.rect.x;\n    const w = this.rect.width;\n    const h = this.rect.height;\n    const margin = 10;\n    const half = 50;\n    let dropInfo;\n    if (this.getWindowId() !== Model.MAIN_WINDOW_ID && !canDockToWindow(dragNode)) {\n      return void 0;\n    }\n    if (this.model.isEnableEdgeDock() && this.parent === void 0) {\n      if (x < this.rect.x + margin && yy > h / 2 - half && yy < h / 2 + half) {\n        const dockLocation = DockLocation.LEFT;\n        const outlineRect = dockLocation.getDockRect(this.rect);\n        outlineRect.width = outlineRect.width / 2;\n        dropInfo = new DropInfo(this, outlineRect, dockLocation, -1, CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE);\n      } else if (x > this.rect.getRight() - margin && yy > h / 2 - half && yy < h / 2 + half) {\n        const dockLocation = DockLocation.RIGHT;\n        const outlineRect = dockLocation.getDockRect(this.rect);\n        outlineRect.width = outlineRect.width / 2;\n        outlineRect.x += outlineRect.width;\n        dropInfo = new DropInfo(this, outlineRect, dockLocation, -1, CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE);\n      } else if (y < this.rect.y + margin && xx > w / 2 - half && xx < w / 2 + half) {\n        const dockLocation = DockLocation.TOP;\n        const outlineRect = dockLocation.getDockRect(this.rect);\n        outlineRect.height = outlineRect.height / 2;\n        dropInfo = new DropInfo(this, outlineRect, dockLocation, -1, CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE);\n      } else if (y > this.rect.getBottom() - margin && xx > w / 2 - half && xx < w / 2 + half) {\n        const dockLocation = DockLocation.BOTTOM;\n        const outlineRect = dockLocation.getDockRect(this.rect);\n        outlineRect.height = outlineRect.height / 2;\n        outlineRect.y += outlineRect.height;\n        dropInfo = new DropInfo(this, outlineRect, dockLocation, -1, CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE);\n      }\n      if (dropInfo !== void 0) {\n        if (!dragNode.canDockInto(dragNode, dropInfo)) {\n          return void 0;\n        }\n      }\n    }\n    return dropInfo;\n  }\n  /** @internal */\n  drop(dragNode, location, index) {\n    const dockLocation = location;\n    const parent = dragNode.getParent();\n    if (parent) {\n      parent.removeChild(dragNode);\n    }\n    if (parent !== void 0 && parent instanceof TabSetNode) {\n      parent.setSelected(0);\n    }\n    if (parent !== void 0 && parent instanceof BorderNode) {\n      parent.setSelected(-1);\n    }\n    let node;\n    if (dragNode instanceof TabSetNode || dragNode instanceof _RowNode) {\n      node = dragNode;\n      if (node instanceof _RowNode && node.getOrientation() === this.getOrientation() && (location.getOrientation() === this.getOrientation() || location === DockLocation.CENTER)) {\n        node = new _RowNode(this.model, this.windowId, {});\n        node.addChild(dragNode);\n      }\n    } else {\n      const callback = this.model.getOnCreateTabSet();\n      node = new TabSetNode(this.model, callback ? callback(dragNode) : {});\n      node.addChild(dragNode);\n    }\n    let size = this.children.reduce((sum, child) => {\n      return sum + child.getWeight();\n    }, 0);\n    if (size === 0) {\n      size = 100;\n    }\n    node.setWeight(size / 3);\n    const horz = !this.model.isRootOrientationVertical();\n    if (dockLocation === DockLocation.CENTER) {\n      if (index === -1) {\n        this.addChild(node, this.children.length);\n      } else {\n        this.addChild(node, index);\n      }\n    } else if (horz && dockLocation === DockLocation.LEFT || !horz && dockLocation === DockLocation.TOP) {\n      this.addChild(node, 0);\n    } else if (horz && dockLocation === DockLocation.RIGHT || !horz && dockLocation === DockLocation.BOTTOM) {\n      this.addChild(node);\n    } else if (horz && dockLocation === DockLocation.TOP || !horz && dockLocation === DockLocation.LEFT) {\n      const vrow = new _RowNode(this.model, this.windowId, {});\n      const hrow = new _RowNode(this.model, this.windowId, {});\n      hrow.setWeight(75);\n      node.setWeight(25);\n      for (const child of this.children) {\n        hrow.addChild(child);\n      }\n      this.removeAll();\n      vrow.addChild(node);\n      vrow.addChild(hrow);\n      this.addChild(vrow);\n    } else if (horz && dockLocation === DockLocation.BOTTOM || !horz && dockLocation === DockLocation.RIGHT) {\n      const vrow = new _RowNode(this.model, this.windowId, {});\n      const hrow = new _RowNode(this.model, this.windowId, {});\n      hrow.setWeight(75);\n      node.setWeight(25);\n      for (const child of this.children) {\n        hrow.addChild(child);\n      }\n      this.removeAll();\n      vrow.addChild(hrow);\n      vrow.addChild(node);\n      this.addChild(vrow);\n    }\n    if (node instanceof TabSetNode) {\n      this.model.setActiveTabset(node, this.windowId);\n    }\n    this.model.tidy();\n  }\n  /** @internal */\n  isEnableDrop() {\n    return true;\n  }\n  /** @internal */\n  getAttributeDefinitions() {\n    return _RowNode.attributeDefinitions;\n  }\n  /** @internal */\n  updateAttrs(json) {\n    _RowNode.attributeDefinitions.update(json, this.attributes);\n  }\n  /** @internal */\n  static getAttributeDefinitions() {\n    return _RowNode.attributeDefinitions;\n  }\n  // NOTE:  flex-grow cannot have values < 1 otherwise will not fill parent, need to normalize \n  normalizeWeights() {\n    let sum = 0;\n    for (const n of this.children) {\n      const node = n;\n      sum += node.getWeight();\n    }\n    if (sum === 0) {\n      sum = 1;\n    }\n    for (const n of this.children) {\n      const node = n;\n      node.setWeight(Math.max(1e-3, 100 * node.getWeight() / sum));\n    }\n  }\n  /** @internal */\n  static createAttributeDefinitions() {\n    const attributeDefinitions = new AttributeDefinitions();\n    attributeDefinitions.add(\"type\", _RowNode.TYPE, true).setType(Attribute.STRING).setFixed();\n    attributeDefinitions.add(\"id\", void 0).setType(Attribute.STRING).setDescription(\n      `the unique id of the row, if left undefined a uuid will be assigned`\n    );\n    attributeDefinitions.add(\"weight\", 100).setType(Attribute.NUMBER).setDescription(\n      `relative weight for sizing of this row in parent row`\n    );\n    return attributeDefinitions;\n  }\n};\n__publicField(_RowNode, \"TYPE\", \"row\");\n/** @internal */\n__publicField(_RowNode, \"attributeDefinitions\", _RowNode.createAttributeDefinitions());\nlet RowNode = _RowNode;\nclass LayoutWindow {\n  constructor(windowId, rect) {\n    __publicField(this, \"_windowId\");\n    __publicField(this, \"_layout\");\n    __publicField(this, \"_rect\");\n    __publicField(this, \"_window\");\n    __publicField(this, \"_root\");\n    __publicField(this, \"_maximizedTabSet\");\n    __publicField(this, \"_activeTabSet\");\n    __publicField(this, \"_toScreenRectFunction\");\n    this._windowId = windowId;\n    this._rect = rect;\n    this._toScreenRectFunction = (r) => r;\n  }\n  visitNodes(fn) {\n    this.root.forEachNode(fn, 0);\n  }\n  get windowId() {\n    return this._windowId;\n  }\n  get rect() {\n    return this._rect;\n  }\n  get layout() {\n    return this._layout;\n  }\n  get window() {\n    return this._window;\n  }\n  get root() {\n    return this._root;\n  }\n  get maximizedTabSet() {\n    return this._maximizedTabSet;\n  }\n  get activeTabSet() {\n    return this._activeTabSet;\n  }\n  /** @internal */\n  set rect(value) {\n    this._rect = value;\n  }\n  /** @internal */\n  set layout(value) {\n    this._layout = value;\n  }\n  /** @internal */\n  set window(value) {\n    this._window = value;\n  }\n  /** @internal */\n  set root(value) {\n    this._root = value;\n  }\n  /** @internal */\n  set maximizedTabSet(value) {\n    this._maximizedTabSet = value;\n  }\n  /** @internal */\n  set activeTabSet(value) {\n    this._activeTabSet = value;\n  }\n  /** @internal */\n  get toScreenRectFunction() {\n    return this._toScreenRectFunction;\n  }\n  /** @internal */\n  set toScreenRectFunction(value) {\n    this._toScreenRectFunction = value;\n  }\n  toJson() {\n    if (this._window && this._window.screenTop > -1e4) {\n      this.rect = new Rect(\n        this._window.screenLeft,\n        this._window.screenTop,\n        this._window.outerWidth,\n        this._window.outerHeight\n      );\n    }\n    return { layout: this.root.toJson(), rect: this.rect.toJson() };\n  }\n  static fromJson(windowJson, model, windowId) {\n    const count = model.getwindowsMap().size;\n    const rect = windowJson.rect ? Rect.fromJson(windowJson.rect) : new Rect(50 + 50 * count, 50 + 50 * count, 600, 400);\n    rect.snap(10);\n    const layoutWindow = new LayoutWindow(windowId, rect);\n    layoutWindow.root = RowNode.fromJson(windowJson.layout, model, layoutWindow);\n    return layoutWindow;\n  }\n}\nconst DefaultMin = 0;\nconst DefaultMax = 99999;\nconst _Model = class _Model {\n  /**\n   * 'private' constructor. Use the static method Model.fromJson(json) to create a model\n   *  @internal\n   */\n  constructor() {\n    /** @internal */\n    __publicField(this, \"attributes\");\n    /** @internal */\n    __publicField(this, \"idMap\");\n    /** @internal */\n    __publicField(this, \"changeListeners\");\n    /** @internal */\n    __publicField(this, \"borders\");\n    /** @internal */\n    __publicField(this, \"onAllowDrop\");\n    /** @internal */\n    __publicField(this, \"onCreateTabSet\");\n    /** @internal */\n    __publicField(this, \"windows\");\n    /** @internal */\n    __publicField(this, \"rootWindow\");\n    this.attributes = {};\n    this.idMap = /* @__PURE__ */ new Map();\n    this.borders = new BorderSet(this);\n    this.windows = /* @__PURE__ */ new Map();\n    this.rootWindow = new LayoutWindow(_Model.MAIN_WINDOW_ID, Rect.empty());\n    this.windows.set(_Model.MAIN_WINDOW_ID, this.rootWindow);\n    this.changeListeners = [];\n  }\n  /**\n   * Update the node tree by performing the given action,\n   * Actions should be generated via static methods on the Actions class\n   * @param action the action to perform\n   * @returns added Node for Actions.addNode, windowId for createWindow\n   */\n  doAction(action) {\n    var _a;\n    let returnVal = void 0;\n    switch (action.type) {\n      case Actions.ADD_NODE: {\n        const newNode = new TabNode(this, action.data.json, true);\n        const toNode = this.idMap.get(action.data.toNode);\n        if (toNode instanceof TabSetNode || toNode instanceof BorderNode || toNode instanceof RowNode) {\n          toNode.drop(newNode, DockLocation.getByName(action.data.location), action.data.index, action.data.select);\n          returnVal = newNode;\n        }\n        break;\n      }\n      case Actions.MOVE_NODE: {\n        const fromNode = this.idMap.get(action.data.fromNode);\n        if (fromNode instanceof TabNode || fromNode instanceof TabSetNode || fromNode instanceof RowNode) {\n          if (fromNode === this.getMaximizedTabset(fromNode.getWindowId())) {\n            const fromWindow = this.windows.get(fromNode.getWindowId());\n            fromWindow.maximizedTabSet = void 0;\n          }\n          const toNode = this.idMap.get(action.data.toNode);\n          if (toNode instanceof TabSetNode || toNode instanceof BorderNode || toNode instanceof RowNode) {\n            toNode.drop(fromNode, DockLocation.getByName(action.data.location), action.data.index, action.data.select);\n          }\n        }\n        this.removeEmptyWindows();\n        break;\n      }\n      case Actions.DELETE_TAB: {\n        const node = this.idMap.get(action.data.node);\n        if (node instanceof TabNode) {\n          node.delete();\n        }\n        this.removeEmptyWindows();\n        break;\n      }\n      case Actions.DELETE_TABSET: {\n        const node = this.idMap.get(action.data.node);\n        if (node instanceof TabSetNode) {\n          const children = [...node.getChildren()];\n          for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (child.isEnableClose()) {\n              child.delete();\n            }\n          }\n          if (node.getChildren().length === 0) {\n            node.delete();\n          }\n          this.tidy();\n        }\n        this.removeEmptyWindows();\n        break;\n      }\n      case Actions.POPOUT_TABSET: {\n        const node = this.idMap.get(action.data.node);\n        if (node instanceof TabSetNode) {\n          const isMaximized = node.isMaximized();\n          const oldLayoutWindow = this.windows.get(node.getWindowId());\n          const windowId = randomUUID();\n          const layoutWindow = new LayoutWindow(windowId, oldLayoutWindow.toScreenRectFunction(node.getRect()));\n          const json = {\n            type: \"row\",\n            children: []\n          };\n          const row = RowNode.fromJson(json, this, layoutWindow);\n          layoutWindow.root = row;\n          this.windows.set(windowId, layoutWindow);\n          row.drop(node, DockLocation.CENTER, 0);\n          if (isMaximized) {\n            this.rootWindow.maximizedTabSet = void 0;\n          }\n        }\n        this.removeEmptyWindows();\n        break;\n      }\n      case Actions.POPOUT_TAB: {\n        const node = this.idMap.get(action.data.node);\n        if (node instanceof TabNode) {\n          const windowId = randomUUID();\n          let r = Rect.empty();\n          if (node.getParent() instanceof TabSetNode) {\n            r = node.getParent().getRect();\n          } else {\n            r = node.getParent().getContentRect();\n          }\n          const oldLayoutWindow = this.windows.get(node.getWindowId());\n          const layoutWindow = new LayoutWindow(windowId, oldLayoutWindow.toScreenRectFunction(r));\n          const tabsetId = randomUUID();\n          const json = {\n            type: \"row\",\n            children: [\n              { type: \"tabset\", id: tabsetId }\n            ]\n          };\n          const row = RowNode.fromJson(json, this, layoutWindow);\n          layoutWindow.root = row;\n          this.windows.set(windowId, layoutWindow);\n          const tabset = this.idMap.get(tabsetId);\n          tabset.drop(node, DockLocation.CENTER, 0, true);\n        }\n        this.removeEmptyWindows();\n        break;\n      }\n      case Actions.CLOSE_WINDOW: {\n        const window2 = this.windows.get(action.data.windowId);\n        if (window2) {\n          (_a = this.rootWindow.root) == null ? void 0 : _a.drop(window2.root, DockLocation.CENTER, -1);\n          this.rootWindow.visitNodes((node, level) => {\n            if (node instanceof RowNode) {\n              node.setWindowId(_Model.MAIN_WINDOW_ID);\n            }\n          });\n          this.windows.delete(action.data.windowId);\n        }\n        break;\n      }\n      case Actions.CREATE_WINDOW: {\n        const windowId = randomUUID();\n        const layoutWindow = new LayoutWindow(windowId, Rect.fromJson(action.data.rect));\n        const row = RowNode.fromJson(action.data.layout, this, layoutWindow);\n        layoutWindow.root = row;\n        this.windows.set(windowId, layoutWindow);\n        returnVal = windowId;\n        break;\n      }\n      case Actions.RENAME_TAB: {\n        const node = this.idMap.get(action.data.node);\n        if (node instanceof TabNode) {\n          node.setName(action.data.text);\n        }\n        break;\n      }\n      case Actions.SELECT_TAB: {\n        const tabNode = this.idMap.get(action.data.tabNode);\n        const windowId = action.data.windowId ? action.data.windowId : _Model.MAIN_WINDOW_ID;\n        const window2 = this.windows.get(windowId);\n        if (tabNode instanceof TabNode) {\n          const parent = tabNode.getParent();\n          const pos = parent.getChildren().indexOf(tabNode);\n          if (parent instanceof BorderNode) {\n            if (parent.getSelected() === pos) {\n              parent.setSelected(-1);\n            } else {\n              parent.setSelected(pos);\n            }\n          } else if (parent instanceof TabSetNode) {\n            if (parent.getSelected() !== pos) {\n              parent.setSelected(pos);\n            }\n            window2.activeTabSet = parent;\n          }\n        }\n        break;\n      }\n      case Actions.SET_ACTIVE_TABSET: {\n        const windowId = action.data.windowId ? action.data.windowId : _Model.MAIN_WINDOW_ID;\n        const window2 = this.windows.get(windowId);\n        if (action.data.tabsetNode === void 0) {\n          window2.activeTabSet = void 0;\n        } else {\n          const tabsetNode = this.idMap.get(action.data.tabsetNode);\n          if (tabsetNode instanceof TabSetNode) {\n            window2.activeTabSet = tabsetNode;\n          }\n        }\n        break;\n      }\n      case Actions.ADJUST_WEIGHTS: {\n        const row = this.idMap.get(action.data.nodeId);\n        const c = row.getChildren();\n        for (let i = 0; i < c.length; i++) {\n          const n = c[i];\n          n.setWeight(action.data.weights[i]);\n        }\n        break;\n      }\n      case Actions.ADJUST_BORDER_SPLIT: {\n        const node = this.idMap.get(action.data.node);\n        if (node instanceof BorderNode) {\n          node.setSize(action.data.pos);\n        }\n        break;\n      }\n      case Actions.MAXIMIZE_TOGGLE: {\n        const windowId = action.data.windowId ? action.data.windowId : _Model.MAIN_WINDOW_ID;\n        const window2 = this.windows.get(windowId);\n        const node = this.idMap.get(action.data.node);\n        if (node instanceof TabSetNode) {\n          if (node === window2.maximizedTabSet) {\n            window2.maximizedTabSet = void 0;\n          } else {\n            window2.maximizedTabSet = node;\n            window2.activeTabSet = node;\n          }\n        }\n        break;\n      }\n      case Actions.UPDATE_MODEL_ATTRIBUTES: {\n        this.updateAttrs(action.data.json);\n        break;\n      }\n      case Actions.UPDATE_NODE_ATTRIBUTES: {\n        const node = this.idMap.get(action.data.node);\n        node.updateAttrs(action.data.json);\n        break;\n      }\n    }\n    this.updateIdMap();\n    for (const listener of this.changeListeners) {\n      listener(action);\n    }\n    return returnVal;\n  }\n  /**\n   * Get the currently active tabset node\n   */\n  getActiveTabset(windowId = _Model.MAIN_WINDOW_ID) {\n    const window2 = this.windows.get(windowId);\n    if (window2 && window2.activeTabSet && this.getNodeById(window2.activeTabSet.getId())) {\n      return window2.activeTabSet;\n    } else {\n      return void 0;\n    }\n  }\n  /**\n   * Get the currently maximized tabset node\n   */\n  getMaximizedTabset(windowId = _Model.MAIN_WINDOW_ID) {\n    return this.windows.get(windowId).maximizedTabSet;\n  }\n  /**\n   * Gets the root RowNode of the model\n   * @returns {RowNode}\n   */\n  getRoot(windowId = _Model.MAIN_WINDOW_ID) {\n    return this.windows.get(windowId).root;\n  }\n  isRootOrientationVertical() {\n    return this.attributes.rootOrientationVertical;\n  }\n  isEnableRotateBorderIcons() {\n    return this.attributes.enableRotateBorderIcons;\n  }\n  /**\n   * Gets the\n   * @returns {BorderSet|*}\n   */\n  getBorderSet() {\n    return this.borders;\n  }\n  getwindowsMap() {\n    return this.windows;\n  }\n  /**\n   * Visits all the nodes in the model and calls the given function for each\n   * @param fn a function that takes visited node and a integer level as parameters\n   */\n  visitNodes(fn) {\n    this.borders.forEachNode(fn);\n    for (const [_, w] of this.windows) {\n      w.root.forEachNode(fn, 0);\n    }\n  }\n  visitWindowNodes(windowId, fn) {\n    if (this.windows.has(windowId)) {\n      if (windowId === _Model.MAIN_WINDOW_ID) {\n        this.borders.forEachNode(fn);\n      }\n      this.windows.get(windowId).visitNodes(fn);\n    }\n  }\n  /**\n   * Gets a node by its id\n   * @param id the id to find\n   */\n  getNodeById(id) {\n    return this.idMap.get(id);\n  }\n  /**\n   * Finds the first/top left tab set of the given node.\n   * @param node The top node you want to begin searching from, deafults to the root node\n   * @returns The first Tab Set\n   */\n  getFirstTabSet(node = this.windows.get(_Model.MAIN_WINDOW_ID).root) {\n    const child = node.getChildren()[0];\n    if (child instanceof TabSetNode) {\n      return child;\n    } else {\n      return this.getFirstTabSet(child);\n    }\n  }\n  /**\n  * Loads the model from the given json object\n  * @param json the json model to load\n  * @returns {Model} a new Model object\n  */\n  static fromJson(json) {\n    const model = new _Model();\n    _Model.attributeDefinitions.fromJson(json.global, model.attributes);\n    if (json.borders) {\n      model.borders = BorderSet.fromJson(json.borders, model);\n    }\n    if (json.popouts) {\n      for (const windowId in json.popouts) {\n        const windowJson = json.popouts[windowId];\n        const layoutWindow = LayoutWindow.fromJson(windowJson, model, windowId);\n        model.windows.set(windowId, layoutWindow);\n      }\n    }\n    model.rootWindow.root = RowNode.fromJson(json.layout, model, model.getwindowsMap().get(_Model.MAIN_WINDOW_ID));\n    model.tidy();\n    return model;\n  }\n  /**\n   * Converts the model to a json object\n   * @returns {IJsonModel} json object that represents this model\n   */\n  toJson() {\n    const global = {};\n    _Model.attributeDefinitions.toJson(global, this.attributes);\n    this.visitNodes((node) => {\n      node.fireEvent(\"save\", {});\n    });\n    const windows = {};\n    for (const [id, window2] of this.windows) {\n      if (id !== _Model.MAIN_WINDOW_ID) {\n        windows[id] = window2.toJson();\n      }\n    }\n    return {\n      global,\n      borders: this.borders.toJson(),\n      layout: this.rootWindow.root.toJson(),\n      popouts: windows\n    };\n  }\n  getSplitterSize() {\n    return this.attributes.splitterSize;\n  }\n  getSplitterExtra() {\n    return this.attributes.splitterExtra;\n  }\n  isEnableEdgeDock() {\n    return this.attributes.enableEdgeDock;\n  }\n  isSplitterEnableHandle() {\n    return this.attributes.splitterEnableHandle;\n  }\n  /**\n   * Sets a function to allow/deny dropping a node\n   * @param onAllowDrop function that takes the drag node and DropInfo and returns true if the drop is allowed\n   */\n  setOnAllowDrop(onAllowDrop) {\n    this.onAllowDrop = onAllowDrop;\n  }\n  /**\n   * set callback called when a new TabSet is created.\n   * The tabNode can be undefined if it's the auto created first tabset in the root row (when the last\n   * tab is deleted, the root tabset can be recreated)\n   * @param onCreateTabSet \n   */\n  setOnCreateTabSet(onCreateTabSet) {\n    this.onCreateTabSet = onCreateTabSet;\n  }\n  addChangeListener(listener) {\n    this.changeListeners.push(listener);\n  }\n  removeChangeListener(listener) {\n    const pos = this.changeListeners.findIndex((l) => l === listener);\n    if (pos !== -1) {\n      this.changeListeners.splice(pos, 1);\n    }\n  }\n  toString() {\n    return JSON.stringify(this.toJson());\n  }\n  /***********************internal ********************************/\n  /** @internal */\n  removeEmptyWindows() {\n    const emptyWindows = /* @__PURE__ */ new Set();\n    for (const [windowId] of this.windows) {\n      if (windowId !== _Model.MAIN_WINDOW_ID) {\n        let count = 0;\n        this.visitWindowNodes(windowId, (node) => {\n          if (node instanceof TabNode) {\n            count++;\n          }\n        });\n        if (count === 0) {\n          emptyWindows.add(windowId);\n        }\n      }\n    }\n    for (const windowId of emptyWindows) {\n      this.windows.delete(windowId);\n    }\n  }\n  /** @internal */\n  setActiveTabset(tabsetNode, windowId) {\n    const window2 = this.windows.get(windowId);\n    if (window2) {\n      if (tabsetNode) {\n        window2.activeTabSet = tabsetNode;\n      } else {\n        window2.activeTabSet = void 0;\n      }\n    }\n  }\n  /** @internal */\n  setMaximizedTabset(tabsetNode, windowId) {\n    const window2 = this.windows.get(windowId);\n    if (window2) {\n      if (tabsetNode) {\n        window2.maximizedTabSet = tabsetNode;\n      } else {\n        window2.maximizedTabSet = void 0;\n      }\n    }\n  }\n  /** @internal */\n  updateIdMap() {\n    this.idMap.clear();\n    this.visitNodes((node) => {\n      this.idMap.set(node.getId(), node);\n    });\n  }\n  /** @internal */\n  addNode(node) {\n    const id = node.getId();\n    if (this.idMap.has(id)) {\n      throw new Error(`Error: each node must have a unique id, duplicate id:${node.getId()}`);\n    }\n    this.idMap.set(id, node);\n  }\n  /** @internal */\n  findDropTargetNode(windowId, dragNode, x, y) {\n    let node = this.windows.get(windowId).root.findDropTargetNode(windowId, dragNode, x, y);\n    if (node === void 0 && windowId === _Model.MAIN_WINDOW_ID) {\n      node = this.borders.findDropTargetNode(dragNode, x, y);\n    }\n    return node;\n  }\n  /** @internal */\n  tidy() {\n    for (const [_, window2] of this.windows) {\n      window2.root.tidy();\n    }\n  }\n  /** @internal */\n  updateAttrs(json) {\n    _Model.attributeDefinitions.update(json, this.attributes);\n  }\n  /** @internal */\n  nextUniqueId() {\n    return \"#\" + randomUUID();\n  }\n  /** @internal */\n  getAttribute(name) {\n    return this.attributes[name];\n  }\n  /** @internal */\n  getOnAllowDrop() {\n    return this.onAllowDrop;\n  }\n  /** @internal */\n  getOnCreateTabSet() {\n    return this.onCreateTabSet;\n  }\n  static toTypescriptInterfaces() {\n    _Model.attributeDefinitions.pairAttributes(\"RowNode\", RowNode.getAttributeDefinitions());\n    _Model.attributeDefinitions.pairAttributes(\"TabSetNode\", TabSetNode.getAttributeDefinitions());\n    _Model.attributeDefinitions.pairAttributes(\"TabNode\", TabNode.getAttributeDefinitions());\n    _Model.attributeDefinitions.pairAttributes(\"BorderNode\", BorderNode.getAttributeDefinitions());\n    const sb = [];\n    sb.push(_Model.attributeDefinitions.toTypescriptInterface(\"Global\", void 0));\n    sb.push(RowNode.getAttributeDefinitions().toTypescriptInterface(\"Row\", _Model.attributeDefinitions));\n    sb.push(TabSetNode.getAttributeDefinitions().toTypescriptInterface(\"TabSet\", _Model.attributeDefinitions));\n    sb.push(TabNode.getAttributeDefinitions().toTypescriptInterface(\"Tab\", _Model.attributeDefinitions));\n    sb.push(BorderNode.getAttributeDefinitions().toTypescriptInterface(\"Border\", _Model.attributeDefinitions));\n    console.log(sb.join(\"\\n\"));\n  }\n  /** @internal */\n  static createAttributeDefinitions() {\n    const attributeDefinitions = new AttributeDefinitions();\n    attributeDefinitions.add(\"enableEdgeDock\", true).setType(Attribute.BOOLEAN).setDescription(\n      `enable docking to the edges of the layout, this will show the edge indicators`\n    );\n    attributeDefinitions.add(\"rootOrientationVertical\", false).setType(Attribute.BOOLEAN).setDescription(\n      `the top level 'row' will layout horizontally by default, set this option true to make it layout vertically`\n    );\n    attributeDefinitions.add(\"enableRotateBorderIcons\", true).setType(Attribute.BOOLEAN).setDescription(\n      `boolean indicating if tab icons should rotate with the text in the left and right borders`\n    );\n    attributeDefinitions.add(\"splitterSize\", 8).setType(Attribute.NUMBER).setDescription(\n      `width in pixels of all splitters between tabsets/borders`\n    );\n    attributeDefinitions.add(\"splitterExtra\", 0).setType(Attribute.NUMBER).setDescription(\n      `additional width in pixels of the splitter hit test area`\n    );\n    attributeDefinitions.add(\"splitterEnableHandle\", false).setType(Attribute.BOOLEAN).setDescription(\n      `enable a small centralized handle on all splitters`\n    );\n    attributeDefinitions.add(\"tabEnableClose\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabCloseType\", 1).setType(\"ICloseType\");\n    attributeDefinitions.add(\"tabEnablePopout\", false).setType(Attribute.BOOLEAN).setAlias(\"tabEnableFloat\");\n    attributeDefinitions.add(\"tabEnablePopoutIcon\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabEnablePopoutOverlay\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabEnableDrag\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabEnableRename\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabContentClassName\", void 0).setType(Attribute.STRING);\n    attributeDefinitions.add(\"tabClassName\", void 0).setType(Attribute.STRING);\n    attributeDefinitions.add(\"tabIcon\", void 0).setType(Attribute.STRING);\n    attributeDefinitions.add(\"tabEnableRenderOnDemand\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabDragSpeed\", 0.3).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabBorderWidth\", -1).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabBorderHeight\", -1).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabSetEnableDeleteWhenEmpty\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableDrop\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableDrag\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableDivide\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableMaximize\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableClose\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableSingleTabStretch\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetAutoSelectTab\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableActiveIcon\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetClassNameTabStrip\", void 0).setType(Attribute.STRING);\n    attributeDefinitions.add(\"tabSetEnableTabStrip\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetEnableTabWrap\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"tabSetTabLocation\", \"top\").setType(\"ITabLocation\");\n    attributeDefinitions.add(\"tabMinWidth\", DefaultMin).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabMinHeight\", DefaultMin).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabSetMinWidth\", DefaultMin).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabSetMinHeight\", DefaultMin).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabMaxWidth\", DefaultMax).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabMaxHeight\", DefaultMax).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabSetMaxWidth\", DefaultMax).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabSetMaxHeight\", DefaultMax).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"tabSetEnableTabScrollbar\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"borderSize\", 200).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"borderMinSize\", DefaultMin).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"borderMaxSize\", DefaultMax).setType(Attribute.NUMBER);\n    attributeDefinitions.add(\"borderEnableDrop\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"borderAutoSelectTabWhenOpen\", true).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"borderAutoSelectTabWhenClosed\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"borderClassName\", void 0).setType(Attribute.STRING);\n    attributeDefinitions.add(\"borderEnableAutoHide\", false).setType(Attribute.BOOLEAN);\n    attributeDefinitions.add(\"borderEnableTabScrollbar\", false).setType(Attribute.BOOLEAN);\n    return attributeDefinitions;\n  }\n};\n__publicField(_Model, \"MAIN_WINDOW_ID\", \"__main_window_id__\");\n/** @internal */\n__publicField(_Model, \"attributeDefinitions\", _Model.createAttributeDefinitions());\nlet Model = _Model;\nconst _BorderNode = class _BorderNode extends Node {\n  /** @internal */\n  constructor(location, json, model) {\n    super(model);\n    /** @internal */\n    __publicField(this, \"contentRect\", Rect.empty());\n    /** @internal */\n    __publicField(this, \"tabHeaderRect\", Rect.empty());\n    /** @internal */\n    __publicField(this, \"location\");\n    this.location = location;\n    this.attributes.id = `border_${location.getName()}`;\n    _BorderNode.attributeDefinitions.fromJson(json, this.attributes);\n    model.addNode(this);\n  }\n  /** @internal */\n  static fromJson(json, model) {\n    const location = DockLocation.getByName(json.location);\n    const border = new _BorderNode(location, json, model);\n    if (json.children) {\n      border.children = json.children.map((jsonChild) => {\n        const child = TabNode.fromJson(jsonChild, model);\n        child.setParent(border);\n        return child;\n      });\n    }\n    return border;\n  }\n  getLocation() {\n    return this.location;\n  }\n  getClassName() {\n    return this.getAttr(\"className\");\n  }\n  isHorizontal() {\n    return this.location.orientation === Orientation.HORZ;\n  }\n  getSize() {\n    const defaultSize = this.getAttr(\"size\");\n    const selected = this.getSelected();\n    if (selected === -1) {\n      return defaultSize;\n    } else {\n      const tabNode = this.children[selected];\n      const tabBorderSize = this.isHorizontal() ? tabNode.getAttr(\"borderWidth\") : tabNode.getAttr(\"borderHeight\");\n      if (tabBorderSize === -1) {\n        return defaultSize;\n      } else {\n        return tabBorderSize;\n      }\n    }\n  }\n  getMinSize() {\n    const selectedNode = this.getSelectedNode();\n    let min = this.getAttr(\"minSize\");\n    if (selectedNode) {\n      const nodeMin = this.isHorizontal() ? selectedNode.getMinWidth() : selectedNode.getMinHeight();\n      min = Math.max(min, nodeMin);\n    }\n    return min;\n  }\n  getMaxSize() {\n    const selectedNode = this.getSelectedNode();\n    let max = this.getAttr(\"maxSize\");\n    if (selectedNode) {\n      const nodeMax = this.isHorizontal() ? selectedNode.getMaxWidth() : selectedNode.getMaxHeight();\n      max = Math.min(max, nodeMax);\n    }\n    return max;\n  }\n  getSelected() {\n    return this.attributes.selected;\n  }\n  isAutoHide() {\n    return this.getAttr(\"enableAutoHide\");\n  }\n  getSelectedNode() {\n    if (this.getSelected() !== -1) {\n      return this.children[this.getSelected()];\n    }\n    return void 0;\n  }\n  getOrientation() {\n    return this.location.getOrientation();\n  }\n  /**\n   * Returns the config attribute that can be used to store node specific data that\n   * WILL be saved to the json. The config attribute should be changed via the action Actions.updateNodeAttributes rather\n   * than directly, for example:\n   * this.state.model.doAction(\n   *   FlexLayout.Actions.updateNodeAttributes(node.getId(), {config:myConfigObject}));\n   */\n  getConfig() {\n    return this.attributes.config;\n  }\n  isMaximized() {\n    return false;\n  }\n  isShowing() {\n    return this.attributes.show;\n  }\n  toJson() {\n    const json = {};\n    _BorderNode.attributeDefinitions.toJson(json, this.attributes);\n    json.location = this.location.getName();\n    json.children = this.children.map((child) => child.toJson());\n    return json;\n  }\n  /** @internal */\n  isAutoSelectTab(whenOpen) {\n    if (whenOpen == null) {\n      whenOpen = this.getSelected() !== -1;\n    }\n    if (whenOpen) {\n      return this.getAttr(\"autoSelectTabWhenOpen\");\n    } else {\n      return this.getAttr(\"autoSelectTabWhenClosed\");\n    }\n  }\n  isEnableTabScrollbar() {\n    return this.getAttr(\"enableTabScrollbar\");\n  }\n  /** @internal */\n  setSelected(index) {\n    this.attributes.selected = index;\n  }\n  /** @internal */\n  getTabHeaderRect() {\n    return this.tabHeaderRect;\n  }\n  /** @internal */\n  setTabHeaderRect(r) {\n    this.tabHeaderRect = r;\n  }\n  /** @internal */\n  getRect() {\n    return this.tabHeaderRect;\n  }\n  /** @internal */\n  getContentRect() {\n    return this.contentRect;\n  }\n  /** @internal */\n  setContentRect(r) {\n    this.contentRect = r;\n  }\n  /** @internal */\n  isEnableDrop() {\n    return this.getAttr(\"enableDrop\");\n  }\n  /** @internal */\n  setSize(pos) {\n    const selected = this.getSelected();\n    if (selected === -1) {\n      this.attributes.size = pos;\n    } else {\n      const tabNode = this.children[selected];\n      const tabBorderSize = this.isHorizontal() ? tabNode.getAttr(\"borderWidth\") : tabNode.getAttr(\"borderHeight\");\n      if (tabBorderSize === -1) {\n        this.attributes.size = pos;\n      } else {\n        if (this.isHorizontal()) {\n          tabNode.setBorderWidth(pos);\n        } else {\n          tabNode.setBorderHeight(pos);\n        }\n      }\n    }\n  }\n  /** @internal */\n  updateAttrs(json) {\n    _BorderNode.attributeDefinitions.update(json, this.attributes);\n  }\n  /** @internal */\n  remove(node) {\n    const removedIndex = this.removeChild(node);\n    if (this.getSelected() !== -1) {\n      adjustSelectedIndex(this, removedIndex);\n    }\n  }\n  /** @internal */\n  canDrop(dragNode, x, y) {\n    if (!(dragNode instanceof TabNode)) {\n      return void 0;\n    }\n    let dropInfo;\n    const dockLocation = DockLocation.CENTER;\n    if (this.tabHeaderRect.contains(x, y)) {\n      if (this.location.orientation === Orientation.VERT) {\n        if (this.children.length > 0) {\n          let child = this.children[0];\n          let childRect = child.getTabRect();\n          const childY = childRect.y;\n          const childHeight = childRect.height;\n          let pos = this.tabHeaderRect.x;\n          let childCenter = 0;\n          for (let i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            childRect = child.getTabRect();\n            childCenter = childRect.x + childRect.width / 2;\n            if (x >= pos && x < childCenter) {\n              const outlineRect = new Rect(childRect.x - 2, childY, 3, childHeight);\n              dropInfo = new DropInfo(this, outlineRect, dockLocation, i, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n              break;\n            }\n            pos = childCenter;\n          }\n          if (dropInfo == null) {\n            const outlineRect = new Rect(childRect.getRight() - 2, childY, 3, childHeight);\n            dropInfo = new DropInfo(this, outlineRect, dockLocation, this.children.length, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n          }\n        } else {\n          const outlineRect = new Rect(this.tabHeaderRect.x + 1, this.tabHeaderRect.y + 2, 3, 18);\n          dropInfo = new DropInfo(this, outlineRect, dockLocation, 0, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n        }\n      } else {\n        if (this.children.length > 0) {\n          let child = this.children[0];\n          let childRect = child.getTabRect();\n          const childX = childRect.x;\n          const childWidth = childRect.width;\n          let pos = this.tabHeaderRect.y;\n          let childCenter = 0;\n          for (let i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            childRect = child.getTabRect();\n            childCenter = childRect.y + childRect.height / 2;\n            if (y >= pos && y < childCenter) {\n              const outlineRect = new Rect(childX, childRect.y - 2, childWidth, 3);\n              dropInfo = new DropInfo(this, outlineRect, dockLocation, i, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n              break;\n            }\n            pos = childCenter;\n          }\n          if (dropInfo == null) {\n            const outlineRect = new Rect(childX, childRect.getBottom() - 2, childWidth, 3);\n            dropInfo = new DropInfo(this, outlineRect, dockLocation, this.children.length, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n          }\n        } else {\n          const outlineRect = new Rect(this.tabHeaderRect.x + 2, this.tabHeaderRect.y + 1, 18, 3);\n          dropInfo = new DropInfo(this, outlineRect, dockLocation, 0, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n        }\n      }\n      if (!dragNode.canDockInto(dragNode, dropInfo)) {\n        return void 0;\n      }\n    } else if (this.getSelected() !== -1 && this.contentRect.contains(x, y)) {\n      const outlineRect = this.contentRect;\n      dropInfo = new DropInfo(this, outlineRect, dockLocation, -1, CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n      if (!dragNode.canDockInto(dragNode, dropInfo)) {\n        return void 0;\n      }\n    }\n    return dropInfo;\n  }\n  /** @internal */\n  drop(dragNode, location, index, select) {\n    let fromIndex = 0;\n    const dragParent = dragNode.getParent();\n    if (dragParent !== void 0) {\n      fromIndex = dragParent.removeChild(dragNode);\n      if (dragParent !== this && dragParent instanceof _BorderNode && dragParent.getSelected() === fromIndex) {\n        dragParent.setSelected(-1);\n      } else {\n        adjustSelectedIndex(dragParent, fromIndex);\n      }\n    }\n    if (dragNode instanceof TabNode && dragParent === this && fromIndex < index && index > 0) {\n      index--;\n    }\n    let insertPos = index;\n    if (insertPos === -1) {\n      insertPos = this.children.length;\n    }\n    if (dragNode instanceof TabNode) {\n      this.addChild(dragNode, insertPos);\n    }\n    if (select || select !== false && this.isAutoSelectTab()) {\n      this.setSelected(insertPos);\n    }\n    this.model.tidy();\n  }\n  /** @internal */\n  getSplitterBounds(index, useMinSize = false) {\n    const pBounds = [0, 0];\n    const minSize = useMinSize ? this.getMinSize() : 0;\n    const maxSize = useMinSize ? this.getMaxSize() : 99999;\n    const rootRow = this.model.getRoot(Model.MAIN_WINDOW_ID);\n    const innerRect = rootRow.getRect();\n    const splitterSize = this.model.getSplitterSize();\n    if (this.location === DockLocation.TOP) {\n      pBounds[0] = this.tabHeaderRect.getBottom() + minSize;\n      const maxPos = this.tabHeaderRect.getBottom() + maxSize;\n      pBounds[1] = Math.max(pBounds[0], innerRect.getBottom() - rootRow.getMinHeight() - splitterSize);\n      pBounds[1] = Math.min(pBounds[1], maxPos);\n    } else if (this.location === DockLocation.LEFT) {\n      pBounds[0] = this.tabHeaderRect.getRight() + minSize;\n      const maxPos = this.tabHeaderRect.getRight() + maxSize;\n      pBounds[1] = Math.max(pBounds[0], innerRect.getRight() - rootRow.getMinWidth() - splitterSize);\n      pBounds[1] = Math.min(pBounds[1], maxPos);\n    } else if (this.location === DockLocation.BOTTOM) {\n      pBounds[1] = this.tabHeaderRect.y - minSize - splitterSize;\n      const maxPos = this.tabHeaderRect.y - maxSize - splitterSize;\n      pBounds[0] = Math.min(pBounds[1], innerRect.y + rootRow.getMinHeight());\n      pBounds[0] = Math.max(pBounds[0], maxPos);\n    } else if (this.location === DockLocation.RIGHT) {\n      pBounds[1] = this.tabHeaderRect.x - minSize - splitterSize;\n      const maxPos = this.tabHeaderRect.x - maxSize - splitterSize;\n      pBounds[0] = Math.min(pBounds[1], innerRect.x + rootRow.getMinWidth());\n      pBounds[0] = Math.max(pBounds[0], maxPos);\n    }\n    return pBounds;\n  }\n  /** @internal */\n  calculateSplit(splitter, splitterPos) {\n    const pBounds = this.getSplitterBounds(splitterPos);\n    if (this.location === DockLocation.BOTTOM || this.location === DockLocation.RIGHT) {\n      return Math.max(0, pBounds[1] - splitterPos);\n    } else {\n      return Math.max(0, splitterPos - pBounds[0]);\n    }\n  }\n  /** @internal */\n  getAttributeDefinitions() {\n    return _BorderNode.attributeDefinitions;\n  }\n  /** @internal */\n  static getAttributeDefinitions() {\n    return _BorderNode.attributeDefinitions;\n  }\n  /** @internal */\n  static createAttributeDefinitions() {\n    const attributeDefinitions = new AttributeDefinitions();\n    attributeDefinitions.add(\"type\", _BorderNode.TYPE, true).setType(Attribute.STRING).setFixed();\n    attributeDefinitions.add(\"selected\", -1).setType(Attribute.NUMBER).setDescription(\n      `index of selected/visible tab in border; -1 means no tab selected`\n    );\n    attributeDefinitions.add(\"show\", true).setType(Attribute.BOOLEAN).setDescription(\n      `show/hide this border`\n    );\n    attributeDefinitions.add(\"config\", void 0).setType(\"any\").setDescription(\n      `a place to hold json config used in your own code`\n    );\n    attributeDefinitions.addInherited(\"enableDrop\", \"borderEnableDrop\").setType(Attribute.BOOLEAN).setDescription(\n      `whether tabs can be dropped into this border`\n    );\n    attributeDefinitions.addInherited(\"className\", \"borderClassName\").setType(Attribute.STRING).setDescription(\n      `class applied to tab button`\n    );\n    attributeDefinitions.addInherited(\"autoSelectTabWhenOpen\", \"borderAutoSelectTabWhenOpen\").setType(Attribute.BOOLEAN).setDescription(\n      `whether to select new/moved tabs in border when the border is already open`\n    );\n    attributeDefinitions.addInherited(\"autoSelectTabWhenClosed\", \"borderAutoSelectTabWhenClosed\").setType(Attribute.BOOLEAN).setDescription(\n      `whether to select new/moved tabs in border when the border is currently closed`\n    );\n    attributeDefinitions.addInherited(\"size\", \"borderSize\").setType(Attribute.NUMBER).setDescription(\n      `size of the tab area when selected`\n    );\n    attributeDefinitions.addInherited(\"minSize\", \"borderMinSize\").setType(Attribute.NUMBER).setDescription(\n      `the minimum size of the tab area`\n    );\n    attributeDefinitions.addInherited(\"maxSize\", \"borderMaxSize\").setType(Attribute.NUMBER).setDescription(\n      `the maximum size of the tab area`\n    );\n    attributeDefinitions.addInherited(\"enableAutoHide\", \"borderEnableAutoHide\").setType(Attribute.BOOLEAN).setDescription(\n      `hide border if it has zero tabs`\n    );\n    attributeDefinitions.addInherited(\"enableTabScrollbar\", \"borderEnableTabScrollbar\").setType(Attribute.BOOLEAN).setDescription(\n      `whether to show a mini scrollbar for the tabs`\n    );\n    return attributeDefinitions;\n  }\n};\n__publicField(_BorderNode, \"TYPE\", \"border\");\n/** @internal */\n__publicField(_BorderNode, \"attributeDefinitions\", _BorderNode.createAttributeDefinitions());\nlet BorderNode = _BorderNode;\nlet splitterDragging = false;\nconst Splitter = (props) => {\n  const { layout, node, index, horizontal } = props;\n  const [dragging, setDragging] = React.useState(false);\n  const selfRef = React.useRef(null);\n  const extendedRef = React.useRef(null);\n  const pBounds = React.useRef([]);\n  const outlineDiv = React.useRef(void 0);\n  const handleDiv = React.useRef(void 0);\n  const dragStartX = React.useRef(0);\n  const dragStartY = React.useRef(0);\n  const initalSizes = React.useRef({ initialSizes: [], sum: 0, startPosition: 0 });\n  const size = node.getModel().getSplitterSize();\n  let extra = node.getModel().getSplitterExtra();\n  if (!isDesktop()) {\n    extra = Math.max(20, extra + size) - size;\n  }\n  React.useEffect(() => {\n    var _a, _b;\n    (_a = selfRef.current) == null ? void 0 : _a.addEventListener(\"touchstart\", onTouchStart, { passive: false });\n    (_b = extendedRef.current) == null ? void 0 : _b.addEventListener(\"touchstart\", onTouchStart, { passive: false });\n    return () => {\n      var _a2, _b2;\n      (_a2 = selfRef.current) == null ? void 0 : _a2.removeEventListener(\"touchstart\", onTouchStart);\n      (_b2 = extendedRef.current) == null ? void 0 : _b2.removeEventListener(\"touchstart\", onTouchStart);\n    };\n  }, []);\n  const onTouchStart = (event) => {\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  };\n  const onPointerDown = (event) => {\n    var _a;\n    event.stopPropagation();\n    if (node instanceof RowNode) {\n      initalSizes.current = node.getSplitterInitials(index);\n    }\n    enablePointerOnIFrames(false, layout.getCurrentDocument());\n    startDrag(event.currentTarget.ownerDocument, event, onDragMove, onDragEnd, onDragCancel);\n    pBounds.current = node.getSplitterBounds(index, true);\n    const rootdiv = layout.getRootDiv();\n    outlineDiv.current = layout.getCurrentDocument().createElement(\"div\");\n    outlineDiv.current.style.flexDirection = horizontal ? \"row\" : \"column\";\n    outlineDiv.current.className = layout.getClassName(CLASSES.FLEXLAYOUT__SPLITTER_DRAG);\n    outlineDiv.current.style.cursor = node.getOrientation() === Orientation.VERT ? \"ns-resize\" : \"ew-resize\";\n    if (node.getModel().isSplitterEnableHandle()) {\n      handleDiv.current = layout.getCurrentDocument().createElement(\"div\");\n      handleDiv.current.className = cm(CLASSES.FLEXLAYOUT__SPLITTER_HANDLE) + \" \" + (horizontal ? cm(CLASSES.FLEXLAYOUT__SPLITTER_HANDLE_HORZ) : cm(CLASSES.FLEXLAYOUT__SPLITTER_HANDLE_VERT));\n      outlineDiv.current.appendChild(handleDiv.current);\n    }\n    const r = (_a = selfRef.current) == null ? void 0 : _a.getBoundingClientRect();\n    const rect = new Rect(\n      r.x - layout.getDomRect().x,\n      r.y - layout.getDomRect().y,\n      r.width,\n      r.height\n    );\n    dragStartX.current = event.clientX - r.x;\n    dragStartY.current = event.clientY - r.y;\n    rect.positionElement(outlineDiv.current);\n    if (rootdiv) {\n      rootdiv.appendChild(outlineDiv.current);\n    }\n    setDragging(true);\n    splitterDragging = true;\n  };\n  const onDragCancel = () => {\n    const rootdiv = layout.getRootDiv();\n    if (rootdiv && outlineDiv.current) {\n      rootdiv.removeChild(outlineDiv.current);\n    }\n    outlineDiv.current = void 0;\n    setDragging(false);\n    splitterDragging = false;\n  };\n  const onDragMove = (x, y) => {\n    if (outlineDiv.current) {\n      const clientRect = layout.getDomRect();\n      if (!clientRect) {\n        return;\n      }\n      if (node.getOrientation() === Orientation.VERT) {\n        outlineDiv.current.style.top = getBoundPosition(y - clientRect.y - dragStartY.current) + \"px\";\n      } else {\n        outlineDiv.current.style.left = getBoundPosition(x - clientRect.x - dragStartX.current) + \"px\";\n      }\n      if (layout.isRealtimeResize()) {\n        updateLayout();\n      }\n    }\n  };\n  const onDragEnd = () => {\n    if (outlineDiv.current) {\n      updateLayout();\n      const rootdiv = layout.getRootDiv();\n      if (rootdiv && outlineDiv.current) {\n        rootdiv.removeChild(outlineDiv.current);\n      }\n      outlineDiv.current = void 0;\n    }\n    enablePointerOnIFrames(true, layout.getCurrentDocument());\n    setDragging(false);\n    splitterDragging = false;\n  };\n  const updateLayout = (realtime) => {\n    const redraw = () => {\n      if (outlineDiv.current) {\n        let value = 0;\n        if (node.getOrientation() === Orientation.VERT) {\n          value = outlineDiv.current.offsetTop;\n        } else {\n          value = outlineDiv.current.offsetLeft;\n        }\n        if (node instanceof BorderNode) {\n          const pos = node.calculateSplit(node, value);\n          layout.doAction(Actions.adjustBorderSplit(node.getId(), pos));\n        } else {\n          const init = initalSizes.current;\n          const weights = node.calculateSplit(index, value, init.initialSizes, init.sum, init.startPosition);\n          layout.doAction(Actions.adjustWeights(node.getId(), weights));\n        }\n      }\n    };\n    redraw();\n  };\n  const getBoundPosition = (p) => {\n    const bounds = pBounds.current;\n    let rtn = p;\n    if (p < bounds[0]) {\n      rtn = bounds[0];\n    }\n    if (p > bounds[1]) {\n      rtn = bounds[1];\n    }\n    return rtn;\n  };\n  const cm = layout.getClassName;\n  const style2 = {\n    cursor: horizontal ? \"ew-resize\" : \"ns-resize\",\n    flexDirection: horizontal ? \"column\" : \"row\"\n  };\n  let className = cm(CLASSES.FLEXLAYOUT__SPLITTER) + \" \" + cm(CLASSES.FLEXLAYOUT__SPLITTER_ + node.getOrientation().getName());\n  if (node instanceof BorderNode) {\n    className += \" \" + cm(CLASSES.FLEXLAYOUT__SPLITTER_BORDER);\n  } else {\n    if (node.getModel().getMaximizedTabset(layout.getWindowId()) !== void 0) {\n      style2.display = \"none\";\n    }\n  }\n  if (horizontal) {\n    style2.width = size + \"px\";\n    style2.minWidth = size + \"px\";\n  } else {\n    style2.height = size + \"px\";\n    style2.minHeight = size + \"px\";\n  }\n  let handle;\n  if (!dragging && node.getModel().isSplitterEnableHandle()) {\n    handle = /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        className: cm(CLASSES.FLEXLAYOUT__SPLITTER_HANDLE) + \" \" + (horizontal ? cm(CLASSES.FLEXLAYOUT__SPLITTER_HANDLE_HORZ) : cm(CLASSES.FLEXLAYOUT__SPLITTER_HANDLE_VERT))\n      }\n    );\n  }\n  if (extra === 0) {\n    return /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        className,\n        style: style2,\n        ref: selfRef,\n        \"data-layout-path\": node.getPath() + \"/s\" + (index - 1),\n        onPointerDown,\n        children: handle\n      }\n    );\n  } else {\n    const style22 = {};\n    if (node.getOrientation() === Orientation.HORZ) {\n      style22.height = \"100%\";\n      style22.width = size + extra + \"px\";\n      style22.cursor = \"ew-resize\";\n    } else {\n      style22.height = size + extra + \"px\";\n      style22.width = \"100%\";\n      style22.cursor = \"ns-resize\";\n    }\n    const className2 = cm(CLASSES.FLEXLAYOUT__SPLITTER_EXTRA);\n    return /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        className,\n        style: style2,\n        ref: selfRef,\n        \"data-layout-path\": node.getPath() + \"/s\" + (index - 1),\n        onPointerDown,\n        children: /* @__PURE__ */ jsx(\n          \"div\",\n          {\n            style: style22,\n            ref: extendedRef,\n            className: className2,\n            onPointerDown\n          }\n        )\n      }\n    );\n  }\n};\nfunction BorderTab(props) {\n  const { layout, border, show } = props;\n  const selfRef = React.useRef(null);\n  const timer = React.useRef(void 0);\n  React.useLayoutEffect(() => {\n    const contentRect = layout.getBoundingClientRect(selfRef.current);\n    if (!isNaN(contentRect.x) && contentRect.width > 0) {\n      if (!border.getContentRect().equals(contentRect)) {\n        border.setContentRect(contentRect);\n        if (splitterDragging) {\n          if (timer.current) {\n            clearTimeout(timer.current);\n          }\n          timer.current = setTimeout(() => {\n            layout.redrawInternal(\"border content rect \" + contentRect);\n            timer.current = void 0;\n          }, 50);\n        } else {\n          layout.redrawInternal(\"border content rect \" + contentRect);\n        }\n      }\n    }\n  });\n  let horizontal = true;\n  const style2 = {};\n  if (border.getOrientation() === Orientation.HORZ) {\n    style2.width = border.getSize();\n    style2.minWidth = border.getMinSize();\n    style2.maxWidth = border.getMaxSize();\n  } else {\n    style2.height = border.getSize();\n    style2.minHeight = border.getMinSize();\n    style2.maxHeight = border.getMaxSize();\n    horizontal = false;\n  }\n  style2.display = show ? \"flex\" : \"none\";\n  const className = layout.getClassName(CLASSES.FLEXLAYOUT__BORDER_TAB_CONTENTS);\n  if (border.getLocation() === DockLocation.LEFT || border.getLocation() === DockLocation.TOP) {\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(\"div\", { ref: selfRef, style: style2, className }),\n      show && /* @__PURE__ */ jsx(Splitter, { layout, node: border, index: 0, horizontal })\n    ] });\n  } else {\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      show && /* @__PURE__ */ jsx(Splitter, { layout, node: border, index: 0, horizontal }),\n      /* @__PURE__ */ jsx(\"div\", { ref: selfRef, style: style2, className })\n    ] });\n  }\n}\nvar ICloseType = /* @__PURE__ */ ((ICloseType2) => {\n  ICloseType2[ICloseType2[\"Visible\"] = 1] = \"Visible\";\n  ICloseType2[ICloseType2[\"Always\"] = 2] = \"Always\";\n  ICloseType2[ICloseType2[\"Selected\"] = 3] = \"Selected\";\n  return ICloseType2;\n})(ICloseType || {});\nconst BorderButton = (props) => {\n  const { layout, node, selected, border, icons, path } = props;\n  const selfRef = React.useRef(null);\n  const contentRef = React.useRef(null);\n  const onDragStart = (event) => {\n    if (node.isEnableDrag()) {\n      event.stopPropagation();\n      layout.setDragNode(event.nativeEvent, node);\n    } else {\n      event.preventDefault();\n    }\n  };\n  const onDragEnd = (event) => {\n    event.stopPropagation();\n    layout.clearDragMain();\n  };\n  const onAuxMouseClick = (event) => {\n    if (isAuxMouseEvent(event)) {\n      layout.auxMouseClick(node, event);\n    }\n  };\n  const onContextMenu = (event) => {\n    layout.showContextMenu(node, event);\n  };\n  const onClick = () => {\n    layout.doAction(Actions.selectTab(node.getId()));\n  };\n  const isClosable = () => {\n    const closeType = node.getCloseType();\n    if (selected || closeType === ICloseType.Always) {\n      return true;\n    }\n    if (closeType === ICloseType.Visible) {\n      if (window.matchMedia && window.matchMedia(\"(hover: hover) and (pointer: fine)\").matches) {\n        return true;\n      }\n    }\n    return false;\n  };\n  const onClose = (event) => {\n    if (isClosable()) {\n      layout.doAction(Actions.deleteTab(node.getId()));\n      event.stopPropagation();\n    }\n  };\n  const onClosePointerDown = (event) => {\n    event.stopPropagation();\n  };\n  React.useLayoutEffect(() => {\n    node.setTabRect(layout.getBoundingClientRect(selfRef.current));\n    if (layout.getEditingTab() === node) {\n      contentRef.current.select();\n    }\n  });\n  const onTextBoxPointerDown = (event) => {\n    event.stopPropagation();\n  };\n  const onTextBoxKeyPress = (event) => {\n    if (event.code === \"Escape\") {\n      layout.setEditingTab(void 0);\n    } else if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n      layout.setEditingTab(void 0);\n      layout.doAction(Actions.renameTab(node.getId(), event.target.value));\n    }\n  };\n  const cm = layout.getClassName;\n  let classNames = cm(CLASSES.FLEXLAYOUT__BORDER_BUTTON) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_BUTTON_ + border);\n  if (selected) {\n    classNames += \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_BUTTON__SELECTED);\n  } else {\n    classNames += \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED);\n  }\n  if (node.getClassName() !== void 0) {\n    classNames += \" \" + node.getClassName();\n  }\n  let iconAngle = 0;\n  if (node.getModel().isEnableRotateBorderIcons() === false) {\n    if (border === \"left\") {\n      iconAngle = 90;\n    } else if (border === \"right\") {\n      iconAngle = -90;\n    }\n  }\n  const renderState = getRenderStateEx(layout, node, iconAngle);\n  let content = renderState.content ? /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__BORDER_BUTTON_CONTENT), children: renderState.content }) : null;\n  const leading = renderState.leading ? /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__BORDER_BUTTON_LEADING), children: renderState.leading }) : null;\n  if (layout.getEditingTab() === node) {\n    content = /* @__PURE__ */ jsx(\n      \"input\",\n      {\n        ref: contentRef,\n        className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),\n        \"data-layout-path\": path + \"/textbox\",\n        type: \"text\",\n        autoFocus: true,\n        defaultValue: node.getName(),\n        onKeyDown: onTextBoxKeyPress,\n        onPointerDown: onTextBoxPointerDown\n      }\n    );\n  }\n  if (node.isEnableClose()) {\n    const closeTitle = layout.i18nName(I18nLabel.Close_Tab);\n    renderState.buttons.push(\n      /* @__PURE__ */ jsx(\n        \"div\",\n        {\n          \"data-layout-path\": path + \"/button/close\",\n          title: closeTitle,\n          className: cm(CLASSES.FLEXLAYOUT__BORDER_BUTTON_TRAILING),\n          onPointerDown: onClosePointerDown,\n          onClick: onClose,\n          children: typeof icons.close === \"function\" ? icons.close(node) : icons.close\n        },\n        \"close\"\n      )\n    );\n  }\n  return /* @__PURE__ */ jsxs(\n    \"div\",\n    {\n      ref: selfRef,\n      \"data-layout-path\": path,\n      className: classNames,\n      onClick,\n      onAuxClick: onAuxMouseClick,\n      onContextMenu,\n      title: node.getHelpText(),\n      draggable: true,\n      onDragStart,\n      onDragEnd,\n      children: [\n        leading,\n        content,\n        renderState.buttons\n      ]\n    }\n  );\n};\nconst TabButtonStamp = (props) => {\n  const { layout, node } = props;\n  const cm = layout.getClassName;\n  const classNames = cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_STAMP);\n  const renderState = getRenderStateEx(layout, node);\n  const content = renderState.content ? /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_CONTENT), children: renderState.content }) : node.getNameForOverflowMenu();\n  const leading = renderState.leading ? /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_LEADING), children: renderState.leading }) : null;\n  return /* @__PURE__ */ jsxs(\n    \"div\",\n    {\n      className: classNames,\n      title: node.getHelpText(),\n      children: [\n        leading,\n        content\n      ]\n    }\n  );\n};\nfunction showPopup(triggerElement, parentNode, items, onSelect, layout) {\n  const layoutDiv = layout.getRootDiv();\n  const classNameMapper = layout.getClassName;\n  const currentDocument = triggerElement.ownerDocument;\n  const triggerRect = triggerElement.getBoundingClientRect();\n  const layoutRect = (layoutDiv == null ? void 0 : layoutDiv.getBoundingClientRect()) ?? new DOMRect(0, 0, 100, 100);\n  const elm = currentDocument.createElement(\"div\");\n  elm.className = classNameMapper(CLASSES.FLEXLAYOUT__POPUP_MENU_CONTAINER);\n  if (triggerRect.left < layoutRect.left + layoutRect.width / 2) {\n    elm.style.left = triggerRect.left - layoutRect.left + \"px\";\n  } else {\n    elm.style.right = layoutRect.right - triggerRect.right + \"px\";\n  }\n  if (triggerRect.top < layoutRect.top + layoutRect.height / 2) {\n    elm.style.top = triggerRect.top - layoutRect.top + \"px\";\n  } else {\n    elm.style.bottom = layoutRect.bottom - triggerRect.bottom + \"px\";\n  }\n  layout.showOverlay(true);\n  if (layoutDiv) {\n    layoutDiv.appendChild(elm);\n  }\n  const onHide = () => {\n    layout.hideControlInPortal();\n    layout.showOverlay(false);\n    if (layoutDiv) {\n      layoutDiv.removeChild(elm);\n    }\n    elm.removeEventListener(\"pointerdown\", onElementPointerDown);\n    currentDocument.removeEventListener(\"pointerdown\", onDocPointerDown);\n  };\n  const onElementPointerDown = (event) => {\n    event.stopPropagation();\n  };\n  const onDocPointerDown = (_event) => {\n    onHide();\n  };\n  elm.addEventListener(\"pointerdown\", onElementPointerDown);\n  currentDocument.addEventListener(\"pointerdown\", onDocPointerDown);\n  layout.showControlInPortal(/* @__PURE__ */ jsx(\n    PopupMenu,\n    {\n      currentDocument,\n      parentNode,\n      onSelect,\n      onHide,\n      items,\n      classNameMapper,\n      layout\n    }\n  ), elm);\n}\nconst PopupMenu = (props) => {\n  const { parentNode, items, onHide, onSelect, classNameMapper, layout } = props;\n  const divRef = useRef(null);\n  useEffect(() => {\n    if (divRef.current) {\n      divRef.current.focus();\n    }\n  }, []);\n  const onItemClick = (item, event) => {\n    onSelect(item);\n    onHide();\n    event.stopPropagation();\n  };\n  const onDragStart = (event, node) => {\n    event.stopPropagation();\n    layout.setDragNode(event.nativeEvent, node);\n    setTimeout(() => {\n      onHide();\n    }, 0);\n  };\n  const onDragEnd = (event) => {\n    layout.clearDragMain();\n  };\n  const handleKeyDown = (event) => {\n    if (event.key === \"Escape\") {\n      onHide();\n    }\n  };\n  const itemElements = items.map(\n    (item, i) => {\n      let classes = classNameMapper(CLASSES.FLEXLAYOUT__POPUP_MENU_ITEM);\n      if (parentNode.getSelected() === item.index) {\n        classes += \" \" + classNameMapper(CLASSES.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED);\n      }\n      return /* @__PURE__ */ jsx(\n        \"div\",\n        {\n          className: classes,\n          \"data-layout-path\": \"/popup-menu/tb\" + i,\n          onClick: (event) => onItemClick(item, event),\n          draggable: true,\n          onDragStart: (e) => onDragStart(e, item.node),\n          onDragEnd,\n          title: item.node.getHelpText(),\n          children: /* @__PURE__ */ jsx(\n            TabButtonStamp,\n            {\n              node: item.node,\n              layout\n            }\n          )\n        },\n        item.index\n      );\n    }\n  );\n  return /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      className: classNameMapper(CLASSES.FLEXLAYOUT__POPUP_MENU),\n      ref: divRef,\n      tabIndex: 0,\n      onKeyDown: handleKeyDown,\n      \"data-layout-path\": \"/popup-menu\",\n      children: itemElements\n    }\n  );\n};\nconst useTabOverflow = (layout, node, orientation, tabStripRef, miniScrollRef, tabClassName) => {\n  const [hiddenTabs, setHiddenTabs] = React.useState([]);\n  const [isShowHiddenTabs, setShowHiddenTabs] = React.useState(false);\n  const [isDockStickyButtons, setDockStickyButtons] = React.useState(false);\n  const selfRef = React.useRef(null);\n  const userControlledPositionRef = React.useRef(false);\n  const updateHiddenTabsTimerRef = React.useRef(void 0);\n  const hiddenTabsRef = React.useRef([]);\n  const thumbInternalPos = React.useRef(0);\n  const repositioningRef = React.useRef(false);\n  hiddenTabsRef.current = hiddenTabs;\n  React.useLayoutEffect(() => {\n    if (tabStripRef.current) {\n      setScrollPosition(0);\n    }\n  }, [node.getId()]);\n  React.useLayoutEffect(() => {\n    userControlledPositionRef.current = false;\n  }, [node.getSelectedNode(), node.getRect().width, node.getRect().height]);\n  React.useLayoutEffect(() => {\n    checkForOverflow();\n    if (userControlledPositionRef.current === false) {\n      scrollIntoView();\n    }\n    updateScrollMetrics();\n    updateHiddenTabs();\n  });\n  React.useEffect(() => {\n    var _a;\n    (_a = selfRef.current) == null ? void 0 : _a.addEventListener(\"wheel\", onWheel, { passive: false });\n    return () => {\n      var _a2;\n      (_a2 = selfRef.current) == null ? void 0 : _a2.removeEventListener(\"wheel\", onWheel);\n    };\n  }, [selfRef.current]);\n  const onWheel = (event) => {\n    event.preventDefault();\n  };\n  function scrollIntoView() {\n    const selectedTabNode = node.getSelectedNode();\n    if (selectedTabNode && tabStripRef.current) {\n      const stripRect = layout.getBoundingClientRect(tabStripRef.current);\n      const selectedRect = selectedTabNode.getTabRect();\n      let shift = getNear(stripRect) - getNear(selectedRect);\n      if (shift > 0 || getSize(selectedRect) > getSize(stripRect)) {\n        setScrollPosition(getScrollPosition(tabStripRef.current) - shift);\n        repositioningRef.current = true;\n      } else {\n        shift = getFar(selectedRect) - getFar(stripRect);\n        if (shift > 0) {\n          setScrollPosition(getScrollPosition(tabStripRef.current) + shift);\n          repositioningRef.current = true;\n        }\n      }\n    }\n  }\n  const updateScrollMetrics = () => {\n    if (tabStripRef.current && miniScrollRef.current) {\n      const t = tabStripRef.current;\n      const s = miniScrollRef.current;\n      const size = getElementSize(t);\n      const scrollSize = getScrollSize(t);\n      const position = getScrollPosition(t);\n      if (scrollSize > size && scrollSize > 0) {\n        let thumbSize = size * size / scrollSize;\n        let adjust = 0;\n        if (thumbSize < 20) {\n          adjust = 20 - thumbSize;\n          thumbSize = 20;\n        }\n        const thumbPos = position * (size - adjust) / scrollSize;\n        if (orientation === Orientation.HORZ) {\n          s.style.width = thumbSize + \"px\";\n          s.style.left = thumbPos + \"px\";\n        } else {\n          s.style.height = thumbSize + \"px\";\n          s.style.top = thumbPos + \"px\";\n        }\n        s.style.display = \"block\";\n      } else {\n        s.style.display = \"none\";\n      }\n      if (orientation === Orientation.HORZ) {\n        s.style.bottom = \"0px\";\n      } else {\n        s.style.right = \"0px\";\n      }\n    }\n  };\n  const updateHiddenTabs = () => {\n    const newHiddenTabs = findHiddenTabs();\n    const showHidden = newHiddenTabs.length > 0;\n    if (showHidden !== isShowHiddenTabs) {\n      setShowHiddenTabs(showHidden);\n    }\n    if (updateHiddenTabsTimerRef.current === void 0) {\n      updateHiddenTabsTimerRef.current = setTimeout(() => {\n        const newHiddenTabs2 = findHiddenTabs();\n        if (!arraysEqual(newHiddenTabs2, hiddenTabsRef.current)) {\n          setHiddenTabs(newHiddenTabs2);\n        }\n        updateHiddenTabsTimerRef.current = void 0;\n      }, 100);\n    }\n  };\n  const onScroll = () => {\n    if (!repositioningRef.current) {\n      userControlledPositionRef.current = true;\n    }\n    repositioningRef.current = false;\n    updateScrollMetrics();\n    updateHiddenTabs();\n  };\n  const onScrollPointerDown = (event) => {\n    var _a;\n    event.stopPropagation();\n    miniScrollRef.current.setPointerCapture(event.pointerId);\n    const r = (_a = miniScrollRef.current) == null ? void 0 : _a.getBoundingClientRect();\n    if (orientation === Orientation.HORZ) {\n      thumbInternalPos.current = event.clientX - r.x;\n    } else {\n      thumbInternalPos.current = event.clientY - r.y;\n    }\n    startDrag(event.currentTarget.ownerDocument, event, onDragMove, onDragEnd, onDragCancel);\n  };\n  const onDragMove = (x, y) => {\n    if (tabStripRef.current && miniScrollRef.current) {\n      const t = tabStripRef.current;\n      const s = miniScrollRef.current;\n      const size = getElementSize(t);\n      const scrollSize = getScrollSize(t);\n      const thumbSize = getElementSize(s);\n      const r = t.getBoundingClientRect();\n      let thumb = 0;\n      if (orientation === Orientation.HORZ) {\n        thumb = x - r.x - thumbInternalPos.current;\n      } else {\n        thumb = y - r.y - thumbInternalPos.current;\n      }\n      thumb = Math.max(0, Math.min(scrollSize - thumbSize, thumb));\n      if (size > 0) {\n        const scrollPos = thumb * scrollSize / size;\n        setScrollPosition(scrollPos);\n      }\n    }\n  };\n  const onDragEnd = () => {\n  };\n  const onDragCancel = () => {\n  };\n  const checkForOverflow = () => {\n    if (tabStripRef.current) {\n      const strip = tabStripRef.current;\n      const tabContainer = strip.firstElementChild;\n      const offset = isDockStickyButtons ? 10 : 0;\n      const dock = getElementSize(tabContainer) + offset > getElementSize(tabStripRef.current);\n      if (dock !== isDockStickyButtons) {\n        setDockStickyButtons(dock);\n      }\n    }\n  };\n  const findHiddenTabs = () => {\n    const hidden = [];\n    if (tabStripRef.current) {\n      const strip = tabStripRef.current;\n      const stripRect = strip.getBoundingClientRect();\n      const visibleNear = getNear(stripRect) - 1;\n      const visibleFar = getFar(stripRect) + 1;\n      const tabContainer = strip.firstElementChild;\n      let i = 0;\n      Array.from(tabContainer.children).forEach((child) => {\n        const tabRect = child.getBoundingClientRect();\n        if (child.classList.contains(tabClassName)) {\n          if (getNear(tabRect) < visibleNear || getFar(tabRect) > visibleFar) {\n            hidden.push(i);\n          }\n          i++;\n        }\n      });\n    }\n    return hidden;\n  };\n  const onMouseWheel = (event) => {\n    if (tabStripRef.current) {\n      if (node.getChildren().length === 0) return;\n      let delta = 0;\n      if (Math.abs(event.deltaY) > 0) {\n        delta = -event.deltaY;\n        if (event.deltaMode === 1) {\n          delta *= 40;\n        }\n        const newPos = getScrollPosition(tabStripRef.current) - delta;\n        const maxScroll = getScrollSize(tabStripRef.current) - getElementSize(tabStripRef.current);\n        const p = Math.max(0, Math.min(maxScroll, newPos));\n        setScrollPosition(p);\n        event.stopPropagation();\n      }\n    }\n  };\n  const getNear = (rect) => {\n    if (orientation === Orientation.HORZ) {\n      return rect.x;\n    } else {\n      return rect.y;\n    }\n  };\n  const getFar = (rect) => {\n    if (orientation === Orientation.HORZ) {\n      return rect.right;\n    } else {\n      return rect.bottom;\n    }\n  };\n  const getElementSize = (elm) => {\n    if (orientation === Orientation.HORZ) {\n      return elm.clientWidth;\n    } else {\n      return elm.clientHeight;\n    }\n  };\n  const getSize = (rect) => {\n    if (orientation === Orientation.HORZ) {\n      return rect.width;\n    } else {\n      return rect.height;\n    }\n  };\n  const getScrollSize = (elm) => {\n    if (orientation === Orientation.HORZ) {\n      return elm.scrollWidth;\n    } else {\n      return elm.scrollHeight;\n    }\n  };\n  const setScrollPosition = (p) => {\n    if (orientation === Orientation.HORZ) {\n      tabStripRef.current.scrollLeft = p;\n    } else {\n      tabStripRef.current.scrollTop = p;\n    }\n  };\n  const getScrollPosition = (elm) => {\n    if (orientation === Orientation.HORZ) {\n      return elm.scrollLeft;\n    } else {\n      return elm.scrollTop;\n    }\n  };\n  return { selfRef, userControlledPositionRef, onScroll, onScrollPointerDown, hiddenTabs, onMouseWheel, isDockStickyButtons, isShowHiddenTabs };\n};\nfunction arraysEqual(arr1, arr2) {\n  return arr1.length === arr2.length && arr1.every((val, index) => val === arr2[index]);\n}\nconst BorderTabSet = (props) => {\n  const { border, layout, size } = props;\n  const toolbarRef = React.useRef(null);\n  const miniScrollRef = React.useRef(null);\n  const overflowbuttonRef = React.useRef(null);\n  const stickyButtonsRef = React.useRef(null);\n  const tabStripInnerRef = React.useRef(null);\n  const icons = layout.getIcons();\n  React.useLayoutEffect(() => {\n    border.setTabHeaderRect(layout.getBoundingClientRect(selfRef.current));\n  });\n  const { selfRef, userControlledPositionRef, onScroll, onScrollPointerDown, hiddenTabs, onMouseWheel, isDockStickyButtons, isShowHiddenTabs } = useTabOverflow(\n    layout,\n    border,\n    Orientation.flip(border.getOrientation()),\n    tabStripInnerRef,\n    miniScrollRef,\n    layout.getClassName(CLASSES.FLEXLAYOUT__BORDER_BUTTON)\n  );\n  const onAuxMouseClick = (event) => {\n    if (isAuxMouseEvent(event)) {\n      layout.auxMouseClick(border, event);\n    }\n  };\n  const onContextMenu = (event) => {\n    layout.showContextMenu(border, event);\n  };\n  const onInterceptPointerDown = (event) => {\n    event.stopPropagation();\n  };\n  const onOverflowClick = (event) => {\n    const callback = layout.getShowOverflowMenu();\n    const items = hiddenTabs.map((h) => {\n      return { index: h, node: border.getChildren()[h] };\n    });\n    if (callback !== void 0) {\n      callback(border, event, items, onOverflowItemSelect);\n    } else {\n      const element = overflowbuttonRef.current;\n      showPopup(\n        element,\n        border,\n        items,\n        onOverflowItemSelect,\n        layout\n      );\n    }\n    event.stopPropagation();\n  };\n  const onOverflowItemSelect = (item) => {\n    layout.doAction(Actions.selectTab(item.node.getId()));\n    userControlledPositionRef.current = false;\n  };\n  const onPopoutTab = (event) => {\n    const selectedTabNode = border.getChildren()[border.getSelected()];\n    if (selectedTabNode !== void 0) {\n      layout.doAction(Actions.popoutTab(selectedTabNode.getId()));\n    }\n    event.stopPropagation();\n  };\n  const cm = layout.getClassName;\n  const tabButtons = [];\n  const layoutTab = (i) => {\n    const isSelected = border.getSelected() === i;\n    const child = border.getChildren()[i];\n    tabButtons.push(\n      /* @__PURE__ */ jsx(\n        BorderButton,\n        {\n          layout,\n          border: border.getLocation().getName(),\n          node: child,\n          path: border.getPath() + \"/tb\" + i,\n          selected: isSelected,\n          icons\n        },\n        child.getId()\n      )\n    );\n    if (i < border.getChildren().length - 1) {\n      tabButtons.push(\n        /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__BORDER_TAB_DIVIDER) }, \"divider\" + i)\n      );\n    }\n  };\n  for (let i = 0; i < border.getChildren().length; i++) {\n    layoutTab(i);\n  }\n  let borderClasses = cm(CLASSES.FLEXLAYOUT__BORDER) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_ + border.getLocation().getName());\n  if (border.getClassName() !== void 0) {\n    borderClasses += \" \" + border.getClassName();\n  }\n  let leading = void 0;\n  let buttons = [];\n  let stickyButtons = [];\n  const renderState = { leading, buttons, stickyButtons, overflowPosition: void 0 };\n  layout.customizeTabSet(border, renderState);\n  leading = renderState.leading;\n  stickyButtons = renderState.stickyButtons;\n  buttons = renderState.buttons;\n  if (renderState.overflowPosition === void 0) {\n    renderState.overflowPosition = stickyButtons.length;\n  }\n  if (stickyButtons.length > 0) {\n    if (isDockStickyButtons) {\n      buttons = [...stickyButtons, ...buttons];\n    } else {\n      tabButtons.push(/* @__PURE__ */ jsx(\n        \"div\",\n        {\n          ref: stickyButtonsRef,\n          onPointerDown: onInterceptPointerDown,\n          onDragStart: (e) => {\n            e.preventDefault();\n          },\n          className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),\n          children: stickyButtons\n        },\n        \"sticky_buttons_container\"\n      ));\n    }\n  }\n  if (isShowHiddenTabs) {\n    const overflowTitle = layout.i18nName(I18nLabel.Overflow_Menu_Tooltip);\n    let overflowContent;\n    if (typeof icons.more === \"function\") {\n      const items = hiddenTabs.map((h) => {\n        return { index: h, node: border.getChildren()[h] };\n      });\n      overflowContent = icons.more(border, items);\n    } else {\n      overflowContent = /* @__PURE__ */ jsxs(Fragment, { children: [\n        icons.more,\n        /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT), children: hiddenTabs.length > 0 ? hiddenTabs.length : \"\" })\n      ] });\n    }\n    buttons.splice(\n      Math.min(renderState.overflowPosition, buttons.length),\n      0,\n      /* @__PURE__ */ jsx(\n        \"button\",\n        {\n          ref: overflowbuttonRef,\n          className: cm(CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_ + border.getLocation().getName()),\n          title: overflowTitle,\n          onClick: onOverflowClick,\n          onPointerDown: onInterceptPointerDown,\n          children: overflowContent\n        },\n        \"overflowbutton\"\n      )\n    );\n  }\n  const selectedIndex = border.getSelected();\n  if (selectedIndex !== -1) {\n    const selectedTabNode = border.getChildren()[selectedIndex];\n    if (selectedTabNode !== void 0 && layout.isSupportsPopout() && selectedTabNode.isEnablePopout()) {\n      const popoutTitle = layout.i18nName(I18nLabel.Popout_Tab);\n      buttons.push(\n        /* @__PURE__ */ jsx(\n          \"button\",\n          {\n            title: popoutTitle,\n            className: cm(CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),\n            onClick: onPopoutTab,\n            onPointerDown: onInterceptPointerDown,\n            children: typeof icons.popout === \"function\" ? icons.popout(selectedTabNode) : icons.popout\n          },\n          \"popout\"\n        )\n      );\n    }\n  }\n  const toolbar = /* @__PURE__ */ jsx(\"div\", { ref: toolbarRef, className: cm(CLASSES.FLEXLAYOUT__BORDER_TOOLBAR) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_ + border.getLocation().getName()), children: buttons }, \"toolbar\");\n  let innerStyle = {};\n  let outerStyle = {};\n  const borderHeight = size - 1;\n  if (border.getLocation() === DockLocation.LEFT) {\n    innerStyle = { right: \"100%\", top: 0 };\n    outerStyle = { width: borderHeight, overflowY: \"auto\" };\n  } else if (border.getLocation() === DockLocation.RIGHT) {\n    innerStyle = { left: \"100%\", top: 0 };\n    outerStyle = { width: borderHeight, overflowY: \"auto\" };\n  } else {\n    innerStyle = { left: 0 };\n    outerStyle = { height: borderHeight, overflowX: \"auto\" };\n  }\n  let miniScrollbar = void 0;\n  if (border.isEnableTabScrollbar()) {\n    miniScrollbar = /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        ref: miniScrollRef,\n        className: cm(CLASSES.FLEXLAYOUT__MINI_SCROLLBAR),\n        onPointerDown: onScrollPointerDown\n      }\n    );\n  }\n  let leadingContainer = void 0;\n  if (leading) {\n    leadingContainer = /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__BORDER_LEADING), children: leading });\n  }\n  return /* @__PURE__ */ jsxs(\n    \"div\",\n    {\n      ref: selfRef,\n      style: {\n        display: \"flex\",\n        flexDirection: border.getOrientation() === Orientation.VERT ? \"row\" : \"column\"\n      },\n      className: borderClasses,\n      \"data-layout-path\": border.getPath(),\n      onClick: onAuxMouseClick,\n      onAuxClick: onAuxMouseClick,\n      onContextMenu,\n      onWheel: onMouseWheel,\n      children: [\n        leadingContainer,\n        /* @__PURE__ */ jsxs(\"div\", { className: cm(CLASSES.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER), children: [\n          /* @__PURE__ */ jsx(\n            \"div\",\n            {\n              ref: tabStripInnerRef,\n              className: cm(CLASSES.FLEXLAYOUT__BORDER_INNER) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_INNER_ + border.getLocation().getName()),\n              style: outerStyle,\n              onScroll,\n              children: /* @__PURE__ */ jsx(\n                \"div\",\n                {\n                  style: innerStyle,\n                  className: cm(CLASSES.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER) + \" \" + cm(CLASSES.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_ + border.getLocation().getName()),\n                  children: tabButtons\n                }\n              )\n            }\n          ),\n          miniScrollbar\n        ] }),\n        toolbar\n      ]\n    }\n  );\n};\nconst DragContainer = (props) => {\n  const { layout, node } = props;\n  const selfRef = React.useRef(null);\n  React.useEffect(() => {\n    node.setTabStamp(selfRef.current);\n  }, [node, selfRef.current]);\n  const cm = layout.getClassName;\n  const classNames = cm(CLASSES.FLEXLAYOUT__DRAG_RECT);\n  return /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      ref: selfRef,\n      className: classNames,\n      children: /* @__PURE__ */ jsx(TabButtonStamp, { layout, node }, node.getId())\n    }\n  );\n};\nconst PopoutWindow = (props) => {\n  const { title, layout, layoutWindow, url, onCloseWindow, onSetWindow, children } = props;\n  const popoutWindow = React.useRef(null);\n  const [content, setContent] = React.useState(void 0);\n  const styleMap = /* @__PURE__ */ new Map();\n  React.useLayoutEffect(() => {\n    if (!popoutWindow.current) {\n      const windowId = layoutWindow.windowId;\n      const rect = layoutWindow.rect;\n      popoutWindow.current = window.open(url, windowId, `left=${rect.x},top=${rect.y},width=${rect.width},height=${rect.height}`);\n      if (popoutWindow.current) {\n        layoutWindow.window = popoutWindow.current;\n        onSetWindow(layoutWindow, popoutWindow.current);\n        window.addEventListener(\"beforeunload\", () => {\n          if (popoutWindow.current) {\n            const closedWindow = popoutWindow.current;\n            popoutWindow.current = null;\n            closedWindow.close();\n          }\n        });\n        popoutWindow.current.addEventListener(\"load\", () => {\n          if (popoutWindow.current) {\n            popoutWindow.current.focus();\n            popoutWindow.current.resizeTo(rect.width, rect.height);\n            popoutWindow.current.moveTo(rect.x, rect.y);\n            const popoutDocument = popoutWindow.current.document;\n            popoutDocument.title = title;\n            const popoutContent = popoutDocument.createElement(\"div\");\n            popoutContent.className = CLASSES.FLEXLAYOUT__FLOATING_WINDOW_CONTENT;\n            popoutDocument.body.appendChild(popoutContent);\n            copyStyles(popoutDocument, styleMap).then(() => {\n              setContent(popoutContent);\n            });\n            const observer = new MutationObserver((mutationsList) => handleStyleMutations(mutationsList, popoutDocument, styleMap));\n            observer.observe(document.head, { childList: true });\n            popoutWindow.current.addEventListener(\"beforeunload\", () => {\n              if (popoutWindow.current) {\n                onCloseWindow(layoutWindow);\n                popoutWindow.current = null;\n                observer.disconnect();\n              }\n            });\n          }\n        });\n      } else {\n        console.warn(`Unable to open window ${url}`);\n        onCloseWindow(layoutWindow);\n      }\n    }\n    return () => {\n      var _a;\n      if (!layout.getModel().getwindowsMap().has(layoutWindow.windowId)) {\n        (_a = popoutWindow.current) == null ? void 0 : _a.close();\n        popoutWindow.current = null;\n      }\n    };\n  }, []);\n  if (content !== void 0) {\n    return createPortal(children, content);\n  } else {\n    return null;\n  }\n};\nfunction handleStyleMutations(mutationsList, popoutDocument, styleMap) {\n  for (const mutation of mutationsList) {\n    if (mutation.type === \"childList\") {\n      for (const addition of mutation.addedNodes) {\n        if (addition instanceof HTMLLinkElement || addition instanceof HTMLStyleElement) {\n          copyStyle(popoutDocument, addition, styleMap);\n        }\n      }\n      for (const removal of mutation.removedNodes) {\n        if (removal instanceof HTMLLinkElement || removal instanceof HTMLStyleElement) {\n          const popoutStyle = styleMap.get(removal);\n          if (popoutStyle) {\n            popoutDocument.head.removeChild(popoutStyle);\n          }\n        }\n      }\n    }\n  }\n}\nfunction copyStyles(popoutDoc, styleMap) {\n  const promises = [];\n  const styleElements = document.querySelectorAll('style, link[rel=\"stylesheet\"]');\n  for (const element of styleElements) {\n    copyStyle(popoutDoc, element, styleMap, promises);\n  }\n  return Promise.all(promises);\n}\nfunction copyStyle(popoutDoc, element, styleMap, promises) {\n  if (element instanceof HTMLLinkElement) {\n    const linkElement = element.cloneNode(true);\n    popoutDoc.head.appendChild(linkElement);\n    styleMap.set(element, linkElement);\n    if (promises) {\n      promises.push(new Promise((resolve) => {\n        linkElement.onload = () => resolve(true);\n      }));\n    }\n  } else if (element instanceof HTMLStyleElement) {\n    try {\n      const styleElement = element.cloneNode(true);\n      popoutDoc.head.appendChild(styleElement);\n      styleMap.set(element, styleElement);\n    } catch (e) {\n    }\n  }\n}\nconst style = { width: \"1em\", height: \"1em\", display: \"flex\", alignItems: \"center\" };\nconst CloseIcon = () => {\n  return /* @__PURE__ */ jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, viewBox: \"0 0 24 24\", children: [\n    /* @__PURE__ */ jsx(\"path\", { fill: \"none\", d: \"M0 0h24v24H0z\" }),\n    /* @__PURE__ */ jsx(\"path\", { stroke: \"var(--color-icon)\", fill: \"var(--color-icon)\", d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" })\n  ] });\n};\nconst MaximizeIcon = () => {\n  return /* @__PURE__ */ jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, viewBox: \"0 0 24 24\", fill: \"var(--color-icon)\", children: [\n    /* @__PURE__ */ jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n    /* @__PURE__ */ jsx(\"path\", { stroke: \"var(--color-icon)\", d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\" })\n  ] });\n};\nconst OverflowIcon = () => {\n  return /* @__PURE__ */ jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, viewBox: \"0 0 24 24\", fill: \"var(--color-icon)\", children: [\n    /* @__PURE__ */ jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n    /* @__PURE__ */ jsx(\"path\", { stroke: \"var(--color-icon)\", d: \"M7 10l5 5 5-5z\" })\n  ] });\n};\nconst EdgeIcon = () => {\n  return /* @__PURE__ */ jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style: { display: \"block\", width: 10, height: 10 }, preserveAspectRatio: \"none\", viewBox: \"0 0 100 100\", children: /* @__PURE__ */ jsx(\n    \"path\",\n    {\n      fill: \"var(--color-edge-icon)\",\n      stroke: \"var(--color-edge-icon)\",\n      d: \"M10 30 L90 30 l-40 40 Z\"\n    }\n  ) });\n};\nconst PopoutIcon = () => {\n  return (\n    // <svg xmlns=\"http://www.w3.org/2000/svg\"  style={style}  viewBox=\"0 0 24 24\" fill=\"var(--color-icon)\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path stroke=\"var(--color-icon)\" d=\"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z\"/></svg>\n    // <svg xmlns=\"http://www.w3.org/2000/svg\" style={style} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"var(--color-icon)\" stroke-width=\"2\">\n    //     <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n    // </svg>\n    /* @__PURE__ */ jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, viewBox: \"0 0 20 20\", fill: \"var(--color-icon)\", children: [\n      /* @__PURE__ */ jsx(\"path\", { d: \"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z\" }),\n      /* @__PURE__ */ jsx(\"path\", { d: \"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z\" })\n    ] })\n  );\n};\nconst RestoreIcon = () => {\n  return /* @__PURE__ */ jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, viewBox: \"0 0 24 24\", fill: \"var(--color-icon)\", children: [\n    /* @__PURE__ */ jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n    /* @__PURE__ */ jsx(\"path\", { stroke: \"var(--color-icon)\", d: \"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\" })\n  ] });\n};\nconst AsterickIcon = () => {\n  return /* @__PURE__ */ jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, height: \"24px\", viewBox: \"0 -960 960 960\", width: \"24px\", children: /* @__PURE__ */ jsx(\"path\", { fill: \"var(--color-icon)\", stroke: \"var(--color-icon)\", d: \"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z\" }) });\n};\nconst AddIcon = () => {\n  return /* @__PURE__ */ jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, height: \"24px\", viewBox: \"0 0 24 24\", fill: \"var(--color-icon)\", children: [\n    /* @__PURE__ */ jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n    /* @__PURE__ */ jsx(\"path\", { stroke: \"var(--color-icon)\", d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" })\n  ] });\n};\nconst MenuIcon = () => {\n  return /* @__PURE__ */ jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", style, height: \"24px\", width: \"24px\", viewBox: \"0 -960 960 960\", fill: \"var(--color-icon)\", children: /* @__PURE__ */ jsx(\"path\", { d: \"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z\" }) });\n};\nconst SettingsIcon = (props) => {\n  return /* @__PURE__ */ jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", ...props, style, viewBox: \"0 0 24 24\", fill: \"var(--color-icon)\", children: /* @__PURE__ */ jsxs(\"g\", { children: [\n    /* @__PURE__ */ jsx(\"path\", { d: \"M0,0h24v24H0V0z\", fill: \"none\" }),\n    /* @__PURE__ */ jsx(\"path\", { d: \"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\" })\n  ] }) });\n};\nconst Overlay = (props) => {\n  const { layout, show } = props;\n  return /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      className: layout.getClassName(CLASSES.FLEXLAYOUT__LAYOUT_OVERLAY),\n      style: {\n        display: show ? \"flex\" : \"none\"\n      }\n    }\n  );\n};\nconst TabButton = (props) => {\n  const { layout, node, selected, path } = props;\n  const selfRef = React.useRef(null);\n  const contentRef = React.useRef(null);\n  const icons = layout.getIcons();\n  React.useLayoutEffect(() => {\n    node.setTabRect(layout.getBoundingClientRect(selfRef.current));\n    if (layout.getEditingTab() === node) {\n      contentRef.current.select();\n    }\n  });\n  const onDragStart = (event) => {\n    if (node.isEnableDrag()) {\n      event.stopPropagation();\n      layout.setDragNode(event.nativeEvent, node);\n    } else {\n      event.preventDefault();\n    }\n  };\n  const onDragEnd = (event) => {\n    layout.clearDragMain();\n  };\n  const onAuxMouseClick = (event) => {\n    if (isAuxMouseEvent(event)) {\n      layout.auxMouseClick(node, event);\n    }\n  };\n  const onContextMenu = (event) => {\n    layout.showContextMenu(node, event);\n  };\n  const onClick = () => {\n    layout.doAction(Actions.selectTab(node.getId()));\n  };\n  const onDoubleClick = (event) => {\n    if (node.isEnableRename()) {\n      onRename();\n      event.stopPropagation();\n    }\n  };\n  const onRename = () => {\n    layout.setEditingTab(node);\n    layout.getCurrentDocument().body.addEventListener(\"pointerdown\", onEndEdit);\n  };\n  const onEndEdit = (event) => {\n    if (event.target !== contentRef.current) {\n      layout.getCurrentDocument().body.removeEventListener(\"pointerdown\", onEndEdit);\n      layout.setEditingTab(void 0);\n    }\n  };\n  const isClosable = () => {\n    const closeType = node.getCloseType();\n    if (selected || closeType === ICloseType.Always) {\n      return true;\n    }\n    if (closeType === ICloseType.Visible) {\n      if (window.matchMedia && window.matchMedia(\"(hover: hover) and (pointer: fine)\").matches) {\n        return true;\n      }\n    }\n    return false;\n  };\n  const onClose = (event) => {\n    if (isClosable()) {\n      layout.doAction(Actions.deleteTab(node.getId()));\n      event.stopPropagation();\n    }\n  };\n  const onClosePointerDown = (event) => {\n    event.stopPropagation();\n  };\n  const onTextBoxPointerDown = (event) => {\n    event.stopPropagation();\n  };\n  const onTextBoxKeyPress = (event) => {\n    if (event.code === \"Escape\") {\n      layout.setEditingTab(void 0);\n    } else if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n      layout.setEditingTab(void 0);\n      layout.doAction(Actions.renameTab(node.getId(), event.target.value));\n    }\n  };\n  const cm = layout.getClassName;\n  const parentNode = node.getParent();\n  const isStretch = parentNode.isEnableSingleTabStretch() && parentNode.getChildren().length === 1;\n  const baseClassName = isStretch ? CLASSES.FLEXLAYOUT__TAB_BUTTON_STRETCH : CLASSES.FLEXLAYOUT__TAB_BUTTON;\n  let classNames = cm(baseClassName);\n  classNames += \" \" + cm(baseClassName + \"_\" + parentNode.getTabLocation());\n  if (!isStretch) {\n    if (selected) {\n      classNames += \" \" + cm(baseClassName + \"--selected\");\n    } else {\n      classNames += \" \" + cm(baseClassName + \"--unselected\");\n    }\n  }\n  if (node.getClassName() !== void 0) {\n    classNames += \" \" + node.getClassName();\n  }\n  const renderState = getRenderStateEx(layout, node);\n  let content = renderState.content ? /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_CONTENT), children: renderState.content }) : null;\n  const leading = renderState.leading ? /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_LEADING), children: renderState.leading }) : null;\n  if (layout.getEditingTab() === node) {\n    content = /* @__PURE__ */ jsx(\n      \"input\",\n      {\n        ref: contentRef,\n        className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),\n        \"data-layout-path\": path + \"/textbox\",\n        type: \"text\",\n        autoFocus: true,\n        defaultValue: node.getName(),\n        onKeyDown: onTextBoxKeyPress,\n        onPointerDown: onTextBoxPointerDown\n      }\n    );\n  }\n  if (node.isEnableClose() && !isStretch) {\n    const closeTitle = layout.i18nName(I18nLabel.Close_Tab);\n    renderState.buttons.push(\n      /* @__PURE__ */ jsx(\n        \"div\",\n        {\n          \"data-layout-path\": path + \"/button/close\",\n          title: closeTitle,\n          className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_TRAILING),\n          onPointerDown: onClosePointerDown,\n          onClick: onClose,\n          children: typeof icons.close === \"function\" ? icons.close(node) : icons.close\n        },\n        \"close\"\n      )\n    );\n  }\n  return /* @__PURE__ */ jsxs(\n    \"div\",\n    {\n      ref: selfRef,\n      \"data-layout-path\": path,\n      className: classNames,\n      onClick,\n      onAuxClick: onAuxMouseClick,\n      onContextMenu,\n      title: node.getHelpText(),\n      draggable: true,\n      onDragStart,\n      onDragEnd,\n      onDoubleClick,\n      children: [\n        leading,\n        content,\n        renderState.buttons\n      ]\n    }\n  );\n};\nconst TabSet = (props) => {\n  const { node, layout } = props;\n  const tabStripRef = React.useRef(null);\n  const miniScrollRef = React.useRef(null);\n  const tabStripInnerRef = React.useRef(null);\n  const contentRef = React.useRef(null);\n  const buttonBarRef = React.useRef(null);\n  const overflowbuttonRef = React.useRef(null);\n  const stickyButtonsRef = React.useRef(null);\n  const timer = React.useRef(void 0);\n  const icons = layout.getIcons();\n  React.useLayoutEffect(() => {\n    node.setRect(layout.getBoundingClientRect(selfRef.current));\n    if (tabStripRef.current) {\n      node.setTabStripRect(layout.getBoundingClientRect(tabStripRef.current));\n    }\n    const newContentRect = layout.getBoundingClientRect(contentRef.current);\n    if (!node.getContentRect().equals(newContentRect) && !isNaN(newContentRect.x)) {\n      node.setContentRect(newContentRect);\n      if (splitterDragging) {\n        if (timer.current) {\n          clearTimeout(timer.current);\n        }\n        timer.current = setTimeout(() => {\n          layout.redrawInternal(\"border content rect \" + newContentRect);\n          timer.current = void 0;\n        }, 50);\n      } else {\n        layout.redrawInternal(\"border content rect \" + newContentRect);\n      }\n    }\n  });\n  const { selfRef, userControlledPositionRef, onScroll, onScrollPointerDown, hiddenTabs, onMouseWheel, isDockStickyButtons, isShowHiddenTabs } = useTabOverflow(\n    layout,\n    node,\n    Orientation.HORZ,\n    tabStripInnerRef,\n    miniScrollRef,\n    layout.getClassName(CLASSES.FLEXLAYOUT__TAB_BUTTON)\n  );\n  const onOverflowClick = (event) => {\n    const callback = layout.getShowOverflowMenu();\n    const items = hiddenTabs.map((h) => {\n      return { index: h, node: node.getChildren()[h] };\n    });\n    if (callback !== void 0) {\n      callback(node, event, items, onOverflowItemSelect);\n    } else {\n      const element = overflowbuttonRef.current;\n      showPopup(\n        element,\n        node,\n        items,\n        onOverflowItemSelect,\n        layout\n      );\n    }\n    event.stopPropagation();\n  };\n  const onOverflowItemSelect = (item) => {\n    layout.doAction(Actions.selectTab(item.node.getId()));\n    userControlledPositionRef.current = false;\n  };\n  const onDragStart = (event) => {\n    if (!layout.getEditingTab()) {\n      if (node.isEnableDrag()) {\n        event.stopPropagation();\n        layout.setDragNode(event.nativeEvent, node);\n      } else {\n        event.preventDefault();\n      }\n    } else {\n      event.preventDefault();\n    }\n  };\n  const onPointerDown = (event) => {\n    if (!isAuxMouseEvent(event)) {\n      layout.doAction(Actions.setActiveTabset(node.getId(), layout.getWindowId()));\n    }\n  };\n  const onAuxMouseClick = (event) => {\n    if (isAuxMouseEvent(event)) {\n      layout.auxMouseClick(node, event);\n    }\n  };\n  const onContextMenu = (event) => {\n    layout.showContextMenu(node, event);\n  };\n  const onInterceptPointerDown = (event) => {\n    event.stopPropagation();\n  };\n  const onMaximizeToggle = (event) => {\n    if (node.canMaximize()) {\n      layout.maximize(node);\n    }\n    event.stopPropagation();\n  };\n  const onClose = (event) => {\n    layout.doAction(Actions.deleteTabset(node.getId()));\n    event.stopPropagation();\n  };\n  const onCloseTab = (event) => {\n    layout.doAction(Actions.deleteTab(node.getChildren()[0].getId()));\n    event.stopPropagation();\n  };\n  const onPopoutTab = (event) => {\n    if (selectedTabNode !== void 0) {\n      layout.doAction(Actions.popoutTab(selectedTabNode.getId()));\n    }\n    event.stopPropagation();\n  };\n  const onDoubleClick = (event) => {\n    if (node.canMaximize()) {\n      layout.maximize(node);\n    }\n  };\n  const cm = layout.getClassName;\n  const selectedTabNode = node.getSelectedNode();\n  const path = node.getPath();\n  const tabs = [];\n  if (node.isEnableTabStrip()) {\n    for (let i = 0; i < node.getChildren().length; i++) {\n      const child = node.getChildren()[i];\n      const isSelected = node.getSelected() === i;\n      tabs.push(\n        /* @__PURE__ */ jsx(\n          TabButton,\n          {\n            layout,\n            node: child,\n            path: path + \"/tb\" + i,\n            selected: isSelected\n          },\n          child.getId()\n        )\n      );\n      if (i < node.getChildren().length - 1) {\n        tabs.push(\n          /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TABSET_TAB_DIVIDER) }, \"divider\" + i)\n        );\n      }\n    }\n  }\n  let leading = void 0;\n  let stickyButtons = [];\n  let buttons = [];\n  const renderState = { leading, stickyButtons, buttons, overflowPosition: void 0 };\n  layout.customizeTabSet(node, renderState);\n  leading = renderState.leading;\n  stickyButtons = renderState.stickyButtons;\n  buttons = renderState.buttons;\n  const isTabStretch = node.isEnableSingleTabStretch() && node.getChildren().length === 1;\n  const showClose = isTabStretch && node.getChildren()[0].isEnableClose() || node.isEnableClose();\n  if (renderState.overflowPosition === void 0) {\n    renderState.overflowPosition = stickyButtons.length;\n  }\n  if (stickyButtons.length > 0) {\n    if (!node.isEnableTabWrap() && (isDockStickyButtons || isTabStretch)) {\n      buttons = [...stickyButtons, ...buttons];\n    } else {\n      tabs.push(/* @__PURE__ */ jsx(\n        \"div\",\n        {\n          ref: stickyButtonsRef,\n          onPointerDown: onInterceptPointerDown,\n          onDragStart: (e) => {\n            e.preventDefault();\n          },\n          className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),\n          children: stickyButtons\n        },\n        \"sticky_buttons_container\"\n      ));\n    }\n  }\n  if (!node.isEnableTabWrap()) {\n    if (isShowHiddenTabs) {\n      const overflowTitle = layout.i18nName(I18nLabel.Overflow_Menu_Tooltip);\n      let overflowContent;\n      if (typeof icons.more === \"function\") {\n        const items = hiddenTabs.map((h) => {\n          return { index: h, node: node.getChildren()[h] };\n        });\n        overflowContent = icons.more(node, items);\n      } else {\n        overflowContent = /* @__PURE__ */ jsxs(Fragment, { children: [\n          icons.more,\n          /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT), children: hiddenTabs.length > 0 ? hiddenTabs.length : \"\" })\n        ] });\n      }\n      buttons.splice(\n        Math.min(renderState.overflowPosition, buttons.length),\n        0,\n        /* @__PURE__ */ jsx(\n          \"button\",\n          {\n            \"data-layout-path\": path + \"/button/overflow\",\n            ref: overflowbuttonRef,\n            className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON) + \" \" + cm(CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),\n            title: overflowTitle,\n            onClick: onOverflowClick,\n            onPointerDown: onInterceptPointerDown,\n            children: overflowContent\n          },\n          \"overflowbutton\"\n        )\n      );\n    }\n  }\n  if (selectedTabNode !== void 0 && layout.isSupportsPopout() && selectedTabNode.isEnablePopout() && selectedTabNode.isEnablePopoutIcon()) {\n    const popoutTitle = layout.i18nName(I18nLabel.Popout_Tab);\n    buttons.push(\n      /* @__PURE__ */ jsx(\n        \"button\",\n        {\n          \"data-layout-path\": path + \"/button/popout\",\n          title: popoutTitle,\n          className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON) + \" \" + cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),\n          onClick: onPopoutTab,\n          onPointerDown: onInterceptPointerDown,\n          children: typeof icons.popout === \"function\" ? icons.popout(selectedTabNode) : icons.popout\n        },\n        \"popout\"\n      )\n    );\n  }\n  if (node.canMaximize()) {\n    const minTitle = layout.i18nName(I18nLabel.Restore);\n    const maxTitle = layout.i18nName(I18nLabel.Maximize);\n    buttons.push(\n      /* @__PURE__ */ jsx(\n        \"button\",\n        {\n          \"data-layout-path\": path + \"/button/max\",\n          title: node.isMaximized() ? minTitle : maxTitle,\n          className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON) + \" \" + cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_ + (node.isMaximized() ? \"max\" : \"min\")),\n          onClick: onMaximizeToggle,\n          onPointerDown: onInterceptPointerDown,\n          children: node.isMaximized() ? typeof icons.restore === \"function\" ? icons.restore(node) : icons.restore : typeof icons.maximize === \"function\" ? icons.maximize(node) : icons.maximize\n        },\n        \"max\"\n      )\n    );\n  }\n  if (!node.isMaximized() && showClose) {\n    const title = isTabStretch ? layout.i18nName(I18nLabel.Close_Tab) : layout.i18nName(I18nLabel.Close_Tabset);\n    buttons.push(\n      /* @__PURE__ */ jsx(\n        \"button\",\n        {\n          \"data-layout-path\": path + \"/button/close\",\n          title,\n          className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON) + \" \" + cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),\n          onClick: isTabStretch ? onCloseTab : onClose,\n          onPointerDown: onInterceptPointerDown,\n          children: typeof icons.closeTabset === \"function\" ? icons.closeTabset(node) : icons.closeTabset\n        },\n        \"close\"\n      )\n    );\n  }\n  if (node.isActive() && node.isEnableActiveIcon()) {\n    const title = layout.i18nName(I18nLabel.Active_Tabset);\n    buttons.push(\n      /* @__PURE__ */ jsx(\n        \"div\",\n        {\n          \"data-layout-path\": path + \"/button/active\",\n          title,\n          className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR_ICON),\n          children: typeof icons.activeTabset === \"function\" ? icons.activeTabset(node) : icons.activeTabset\n        },\n        \"active\"\n      )\n    );\n  }\n  const buttonbar = /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      ref: buttonBarRef,\n      className: cm(CLASSES.FLEXLAYOUT__TAB_TOOLBAR),\n      onPointerDown: onInterceptPointerDown,\n      onDragStart: (e) => {\n        e.preventDefault();\n      },\n      children: buttons\n    },\n    \"buttonbar\"\n  );\n  let tabStrip;\n  let tabStripClasses = cm(CLASSES.FLEXLAYOUT__TABSET_TABBAR_OUTER);\n  if (node.getClassNameTabStrip() !== void 0) {\n    tabStripClasses += \" \" + node.getClassNameTabStrip();\n  }\n  tabStripClasses += \" \" + CLASSES.FLEXLAYOUT__TABSET_TABBAR_OUTER_ + node.getTabLocation();\n  if (node.isActive()) {\n    tabStripClasses += \" \" + cm(CLASSES.FLEXLAYOUT__TABSET_SELECTED);\n  }\n  if (node.isMaximized()) {\n    tabStripClasses += \" \" + cm(CLASSES.FLEXLAYOUT__TABSET_MAXIMIZED);\n  }\n  if (isTabStretch) {\n    const tabNode = node.getChildren()[0];\n    if (tabNode.getTabSetClassName() !== void 0) {\n      tabStripClasses += \" \" + tabNode.getTabSetClassName();\n    }\n  }\n  let leadingContainer = void 0;\n  if (leading) {\n    leadingContainer = /* @__PURE__ */ jsx(\"div\", { className: cm(CLASSES.FLEXLAYOUT__TABSET_LEADING), children: leading });\n  }\n  if (node.isEnableTabWrap()) {\n    if (node.isEnableTabStrip()) {\n      tabStrip = /* @__PURE__ */ jsxs(\n        \"div\",\n        {\n          className: tabStripClasses,\n          style: { flexWrap: \"wrap\", gap: \"1px\", marginTop: \"2px\" },\n          ref: tabStripRef,\n          \"data-layout-path\": path + \"/tabstrip\",\n          onPointerDown,\n          onDoubleClick,\n          onContextMenu,\n          onClick: onAuxMouseClick,\n          onAuxClick: onAuxMouseClick,\n          draggable: true,\n          onDragStart,\n          children: [\n            leadingContainer,\n            tabs,\n            /* @__PURE__ */ jsx(\"div\", { style: { flexGrow: 1 } }),\n            buttonbar\n          ]\n        }\n      );\n    }\n  } else {\n    if (node.isEnableTabStrip()) {\n      let miniScrollbar = void 0;\n      if (node.isEnableTabScrollbar()) {\n        miniScrollbar = /* @__PURE__ */ jsx(\n          \"div\",\n          {\n            ref: miniScrollRef,\n            className: cm(CLASSES.FLEXLAYOUT__MINI_SCROLLBAR),\n            onPointerDown: onScrollPointerDown\n          }\n        );\n      }\n      tabStrip = /* @__PURE__ */ jsxs(\n        \"div\",\n        {\n          className: tabStripClasses,\n          ref: tabStripRef,\n          \"data-layout-path\": path + \"/tabstrip\",\n          onPointerDown,\n          onDoubleClick,\n          onContextMenu,\n          onClick: onAuxMouseClick,\n          onAuxClick: onAuxMouseClick,\n          draggable: true,\n          onWheel: onMouseWheel,\n          onDragStart,\n          children: [\n            leadingContainer,\n            /* @__PURE__ */ jsxs(\"div\", { className: cm(CLASSES.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER), children: [\n              /* @__PURE__ */ jsx(\n                \"div\",\n                {\n                  ref: tabStripInnerRef,\n                  className: cm(CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER) + \" \" + cm(CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_ + node.getTabLocation()),\n                  style: { overflowX: \"auto\", overflowY: \"hidden\" },\n                  onScroll,\n                  children: /* @__PURE__ */ jsx(\n                    \"div\",\n                    {\n                      style: { width: isTabStretch ? \"100%\" : \"none\" },\n                      className: cm(CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER) + \" \" + cm(CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_ + node.getTabLocation()),\n                      children: tabs\n                    }\n                  )\n                }\n              ),\n              miniScrollbar\n            ] }),\n            buttonbar\n          ]\n        }\n      );\n    }\n  }\n  let emptyTabset;\n  if (node.getChildren().length === 0) {\n    const placeHolderCallback = layout.getTabSetPlaceHolderCallback();\n    if (placeHolderCallback) {\n      emptyTabset = placeHolderCallback(node);\n    }\n  }\n  let content = /* @__PURE__ */ jsx(\"div\", { ref: contentRef, className: cm(CLASSES.FLEXLAYOUT__TABSET_CONTENT), children: emptyTabset });\n  if (node.getTabLocation() === \"top\") {\n    content = /* @__PURE__ */ jsxs(Fragment, { children: [\n      tabStrip,\n      content\n    ] });\n  } else {\n    content = /* @__PURE__ */ jsxs(Fragment, { children: [\n      content,\n      tabStrip\n    ] });\n  }\n  const style2 = {\n    flexGrow: Math.max(1, node.getWeight() * 1e3),\n    minWidth: node.getMinWidth(),\n    minHeight: node.getMinHeight(),\n    maxWidth: node.getMaxWidth(),\n    maxHeight: node.getMaxHeight()\n  };\n  if (node.getModel().getMaximizedTabset(layout.getWindowId()) !== void 0 && !node.isMaximized()) {\n    style2.display = \"none\";\n  }\n  const tabset = /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      ref: selfRef,\n      className: cm(CLASSES.FLEXLAYOUT__TABSET_CONTAINER),\n      style: style2,\n      children: /* @__PURE__ */ jsx(\n        \"div\",\n        {\n          className: cm(CLASSES.FLEXLAYOUT__TABSET),\n          \"data-layout-path\": path,\n          children: content\n        }\n      )\n    }\n  );\n  if (node.isMaximized()) {\n    if (layout.getMainElement()) {\n      return createPortal(\n        /* @__PURE__ */ jsx(\"div\", { style: {\n          position: \"absolute\",\n          display: \"flex\",\n          top: 0,\n          left: 0,\n          bottom: 0,\n          right: 0\n        }, children: tabset }),\n        layout.getMainElement()\n      );\n    } else {\n      return tabset;\n    }\n  } else {\n    return tabset;\n  }\n};\nconst Row = (props) => {\n  const { layout, node } = props;\n  const selfRef = React.useRef(null);\n  const horizontal = node.getOrientation() === Orientation.HORZ;\n  React.useLayoutEffect(() => {\n    node.setRect(layout.getBoundingClientRect(selfRef.current));\n  });\n  const items = [];\n  let i = 0;\n  for (const child of node.getChildren()) {\n    if (i > 0) {\n      items.push(/* @__PURE__ */ jsx(Splitter, { layout, node, index: i, horizontal }, \"splitter\" + i));\n    }\n    if (child instanceof RowNode) {\n      items.push(/* @__PURE__ */ jsx(Row, { layout, node: child }, child.getId()));\n    } else if (child instanceof TabSetNode) {\n      items.push(/* @__PURE__ */ jsx(TabSet, { layout, node: child }, child.getId()));\n    }\n    i++;\n  }\n  const style2 = {\n    flexGrow: Math.max(1, node.getWeight() * 1e3),\n    // NOTE:  flex-grow cannot have values < 1 otherwise will not fill parent, need to normalize \n    minWidth: node.getMinWidth(),\n    minHeight: node.getMinHeight(),\n    maxWidth: node.getMaxWidth(),\n    maxHeight: node.getMaxHeight()\n  };\n  if (horizontal) {\n    style2.flexDirection = \"row\";\n  } else {\n    style2.flexDirection = \"column\";\n  }\n  return /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      ref: selfRef,\n      className: layout.getClassName(CLASSES.FLEXLAYOUT__ROW),\n      style: style2,\n      children: items\n    }\n  );\n};\nconst Tab = (props) => {\n  const { layout, selected, node, path } = props;\n  const selfRef = React.useRef(null);\n  const firstSelect = React.useRef(true);\n  const parentNode = node.getParent();\n  const rect = parentNode.getContentRect();\n  React.useLayoutEffect(() => {\n    const element = node.getMoveableElement();\n    selfRef.current.appendChild(element);\n    node.setMoveableElement(element);\n    const handleScroll = () => {\n      node.saveScrollPosition();\n    };\n    element.addEventListener(\"scroll\", handleScroll);\n    selfRef.current.addEventListener(\"pointerdown\", onPointerDown);\n    return () => {\n      element.removeEventListener(\"scroll\", handleScroll);\n      if (selfRef.current) {\n        selfRef.current.removeEventListener(\"pointerdown\", onPointerDown);\n      }\n      node.setVisible(false);\n    };\n  }, []);\n  React.useEffect(() => {\n    if (node.isSelected()) {\n      if (firstSelect.current) {\n        node.restoreScrollPosition();\n        firstSelect.current = false;\n      }\n    }\n  });\n  const onPointerDown = () => {\n    const parent = node.getParent();\n    if (parent instanceof TabSetNode) {\n      if (!parent.isActive()) {\n        layout.doAction(Actions.setActiveTabset(parent.getId(), layout.getWindowId()));\n      }\n    }\n  };\n  node.setRect(rect);\n  const cm = layout.getClassName;\n  const style2 = {};\n  rect.styleWithPosition(style2);\n  let overlay = null;\n  if (selected) {\n    node.setVisible(true);\n    if (document.hidden && node.isEnablePopoutOverlay()) {\n      const overlayStyle = {};\n      rect.styleWithPosition(overlayStyle);\n      overlay = /* @__PURE__ */ jsx(\"div\", { style: overlayStyle, className: cm(CLASSES.FLEXLAYOUT__TAB_OVERLAY) });\n    }\n  } else {\n    style2.display = \"none\";\n    node.setVisible(false);\n  }\n  if (parentNode instanceof TabSetNode) {\n    if (node.getModel().getMaximizedTabset(layout.getWindowId()) !== void 0) {\n      if (parentNode.isMaximized()) {\n        style2.zIndex = 10;\n      } else {\n        style2.display = \"none\";\n      }\n    }\n  }\n  if (parentNode instanceof BorderNode) {\n    if (!parentNode.isShowing()) {\n      style2.display = \"none\";\n    }\n  }\n  let className = cm(CLASSES.FLEXLAYOUT__TAB);\n  if (parentNode instanceof BorderNode) {\n    className += \" \" + cm(CLASSES.FLEXLAYOUT__TAB_BORDER);\n    className += \" \" + cm(CLASSES.FLEXLAYOUT__TAB_BORDER_ + parentNode.getLocation().getName());\n  }\n  if (node.getContentClassName() !== void 0) {\n    className += \" \" + node.getContentClassName();\n  }\n  return /* @__PURE__ */ jsxs(Fragment, { children: [\n    overlay,\n    /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        ref: selfRef,\n        style: style2,\n        className,\n        \"data-layout-path\": path\n      }\n    )\n  ] });\n};\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"retry\", () => {\n      this.setState({ hasError: false });\n    });\n    this.state = { hasError: false };\n  }\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.debug(error);\n    console.debug(errorInfo);\n  }\n  render() {\n    if (this.state.hasError) {\n      return /* @__PURE__ */ jsx(\"div\", { className: CLASSES.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER, children: /* @__PURE__ */ jsx(\"div\", { className: CLASSES.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT, children: /* @__PURE__ */ jsxs(\"div\", { style: { display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }, children: [\n        this.props.message,\n        /* @__PURE__ */ jsx(\"p\", { children: /* @__PURE__ */ jsx(\"button\", { onClick: this.retry, children: this.props.retryText }) })\n      ] }) }) });\n    }\n    return this.props.children;\n  }\n}\nconst SizeTracker = React.memo(({ layout, node }) => {\n  return /* @__PURE__ */ jsx(\n    ErrorBoundary,\n    {\n      message: layout.i18nName(I18nLabel.Error_rendering_component),\n      retryText: layout.i18nName(I18nLabel.Error_rendering_component_retry),\n      children: layout.props.factory(node)\n    }\n  );\n}, arePropsEqual);\nfunction arePropsEqual(prevProps, nextProps) {\n  const reRender = nextProps.visible && (!prevProps.rect.equalSize(nextProps.rect) || prevProps.forceRevision !== nextProps.forceRevision || prevProps.tabsRevision !== nextProps.tabsRevision);\n  return !reRender;\n}\nclass Layout extends React.Component {\n  // so LayoutInternal knows this is a parent render (used for optimization)\n  /** @internal */\n  constructor(props) {\n    super(props);\n    /** @internal */\n    __publicField(this, \"selfRef\");\n    /** @internal */\n    __publicField(this, \"revision\");\n    this.selfRef = React.createRef();\n    this.revision = 0;\n  }\n  /** re-render the layout */\n  redraw() {\n    this.selfRef.current.redraw(\"parent \" + this.revision);\n  }\n  /**\n   * Adds a new tab to the given tabset\n   * @param tabsetId the id of the tabset where the new tab will be added\n   * @param json the json for the new tab node\n   * @returns the added tab node or undefined\n   */\n  addTabToTabSet(tabsetId, json) {\n    return this.selfRef.current.addTabToTabSet(tabsetId, json);\n  }\n  /**\n   * Adds a new tab by dragging an item to the drop location, must be called from within an HTML\n   * drag start handler. You can use the setDragComponent() method to set the drag image before calling this \n   * method.\n   * @param event the drag start event\n   * @param json the json for the new tab node\n   * @param onDrop a callback to call when the drag is complete\n   */\n  addTabWithDragAndDrop(event, json, onDrop) {\n    this.selfRef.current.addTabWithDragAndDrop(event, json, onDrop);\n  }\n  /**\n   * Move a tab/tabset using drag and drop, must be called from within an HTML\n   * drag start handler\n   * @param event the drag start event\n   * @param node the tab or tabset to drag\n   */\n  moveTabWithDragAndDrop(event, node) {\n    this.selfRef.current.moveTabWithDragAndDrop(event, node);\n  }\n  /**\n   * Adds a new tab to the active tabset (if there is one)\n   * @param json the json for the new tab node\n   * @returns the added tab node or undefined\n   */\n  addTabToActiveTabSet(json) {\n    return this.selfRef.current.addTabToActiveTabSet(json);\n  }\n  /**\n   * Sets the drag image from a react component for a drag event\n   * @param event the drag event\n   * @param component the react component to be used for the drag image\n   * @param x the x position of the drag cursor on the image\n   * @param y the x position of the drag cursor on the image\n   */\n  setDragComponent(event, component, x, y) {\n    this.selfRef.current.setDragComponent(event, component, x, y);\n  }\n  /** Get the root div element of the layout */\n  getRootDiv() {\n    return this.selfRef.current.getRootDiv();\n  }\n  /** @internal */\n  render() {\n    return /* @__PURE__ */ jsx(LayoutInternal, { ref: this.selfRef, ...this.props, renderRevision: this.revision++ });\n  }\n}\nconst _LayoutInternal = class _LayoutInternal extends React.Component {\n  // private renderCount: any;\n  constructor(props) {\n    super(props);\n    __publicField(this, \"selfRef\");\n    __publicField(this, \"moveablesRef\");\n    __publicField(this, \"findBorderBarSizeRef\");\n    __publicField(this, \"mainRef\");\n    __publicField(this, \"previousModel\");\n    __publicField(this, \"orderedTabIds\");\n    __publicField(this, \"orderedTabMoveableIds\");\n    __publicField(this, \"moveableElementMap\", /* @__PURE__ */ new Map());\n    __publicField(this, \"dropInfo\");\n    __publicField(this, \"outlineDiv\");\n    __publicField(this, \"currentDocument\");\n    __publicField(this, \"currentWindow\");\n    __publicField(this, \"supportsPopout\");\n    __publicField(this, \"popoutURL\");\n    __publicField(this, \"icons\");\n    __publicField(this, \"resizeObserver\");\n    __publicField(this, \"dragEnterCount\", 0);\n    __publicField(this, \"dragging\", false);\n    __publicField(this, \"windowId\");\n    __publicField(this, \"layoutWindow\");\n    __publicField(this, \"mainLayout\");\n    __publicField(this, \"isMainWindow\");\n    __publicField(this, \"isDraggingOverWindow\");\n    __publicField(this, \"styleObserver\");\n    __publicField(this, \"popoutWindowName\");\n    __publicField(this, \"updateLayoutMetrics\", () => {\n      if (this.findBorderBarSizeRef.current) {\n        const borderBarSize = this.findBorderBarSizeRef.current.getBoundingClientRect().height;\n        if (borderBarSize !== this.state.calculatedBorderBarSize) {\n          this.setState({ calculatedBorderBarSize: borderBarSize });\n        }\n      }\n    });\n    __publicField(this, \"onModelChange\", (action) => {\n      this.redrawInternal(\"model change\");\n      if (this.props.onModelChange) {\n        this.props.onModelChange(this.props.model, action);\n      }\n    });\n    __publicField(this, \"updateRect\", () => {\n      if (this.selfRef.current) {\n        const rect = Rect.fromDomRect(this.selfRef.current.getBoundingClientRect());\n        if (!rect.equals(this.state.rect) && rect.width !== 0 && rect.height !== 0) {\n          this.setState({ rect });\n          if (this.windowId !== Model.MAIN_WINDOW_ID) {\n            this.redrawInternal(\"rect updated\");\n          }\n        }\n      }\n    });\n    __publicField(this, \"getClassName\", (defaultClassName) => {\n      if (this.props.classNameMapper === void 0) {\n        return defaultClassName;\n      } else {\n        return this.props.classNameMapper(defaultClassName);\n      }\n    });\n    __publicField(this, \"onCloseWindow\", (windowLayout) => {\n      this.doAction(Actions.closeWindow(windowLayout.windowId));\n    });\n    __publicField(this, \"onSetWindow\", (windowLayout, window2) => {\n    });\n    __publicField(this, \"showControlInPortal\", (control, element) => {\n      const portal = createPortal(control, element);\n      this.setState({ portal });\n    });\n    __publicField(this, \"hideControlInPortal\", () => {\n      this.setState({ portal: void 0 });\n    });\n    __publicField(this, \"getIcons\", () => {\n      return this.icons;\n    });\n    __publicField(this, \"setDragNode\", (event, node) => {\n      _LayoutInternal.dragState = new DragState(this.mainLayout, \"internal\", node, void 0, void 0);\n      event.dataTransfer.setData(\"text/plain\", \"--flexlayout--\");\n      event.dataTransfer.effectAllowed = \"copyMove\";\n      event.dataTransfer.dropEffect = \"move\";\n      this.dragEnterCount = 0;\n      if (node instanceof TabSetNode) {\n        let rendered = false;\n        let content = this.i18nName(I18nLabel.Move_Tabset);\n        if (node.getChildren().length > 0) {\n          content = this.i18nName(I18nLabel.Move_Tabs).replace(\"?\", String(node.getChildren().length));\n        }\n        if (this.props.onRenderDragRect) {\n          const dragComponent = this.props.onRenderDragRect(content, node, void 0);\n          if (dragComponent) {\n            this.setDragComponent(event, dragComponent, 10, 10);\n            rendered = true;\n          }\n        }\n        if (!rendered) {\n          this.setDragComponent(event, content, 10, 10);\n        }\n      } else {\n        const element = event.target;\n        const rect = element.getBoundingClientRect();\n        const offsetX = event.clientX - rect.left;\n        const offsetY = event.clientY - rect.top;\n        const parentNode = node == null ? void 0 : node.getParent();\n        const isInVerticalBorder = parentNode instanceof BorderNode && parentNode.getOrientation() === Orientation.HORZ;\n        const x = isInVerticalBorder ? 10 : offsetX;\n        const y = isInVerticalBorder ? 10 : offsetY;\n        let rendered = false;\n        if (this.props.onRenderDragRect) {\n          const content = /* @__PURE__ */ jsx(TabButtonStamp, { layout: this, node }, node.getId());\n          const dragComponent = this.props.onRenderDragRect(content, node, void 0);\n          if (dragComponent) {\n            this.setDragComponent(event, dragComponent, x, y);\n            rendered = true;\n          }\n        }\n        if (!rendered) {\n          if (isSafari()) {\n            this.setDragComponent(event, /* @__PURE__ */ jsx(TabButtonStamp, { node, layout: this }), x, y);\n          } else {\n            event.dataTransfer.setDragImage(node.getTabStamp(), x, y);\n          }\n        }\n      }\n    });\n    __publicField(this, \"onDragEnterRaw\", (event) => {\n      this.dragEnterCount++;\n      if (this.dragEnterCount === 1) {\n        this.onDragEnter(event);\n      }\n    });\n    __publicField(this, \"onDragLeaveRaw\", (event) => {\n      this.dragEnterCount--;\n      if (this.dragEnterCount === 0) {\n        this.onDragLeave(event);\n      }\n    });\n    __publicField(this, \"onDragEnter\", (event) => {\n      if (!_LayoutInternal.dragState && this.props.onExternalDrag) {\n        const externalDrag = this.props.onExternalDrag(event);\n        if (externalDrag) {\n          const tempNode = TabNode.fromJson(externalDrag.json, this.props.model, false);\n          _LayoutInternal.dragState = new DragState(this.mainLayout, \"external\", tempNode, externalDrag.json, externalDrag.onDrop);\n        }\n      }\n      if (_LayoutInternal.dragState) {\n        if (this.windowId !== Model.MAIN_WINDOW_ID && _LayoutInternal.dragState.mainLayout === this.mainLayout) {\n          _LayoutInternal.dragState.mainLayout.setDraggingOverWindow(true);\n        }\n        if (_LayoutInternal.dragState.mainLayout !== this.mainLayout) {\n          return;\n        }\n        event.preventDefault();\n        this.dropInfo = void 0;\n        const rootdiv = this.selfRef.current;\n        this.outlineDiv = this.currentDocument.createElement(\"div\");\n        this.outlineDiv.className = this.getClassName(CLASSES.FLEXLAYOUT__OUTLINE_RECT);\n        this.outlineDiv.style.visibility = \"hidden\";\n        const speed = this.props.model.getAttribute(\"tabDragSpeed\");\n        this.outlineDiv.style.transition = `top ${speed}s, left ${speed}s, width ${speed}s, height ${speed}s`;\n        rootdiv.appendChild(this.outlineDiv);\n        this.dragging = true;\n        this.showOverlay(true);\n        if (!this.isDraggingOverWindow && this.props.model.getMaximizedTabset(this.windowId) === void 0) {\n          this.setState({ showEdges: this.props.model.isEnableEdgeDock() });\n        }\n        const clientRect = this.selfRef.current.getBoundingClientRect();\n        const r = new Rect(\n          event.clientX - clientRect.left,\n          event.clientY - clientRect.top,\n          1,\n          1\n        );\n        r.positionElement(this.outlineDiv);\n      }\n    });\n    __publicField(this, \"onDragOver\", (event) => {\n      var _a;\n      if (this.dragging && !this.isDraggingOverWindow) {\n        event.preventDefault();\n        const clientRect = (_a = this.selfRef.current) == null ? void 0 : _a.getBoundingClientRect();\n        const pos = {\n          x: event.clientX - ((clientRect == null ? void 0 : clientRect.left) ?? 0),\n          y: event.clientY - ((clientRect == null ? void 0 : clientRect.top) ?? 0)\n        };\n        this.checkForBorderToShow(pos.x, pos.y);\n        const dropInfo = this.props.model.findDropTargetNode(this.windowId, _LayoutInternal.dragState.dragNode, pos.x, pos.y);\n        if (dropInfo) {\n          this.dropInfo = dropInfo;\n          if (this.outlineDiv) {\n            this.outlineDiv.className = this.getClassName(dropInfo.className);\n            dropInfo.rect.positionElement(this.outlineDiv);\n            this.outlineDiv.style.visibility = \"visible\";\n          }\n        }\n      }\n    });\n    __publicField(this, \"onDragLeave\", (event) => {\n      if (this.dragging) {\n        if (this.windowId !== Model.MAIN_WINDOW_ID) {\n          _LayoutInternal.dragState.mainLayout.setDraggingOverWindow(false);\n        }\n        this.clearDragLocal();\n      }\n    });\n    __publicField(this, \"onDrop\", (event) => {\n      if (this.dragging) {\n        event.preventDefault();\n        const dragState = _LayoutInternal.dragState;\n        if (this.dropInfo) {\n          if (dragState.dragJson !== void 0) {\n            const newNode = this.doAction(Actions.addNode(dragState.dragJson, this.dropInfo.node.getId(), this.dropInfo.location, this.dropInfo.index));\n            if (dragState.fnNewNodeDropped !== void 0) {\n              dragState.fnNewNodeDropped(newNode, event);\n            }\n          } else if (dragState.dragNode !== void 0) {\n            this.doAction(Actions.moveNode(dragState.dragNode.getId(), this.dropInfo.node.getId(), this.dropInfo.location, this.dropInfo.index));\n          }\n        }\n        this.mainLayout.clearDragMain();\n      }\n      this.dragEnterCount = 0;\n    });\n    this.orderedTabIds = [];\n    this.orderedTabMoveableIds = [];\n    this.selfRef = React.createRef();\n    this.moveablesRef = React.createRef();\n    this.mainRef = React.createRef();\n    this.findBorderBarSizeRef = React.createRef();\n    this.supportsPopout = props.supportsPopout !== void 0 ? props.supportsPopout : defaultSupportsPopout;\n    this.popoutURL = props.popoutURL ? props.popoutURL : \"popout.html\";\n    this.icons = { ...defaultIcons, ...props.icons };\n    this.windowId = props.windowId ? props.windowId : Model.MAIN_WINDOW_ID;\n    this.mainLayout = this.props.mainLayout ? this.props.mainLayout : this;\n    this.isDraggingOverWindow = false;\n    this.layoutWindow = this.props.model.getwindowsMap().get(this.windowId);\n    this.layoutWindow.layout = this;\n    this.popoutWindowName = this.props.popoutWindowName || \"Popout Window\";\n    this.state = {\n      rect: Rect.empty(),\n      editingTab: void 0,\n      showEdges: false,\n      showOverlay: false,\n      calculatedBorderBarSize: 29,\n      layoutRevision: 0,\n      forceRevision: 0,\n      showHiddenBorder: DockLocation.CENTER\n    };\n    this.isMainWindow = this.windowId === Model.MAIN_WINDOW_ID;\n  }\n  componentDidMount() {\n    this.updateRect();\n    this.currentDocument = this.selfRef.current.ownerDocument;\n    this.currentWindow = this.currentDocument.defaultView;\n    this.layoutWindow.window = this.currentWindow;\n    this.layoutWindow.toScreenRectFunction = (r) => this.getScreenRect(r);\n    this.resizeObserver = new ResizeObserver((entries) => {\n      requestAnimationFrame(() => {\n        this.updateRect();\n      });\n    });\n    if (this.selfRef.current) {\n      this.resizeObserver.observe(this.selfRef.current);\n    }\n    if (this.isMainWindow) {\n      this.props.model.addChangeListener(this.onModelChange);\n      this.updateLayoutMetrics();\n    } else {\n      this.currentWindow.addEventListener(\"resize\", () => {\n        this.updateRect();\n      });\n      const sourceElement = this.props.mainLayout.getRootDiv();\n      const targetElement = this.selfRef.current;\n      copyInlineStyles(sourceElement, targetElement);\n      this.styleObserver = new MutationObserver(() => {\n        const changed = copyInlineStyles(sourceElement, targetElement);\n        if (changed) {\n          this.redraw(\"mutation observer\");\n        }\n      });\n      this.styleObserver.observe(sourceElement, { attributeFilter: [\"style\"] });\n    }\n    document.addEventListener(\"visibilitychange\", () => {\n      for (const [_, layoutWindow] of this.props.model.getwindowsMap()) {\n        const layout = layoutWindow.layout;\n        if (layout) {\n          this.redraw(\"visibility change\");\n        }\n      }\n    });\n  }\n  componentDidUpdate() {\n    this.currentDocument = this.selfRef.current.ownerDocument;\n    this.currentWindow = this.currentDocument.defaultView;\n    if (this.isMainWindow) {\n      if (this.props.model !== this.previousModel) {\n        if (this.previousModel !== void 0) {\n          this.previousModel.removeChangeListener(this.onModelChange);\n        }\n        this.props.model.getwindowsMap().get(this.windowId).layout = this;\n        this.props.model.addChangeListener(this.onModelChange);\n        this.layoutWindow = this.props.model.getwindowsMap().get(this.windowId);\n        this.layoutWindow.layout = this;\n        this.layoutWindow.toScreenRectFunction = (r) => this.getScreenRect(r);\n        this.previousModel = this.props.model;\n        this.tidyMoveablesMap();\n      }\n      this.updateLayoutMetrics();\n    }\n  }\n  componentWillUnmount() {\n    var _a, _b;\n    if (this.selfRef.current) {\n      (_a = this.resizeObserver) == null ? void 0 : _a.unobserve(this.selfRef.current);\n    }\n    if (this.isMainWindow) {\n      this.props.model.removeChangeListener(this.onModelChange);\n    }\n    (_b = this.styleObserver) == null ? void 0 : _b.disconnect();\n  }\n  render() {\n    if (!this.selfRef.current) {\n      return /* @__PURE__ */ jsxs(\"div\", { ref: this.selfRef, className: this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT), children: [\n        /* @__PURE__ */ jsx(\"div\", { ref: this.moveablesRef, className: this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT_MOVEABLES) }, \"__moveables__\"),\n        this.renderMetricsElements()\n      ] });\n    }\n    const model = this.props.model;\n    model.getRoot(this.windowId).calcMinMaxSize();\n    model.getRoot(this.windowId).setPaths(\"\");\n    model.getBorderSet().setPaths();\n    const inner = this.renderLayout();\n    const outer = this.renderBorders(inner);\n    const tabs = this.renderTabs();\n    const reorderedTabs = this.reorderComponents(tabs, this.orderedTabIds);\n    let floatingWindows = null;\n    let reorderedTabMoveables = null;\n    let tabStamps = null;\n    let metricElements = null;\n    if (this.isMainWindow) {\n      floatingWindows = this.renderWindows();\n      metricElements = this.renderMetricsElements();\n      const tabMoveables = this.renderTabMoveables();\n      reorderedTabMoveables = this.reorderComponents(tabMoveables, this.orderedTabMoveableIds);\n      tabStamps = /* @__PURE__ */ jsx(\"div\", { className: this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT_TAB_STAMPS), children: this.renderTabStamps() }, \"__tabStamps__\");\n    }\n    return /* @__PURE__ */ jsxs(\n      \"div\",\n      {\n        ref: this.selfRef,\n        className: this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT),\n        onDragEnter: this.onDragEnterRaw,\n        onDragLeave: this.onDragLeaveRaw,\n        onDragOver: this.onDragOver,\n        onDrop: this.onDrop,\n        children: [\n          /* @__PURE__ */ jsx(\"div\", { ref: this.moveablesRef, className: this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT_MOVEABLES) }, \"__moveables__\"),\n          metricElements,\n          /* @__PURE__ */ jsx(Overlay, { layout: this, show: this.state.showOverlay }, \"__overlay__\"),\n          outer,\n          reorderedTabs,\n          reorderedTabMoveables,\n          tabStamps,\n          this.state.portal,\n          floatingWindows\n        ]\n      }\n    );\n  }\n  renderBorders(inner) {\n    const classMain = this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT_MAIN);\n    const borders = this.props.model.getBorderSet().getBorderMap();\n    if (this.isMainWindow && borders.size > 0) {\n      inner = /* @__PURE__ */ jsx(\"div\", { className: classMain, ref: this.mainRef, children: inner });\n      const borderSetComponents = /* @__PURE__ */ new Map();\n      const borderSetContentComponents = /* @__PURE__ */ new Map();\n      for (const [_, location] of DockLocation.values) {\n        const border = borders.get(location);\n        const showBorder = border && border.isShowing() && (!border.isAutoHide() || border.isAutoHide() && (border.getChildren().length > 0 || this.state.showHiddenBorder === location));\n        if (showBorder) {\n          borderSetComponents.set(location, /* @__PURE__ */ jsx(BorderTabSet, { layout: this, border, size: this.state.calculatedBorderBarSize }));\n          borderSetContentComponents.set(location, /* @__PURE__ */ jsx(BorderTab, { layout: this, border, show: border.getSelected() !== -1 }));\n        }\n      }\n      const classBorderOuter = this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER);\n      const classBorderInner = this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);\n      if (this.props.model.getBorderSet().getLayoutHorizontal()) {\n        const innerWithBorderTabs = /* @__PURE__ */ jsxs(\"div\", { className: classBorderInner, style: { flexDirection: \"column\" }, children: [\n          borderSetContentComponents.get(DockLocation.TOP),\n          /* @__PURE__ */ jsxs(\"div\", { className: classBorderInner, style: { flexDirection: \"row\" }, children: [\n            borderSetContentComponents.get(DockLocation.LEFT),\n            inner,\n            borderSetContentComponents.get(DockLocation.RIGHT)\n          ] }),\n          borderSetContentComponents.get(DockLocation.BOTTOM)\n        ] });\n        return /* @__PURE__ */ jsxs(\"div\", { className: classBorderOuter, style: { flexDirection: \"column\" }, children: [\n          borderSetComponents.get(DockLocation.TOP),\n          /* @__PURE__ */ jsxs(\"div\", { className: classBorderInner, style: { flexDirection: \"row\" }, children: [\n            borderSetComponents.get(DockLocation.LEFT),\n            innerWithBorderTabs,\n            borderSetComponents.get(DockLocation.RIGHT)\n          ] }),\n          borderSetComponents.get(DockLocation.BOTTOM)\n        ] });\n      } else {\n        const innerWithBorderTabs = /* @__PURE__ */ jsxs(\"div\", { className: classBorderInner, style: { flexDirection: \"row\" }, children: [\n          borderSetContentComponents.get(DockLocation.LEFT),\n          /* @__PURE__ */ jsxs(\"div\", { className: classBorderInner, style: { flexDirection: \"column\" }, children: [\n            borderSetContentComponents.get(DockLocation.TOP),\n            inner,\n            borderSetContentComponents.get(DockLocation.BOTTOM)\n          ] }),\n          borderSetContentComponents.get(DockLocation.RIGHT)\n        ] });\n        return /* @__PURE__ */ jsxs(\"div\", { className: classBorderOuter, style: { flexDirection: \"row\" }, children: [\n          borderSetComponents.get(DockLocation.LEFT),\n          /* @__PURE__ */ jsxs(\"div\", { className: classBorderInner, style: { flexDirection: \"column\" }, children: [\n            borderSetComponents.get(DockLocation.TOP),\n            innerWithBorderTabs,\n            borderSetComponents.get(DockLocation.BOTTOM)\n          ] }),\n          borderSetComponents.get(DockLocation.RIGHT)\n        ] });\n      }\n    } else {\n      return /* @__PURE__ */ jsx(\"div\", { className: classMain, ref: this.mainRef, style: { position: \"absolute\", top: 0, left: 0, bottom: 0, right: 0, display: \"flex\" }, children: inner });\n    }\n  }\n  renderLayout() {\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(Row, { layout: this, node: this.props.model.getRoot(this.windowId) }, \"__row__\"),\n      this.renderEdgeIndicators()\n    ] });\n  }\n  renderEdgeIndicators() {\n    const edges = [];\n    const arrowIcon = this.icons.edgeArrow;\n    if (this.state.showEdges) {\n      const r = this.props.model.getRoot(this.windowId).getRect();\n      const length = edgeRectLength;\n      const width = edgeRectWidth;\n      const offset = edgeRectLength / 2;\n      const className = this.getClassName(CLASSES.FLEXLAYOUT__EDGE_RECT);\n      const radius = 50;\n      edges.push(/* @__PURE__ */ jsx(\"div\", { style: { top: 0, left: r.width / 2 - offset, width: length, height: width, borderBottomLeftRadius: radius, borderBottomRightRadius: radius }, className: className + \" \" + this.getClassName(CLASSES.FLEXLAYOUT__EDGE_RECT_TOP), children: /* @__PURE__ */ jsx(\"div\", { style: { transform: \"rotate(180deg)\" }, children: arrowIcon }) }, \"North\"));\n      edges.push(/* @__PURE__ */ jsx(\"div\", { style: { top: r.height / 2 - offset, left: 0, width, height: length, borderTopRightRadius: radius, borderBottomRightRadius: radius }, className: className + \" \" + this.getClassName(CLASSES.FLEXLAYOUT__EDGE_RECT_LEFT), children: /* @__PURE__ */ jsx(\"div\", { style: { transform: \"rotate(90deg)\" }, children: arrowIcon }) }, \"West\"));\n      edges.push(/* @__PURE__ */ jsx(\"div\", { style: { top: r.height - width, left: r.width / 2 - offset, width: length, height: width, borderTopLeftRadius: radius, borderTopRightRadius: radius }, className: className + \" \" + this.getClassName(CLASSES.FLEXLAYOUT__EDGE_RECT_BOTTOM), children: /* @__PURE__ */ jsx(\"div\", { children: arrowIcon }) }, \"South\"));\n      edges.push(/* @__PURE__ */ jsx(\"div\", { style: { top: r.height / 2 - offset, left: r.width - width, width, height: length, borderTopLeftRadius: radius, borderBottomLeftRadius: radius }, className: className + \" \" + this.getClassName(CLASSES.FLEXLAYOUT__EDGE_RECT_RIGHT), children: /* @__PURE__ */ jsx(\"div\", { style: { transform: \"rotate(-90deg)\" }, children: arrowIcon }) }, \"East\"));\n    }\n    return edges;\n  }\n  renderWindows() {\n    const floatingWindows = [];\n    if (this.supportsPopout) {\n      const windows = this.props.model.getwindowsMap();\n      let i = 1;\n      for (const [windowId, layoutWindow] of windows) {\n        if (windowId !== Model.MAIN_WINDOW_ID) {\n          floatingWindows.push(\n            /* @__PURE__ */ jsx(\n              PopoutWindow,\n              {\n                layout: this,\n                title: this.popoutWindowName + \" \" + i,\n                layoutWindow,\n                url: this.popoutURL + \"?id=\" + windowId,\n                onSetWindow: this.onSetWindow,\n                onCloseWindow: this.onCloseWindow,\n                children: /* @__PURE__ */ jsx(\"div\", { className: this.props.popoutClassName, children: /* @__PURE__ */ jsx(_LayoutInternal, { ...this.props, windowId, mainLayout: this }) })\n              },\n              windowId\n            )\n          );\n          i++;\n        }\n      }\n    }\n    return floatingWindows;\n  }\n  renderTabMoveables() {\n    const tabMoveables = /* @__PURE__ */ new Map();\n    this.props.model.visitNodes((node) => {\n      if (node instanceof TabNode) {\n        const child = node;\n        const element = this.getMoveableElement(child.getId());\n        child.setMoveableElement(element);\n        const selected = child.isSelected();\n        const rect = child.getParent().getContentRect();\n        const visible = selected || !child.isEnableRenderOnDemand();\n        const renderTab = child.isRendered() || visible && (rect.width > 0 && rect.height > 0);\n        if (renderTab) {\n          const key = child.getId() + (child.isEnableWindowReMount() ? child.getWindowId() : \"\");\n          tabMoveables.set(node.getId(), createPortal(\n            /* @__PURE__ */ jsx(\n              SizeTracker,\n              {\n                layout: this,\n                node: child,\n                rect,\n                visible,\n                forceRevision: this.state.forceRevision,\n                tabsRevision: this.props.renderRevision\n              },\n              key\n            ),\n            element,\n            key\n          ));\n          child.setRendered(renderTab);\n        }\n      }\n    });\n    return tabMoveables;\n  }\n  renderTabStamps() {\n    const tabStamps = [];\n    this.props.model.visitNodes((node) => {\n      if (node instanceof TabNode) {\n        const child = node;\n        tabStamps.push(/* @__PURE__ */ jsx(DragContainer, { layout: this, node: child }, child.getId()));\n      }\n    });\n    return tabStamps;\n  }\n  renderTabs() {\n    const tabs = /* @__PURE__ */ new Map();\n    this.props.model.visitWindowNodes(this.windowId, (node) => {\n      if (node instanceof TabNode) {\n        const child = node;\n        const selected = child.isSelected();\n        const path = child.getPath();\n        const renderTab = child.isRendered() || selected || !child.isEnableRenderOnDemand();\n        if (renderTab) {\n          tabs.set(child.getId(), /* @__PURE__ */ jsx(\n            Tab,\n            {\n              layout: this,\n              path,\n              node: child,\n              selected\n            },\n            child.getId()\n          ));\n        }\n      }\n    });\n    return tabs;\n  }\n  renderMetricsElements() {\n    return /* @__PURE__ */ jsx(\"div\", { ref: this.findBorderBarSizeRef, className: this.getClassName(CLASSES.FLEXLAYOUT__BORDER_SIZER), children: \"FindBorderBarSize\" }, \"findBorderBarSize\");\n  }\n  checkForBorderToShow(x, y) {\n    const r = this.getBoundingClientRect(this.mainRef.current);\n    const c = r.getCenter();\n    const margin = edgeRectWidth;\n    const offset = edgeRectLength / 2;\n    let overEdge = false;\n    if (this.props.model.isEnableEdgeDock() && this.state.showHiddenBorder === DockLocation.CENTER) {\n      if (y > c.y - offset && y < c.y + offset || x > c.x - offset && x < c.x + offset) {\n        overEdge = true;\n      }\n    }\n    let location = DockLocation.CENTER;\n    if (!overEdge) {\n      if (x <= r.x + margin) {\n        location = DockLocation.LEFT;\n      } else if (x >= r.getRight() - margin) {\n        location = DockLocation.RIGHT;\n      } else if (y <= r.y + margin) {\n        location = DockLocation.TOP;\n      } else if (y >= r.getBottom() - margin) {\n        location = DockLocation.BOTTOM;\n      }\n    }\n    if (location !== this.state.showHiddenBorder) {\n      this.setState({ showHiddenBorder: location });\n    }\n  }\n  tidyMoveablesMap() {\n    const tabs = /* @__PURE__ */ new Map();\n    this.props.model.visitNodes((node, _) => {\n      if (node instanceof TabNode) {\n        tabs.set(node.getId(), node);\n      }\n    });\n    for (const [nodeId, element] of this.moveableElementMap) {\n      if (!tabs.has(nodeId)) {\n        element.remove();\n        this.moveableElementMap.delete(nodeId);\n      }\n    }\n  }\n  reorderComponents(components, ids) {\n    const nextIds = [];\n    const nextIdsSet = /* @__PURE__ */ new Set();\n    let reordered = [];\n    for (const id of ids) {\n      if (components.get(id)) {\n        nextIds.push(id);\n        nextIdsSet.add(id);\n      }\n    }\n    ids.splice(0, ids.length, ...nextIds);\n    for (const [id, _] of components) {\n      if (!nextIdsSet.has(id)) {\n        ids.push(id);\n      }\n    }\n    reordered = ids.map((id) => {\n      return components.get(id);\n    });\n    return reordered;\n  }\n  redraw(type) {\n    this.mainLayout.setState((state, props) => {\n      return { forceRevision: state.forceRevision + 1 };\n    });\n  }\n  redrawInternal(type) {\n    this.mainLayout.setState((state, props) => {\n      return { layoutRevision: state.layoutRevision + 1 };\n    });\n  }\n  doAction(action) {\n    if (this.props.onAction !== void 0) {\n      const outcome = this.props.onAction(action);\n      if (outcome !== void 0) {\n        return this.props.model.doAction(outcome);\n      }\n      return void 0;\n    } else {\n      return this.props.model.doAction(action);\n    }\n  }\n  getBoundingClientRect(div) {\n    const layoutRect = this.getDomRect();\n    if (layoutRect) {\n      return Rect.getBoundingClientRect(div).relativeTo(layoutRect);\n    }\n    return Rect.empty();\n  }\n  getMoveableContainer() {\n    return this.moveablesRef.current;\n  }\n  getMoveableElement(id) {\n    let moveableElement = this.moveableElementMap.get(id);\n    if (moveableElement === void 0) {\n      moveableElement = document.createElement(\"div\");\n      this.moveablesRef.current.appendChild(moveableElement);\n      moveableElement.className = CLASSES.FLEXLAYOUT__TAB_MOVEABLE;\n      this.moveableElementMap.set(id, moveableElement);\n    }\n    return moveableElement;\n  }\n  getMainLayout() {\n    return this.mainLayout;\n  }\n  getCurrentDocument() {\n    return this.currentDocument;\n  }\n  getDomRect() {\n    if (this.selfRef.current) {\n      return Rect.fromDomRect(this.selfRef.current.getBoundingClientRect());\n    } else {\n      return Rect.empty();\n    }\n  }\n  getWindowId() {\n    return this.windowId;\n  }\n  getRootDiv() {\n    return this.selfRef.current;\n  }\n  getMainElement() {\n    return this.mainRef.current;\n  }\n  getFactory() {\n    return this.props.factory;\n  }\n  isSupportsPopout() {\n    return this.supportsPopout;\n  }\n  isRealtimeResize() {\n    return this.props.realtimeResize ?? false;\n  }\n  getPopoutURL() {\n    return this.popoutURL;\n  }\n  setEditingTab(tabNode) {\n    this.setState({ editingTab: tabNode });\n  }\n  getEditingTab() {\n    return this.state.editingTab;\n  }\n  getModel() {\n    return this.props.model;\n  }\n  getScreenRect(inRect) {\n    const rect = inRect.clone();\n    const layoutRect = this.getDomRect();\n    const navHeight = 60;\n    const navWidth = 2;\n    rect.x = this.currentWindow.screenX + this.currentWindow.scrollX + navWidth / 2 + layoutRect.x + rect.x;\n    rect.y = this.currentWindow.screenY + this.currentWindow.scrollY + (navHeight - navWidth / 2) + layoutRect.y + rect.y;\n    rect.height += navHeight;\n    rect.width += navWidth;\n    return rect;\n  }\n  addTabToTabSet(tabsetId, json) {\n    const tabsetNode = this.props.model.getNodeById(tabsetId);\n    if (tabsetNode !== void 0) {\n      const node = this.doAction(Actions.addNode(json, tabsetId, DockLocation.CENTER, -1));\n      return node;\n    }\n    return void 0;\n  }\n  addTabToActiveTabSet(json) {\n    const tabsetNode = this.props.model.getActiveTabset(this.windowId);\n    if (tabsetNode !== void 0) {\n      const node = this.doAction(Actions.addNode(json, tabsetNode.getId(), DockLocation.CENTER, -1));\n      return node;\n    }\n    return void 0;\n  }\n  maximize(tabsetNode) {\n    this.doAction(Actions.maximizeToggle(tabsetNode.getId(), this.getWindowId()));\n  }\n  customizeTab(tabNode, renderValues) {\n    if (this.props.onRenderTab) {\n      this.props.onRenderTab(tabNode, renderValues);\n    }\n  }\n  customizeTabSet(tabSetNode, renderValues) {\n    if (this.props.onRenderTabSet) {\n      this.props.onRenderTabSet(tabSetNode, renderValues);\n    }\n  }\n  i18nName(id, param) {\n    let message;\n    if (this.props.i18nMapper) {\n      message = this.props.i18nMapper(id, param);\n    }\n    if (message === void 0) {\n      message = id + (param === void 0 ? \"\" : param);\n    }\n    return message;\n  }\n  getShowOverflowMenu() {\n    return this.props.onShowOverflowMenu;\n  }\n  getTabSetPlaceHolderCallback() {\n    return this.props.onTabSetPlaceHolder;\n  }\n  showContextMenu(node, event) {\n    if (this.props.onContextMenu) {\n      this.props.onContextMenu(node, event);\n    }\n  }\n  auxMouseClick(node, event) {\n    if (this.props.onAuxMouseClick) {\n      this.props.onAuxMouseClick(node, event);\n    }\n  }\n  showOverlay(show) {\n    this.setState({ showOverlay: show });\n    enablePointerOnIFrames(!show, this.currentDocument);\n  }\n  // *************************** Start Drag Drop *************************************\n  addTabWithDragAndDrop(event, json, onDrop) {\n    const tempNode = TabNode.fromJson(json, this.props.model, false);\n    _LayoutInternal.dragState = new DragState(this.mainLayout, \"add\", tempNode, json, onDrop);\n  }\n  moveTabWithDragAndDrop(event, node) {\n    this.setDragNode(event, node);\n  }\n  setDragComponent(event, component, x, y) {\n    const dragElement = /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        style: { position: \"unset\" },\n        className: this.getClassName(CLASSES.FLEXLAYOUT__LAYOUT) + \" \" + this.getClassName(CLASSES.FLEXLAYOUT__DRAG_RECT),\n        children: component\n      }\n    );\n    const tempDiv = this.currentDocument.createElement(\"div\");\n    tempDiv.setAttribute(\"data-layout-path\", \"/drag-rectangle\");\n    tempDiv.style.position = \"absolute\";\n    tempDiv.style.left = \"-10000px\";\n    tempDiv.style.top = \"-10000px\";\n    this.currentDocument.body.appendChild(tempDiv);\n    createRoot(tempDiv).render(dragElement);\n    event.dataTransfer.setDragImage(tempDiv, x, y);\n    setTimeout(() => {\n      this.currentDocument.body.removeChild(tempDiv);\n    }, 0);\n  }\n  setDraggingOverWindow(overWindow) {\n    if (this.isDraggingOverWindow !== overWindow) {\n      if (this.outlineDiv) {\n        this.outlineDiv.style.visibility = overWindow ? \"hidden\" : \"visible\";\n      }\n      if (overWindow) {\n        this.setState({ showEdges: false });\n      } else {\n        if (this.props.model.getMaximizedTabset(this.windowId) === void 0) {\n          this.setState({ showEdges: this.props.model.isEnableEdgeDock() });\n        }\n      }\n      this.isDraggingOverWindow = overWindow;\n    }\n  }\n  clearDragMain() {\n    _LayoutInternal.dragState = void 0;\n    if (this.windowId === Model.MAIN_WINDOW_ID) {\n      this.isDraggingOverWindow = false;\n    }\n    for (const [, layoutWindow] of this.props.model.getwindowsMap()) {\n      layoutWindow.layout.clearDragLocal();\n    }\n  }\n  clearDragLocal() {\n    this.setState({ showEdges: false });\n    this.showOverlay(false);\n    this.dragEnterCount = 0;\n    this.dragging = false;\n    if (this.outlineDiv) {\n      this.selfRef.current.removeChild(this.outlineDiv);\n      this.outlineDiv = void 0;\n    }\n  }\n  // *************************** End Drag Drop *************************************\n};\n__publicField(_LayoutInternal, \"dragState\");\nlet LayoutInternal = _LayoutInternal;\nconst FlexLayoutVersion = \"0.8.17\";\nconst defaultIcons = {\n  close: /* @__PURE__ */ jsx(CloseIcon, {}),\n  closeTabset: /* @__PURE__ */ jsx(CloseIcon, {}),\n  popout: /* @__PURE__ */ jsx(PopoutIcon, {}),\n  maximize: /* @__PURE__ */ jsx(MaximizeIcon, {}),\n  restore: /* @__PURE__ */ jsx(RestoreIcon, {}),\n  more: /* @__PURE__ */ jsx(OverflowIcon, {}),\n  edgeArrow: /* @__PURE__ */ jsx(EdgeIcon, {}),\n  activeTabset: /* @__PURE__ */ jsx(AsterickIcon, {})\n};\nconst defaultSupportsPopout = isDesktop();\nconst edgeRectLength = 100;\nconst edgeRectWidth = 10;\nclass DragState {\n  constructor(mainLayout, dragSource, dragNode, dragJson, fnNewNodeDropped) {\n    __publicField(this, \"mainLayout\");\n    __publicField(this, \"dragSource\");\n    __publicField(this, \"dragNode\");\n    __publicField(this, \"dragJson\");\n    __publicField(this, \"fnNewNodeDropped\");\n    this.mainLayout = mainLayout;\n    this.dragSource = dragSource;\n    this.dragNode = dragNode;\n    this.dragJson = dragJson;\n    this.fnNewNodeDropped = fnNewNodeDropped;\n  }\n}\nexport {\n  Action,\n  Actions,\n  AddIcon,\n  AsterickIcon,\n  BorderNode,\n  BorderSet,\n  CLASSES,\n  CloseIcon,\n  DefaultMax,\n  DefaultMin,\n  DockLocation,\n  DropInfo,\n  EdgeIcon,\n  FlexLayoutVersion,\n  I18nLabel,\n  ICloseType,\n  Layout,\n  LayoutInternal,\n  LayoutWindow,\n  MaximizeIcon,\n  MenuIcon,\n  Model,\n  Node,\n  Orientation,\n  OverflowIcon,\n  PopoutIcon,\n  Rect,\n  RestoreIcon,\n  RowNode,\n  SettingsIcon,\n  TabNode,\n  TabSetNode\n};\n","import AssetsInfo from '@/components/deepbook/AssetsInfo'\nimport DeepbookChart from '@/components/deepbook/DeepbookChart'\nimport FooterBlock from '@/components/deepbook/FooterBlock'\nimport OrderBookBlock from '@/components/deepbook/OrderBookBlock'\nimport TopDataBlock from '@/components/deepbook/TopDataBlock'\nimport TradeBlock from '@/components/deepbook/TradeBlock'\nimport TradeTableBlock from '@/components/deepbook/TradeTableBlock'\nimport useDocumentSize from '@cetus/hooks/src/useDocumentSize'\nimport { Box, VStack } from '@chakra-ui/react'\nimport { IJsonModel, Layout, Model, TabNode } from 'flexlayout-react'\nimport 'flexlayout-react/style/light.css'\nimport { useCallback, useEffect, useMemo } from 'react'\n\ninterface DeepBookPCProps {\n  currentDeepBookPool: any\n  deepBookPools: any[]\n  currentAccount: any\n  currentBalanceManagerInfo: any\n}\n\nfunction DeepBookPC({ currentDeepBookPool, deepBookPools, currentAccount, currentBalanceManagerInfo }: DeepBookPCProps) {\n  const { size } = useDocumentSize()\n\n  // ==================== FlexLayout 配置 ====================\n  // 创建稳定的布局模型，不依赖高度变化\n  const model = useMemo(\n    () =>\n      Model.fromJson({\n        global: {\n          tabEnableClose: false,\n          tabSetEnableTabStrip: false\n        },\n        layout: {\n          type: 'column',\n          children: [\n            {\n              type: 'column',\n              weight: 85,\n              children: [\n                {\n                  type: 'tabset',\n                  weight: 8,\n                  minWidth: 800,\n                  minHeight: 64,\n                  maxHeight: 64,\n                  children: [{ type: 'tab', component: 'TopDataBlock', zIndex: 9 }],\n                  enableDivide: false // 禁用分割条\n                },\n                {\n                  type: 'row',\n                  weight: 75,\n                  zIndex: 8,\n                  config: { splitterEnabled: false },\n                  children: [\n                    {\n                      type: 'tabset',\n                      weight: 83,\n                      minWidth: 288,\n                      minHeight: 400, // 图表区域最小高度\n                      config: {\n                        tabSetMinHeight: 400,\n                        tabSetMaxHeight: 0 // 0表示无限制，允许高度自适应\n                      },\n                      children: [{ type: 'tab', component: 'ChartBlock' }]\n                    },\n                    {\n                      type: 'tabset',\n                      weight: 17,\n                      minWidth: 328,\n                      minHeight: 360, // 深度区域最小高度\n                      config: {\n                        tabSetMinHeight: 360,\n                        tabSetMaxHeight: 0 // 0表示无限制，允许高度自适应\n                      },\n                      children: [{ type: 'tab', component: 'OrderBookBlock' }]\n                    }\n                  ]\n                },\n                {\n                  type: 'tabset',\n                  weight: 36,\n                  minHeight: 368, // 使用固定值，通过CSS控制实际高度\n                  children: [{ type: 'tab', component: 'TradeTableBlock' }]\n                }\n              ]\n            },\n            {\n              type: 'column',\n              weight: 15,\n              children: [\n                {\n                  type: 'tabset',\n                  weight: 100,\n                  minWidth: 352,\n                  minHeight: 808,\n                  children: [\n                    {\n                      type: 'tab',\n                      component: 'TradeBlock',\n                      name: 'TradeBlock'\n                    }\n                  ]\n                }\n              ]\n            }\n          ]\n        }\n      } as IJsonModel),\n    [] // 空依赖数组，确保布局模型只创建一次\n  )\n\n  // ==================== FlexLayout 工厂函数 ====================\n  // 使用 useCallback 避免工厂函数重新创建\n  const factory = useCallback(\n    (node: TabNode) => {\n      const component = node.getComponent()\n\n      // 将useEffect移到组件内部，避免在工厂函数中创建副作用\n      if (component === 'TopDataBlock') {\n        return <TopDataBlockWrapper />\n      }\n\n      switch (component) {\n        case 'TradeBlock':\n          return (\n            <Box h=\"100%\" w=\"100%\">\n              <TradeBlock />\n              <Box h=\"8px\" bg=\"bg_primary\" />\n              <AssetsInfo />\n            </Box>\n          )\n        case 'ChartBlock':\n          return (\n            <Box h=\"100%\" w=\"100%\">\n              <DeepbookChart currentDeepBookPool={currentDeepBookPool} />\n            </Box>\n          )\n        case 'OrderBookBlock':\n          return (\n            <Box h=\"100%\" w=\"100%\">\n              <OrderBookBlock />\n            </Box>\n          )\n        case 'TradeTableBlock':\n          return (\n            <Box h=\"100%\" w=\"100%\">\n              <TradeTableBlock />\n            </Box>\n          )\n        case 'FooterBlock':\n          return (\n            <Box h=\"100%\" w=\"100%\">\n              <FooterBlock />\n            </Box>\n          )\n        default:\n          return null\n      }\n    },\n    [currentDeepBookPool]\n  ) // 只依赖真正需要的数据\n\n  // 将TopDataBlock包装成一个独立组件，避免在工厂函数中创建useEffect\n  const TopDataBlockWrapper = useCallback(() => {\n    useEffect(() => {\n      const timer = setTimeout(() => {\n        const splitters = document.querySelectorAll('.flexlayout__splitter')\n        if (splitters.length > 0) {\n          // 隐藏第一个分割条（TopDataBlock上方的）\n          ;(splitters[0] as HTMLElement).style.backgroundColor = 'transparent'\n          ;(splitters[0] as HTMLElement).style.pointerEvents = 'none'\n        }\n      }, 0)\n\n      return () => clearTimeout(timer)\n    }, [])\n\n    return (\n      <Box h=\"100%\" w=\"100%\">\n        <TopDataBlock />\n      </Box>\n    )\n  }, [])\n\n  // 计算容器高度，避免在JSX中直接使用size.h\n  const containerHeight = useMemo(() => size?.h - 80, [size?.h])\n  const contentHeight = useMemo(() => size?.h - 80 - 48, [size?.h])\n  const tradeTableHeight = useMemo(() => (size?.h < 600 ? 500 : 368), [size?.h])\n\n  // 使用useEffect动态调整FlexLayout的高度，避免重新渲染\n  useEffect(() => {\n    if (size?.h) {\n      // 动态调整TradeTableBlock的高度\n      const tradeTableElement = document.querySelector('.flexlayout__tabset[data-weight=\"36\"]')\n      if (tradeTableElement) {\n        ;(tradeTableElement as HTMLElement).style.minHeight = `${tradeTableHeight}px`\n      }\n\n      // 动态调整图表和深度区域的高度\n      const chartOrderBookRow = document.querySelector('.flexlayout__row[data-weight=\"75\"]')\n      if (chartOrderBookRow) {\n        const availableHeight = size.h - 80 - 48 - 64 - tradeTableHeight\n        const chartOrderBookHeight = Math.max(availableHeight, 400)\n        ;(chartOrderBookRow as HTMLElement).style.minHeight = `${chartOrderBookHeight}px`\n        ;(chartOrderBookRow as HTMLElement).style.height = `${chartOrderBookHeight}px`\n      }\n\n      // 根据屏幕高度调整图表和深度区域的最小高度\n      if (size.h >= 900) {\n        // 大屏：图表和深度区域高度自适应\n        const chartElement = document.querySelector('.flexlayout__tabset[data-weight=\"83\"]')\n        const orderBookElement = document.querySelector('.flexlayout__tabset[data-weight=\"17\"]')\n\n        if (chartElement) {\n          ;(chartElement as HTMLElement).style.minHeight = '500px'\n        }\n        if (orderBookElement) {\n          ;(orderBookElement as HTMLElement).style.minHeight = '400px'\n        }\n      }\n    }\n  }, [size?.h, tradeTableHeight])\n\n  return (\n    <VStack minWidth=\"1160px\" w=\"100%\" minHeight=\"648px\" h={containerHeight} overflow={size?.h < 650 ? 'unset' : 'unset'}>\n      <Box minH=\"808px\" h={contentHeight} w=\"100%\" bg=\"bg_secondary\" position=\"relative\" zIndex=\"5\">\n        <Layout model={model} factory={factory} realtimeResize={true} />\n      </Box>\n      <FooterBlock />\n    </VStack>\n  )\n}\n\nexport default DeepBookPC\n","import { DeepBookTradeHistoryPath } from '@/apis/path'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useFetch } from '@cetus/hooks'\nimport { useAccountStore } from '@cetus/stores'\nimport { d, timeFormatUTC } from '@cetus/utils'\nimport { useMemo } from 'react'\nimport useGetDeepBookPools from './useGetDeepBookPools'\n\nexport default function useGetDeepBookOrderHistory() {\n  const { fetchByApi } = useFetch()\n  const { currentAccount } = useAccountStore()\n  const { deepBookPoolsObj, setDeepBookOrderHistoryLoading, setDeepBookOrderHistory } = useDeepBookStore()\n  const { queryDeepBookPoolByValue } = useGetDeepBookPools()\n\n  // 缓存已查询的池信息，避免重复请求\n  const poolInfoCache = useMemo(() => new Map(), [])\n\n  const getDeepBookOrderHistory = async () => {\n    try {\n      setDeepBookOrderHistoryLoading(true)\n      const res = await fetchByApi(DeepBookTradeHistoryPath, 'GET', { address: currentAccount?.address, limit: 9999 })\n      console.log('🚀🚀🚀 ~ useGetDeepBookOrderHistort.ts:11 ~ getDeepBookOrderHistory ~ res:', res)\n\n      // 预处理：收集所有需要查询的 pool_id\n      const poolIdsToQuery = new Set<string>()\n      res?.list?.forEach((item: any) => {\n        if (!deepBookPoolsObj[item.pool_id] && !poolInfoCache.has(item.pool_id)) {\n          poolIdsToQuery.add(item.pool_id)\n        }\n      })\n\n      // 批量查询缺失的池信息\n      if (poolIdsToQuery.size > 0) {\n        console.log('🚀🚀🚀 ~ 需要查询的池信息:', Array.from(poolIdsToQuery))\n        const poolIdsArray = Array.from(poolIdsToQuery)\n\n        // 批量查询池信息\n        for (const poolId of poolIdsArray) {\n          try {\n            const poolInfo = await queryDeepBookPoolByValue(poolId)\n            if (poolInfo && poolInfo.length > 0) {\n              poolInfoCache.set(poolId, poolInfo[0])\n            }\n          } catch (error) {\n            console.error(`查询池信息失败 poolId: ${poolId}`, error)\n          }\n        }\n      }\n\n      const list = []\n      for (let i = 0; i < res?.list?.length; i++) {\n        const item = res?.list[i]\n        const history = wrapDeepBookOrderHistory(item)\n        list.push(history)\n      }\n      setDeepBookOrderHistory(list)\n      setDeepBookOrderHistoryLoading(false)\n      return list\n    } catch (error) {\n      console.log('🚀🚀🚀 ~ useGetDeepBookOrderHistory.ts:15 ~ getDeepBookOrderHistory ~ error:', error)\n      setDeepBookOrderHistoryLoading(false)\n      return []\n    }\n  }\n\n  const wrapDeepBookOrderHistory = (history: any) => {\n    // 优先从 store 中获取\n    let poolInfo = deepBookPoolsObj[history.pool_id]\n\n    // 如果 store 中没有，从缓存中获取\n    if (!poolInfo) {\n      poolInfo = poolInfoCache.get(history.pool_id)\n      console.log('🚀🚀🚀 ~ 从缓存获取池信息:', poolInfo)\n    }\n\n    // 如果缓存中也没有，说明这个池信息在批量查询时失败了，跳过这条记录\n    if (!poolInfo) {\n      console.warn(`池信息不存在，跳过历史记录 poolId: ${history.pool_id}`)\n      return null\n    }\n\n    const { baseAssets, quoteAssets } = poolInfo\n    const quoteDecimals = quoteAssets.decimals\n    const baseDecimals = baseAssets.decimals\n    const { block_time, is_bid, pool_id, tx } = history\n    const price = d(history.price)\n      .div(Math.pow(10, quoteDecimals - baseDecimals + 9))\n      .toString()\n    // 总支付数量\n    const quantityFilled = d(history.base_asset_quantity_filled).div(Math.pow(10, baseDecimals)).toString()\n    // 已成交数量\n    const originalQuantity = d(history.original_quantity).div(Math.pow(10, baseDecimals)).toString()\n    //已成交目标coin数量\n    const filled = d(quantityFilled).mul(d(price)).toString()\n    // 接口只返回交易成功的\n    const orderStatus = 'Success'\n\n    return {\n      baseAssets,\n      quoteAssets,\n      blockTime: timeFormatUTC(block_time),\n      side: is_bid ? 'Buy' : 'Sell',\n      price,\n      filled,\n      fee: 0,\n      orderStatus,\n      total: quantityFilled,\n      poolId: pool_id,\n      tx\n    }\n  }\n\n  return { getDeepBookOrderHistory }\n}\n","import '@/assets/css/flexlayout.css'\nimport DeepBookH5 from '@/components/deepbook/DeepBookH5'\nimport DeepBookPC from '@/components/deepbook/DeepBookPC'\nimport useGetDeepBookManagerBalance from '@/hooks/deepbook/useGetDeepBookManagerBalance'\nimport useGetDeepBookOpenOrders from '@/hooks/deepbook/useGetDeepBookOpenOrders'\nimport useGetDeepBookOrderBook from '@/hooks/deepbook/useGetDeepBookOrderBook'\nimport useGetDeepBookOrderHistory from '@/hooks/deepbook/useGetDeepBookOrderHistory'\nimport useGetDeepBookPools from '@/hooks/deepbook/useGetDeepBookPools'\nimport useDeepBookStore from '@/store/deepbook'\nimport { useInterval } from '@cetus/hooks/src/useInterval'\nimport useTokenPrice from '@cetus/hooks/src/useTokenPrice'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { useAccountStore } from '@cetus/stores'\nimport { isAvailableObject } from '@cetus/utils'\nimport { useEffect, useMemo } from 'react'\nimport { useParams } from 'react-router-dom'\n\nfunction DeepBook() {\n  // ==================== 路由参数 ====================\n  const { address } = useParams()\n\n  // ==================== 状态管理 ====================\n  const { currentAccount } = useAccountStore()\n  const {\n    deepBookPools,\n    setDeepBookOpenOrders,\n    setDeepBookOrderHistory,\n    setDeepBookSettleList,\n    setManagerBalanceObjs,\n    currentDeepBookPool,\n    isCheckedAllMarkets,\n    deepBookPoolsObj,\n    setBalanceManagerList,\n    getCurrentBalanceManagerInfo,\n    currentBalanceManagerInfoMap\n  } = useDeepBookStore()\n\n  // ==================== 自定义 Hooks ====================\n  const { isApp } = useWindowWidth()\n  const { getDeepBookPools } = useGetDeepBookPools()\n  const { getDeepBookOpenOrders, getDeepBookAllOpenOrders } = useGetDeepBookOpenOrders()\n  const { getDeepBookOrderHistory } = useGetDeepBookOrderHistory()\n  const { getOrderBook } = useGetDeepBookOrderBook()\n  const { getBalanceManagerInfo, getManagerBalance } = useGetDeepBookManagerBalance()\n  const { fetchTokenPrices } = useTokenPrice()\n\n  // ==================== 计算属性 ====================\n  const currentBalanceManagerInfo = useMemo(() => {\n    if (currentAccount?.address) {\n      return getCurrentBalanceManagerInfo(currentAccount?.address)\n    }\n    return null\n  }, [currentAccount?.address, currentBalanceManagerInfoMap])\n\n  // ==================== 事件处理函数 ====================\n  const getDeepBookTokenPrice = () => {\n    const coinTypeList: string[] = []\n    deepBookPools.forEach((pool: any) => {\n      coinTypeList.push(pool?.baseAssets?.coin_type, pool?.quoteAssets?.coin_type)\n    })\n    fetchTokenPrices(coinTypeList)\n  }\n\n  // ==================== 副作用处理 ====================\n  // 初始化获取 DeepBook 池子\n  useEffect(() => {\n    getDeepBookPools(address)\n  }, [])\n\n  // 定时刷新数据\n  useInterval({\n    interval: 30 * 1000,\n    callback: () => {\n      getDeepBookPools(address)\n      getDeepBookTokenPrice()\n      if (isCheckedAllMarkets) {\n        getDeepBookAllOpenOrders(false)\n      } else {\n        getDeepBookOpenOrders(currentDeepBookPool, false)\n      }\n    }\n  })\n\n  // 获取余额管理器信息\n  useEffect(() => {\n    if (currentAccount?.address) {\n      getBalanceManagerInfo(currentAccount?.address)\n    }\n  }, [currentAccount?.address])\n\n  // 获取代币价格\n  useEffect(() => {\n    if (deepBookPools?.length > 0) {\n      getDeepBookTokenPrice()\n    }\n  }, [deepBookPools?.length])\n\n  // 账户切换时重置状态\n  useEffect(() => {\n    setDeepBookOpenOrders([])\n    setDeepBookOrderHistory([])\n    setDeepBookSettleList([])\n    setManagerBalanceObjs([])\n    setBalanceManagerList([])\n  }, [currentAccount?.address])\n\n  // 获取开放订单\n  useEffect(() => {\n    if (currentDeepBookPool?.address && currentAccount?.address) {\n      if (isCheckedAllMarkets) {\n        getDeepBookAllOpenOrders()\n      } else {\n        getDeepBookOpenOrders(currentDeepBookPool)\n      }\n    }\n  }, [currentDeepBookPool?.address, currentAccount?.address, isCheckedAllMarkets, currentBalanceManagerInfo])\n\n  // 获取订单历史\n  useEffect(() => {\n    if (deepBookPools?.length > 0 && currentAccount?.address && isAvailableObject(deepBookPoolsObj)) {\n      getDeepBookOrderHistory()\n    }\n  }, [deepBookPools?.length, currentAccount?.address, deepBookPoolsObj, isCheckedAllMarkets])\n\n  // 获取订单簿\n  useEffect(() => {\n    if (currentDeepBookPool?.address) {\n      getOrderBook('all', currentDeepBookPool.tickSize, true, 9)\n    }\n  }, [currentDeepBookPool?.address])\n\n  // 获取管理器余额\n  useEffect(() => {\n    if (currentBalanceManagerInfo?.balanceManager && currentDeepBookPool?.address && currentAccount?.address) {\n      getManagerBalance(\n        [\n          { coin_type: currentDeepBookPool?.baseAssets.coin_type, decimals: currentDeepBookPool?.baseAssets.decimals },\n          { coin_type: currentDeepBookPool?.quoteAssets.coin_type, decimals: currentDeepBookPool?.quoteAssets.decimals }\n        ],\n        currentAccount?.address,\n        currentBalanceManagerInfo?.balanceManager\n      )\n    }\n  }, [currentBalanceManagerInfo, currentAccount?.address, currentDeepBookPool])\n\n  // ==================== 渲染逻辑 ====================\n  if (isApp) {\n    return (\n      <DeepBookH5\n        currentDeepBookPool={currentDeepBookPool}\n        deepBookPools={deepBookPools}\n        currentAccount={currentAccount}\n        currentBalanceManagerInfo={currentBalanceManagerInfo}\n      />\n    )\n  }\n\n  return (\n    <DeepBookPC\n      currentDeepBookPool={currentDeepBookPool}\n      deepBookPools={deepBookPools}\n      currentAccount={currentAccount}\n      currentBalanceManagerInfo={currentBalanceManagerInfo}\n    />\n  )\n}\n\nexport default DeepBook\n"],"file":"assets/DeepBook-DUFt_fWc.js"}