import{i as I,K as X,bU as J,as as L,p as H,d as x,Z as j,n as Q,bV as Y,j as M,bW as D,l as F,bX as G,z as Z}from"./index-BpSfzecM.js";import{r as w}from"./vendor-CBmAETR3.js";import"./cross-DJ28FxNa.js";import{a as $}from"./useFavoriteDlmmPool-BAgWoipQ.js";import{a as ee}from"./useFavoritePool-5MLb1oZG.js";import{F as te}from"./useWrapPoolData-CMGMCXwG.js";const ae=(a,t)=>({vaultsList:[],setVaultList:e=>a({vaultsList:e}),vaultPageList:[],setVaultPageList:e=>a({vaultPageList:e}),vaultListObj:{},setVaultListObj:e=>a({vaultListObj:e}),vaultListLoading:!0,setVaultListLoading:e=>a({vaultListLoading:e}),vaultsTokenList:[],setVaultsTokenList:e=>a({vaultsTokenList:e}),lpTokenInfoObj:{},setLpTokenInfoObj:e=>a({lpTokenInfoObj:e}),vaultsTotalTvlDisplay:"",setVaultTotalTvlDisplay:e=>a({vaultsTotalTvlDisplay:e})}),se=I(X(ae,{name:"useVaultsStoreV2",partialize:a=>{const{vaultsList:t,vaultsTokenList:e,lpTokenInfoObj:s}=a;return{vaultsList:t,vaultsTokenList:e,lpTokenInfoObj:s}}}));function ce(){const{volatileVaultsSdk:a}=J();return{getDlmmVaultList:async()=>{const{data:e}=await(a==null?void 0:a.VaultsV2.getPoolList());return console.log("ðŸš€ðŸš€ðŸš€ ~ usetGetDlmmVaultList.ts:8 ~ getDlmmVaultList ~ data:",e),e.map(c=>({apr:"",apy:"",category:"cetus-dlmm",dlmm_pool:c.markets[0].certified_pools[0],dlmm_position_id:"",coin_type_a:c.coin_type_a,coin_type_b:c.coin_type_b,display:!0,fee_rate:"",hard_cap_usd:"",id:c.id,lp_type:c.lp_token_type,lst_apy:"",quote_type:c.quote_type,show_reverse:!0,total_supply:"",tvl:""}))}}}const de={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}},"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105":{vaults_id:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmm_pool:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",lpToken:{name:"SUI-USDC Haedal Vault LP Token",symbol:"SUI-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/TZD49BnoQJTbSIsGi_qfnzfN0MuCE17hYMeOWaMqpEs",project_url:"",coin_type:"0x2f46a040b9bc3a584a3be4d7bfbb02a5fb479da17a04c6d2860ed61d95e97f3f::lpcoin::LPCOIN",description:""}},"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2":{vaults_id:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmm_pool:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",lpToken:{name:"DEEP-SUI Haedal Vault LP Token",symbol:"DEEP-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/NVpcEHcDm71AOiNdu5BjfZ5RoXwROnKMUE3PEwDOKM4",project_url:"",coin_type:"0xd418945e16ef3db737df093d0827f5ce387b36f089523e13c16e50dec6bd2524::lpcoin::LPCOIN",description:""}},"0x72f5c6eef73d77de271886219a2543e7c29a33de19a6c69c5cf1899f729c3f17":{vaults_id:"0x12ac7deea4b92b3e2c16687e2d2695fa8c045ec0a52844db7b2fc3876c9552aa",clmm_pool:"0x72f5c6eef73d77de271886219a2543e7c29a33de19a6c69c5cf1899f729c3f17",lpToken:{name:"WAL-haSUI Haedal Vault LP Token",symbol:"WAL-haSUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/byrMmE8Xu83i73BKML8yQGXq9H6a-mA6pDFnIQlu_84",project_url:"",coin_type:"0x5c79c0ab2c45682aba43b1acbe5c478d947f7c8397d47447906d6cc127e180fb::lpcoin::LPCOIN",description:""}},"0xaa020ad81e1621d98d4fb82c4acb80dc064722f24ef828ab633bef50fc28268b":{vaults_id:"0x99db9a7d3320d31fe6e4dc4122b948162010e331c41dc279636ca75567b93497",clmm_pool:"0xaa020ad81e1621d98d4fb82c4acb80dc064722f24ef828ab633bef50fc28268b",lpToken:{name:"haSUI-USDC Haedal Vault LP Token",symbol:"haSUI-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/uPsVdR-uVDtGW-FMwvSm4PV123RnHBzAYb2S9nO923E",project_url:"",coin_type:"0x0484a9162669957e1c1883fc2da59e3cce9afdc1eec3c72c983898dbc9e92b91::lpcoin::LPCOIN",description:""}},"0x9e59de50d9e5979fc03ac5bcacdb581c823dbd27d63a036131e17b391f2fac88":{vaults_id:"0xedfb22d1bbe5045fd1888bb8bc1c4bc1823ab24d40f5a4bea9f6eb9758a4b820",clmm_pool:"0x9e59de50d9e5979fc03ac5bcacdb581c823dbd27d63a036131e17b391f2fac88",lpToken:{name:"ETH-USDC Haedal Vault LP Token",symbol:"ETH-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/AsgmYwj4r2jNmfjHBktWEPJP1pLaamS-SMICcmFZQIc",project_url:"",coin_type:"0x8275bc774497b319db110bb97a4812a19859ab6f19dc1574746097f06103c0f9::lpcoin::LPCOIN",description:""}},"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded":{vaults_id:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmm_pool:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",lpToken:{name:"CETUS-SUI Haedal Vault LP Token",symbol:"CETUS-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/wDk5NmfNJXk2yT_ocfN3UuYtAltpTjGGr-MQzPNl9E0",project_url:"",coin_type:"0x242ddc526b9cb75513bee2fc629e01d5b7dc6da4c02d39cdab0160794635334f::lpcoin::LPCOIN",description:""}},"0x2fc6ee9183d0f1ca0d2dded02c416be6f4671bb82db55c26ce12b536812a4b8e":{vaults_id:"0xbd6252e0d56ae5eaabf055fd6c518ee5f66c1114287ca957cc698a17c3d25b16",clmm_pool:"0x2fc6ee9183d0f1ca0d2dded02c416be6f4671bb82db55c26ce12b536812a4b8e",lpToken:{name:"LBTC-SUI Haedal Vault LP Token",symbol:"LBTC-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/-CIyJycPqRHU1xnI0eJLtccVFr3PJDX_Ahz7Mlh8Pvo",project_url:"",coin_type:"0xb2d502d4ef89395934de020b195ded323bfa86d7f40b65ed5b15d6b66c722a3d::lpcoin::LPCOIN",description:""}},"0xea648440bd640d3530e8a5f02c0b56da82c2efe851156c39974b901bbb0eeab1":{vaults_id:"0x5525f5a70fffd93f616c39b59f3abdd2054fc2d19f09c8a4d94950d611a43b74",clmm_pool:"0xea648440bd640d3530e8a5f02c0b56da82c2efe851156c39974b901bbb0eeab1",lpToken:{name:"WAL-haSUI Haedal Vault LP Token",symbol:"WAL-haSUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/byrMmE8Xu83i73BKML8yQGXq9H6a-mA6pDFnIQlu_84",project_url:"",coin_type:"0x5c79c0ab2c45682aba43b1acbe5c478d947f7c8397d47447906d6cc127e180fb::lpcoin::LPCOIN",description:""}}};function oe(){return{wrapVaultsPoolData:(t,e,s=!1)=>{var C,E,z,N;const{category:c,hard_cap_usd:l,tvl:n,quote_type:m}=t,{displayTokenA:p,displayTokenB:f,feeDisplay:g,isReverse:y,tokenA:d,tokenB:b,quoteType:T}=s?t:e,i=L(t.tvl||0),V=L(c=="cetus"?t.apr*100:t.apy*100,"%"),u=L(t.lst_apy*100,"%"),r=L(t.apr*100,"%"),P=L(n,"$"),O=H(l,2),h=t.category=="cetus"?x(t==null?void 0:t.apy).add(x(t.lst_apy)).mul(100).toString():x(t.apy).mul(100).toString(),v=L(h,"%"),k=[j(p==null?void 0:p.coin_type,!1),j(f==null?void 0:f.coin_type,!1)],o=((C=e==null?void 0:e.farmsRewarderList)==null?void 0:C.map(_=>j(_==null?void 0:_.coinType,!1)))||[],S=((E=e==null?void 0:e.miningRewardList)==null?void 0:E.map(_=>j(_==null?void 0:_.coinType,!1)))||[],q=Array.from(new Set([...k,...o,...S])),U=x(l).gt(0)?x(n).div(l).mul(100).toString():0,B=L(U||0,"%"),A=s?t.clmmPoolAddress:e.poolAddress,R=s?t.dlmmPoolAddress:e.poolAddress,W=t.category=="cetus"?(N=(z=de[A])==null?void 0:z.lpToken)==null?void 0:N.coin_type:t.lp_type||t.lpTokenType,K=t==null?void 0:t.hard_cap_usd;return{tokenA:d,tokenB:b,displayTokenA:p,displayTokenB:f,binStep:e==null?void 0:e.binStep,fee:e==null?void 0:e.fee,feeDisplay:g,vaultsTvl:s?"--":n,tvlDisplay:s?"--":i,vaultsTvlDisplay:s?"--":P,vaultsApyDisplay:s?"--":V,vaultsAprDisplay:s?"--":r,vaultsLstApyDisplay:s?"--":u,vaultsTotalApy:s?"--":h,vaultsTotalApyDisplay:s?"--":v,vaultsRewards:s?t.vaultsRewards:q,category:c,depositRatio:U,depositRatioDisplay:B,vaultId:s?t.vaultId:t.id,clmmPoolAddress:A,dlmmPoolAddress:R,hardCapUsdDisplay:O,lpTokenType:W,hardCapUSD:K,isReverse:y,isFrozen:te.includes(A),quoteType:s?T:m||(e==null?void 0:e.quote_type)}}}}function ue(){const{fetchByApi:a}=Q(),{wrapVaultsPoolData:t}=oe(),{getFavoritePoolList:e}=ee(),{getFavoritePoolList:s}=$(),{vaultsList:c,setVaultList:l,setVaultTotalTvlDisplay:n,setVaultListObj:m}=se(),{getDlmmVaultList:p}=ce(),f=async()=>{var y;try{const d=await a(Y,"GET");console.log("ðŸš€ ~ getVaultPoolList ~ res:",d);const b=await p();if(console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:22 ~ getVaultPoolList ~ dlmmVaultList:",b),(!(d!=null&&d.list)||((y=d==null?void 0:d.list)==null?void 0:y.length)===0)&&M.env==="testnet")throw Error("testnet no data");if(d.list){const T=d.list.filter(r=>D?r.display:!0).map(r=>r.clmm_pool),i=await e({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:T}),V=b.filter(r=>D?r.display:!0).map(r=>r.dlmm_pool),u=await s({coinType:[],filter:"all",limit:100,offset:0,pools:V});if(i!=null&&i.list&&(u!=null&&u.list)){const r=Object.fromEntries(i==null?void 0:i.list.map(o=>[o.poolAddress,o])),P=Object.fromEntries(u==null?void 0:u.list.map(o=>[o.poolAddress,o])),O=d.list.filter(o=>D?o.display:!0).map(o=>t(o,r[o.clmm_pool])),h=b.map(o=>t(o,P[o.dlmm_pool])),v=[...O,...h];l(v);const k=v.reduce((o,S)=>(o[S.vaultId]=S,o),{});return m(k),n(H(d==null?void 0:d.total_tvl,2)),{poolList:v,vaultListObj:k}}}}catch(d){return console.log("ðŸš€ðŸš€ðŸš€ ~ getVaultPoolList ~ error:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:48 ~ getVaultPoolList ~ vaultsList:",c),g()}},g=async()=>{const y=`/data/vault-pools${M.env=="testnet"?"-testnet":""}.json?timestamp=${new Date().getTime()}`;console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:60 ~ getLocalVaultPoolList ~ url:",y);const d=await fetch(y).then(i=>i.json());console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:57 ~ list ~ list:",d);const b=d.map(i=>t(i,{},!0));console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:57 ~ poolList ~ poolList:",b),l(b);const T=b.reduce((i,V)=>(i[V.vaultId]=V,i),{});return m(T),n("--"),{poolList:b,vaultListObj:T}};return{getVaultPoolList:f,getLocalVaultPoolList:g}}const ye=I((a,t)=>({vaultsPositionObj:{},setVaultsPositionObj:e=>{const s=new Set(Object.values(t().vaultsPositionObj).map(n=>n.ownerAddress)),c=new Set(Object.values(e).map(n=>n.ownerAddress)),l=s.size===c.size&&[...s].every(n=>c.has(n));a(n=>({vaultsPositionObj:l?{...n.vaultsPositionObj,...e}:e}))},clearVaultsPositionObj:()=>a(()=>({vaultsPositionObj:{}})),currentVaultPosition:{},setCurrentVaultPosition:e=>a(()=>({currentVaultPosition:e})),currentVaultPositionLoading:!0,setCurrentVaultPositionLoading:e=>a(()=>({currentVaultPositionLoading:e})),vaultsPositionLoading:!1,setVaultsPositionLoading:e=>a(()=>({vaultsPositionLoading:e})),vaultsTotalTvl:"",setVaultsTotalTvl:e=>a(()=>({vaultsTotalTvl:e})),showVaultsList:[],showVaultsListLength:"",setShowVaultsList:e=>a(()=>({showVaultsList:e,showVaultsListLength:String(e==null?void 0:e.length)}))})),le=I((a,t)=>({pythPriceMap:{},setPythPriceMap:e=>{a({pythPriceMap:{...t().pythPriceMap,...e}})}}));function _e(){const{pythPriceMap:a}=le(),t=w.useMemo(()=>a,[a]),e=w.useCallback((c,l,n)=>{var p;const m=Number(l)==0?"0":n;if(l&&c&&+l&&F(t)){const f=(p=t[G(c)])==null?void 0:p.price;if(f)return Z(l).mul(f).toString()}return m},[t]),s=w.useCallback(c=>{var l;return c&&F(t)?(l=t[G(c)])==null?void 0:l.price:0},[t]);return{getTokenAmountValueByPyth:e,getTokenPriceByPyth:s}}export{se as a,_e as b,ue as c,le as d,ye as u,de as v};
