import{r as w,l as wo,K as Ho,j as v,H as X,C as jo,n as Ao,T as no,B as Po,ag as No}from"./vendor-CBmAETR3.js";import{E as ro,e as Mo,v as lo,bJ as f,be as Vo,s as qo,d as D,a8 as Bo,p as Uo,as as ao,a5 as Eo,Y as ko,i as Ro,K as Oo,n as Fo,a7 as Go,D as q,bP as io,Z as Q,bQ as zo,x as Qo,u as Yo,y as Ko,l as $o,C as Xo,I as Zo,A as Jo}from"./index-BpSfzecM.js";import"./cross-DJ28FxNa.js";import{s as _o}from"./en_US-KAK2ZBDO-C1Pw6Q2s.js";import{v as mo}from"./v4-C6aID195.js";import{u as ho,i as go}from"./index-FuOBGqkF.js";function Sn(p=4){const T=new Date().getTime(),c=p*60*60*1e3,u=T-c;return Math.floor(u/1e3)}function on(p,T=Date.now()){const c=T-p,u=Math.floor(c/1e3),S=u%60,x=Math.floor(u/60)%60,W=Math.floor(u/3600)%24,$=Math.floor(u/86400)%30,M=Math.floor(u/(86400*30))%12,P=Math.floor(u/(86400*365));let h="";if(P>0&&(h+=`${P}y `),M>0){if(h)return h+`${M}mo `;h+=`${M}mo `}if($>0){if(h)return h+`${$}d `;h+=`${$}d `}if(W>0){if(h)return h+`${W}h `;h+=`${W}h `}if(x>0){if(h)return h+`${x}m `;h+=`${x}m `}return S>0&&(h+=`${S}s `),h===""?"0s ":h+"ago"}function vo(p){const T=new Date,c=new Date(p),u=Math.abs(T.getTime()-c.getTime()),S=Math.floor(u/1e3),x=Math.floor(S/60),W=Math.floor(x/60),$=Math.floor(W/24);return $>=1?`${$}d`:W>=1?`${W}h`:x>=1?`${x}m`:`${S}s`}function In(p,T){const c=_o[p.coin_type],u=_o[T.coin_type];return c===void 0&&u===void 0||c!==void 0&&u===void 0?T:c===void 0&&u!==void 0||c<u?p:T}const nn=(p,T,c,u)=>p==="buy"||p==="sell"?c===0?Number(T)?`-${ro(T)}`:`-<${u>9?Math.pow(10,-u):"0.000001"}`:Number(T)?`+${ro(T)}`:`+<${u>9?Math.pow(10,-u):"0.000001"}`:Number(T)?`${ro(T)}`:`<${u>9?Math.pow(10,-u):"0.000001"}`;function rn(){const{getTokenInfo:p}=Mo();return{wrapCoinDexPoolsData:n=>n==null?void 0:n.map(r=>({apr:`${lo(r==null?void 0:r.apr,2)}%`,dex:r==null?void 0:r.dex,coinList:r==null?void 0:r.coinList,price:`$${lo(r==null?void 0:r.price,6)}`,tvl:`$${lo(r==null?void 0:r.tvl)}`,link:r==null?void 0:r.link})),wrapCoinDetailData:n=>({coinType:n==null?void 0:n.coinType,cratedTime:Vo(n==null?void 0:n.createdTime).format("MMM-DD-YYYY hh:mm:ss A"),creator:n==null?void 0:n.creator,packageId:n==null?void 0:n.packageID,decimals:n==null?void 0:n.decimals,website:n==null?void 0:n.website,totalSupply:n==null?void 0:n.totalSupply,totalSupplyDisplay:f(n==null?void 0:n.totalSupply,2,!0),cirSupply:Number(n==null?void 0:n.circulating)?n==null?void 0:n.circulating:n==null?void 0:n.totalSupply,cirSupplyDisplay:f(Number(n==null?void 0:n.circulating)?n==null?void 0:n.circulating:n==null?void 0:n.totalSupply,2,!0),verified:n==null?void 0:n.verified,scamFlag:(n==null?void 0:n.scamFlag)==0,holders:n==null?void 0:n.holders}),wrapCoinTransactionBlocksData:n=>n==null?void 0:n.map(r=>{var s,o,e;return{txDigest:r==null?void 0:r.txDigest,payload:r!=null&&r.payload?r==null?void 0:r.payload:"TransferObjects",payloadPackage:r!=null&&r.payload&&((o=(s=r==null?void 0:r.payload)==null?void 0:s.split("::"))==null?void 0:o[0])||"",sender:r==null?void 0:r.sender,txns:r==null?void 0:r.txns,status:r==null?void 0:r.status,timestamp:r==null?void 0:r.timestamp,gas:qo(r==null?void 0:r.gas,9),labels:(e=r==null?void 0:r.transactionLabels)==null?void 0:e.map(b=>({image:b==null?void 0:b.image,name:b==null?void 0:b.name}))}}),wrapCoinMarketData:n=>{var s;const r={};for(const o in n==null?void 0:n.market){const e=(s=n==null?void 0:n.market)==null?void 0:s[o],b=D(e==null?void 0:e.priceChange).gt(0),j=ro(e==null?void 0:e.priceChange,4,!0);r[o]={txn:f(e==null?void 0:e.txn,2,!0),buys:(e==null?void 0:e.buys)||"0",sells:(e==null?void 0:e.sells)||"0",buysDisplay:f(e==null?void 0:e.buys,2,!0),sellsDisplay:f(e==null?void 0:e.sells,2,!0),buyVolume:(e==null?void 0:e.buyVolume)||"0",sellVolume:(e==null?void 0:e.sellVolume)||"0",buyVolumeDisplay:`$${f(e==null?void 0:e.buyVolume,2,!0)}`,sellVolumeDisplay:`$${f(e==null?void 0:e.sellVolume,2,!0)}`,buyers:(e==null?void 0:e.buyers)||"0",sellers:(e==null?void 0:e.sellers)||"0",buyersDisplay:f(e==null?void 0:e.buyers,2,!0),sellersDisplay:f(e==null?void 0:e.sellers,2,!0),priceChange:(b?"+":"")+f(j,2)+"%",label:o==null?void 0:o.toUpperCase(),markers:`${f(e==null?void 0:e.markers,2,!0)}`,volume:`$${f(e==null?void 0:e.volume,2,!0)}`}}return{liquidityInUsd:`$${f(n==null?void 0:n.liquidityInUsd,2)}`,liquidity:n==null?void 0:n.liquidityInUsd,market:r}},wrapTopHolders:n=>(console.log("ðŸš€ ~ useWrapProData wrapTopHolders ~ list:",n),n==null?void 0:n.map(r=>({holder:r==null?void 0:r.account,balance:r==null?void 0:r.balance,balanceDisplay:lo(r==null?void 0:r.balance,0),percentage:r!=null&&r.percentage?`${Number(r==null?void 0:r.percentage)?Bo(D(r==null?void 0:r.percentage).mul(100).toString(),4):"<0.0001%"}`:"-",name:r==null?void 0:r.name,website:r==null?void 0:r.website,image:r==null?void 0:r.image}))),wrapCoinTrades:(n,r)=>n==null?void 0:n.map(s=>{var o;return{type:s==null?void 0:s.type,price:s==null?void 0:s.price,coinChanges:(o=s==null?void 0:s.coinChanges)==null?void 0:o.map((e,b)=>({amount:nn(s==null?void 0:s.type,e==null?void 0:e.balance,b,e==null?void 0:e.decimals),coinType:e==null?void 0:e.coinType,symbol:e==null?void 0:e.symbol,logo:e==null?void 0:e.logo})),dex:s==null?void 0:s.dex,sender:s==null?void 0:s.sender,txDigest:s==null?void 0:s.txDigest,usdValue:Number(s==null?void 0:s.usdValue)?`${Uo(s==null?void 0:s.usdValue,2)}`:"<$0.01",iconName:D(s==null?void 0:s.usdValue).lt(1e3)?"shrimp":D(s==null?void 0:s.usdValue).lt(1e4)?"dolphin":"whale",timestamp:s==null?void 0:s.timestamp,time:on(s==null?void 0:s.timestamp),haveAnimation:!1,isWsData:!!r,id:mo()}}),wrapBvTokenList:n=>n==null?void 0:n.map(s=>{const o=ro(s==null?void 0:s.priceChangePercentage24H,2,!0);return{coinType:s==null?void 0:s.coinType,coin_type:s==null?void 0:s.coinType,priceChange:`${D(o).gte(0)?"+":""}${ao(o,"%")}`,vol:"$"+f(s==null?void 0:s.volume24H),price:"$"+Eo(s==null?void 0:s.price),logo_url:s==null?void 0:s.iconUrl,symbol:s==null?void 0:s.symbol,name:s==null?void 0:s.name}}),wrapProCoinList:(n,r="hour24")=>(console.log("ðŸš€ ~ wrapProCoinList ~ list:",n),n==null?void 0:n.map(o=>{var U;if(o!=null&&o.isWrapProCoinWithNoData)return o;const e=(U=o==null?void 0:o.marketData)==null?void 0:U[r],b=e==null?void 0:e.priceChange,j=e==null?void 0:e.volume,B=e==null?void 0:e.buyVolume,R=e==null?void 0:e.sellVolume,d=o==null?void 0:o.audit,O=Object.keys(d??{}).length;let F=0;return d!=null&&d.isHoneypot&&(F+=1),(d==null?void 0:d.mintAuthority)!=="Disable"&&(F+=1),(d==null?void 0:d.top10Holder)!=="--"&&D(d==null?void 0:d.top10Holder).mul(100).gt(15)&&(F+=1),{coinType:o==null?void 0:o.coinType,coin_type:o==null?void 0:o.coinType,priceChange:`${D(b).gte(0)?"+":""}${ao(b,"%")}`,volume:"$"+f(j),vol:"$"+f(j),buyVolume:"$"+f(B),sellVolume:"$"+f(R),price:(o==null?void 0:o.price)=="0"?"-":"$"+ko(o==null?void 0:o.price),logo_url:o==null?void 0:o.logoURI,symbol:o==null?void 0:o.symbol,name:o==null?void 0:o.name,mc:(o==null?void 0:o.marketCap)!=="--"&&D(o==null?void 0:o.marketCap).gt(0)?`$${f(o==null?void 0:o.marketCap,2,!0)}`:"--",fdv:(o==null?void 0:o.fdv)!=="--"&&D(o==null?void 0:o.fdv).gt(0)?`$${f(o==null?void 0:o.fdv,2,!0)}`:"--",liquidity:`$${f(o==null?void 0:o.liquidity,2,!0)}`,holders:f(o==null?void 0:o.holders,2,!0),age:vo(o==null?void 0:o.age),decimals:o==null?void 0:o.decimals,isHoneypot:d==null?void 0:d.isHoneypot,mintAuthority:d==null?void 0:d.mintAuthority,top10Holder:(d==null?void 0:d.top10Holder)=="--"?"--":D(d==null?void 0:d.top10Holder).mul(100).toString(),auditTotal:O,auditWarningNum:F,marketData:o==null?void 0:o.marketData}})),wrapProCoinWithNoData:async n=>{const r=await p(n);return{isWrapProCoinWithNoData:!0,coinType:n,coin_type:n,priceChange:"--",volume:"--",vol:"--",buyVolume:"--",sellVolume:"--",price:"--",logo_url:r==null?void 0:r.logo_url,symbol:r==null?void 0:r.symbol,name:r==null?void 0:r.name,mc:"--",fdv:"--",liquidity:"--",holders:"--",age:"--",decimals:r==null?void 0:r.decimals,isHoneypot:"--",mintAuthority:"--",top10Holder:"--",auditTotal:"--",auditWarningNum:"--"}},wrapProCoinListInModal:(n,r="hour24")=>n==null?void 0:n.map(o=>{var B;const e=(B=o==null?void 0:o.marketData)==null?void 0:B[r],b=e==null?void 0:e.priceChange,j=e==null?void 0:e.volume;return{coinType:o==null?void 0:o.coinType,coin_type:o==null?void 0:o.coinType,priceChange:`${D(b).gte(0)?"+":""}${ao(b,"%")}`,vol:"$"+f(j),price:(o==null?void 0:o.price)=="0"?"-":"$"+ko(o==null?void 0:o.price),logo_url:o==null?void 0:o.logoURI,symbol:o==null?void 0:o.symbol,name:o==null?void 0:o.name,mc:`$${f(o==null?void 0:o.marketCap,2,!0)}`,fdv:`$${f(o==null?void 0:o.fdv,2,!0)}`,liquidity:`$${f(o==null?void 0:o.liquidity,2,!0)}`,holders:f(o==null?void 0:o.holders,2,!0),age:vo(o==null?void 0:o.age),decimals:o==null?void 0:o.decimals}}),wrapProCoinMarketData:(n,r="hour24")=>{var B;if(n!=null&&n.isWrapProCoinWithNoData)return n;const s=(B=n==null?void 0:n.marketData)==null?void 0:B[r],o=s==null?void 0:s.priceChange,e=s==null?void 0:s.volume,b=s==null?void 0:s.buyVolume,j=s==null?void 0:s.sellVolume;return{coinType:n==null?void 0:n.coinType,coin_type:n==null?void 0:n.coinType,priceChange:`${D(o).gte(0)?"+":""}${ao(o,"%")}`,volume:"$"+f(e),buyVolume:"$"+f(b),sellVolume:"$"+f(j)}}}}const en=(p,T)=>({quickBuyCoinList:[{symbol:"SUI",name:"sui",coin_type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",logo_url:"https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/sui-coin.svg/public",decimals:9,limitBuy:100},{symbol:"USDC",name:"usdc",coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",logo_url:"https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/usdc.png/public",decimals:6,limitBuy:200}],quickCoin:{symbol:"SUI",name:"sui",coin_type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",logo_url:"https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/sui-coin.svg/public",decimals:9,limitBuy:100},setQuickCoin:c=>{p(()=>({quickCoin:c}))},quickAmount:"1",setQuickAmount:c=>{p(()=>({quickAmount:c}))},searchText:"",setSearchText:c=>{p(()=>({searchText:c}))},quickLoading:!1,setQuickLoading:c=>{p(()=>({quickLoading:c}))},quickLoadingCoin:"",setQuickLoadingCoin:c=>{p(()=>({quickLoadingCoin:c}))},dateType:"hour24",displayDateType:"24H",setDateType:(c,u)=>{p(()=>({dateType:c,displayDateType:u}))},liquidityMin:"",setLiquidityMin:c=>{p(()=>({liquidityMin:c}))},liquidityMax:"",setLiquidityMax:c=>{p(()=>({liquidityMax:c}))},mcMin:"",setMcMin:c=>{p(()=>({mcMin:c}))},mcMax:"",setMcMax:c=>{p(()=>({mcMax:c}))},volumeMin:"",setVolumeMin:c=>{p(()=>({volumeMin:c}))},volumeMax:"",setVolumeMax:c=>{p(()=>({volumeMax:c}))},currentSortTab:"Top",setCurrentSortTab:c=>{p(()=>({currentSortTab:c}))},currentProTab:"Trending",setCurrentProTab:c=>{p(()=>({currentProTab:c}))},isShowTokenRickModal:!0,setIsShowTokenRickModal:c=>{p(()=>({isShowTokenRickModal:c}))},isOpenProTokenRiskModal:!1,setIsOpenProTokenRiskModal:c=>{p(()=>({isOpenProTokenRiskModal:c}))},currentCarouselTab:"Trending",setCurrentCarouselTab:c=>{p(()=>({currentCarouselTab:c}))},proListParams:{sorted_by:"rank",date_type:"hour24",desc:!1,limit:20,offset:0,market_cap_max:"",market_cap_min:"",volume_max:"",volume_min:"",liqidity_max:"",liqidity_min:"",text:"",tag:"trending"},setProListParams:c=>{p(()=>({proListParams:{...T().proListParams,...c}}))},proCarouseWatchInfo:{dataList:[],dataCoinTypeList:[],lastUpdateTime:void 0},setProCarouseWatchInfo:(c,u)=>{p(()=>({proCarouseWatchInfo:{dataList:c,dataCoinTypeList:u,lastUpdateTime:new Date().getTime()}}))},proCarouseTrendingInfo:{dataList:[],lastUpdateTime:void 0},setProCarouseTrendingInfo:c=>{p(()=>({proCarouseTrendingInfo:{dataList:c,lastUpdateTime:new Date().getTime()}}))},resetProListStoreData:()=>{p(()=>({searchText:"",quickAmount:"1",quickLoadingCoin:"",dateType:"hour24",displayDateType:"24H",liquidityMin:"",liquidityMax:"",mcMin:"",mcMax:"",volumeMin:"",volumeMax:"",currentSortTab:"Top",currentProTab:"Trending",proListParams:{sorted_by:"rank",date_type:"hour24",desc:!1,limit:20,offset:0,market_cap_max:"",market_cap_min:"",volume_max:"",volume_min:"",liqidity_max:"",liqidity_min:"",text:"",tag:"trending"}}))}}),yo=Ro(Oo(en,{name:"useProListStore",partialize:p=>{const{quickCoin:T,isShowTokenRickModal:c}=p;return{quickCoin:T,isShowTokenRickModal:c}},version:3})),sn="https://api-sui-cf.cetus.zone/proxy";async function G(p){try{const T=await fetch(`${sn}${p}`,{method:"GET",headers:{accept:"application/json"}});console.log("ðŸš€ ~ bvFetch ~ response:",T);const c=await T.json();return console.log("ðŸš€ ~ bvFetch ~ result:",c),(c==null?void 0:c.code)===200&&(c==null?void 0:c.message)==="OK"?c==null?void 0:c.result:null}catch(T){return console.log("ðŸš€ ~ bvFetch ~ error:",T),null}}function cn(){const{fetchByApi:p}=Fo(),{wrapCoinDexPoolsData:T,wrapCoinDetailData:c,wrapCoinTransactionBlocksData:u,wrapCoinMarketData:S,wrapTopHolders:x,wrapCoinTrades:W,wrapProCoinList:$,wrapProCoinListInModal:M,wrapProCoinWithNoData:P}=rn(),{setCoinDetail:h,setCoinDexPools:N,setCoinTransactionBlocks:n,setCoinMarketData:r,setTopHolders:s,setCoinTrades:o,setCoinBvPrice:e,setProTokenMap:b,setCoinAuditCheckData:j,setProTokenList:B,setProCoinListcontroller:R,proCoinListcontroller:d,proSearchListcontroller:O,setProSearchListcontroller:F,setCoinDetailLoading:U,setCoinMarketDataLoading:g,setCoinBvPriceLoading:eo,setCoinDexPoolsLoading:so,setCoinTrasactionLoading:Z,setTopHoldersLoading:J,setCoinTradesLoading:to,setCoinAuditCheckLoading:po}=ho(),{proCarouseTrendingInfo:m,setProCarouseTrendingInfo:t,proCarouseWatchInfo:H,setProCarouseWatchInfo:Y}=yo(),K=w.useRef(m),E=w.useRef(H),{getTokenListInfo:Lo,getTokenInfo:Do}=Mo(),{verifiedTokenMap:pn}=Go();return{getCoinDexPools:async({coinType:a,pageIndex:l,pageSize:C,hideSmallPools:y})=>{try{so(!0);const i=await G(`/api/v1/dex/pools?coinType=${q(a)}&pageIndex=${l||1}&pageSize=${C||10}`);console.log("ðŸš€ ~ getCoinDexPools ~ res:",i);const k=T(y?i==null?void 0:i.filter(L=>D(L.tvl).gt(100)):i);console.log("ðŸš€ ~ useGetApiData ~ list:",k),N(k||[])}catch(i){console.log("ðŸš€ ~ getCoinDexPools ~ error:",i),N([])}},getCoinTransactionBlocks:async(a,l,C)=>{Z(!0);try{let y=`coinType=${q(a)}`;l&&(y+=`&cursor=${l}`),y+=`&limit=${C||10}`;const i=await G(`/api/v1/coin/transaction/blocks?${y}`);console.log("ðŸš€ ~ getCoinTransactionBlocks ~ res:",i);const k=u(i==null?void 0:i.data);console.log("ðŸš€ ~ getCoinTransactionBlocks ~ list:",k),n({list:k,nextPageCursor:i==null?void 0:i.nextPageCursor,isFirstPage:!l})}catch(y){console.log("ðŸš€ ~ getCoinTransactionBlocks ~ error:",y),n({list:[],nextPageCursor:"",isFirstPage:!0})}},getCoinDetail:async a=>{U(!0);try{const l=await G(`/api/v1/coin/detail?coinType=${q(a)}`);console.log("ðŸš€ ~ getCoinDetail ~ res:",l);const C=c(l);h(C)}catch{h(void 0)}},getCoinMarketData:async a=>{g(!0);try{const l=await G(`/api/v1/coin/market?coinType=${q(a)}`);console.log("ðŸš€ ~ getCoinMarketData ~ res:",l);const C=S(l);console.log("ðŸš€ ~ getCoinMarketData ~ data:",C),r(C)}catch(l){console.log("ðŸš€ ~ getCoinMarketData ~ error:",l),r(void 0)}},getTopHolders:async(a,l,C)=>{J(!0);try{const y=await G(`/api/v1/coin/holders?coinType=${q(a)}&pageIndex=${l||1}&pageSize=${C||10}`);console.log("ðŸš€ ~ getTopHolders ~ res:",y);const i=x(y==null?void 0:y.data);s(i,y==null?void 0:y.total)}catch(y){console.log("ðŸš€ ~ getTopHolders ~ error:",y),s([])}},getCoinTrades:async a=>{try{const{coinType:l,sender:C,type:y,cursor:i=0,limit:k=10}=a;let L=`?coinType=${q(l)}`;C&&(L+=`&sender=${C}`),y&&(L+=`&type=${y}`),i&&(L+=`&cursor=${i}`),k&&(L+=`&limit=${k}`);const _=await G(`/api/v1/coin/trades${L}`);return console.log("ðŸš€ ~ getCoinTrades ~ res:",_),{list:W(_==null?void 0:_.data),nextPageCursor:_==null?void 0:_.nextPageCursor,isFirstPage:!i}}catch(l){return console.log("ðŸš€ ~ getCoinTrades ~ error:",l),[]}},getCoinBvPrice:async a=>{eo(!0);const l=await G(`/api/v1/coin/price/list?tokenIds=${q(a)}`);if(console.log("ðŸš€ ~ getCoinBvPrice ~ res:",l),l!=null&&l.prices){const C=Object.keys(l==null?void 0:l.prices),y=Object.values(l==null?void 0:l.prices);C!=null&&C[0]&&(y!=null&&y[0])&&e({price:y[0],coinType:C[0]})}},getTokenInfos:async a=>{try{const l=await Lo(a);return console.log("ðŸš€ ~ getTokenInfos ~ res:",l),l?(b(l),l):new Map}catch(l){console.log("ðŸš€ ~ getTokenInfos ~ error:",l)}},getCoinAuditCheck:async a=>{po(!0);const l=await G(`/api/v1/coin/audit/check?coinType=${q(a)}`);j(l?{coinType:l==null?void 0:l.coinType,isHoneypot:l==null?void 0:l.isHoneypot,mintAuthority:l==null?void 0:l.mintAuthority,top10Holder:D(l==null?void 0:l.top10Holder).mul(100).toString()}:void 0)},getProTokenListInModal:async a=>{const C={sorted_by:a==="vol_24"?"volume":"change",desc:!0,date_type:"hour24",tag:"trending"},y=await p(io,"GET",C);console.log("ðŸš€ ~ getProTokenListInModal ~ res:",y);const i=M(y==null?void 0:y.coin_list,C.date_type);console.log("ðŸš€ ~ getProTokenListInModal ~ data:",i),B(i)},searchProToken:async a=>{console.log("ðŸš€ ~ searchProToken ~ value:",a);try{const l="hour24",C={text:a,tag:"trending"};O&&(console.log("ðŸš€ ~ searchProToken ~ proSearchListcontroller:",O),await O.abort());const y=new AbortController;F(y);const i=await p(io,"GET",C,void 0,y);console.log("ðŸš€ ~ getProTokenListInModal ~ res:",i);let k=M(i==null?void 0:i.coin_list,l);if(console.log("ðŸš€ ~ getProTokenListInModal ~ data:",k),(k==null?void 0:k.length)===0&&(a!=null&&a.startsWith("0x"))){const L=await Do(a);L&&(k=[{...L,isNotBv:!0}])}return k}catch(l){return console.log("ðŸš€ ~ searchProToken ~ error:",l),[]}},getProCoinList:async(a,l=!0)=>{var L,_,V;const C=a;d&&await d.abort();const y=new AbortController;R(y);let i;const k=new Date().getTime();if(console.log("ðŸš€ ~ getProCoinList ~ proCarouseTrendingInfoRef.current:",K.current),go(z,a)&&((L=K.current)!=null&&L.lastUpdateTime)&&D(k).minus((_=K.current)==null?void 0:_.lastUpdateTime).lte(6e4)&&l)i=$((V=K.current)==null?void 0:V.dataList,C.date_type);else{const I=await p(io,"GET",C,void 0,y);i=$(I==null?void 0:I.coin_list,C.date_type),go(z,a)&&(K.current={dataList:I==null?void 0:I.coin_list,lastUpdateTime:new Date().getTime()},t(I==null?void 0:I.coin_list))}if(console.log("ðŸš€ ~ getProCoinList ~ data:",i),console.log("ðŸš€ ~ getProCoinList ~ params:",a),a!=null&&a.text&&(i==null?void 0:i.length)==0){const I=await P(Q(a==null?void 0:a.text));i=I?[{...I}]:[]}return{list:i}},getProCoinListWithCoins:async(a,l,C,y=!0)=>{var I,To,Co,fo,xo;if((a==null?void 0:a.length)==0)return[];let i;const k=new Date().getTime();console.log("ðŸš€ ~ getProCoinListWithCoins ~ proCarouseWatchInfoRef.current:",E.current),l=="hour24"&&go(a,(I=E.current)==null?void 0:I.dataCoinTypeList)&&((To=E.current)!=null&&To.lastUpdateTime)&&D(k).minus((Co=E.current)==null?void 0:Co.lastUpdateTime).lte(6e4)&&y?i={data:{coin_list:(fo=E.current)==null?void 0:fo.dataList}}:i=await p(zo,"POST",{coin_types:a});const L=((xo=i==null?void 0:i.data)==null?void 0:xo.coin_list)||[],_=C?L.filter(oo=>Q(oo==null?void 0:oo.coinType)===Q(C)):L,V=$(_,l);if(console.log("ðŸš€ ~ getProCoinListWithCoins ~ data:",_,V),(a==null?void 0:a.length)===(V==null?void 0:V.length))return l=="hour24"&&(E.current={dataList:_,dataCoinTypeList:a,lastUpdateTime:new Date().getTime()},Y(_,a)),V;{const oo=Object.fromEntries(V==null?void 0:V.map(A=>[q(A==null?void 0:A.coin_type),A])),So=Object.fromEntries(_==null?void 0:_.map(A=>[q(A==null?void 0:A.coinType),A])),bo=[],uo=[];for(let A=0;A<(a==null?void 0:a.length);A++){const co=a[A],Io=oo[q(co)]||await P(co),Wo=So[q(co)]||await P(co);bo.push(Io),uo.push(Wo)}return l=="hour24"&&(E.current={dataList:uo,dataCoinTypeList:a,lastUpdateTime:new Date().getTime()},Y(uo,a)),bo}}}}function ln(){const{isProMode:p,setIsProMode:T,resetProAllData:c}=ho(),{quickBuyCoinList:u}=yo(),S=wo();return{goToken:($,M)=>{var P,h,N;if(c(),p||T(!0),Q($)==Q(M)){const n=Q(M)===Q((P=u==null?void 0:u[0])==null?void 0:P.coin_type)?(h=u==null?void 0:u[1])==null?void 0:h.coin_type:(N=u==null?void 0:u[0])==null?void 0:N.coin_type;S(`/swap/${n}/${M}?from=pro`);return}S(`/swap/${$}/${M}?from=pro`)},getVolumeMin:($,M)=>{let P=$;if(!P)switch(M){case"hour24":P="10000";break;case"hour4":P="2000";break;case"hour1":P="500";break;case"m30":P="200";break}return P}}}const an=No`
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
`,tn=20,z={date_type:"hour24",desc:!1,limit:20,liqidity_max:"",liqidity_min:"",market_cap_max:"",market_cap_min:"",offset:0,sorted_by:"rank",tag:"trending",text:"",volume_max:"",volume_min:""};function Wn({containerProps:p}){const{getProCoinList:T,getProCoinListWithCoins:c}=cn(),{userCollectObj:u}=Qo(),{quickCoin:S,currentCarouselTab:x,setCurrentCarouselTab:W,setProListParams:$,setCurrentProTab:M}=yo(),{isProMode:P}=ho(),[h,N]=w.useState(),{goToken:n}=ln(),{isApp:r,windowWidth:s}=Yo(),{pathname:o}=Ho(),e=o.split("/").filter(Boolean)[0],b=wo(),{getUserCollectList:j,getImportTokenList:B}=Ko(),[R,d]=w.useState(!1),[O,F]=w.useState(void 0),U=w.useMemo(()=>P||e==="pro",[P,e]);w.useEffect(()=>{U||W("Watchlist")},[U]);const g=w.useMemo(()=>U?[{iconSel:"/images/icon_watchlist_sel@2x.png",iconNor:"/images/icon_watchlist_nor@2x.png",label:"Watchlist"},{iconSel:"/images/icon_trending_sel@2x.png",iconNor:"/images/icon_trending_nor@2x.png",label:"Trending"}]:[{iconSel:"/images/icon_watchlist_sel@2x.png",iconNor:"/images/icon_watchlist_nor@2x.png",label:"Watchlist"}],[U]),eo=async()=>{try{const t=await T({...z,limit:tn});console.log("ðŸš€ ~ fetchProData ~ res.list:",t.list),setTimeout(()=>{var H;N(t.list&&((H=t.list)==null?void 0:H.length)>15?t.list.slice(0,15):t.list)},100)}catch(t){console.log("ðŸš€ ~ fetchProData ~ err:",t)}},so=async()=>{const t=Object.keys(u||{}),H=await c(t,z==null?void 0:z.date_type,"");console.log("ðŸš€ ~ fetchWatchList ~ res:",H),setTimeout(()=>{N(H)},100)},Z=w.useRef(null),J=w.useRef(null);w.useEffect(()=>{if(x==="Trending"&&U){N([]),d(!1),eo();const t=setInterval(()=>eo(),60*1e3);return()=>clearInterval(t)}},[x,U]),w.useEffect(()=>{d(!1),N(t=>t&&[...t])},[s]),w.useEffect(()=>{if(x==="Watchlist"){N([]),d(!1),$o(u)&&so();const t=setInterval(()=>{$o(u)&&so()},60*1e3);return()=>clearInterval(t)}},[u,x]);const[to,po]=w.useState(!1);w.useEffect(()=>{po(!0)},[]),w.useEffect(()=>{to&&(j(),B())},[to]),w.useEffect(()=>{if(!Z.current||!J.current||(h==null?void 0:h.length)==0)return;const t=J.current.offsetWidth,H=Z.current.scrollWidth;if(H>t){const E=R?H/2/80:H/80;console.log("ðŸš€ ~ CarouselBlock ~ duration:",E),F(`${E}s`),d(!0)}else d(!1)},[h]);const m=R?[...h,...h]:h;return v.jsxs(X,{w:"100%",justify:"flex-end",h:{base:"80px",lg:"41px"},position:"sticky",top:{base:"48px",lg:"80px"},bg:"bg_primary",zIndex:"99",mb:{base:"4px",lg:"0"},pl:{base:"12px",lg:"20px"},pt:{base:"24px",lg:"0px"},pb:{base:"12px",lg:"0px"},...p,children:[v.jsxs(X,{w:{base:(g==null?void 0:g.length)==1?"72px":"88px",lg:(g==null?void 0:g.length)==1?"104px":"146px"},flexDirection:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},gap:{base:"2px",lg:"8px"},pb:"9px",children:[((g==null?void 0:g.length)==1&&!r||(g==null?void 0:g.length)>1)&&v.jsx(X,{gap:"0",h:"28px",p:(g==null?void 0:g.length)==1?"2px 0":"2px",borderRadius:"8px",border:(g==null?void 0:g.length)==1?"none":"1px solid",borderColor:"border",bg:(g==null?void 0:g.length)==1?"none":"bg_secondary",children:g.map(t=>v.jsx(jo,{cursor:"pointer",onClick:()=>W(t.label),h:"100%",w:"24px",bg:x===t.label&&(g==null?void 0:g.length)>1?"primary_opacity.10":"none",borderRadius:"6px",children:v.jsx(Ao,{src:x===t.label?t.iconSel:t.iconNor,w:"16px",h:"16px"})},t.label))}),v.jsx(Xo,{showTooltip:!(r||x=="Watchlist"),placement:"top",tooltip:v.jsx(no,{fontSize:"12px",children:"Tokens trending over the past 24h."}),children:v.jsxs(X,{gap:"0",ml:(g==null?void 0:g.length)==1?"-8px":"0",children:[v.jsx(no,{color:(g==null?void 0:g.length)==1&&!r||(g==null?void 0:g.length)>1?"text_caption":"primary_gray",w:"62px",cursor:"pointer",_hover:{color:"primary"},onClick:()=>{M(x),e!=="pro"?b("/pro"):x=="Trending"&&$(z)},children:x}),v.jsx(Zo,{xlinkHref:"#icon-detail",svgW:"12px",svgH:"12px"})]})})]}),v.jsxs(Po,{overflow:"hidden",ref:J,whiteSpace:"nowrap",width:{base:(g==null?void 0:g.length)==1?"calc(100% - 72px)":"calc(100% - 88px)",lg:(g==null?void 0:g.length)==1?"calc(100% - 104px)":"calc(100% - 146px)"},position:"relative",p:"0px 0 9px",_hover:{"& > .carousel-track":{animationPlayState:"paused"}},children:[h&&(h==null?void 0:h.length)>0&&v.jsx(X,{className:"carousel-track",gap:"12px",ref:Z,animation:R&&O?`${an} ${O} linear infinite`:"none",willChange:"transform",minW:"fit-content",children:m==null?void 0:m.map((t,H)=>{var Y;return v.jsxs(X,{h:"32px",borderRadius:"8px",bg:"card_bg",cursor:"pointer",p:"0 8px",gap:"4px",_hover:{bg:"#2B3742"},onClick:()=>n(S==null?void 0:S.coin_type,t==null?void 0:t.coin_type),children:[x=="Trending"&&v.jsxs(no,{fontSize:"12px",color:"text_caption",children:["#",H%(h==null?void 0:h.length)+1]}),v.jsx(Jo,{warningIcon:{isNeedShow:!1,iconW:"12px",iconH:"12px"},token:t,haveName:!1,imgBoxStyle:{w:"20px",h:"20px"}}),v.jsx(no,{fontSize:"12px",color:"text_caption",ml:"12px",children:t==null?void 0:t.price}),v.jsx(no,{fontSize:"12px",color:(t==null?void 0:t.priceChange)=="--"||Number(t==null?void 0:t.priceChange)===0?"text_caption":(Y=t==null?void 0:t.priceChange)!=null&&Y.includes("-")?"primary_red":"primary_green",children:t==null?void 0:t.priceChange})]},`${t==null?void 0:t.coin_type}-${H}`)})}),R&&v.jsx(Po,{position:"absolute",left:"0",top:"0",bottom:"0",w:{base:"28px",lg:"60px"},pointerEvents:"none",bgGradient:"linear(to-r, #161616, transparent)"})]})]})}export{Wn as C,Sn as a,yo as b,ln as c,rn as d,on as e,In as g,z as t,cn as u};
