import{j as e,M as ne,o as ie,p as pe,$ as le,q as ce,t as xe,r as p,B as O,H as d,T as o,F as _,C as se,w as te,L as de,I as K,af as ue,V as E,n as ge,a8 as he}from"./vendor-CBmAETR3.js";import{d as h,I as V,C as oe,w as me,a as be,u as fe,B as je,c as re}from"./index-BpSfzecM.js";import{g as ae}from"./index-gw6wWhzj.js";import{T as Q}from"./TooltipIcon-DVhxXZmh.js";import{u as Se}from"./useTokenBalance-c3RAkCCY.js";import"./cross-DJ28FxNa.js";const Ce={id:"0x9258181f5ceac8dbffb7030890243caed69a9599d2886d957a9cb7656af3bdb3",coin_type:"0x2::sui::SUI",decimals:9,description:"",name:"Sui",symbol:"SUI",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",is_verified:!0,extensions:{rank:"880"}};function ye(l){const{isOpen:t,onClose:c,showFastMode:r=!0}=l;return e.jsxs(ne,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:c,isCentered:!0,children:[e.jsx(ie,{className:"test-slippage-modal"}),e.jsxs(pe,{children:[e.jsx(le,{fontSize:"16px",fontWeight:"500",children:"Settings"}),e.jsx(ce,{}),e.jsx(xe,{pb:"16px",children:e.jsx(we,{...l})})]})]})}const we=l=>{const{isOpen:t,onClose:c,value:r,onChange:P,compact:s=!1,slippageType:n="global",isWidget:T=!1,transactionMode:g,onChangeTransactionMode:N,maxCapForGas:F,onChangeMaxCapForGas:R,mevProtect:y,onChangeMevProtect:j,customGasPrice:G,onChangeCustomGasPrice:z,maxSlippage:S=50,minSlippage:i=.01,poolType:u,showFastMode:w=!0}=l,I=["0.1","0.5","1"],[a,m]=p.useState(""),[X,D]=p.useState(!1),{balanceInfo:v}=Se(Ce),[M,L]=p.useState(g),[b,U]=p.useState(F),[C,H]=p.useState(G),[B,W]=p.useState(y),$=x=>{const ee=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,2})?).*$");x.target.value=x.target.value.replace(ee,"$1"),m(x.target.value)},A=x=>{m(x)};p.useEffect(()=>{r&&m(String(r))},[r]),p.useEffect(()=>{r&&m(String(r))},[t]);const Y=()=>{if(a){const x=h(a).toNumber();P(x)}M==="Fast Mode"&&(R(b),z(C)),N(M),j(B),c()},Z=p.useMemo(()=>(console.log("ðŸš€ ~ btnIsDisabled ~ gasPrice:",C),M==="Fast Mode"&&(!b||Number(b)===0||Number(b)>5||!C||Number(C)===0||h(b).gt((v==null?void 0:v.balanceFormat)||"0")||h(b).lt(h(C).div(Math.pow(10,9))))||!+a?!0:n!=="vaults"?Number(a)>S||Number(a)<i:Number(a)>1),[n,a,M,b,C,v]);return e.jsxs(O,{w:"100%",children:[e.jsxs(O,{children:[e.jsxs(d,{mb:"16px",children:[e.jsx(V,{xlinkHref:"#icon-icon_verticalslider",svgHover:"text_paragraph",iconCursor:"text"}),e.jsx(o,{color:"text_caption",fontSize:"14px",fontWeight:"500",children:["global","zap"].includes(n)?"Swap Slippage Tolerance":n==="liquidity"&&u==="dlmm"?"Liquidity Slippage Tolerance":"Slippage Tolerance"}),u==="dlmm"&&e.jsx(oe,{tooltip:e.jsx(o,{fontSize:"12px",lineHeight:"20px",children:"The max price fluctuation you accept when adding/removing liquidity. Your txn will be reverted if the price changes by more than this percentage during the execution."}),children:e.jsx(O,{cursor:"pointer",children:e.jsx(V,{xlinkHref:"#icon-icon_tips",fontSize:"20px"})})})]}),e.jsxs(O,{bg:s?n!=="vaults"?Number(a)>50?"primary_red_opacity.10":"primary_yellow_opacity.10":Number(a)>1?"primary_red_opacity.10":"transparent":"transparent",borderRadius:"12px",children:[e.jsxs(d,{gap:"8px",mt:"8px",children:[e.jsx(_,{w:"100%",justifyContent:"center",alignItems:"center",borderRadius:"12px",border:"1px solid",borderColor:"border",background:"bg_secondary",h:"40px",p:"4px",children:I.map(x=>e.jsx(se,{flex:"1",bg:x===String(a)?"card_bg !important":"transparent",cursor:"pointer",h:"100%",borderRadius:"8px",sx:{_hover:{p:{color:"text_highlight"}}},onClick:()=>A(x),children:e.jsxs(o,{color:x===String(a)?"text_highlight":"text_paragraph",children:[x,"%"]})},x))}),e.jsx(ve,{compact:!0,inputValue:a,handleChange:$,wrapStyle:{flex:"0 0 150px",borderRadius:"12px"}})]}),a&&n!=="vaults"&&(Number(a)>1||Number(a)<.05)?e.jsxs(_,{w:"100%",children:[Number(a)<.05?e.jsx(_,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:s?"transparent":"primary_yellow_opacity.10",children:e.jsx(o,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Slippage is low. Your transaction may fail."})}):null,n!=="cross"&&Number(a)<=S&&Number(a)>1?e.jsx(_,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:s?"transparent":"primary_yellow_opacity.10",children:e.jsx(o,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Your transaction may be frontrun."})}):null,n==="cross"&&Number(a)<=S&&Number(a)>3?e.jsx(_,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:s?"transparent":"primary_yellow_opacity.10",children:e.jsx(o,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Your transaction may be frontrun."})}):null,Number(a)>S?e.jsx(_,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:s?"transparent":"primary_red_opacity.10",children:e.jsx(o,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null]}):null,a&&n==="vaults"&&Number(a)>1?e.jsx(_,{w:"100%",children:Number(a)>1?e.jsx(_,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:s?"transparent":"primary_red_opacity.10",children:e.jsx(o,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null}):null]}),n!=="zap"&&n!=="cross"&&n!=="deepbook"&&e.jsxs(e.Fragment,{children:[u!=="dlmm"&&w&&e.jsx(Me,{transactionMode:M,setTransactionMode:x=>{L(x),x==="Fast Mode"&&W(!0)},maxCapForGas:b,setMaxCapForGas:U,customGasPrice:C,setCustomGasPrice:H,suiBalance:(v==null?void 0:v.balanceFormat)||"0"}),e.jsx(_e,{mevProtect:B,setMevProtect:W,disabled:u==="dlmm"||!w?!1:M==="Fast Mode"})]})]}),e.jsxs(_,{align:"center",justifyContent:"space-between",mt:"20px",gap:"16px",children:[e.jsx(te,{flex:"1",h:"42px",variant:"outline",borderRadius:"8px",onClick:c,p:"0 15px",children:"Cancel"}),e.jsx(te,{flex:"1",h:"42px",borderRadius:"8px",onClick:Y,isDisabled:Z,children:"Save"})]})]})},ve=({inputValue:l,handleChange:t,wrapStyle:c={},compact:r=!1})=>e.jsxs(de,{alignItems:"center",justifyContent:"center",w:"100%",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",h:"42px",p:"12px 16px",position:"relative",...c,children:[e.jsx(o,{pr:"8px",h:"20px",lineHeight:"20px",borderRight:"1px solid",borderColor:r?"transparent":"border",children:"Custom"}),e.jsx(K,{borderRadius:"8px",h:"40px",mr:"2px",border:"none",variant:"outline",value:l,onChange:t,textAlign:"right",fontSize:"sm",placeholder:"0.0",pr:{base:"14px",lg:"8px"},pl:"0"}),e.jsx(ue,{width:"20px",height:"40px",top:"0.5px",right:{base:"12px",lg:"8px"},children:e.jsx(o,{fontSize:"sm",color:"text_caption",children:"%"})})]}),J=[{label:"Default"},{label:"Fast Mode",beforeIcon:{xlinkHref:"#icon-icon_flash",fontSize:"16px",activeColor:"#FFCA68",activeHoverColor:"#FFCA68"}}],Me=l=>{const{transactionMode:t,setTransactionMode:c,maxCapForGas:r,setMaxCapForGas:P,customGasPrice:s,setCustomGasPrice:n,suiBalance:T}=l,g=p.useMemo(()=>{var i;return(i=J.filter(u=>(u==null?void 0:u.label)===t))==null?void 0:i[0]},[t,J]),N=i=>{c(i.label)},F=i=>{const u=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");i.target.value=i.target.value.replace(u,"$1"),P(i.target.value)},R=i=>{const u=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");i.target.value=i.target.value.replace(u,"$1");const w=h(i.target.value).gt(0)?h(i.target.value).div(Math.pow(10,9)).toString():"0";h(w).gt(r)&&P(w),n(i.target.value)},y=p.useMemo(()=>!r||Number(r)==0?"Please enter a value higher than 0":r&&Number(r)>5?"Only allow up to 5 SUI":h(r).gt(T)?"Insufficient SUI balance ":h(r).lt(h(s).div(Math.pow(10,9)))?"Max cap cannot be less than custom gas.":"",[r]),j=p.useMemo(()=>r&&Number(r)>0&&Number(r)<2e-6?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[r]),G=p.useMemo(()=>!s||Number(s)==0?"Please enter a value higher than 0":"",[s]),z=p.useMemo(()=>s&&Number(s)>0&&h(s).lt(750)?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[s]),S=p.useMemo(()=>!s||s==="0"?"0":h(s).div(Math.pow(10,9)).toString(),[s]);return e.jsxs(E,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"12px",children:[e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsxs(d,{children:[e.jsx(V,{xlinkHref:"#icon-icon_mode"}),e.jsx(o,{color:"text_caption",fontSize:"14px",children:"Transaction Mode"})]}),e.jsx(me,{type:"outlineTab",tabList:J,currentTab:g==null?void 0:g.label,handleChangeTab:N,wrapStyle:{w:{lg:"206px",base:"164px"},h:"40px",p:"4px",borderRadius:"12px"},itemStyle:{flex:{lg:"1",base:"auto"},fontSize:"12px",margin:"0px",borderRadius:"8px"}})]}),e.jsx(o,{w:"100%",lineHeight:"20px",fontSize:"12px",children:t==="Default"?"Standard gas based on real-time network conditions":"Land your transaction earlier and avoid congestion with a higher gas price. MEV protection is on by default in Fast Mode."}),t==="Fast Mode"&&e.jsxs(E,{w:"100%",children:[e.jsxs(d,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(d,{justify:"flex-start",gap:"4px",children:[e.jsx(o,{whiteSpace:"nowrap",children:"Custom Gas Price"}),e.jsx(Q,{tooltipCon:"The total gas depends on the gas price and actual gas units consumed."})]}),e.jsxs(E,{align:"flex-end",gap:"0px",children:[e.jsxs(d,{gap:"0px",children:[e.jsx(K,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:s,onChange:R,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(o,{fontSize:"14px",color:"text_caption",children:"MIST"})]}),e.jsxs(o,{fontSize:"12px",color:"text_paragraph",children:[S," SUI"]})]})]}),G&&e.jsx(q,{text:G,type:"error"}),z&&e.jsx(q,{text:z,type:"warn"}),e.jsxs(d,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(d,{justify:"flex-start",gap:"4px",children:[e.jsx(o,{whiteSpace:"nowrap",children:"Set Max Cap for Gas"}),e.jsx(Q,{tooltipCon:"Set a max cap for your gas to prevent overpaying"})]}),e.jsx(E,{align:"flex-end",gap:"0px",children:e.jsxs(d,{gap:"0px",children:[e.jsx(K,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:r,onChange:F,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(o,{fontSize:"14px",color:"text_caption",children:"SUI"})]})})]}),y&&e.jsx(q,{text:y,type:"error"}),j&&e.jsx(q,{text:j,type:"warn"}),e.jsxs(d,{mt:"6px",children:[e.jsx(o,{children:"Powered by "}),e.jsx(ge,{src:"/images/icon_shio@2x.png",w:"46px",h:"14px"})]})]})]})},_e=l=>{const{mevProtect:t,disabled:c,setMevProtect:r}=l;return e.jsxs(E,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(d,{justify:"flex-start",w:"100%",children:[e.jsx(V,{xlinkHref:"#icon-icon_mev",svgFill:"text_paragraph"}),e.jsx(o,{fontSize:"14px",color:"text_caption",children:"MEV Protect"})]}),e.jsxs(d,{justify:"space-between",w:"100%",children:[e.jsxs(d,{gap:"4px",children:[e.jsx(o,{fontSize:"14px",color:"text_paragraph",children:"Enable MEV Protection"}),e.jsx(Q,{tooltipCon:"By enabling this, your txn will be submitted via 3rd party MEV service provider. MEV value retained will be redistributed to all users who successfully execute their trades with Shio through its point campaign."})]}),e.jsx(he,{isChecked:t,onChange:()=>r(!t),isDisabled:c})]})]})},q=l=>{const{text:t,type:c}=l;return e.jsx(se,{w:"100%",p:"4px 16px",borderRadius:"8px",bg:c==="warn"?"primary_yellow_opacity.10":"primary_red_opacity.10",children:e.jsx(o,{color:c==="warn"?"primary_yellow":"primary_red",fontSize:"12px",lineHeight:"20px",children:t})})};function Ee(l){const{onClick:t,toolTipText:c,maxSlippage:r,poolType:P,showFastMode:s}=l,{onSlippageVisible:n,showSlippage:T,isWidget:g,compact:N,settingOpen:F,onClose:R,onChange:y,slippageType:j,transactionMode:G,handleChangeTransactionMode:z,maxCapForGas:S,handleChangeMaxCapForGas:i,showMevProtect:u,handleChangeMevProtect:w,customGasPrice:I,handleChangeCustomGasPrice:a}=Pe(l);return e.jsxs(e.Fragment,{children:[e.jsx(oe,{tooltip:e.jsx(o,{fontSize:"12px",children:c||"Settings"}),children:j!=="zap"?e.jsx(d,{h:"28px",p:"4px 8px",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:g?"swap_bg_secondary":"bg_secondary",cursor:"pointer",gap:"6px",onClick:m=>{re(m),g?t&&t():n()},sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(e.Fragment,{children:[e.jsx(o,{fontWeight:"500",fontSize:"12px",children:ae(T)}),e.jsx(je,{bg:g?"swap_bg_secondary":"bg_secondary",p:"0",h:"28px",w:"28px",borderRadius:"8px",mr:"-9px",children:e.jsx(d,{align:"center",justify:"center",mt:"3px",children:e.jsx(V,{xlinkHref:"#icon-icon_verticalslider"})})})]})}):e.jsxs(d,{gap:"4px",borderBottom:"1px dashed",borderColor:"text_paragraph",pb:"2px",onClick:m=>{re(m),g?t&&t():n()},children:[e.jsx(o,{fontWeight:"500",color:"text_caption",fontSize:"12px",children:ae(T)}),e.jsx(o,{color:"text_paragraph",fontSize:"12px",children:"Slippage"})]})}),!g&&e.jsx(ye,{showFastMode:s,maxSlippage:r,isWidget:g,compact:N,isOpen:F,onClose:R,value:h(T).mul(100).toNumber(),onChange:y,slippageType:j,poolType:P,transactionMode:G,onChangeTransactionMode:z,maxCapForGas:S,onChangeMaxCapForGas:i,mevProtect:u,onChangeMevProtect:w,customGasPrice:I,onChangeCustomGasPrice:a})]})}function Pe(l){const{slippageType:t="global",compact:c,poolType:r,isWidget:P=!1,showFastMode:s=!0}=l,{slippage:n,setSlippage:T,vaultsSlippage:g,setVaultsSlippage:N,liquiditySlippage:F,setLiquiditySlippage:R,mevProtect:y,dlmmMevProtect:j,setDlmmMevProtect:G,setMevProtect:z,setTransactionMode:S,setMaxCapForGas:i,transactionMode:u,maxCapForGas:w,customGasPrice:I,setCustomGasPrice:a,zapSlippage:m,setZapSlippage:X,deepBookSlippage:D,setDeepBookSlippage:v,crossSwapSlippage:M,setCrossSwapSlippage:L,mergeSwapSlippage:b,setMergeSwapSlippage:U}=be(),[C,H]=p.useState(!1);fe();const B=()=>{H(!C)},W=()=>{H(!1)},$=f=>{console.log("Slippage ðŸš€ ~ onChange ~ value:",f),console.log("Slippage ðŸš€ ~ onChange ~ slippageType:",t);const k=h(f).div(100).toNumber();t==="vaults"?N(k):t==="zap"?(console.log("Slippage ðŸš€ ~ onChange ~ saveSlippageValue:",k),X(k)):t==="liquidity"?R(k):t==="deepbook"?v(k):t==="cross"?L(k):t==="merge_swap"?U(k):T(k)},A={global:n,vaults:g,zap:m,liquidity:F,cross:M,deepbook:D,merge_swap:b},Y=p.useMemo(()=>A[t],[t,n,g,m,F,M,D,b]),Z=p.useMemo(()=>r==="dlmm"||!s?j:y,[r,j,y]);return{onSlippageVisible:B,onClose:W,onChange:$,showSlippage:Y,isWidget:P,compact:c,settingOpen:C,slippageType:t,transactionMode:u,handleChangeTransactionMode:f=>{S(f)},maxCapForGas:w,handleChangeMaxCapForGas:f=>{i(f)},showMevProtect:Z,handleChangeMevProtect:f=>{r==="dlmm"||!s?G(f):z(f)},customGasPrice:I,handleChangeCustomGasPrice:f=>{a(f)}}}export{Ee as S,ye as a,we as b,Pe as u};
