import{r as S,j as t,H as _,V as O,T as L,m as Q,M as ke,o as Ge,p as Ne,$ as Oe,q as Me,t as ze,l as Ce,ad as Fe,w as fe,S as Ee,B as He}from"./vendor-CBmAETR3.js";import{u as Ve}from"./useChainTime-DkQgY6Ea.js";import{i as Ue,K as We,f as Z,d as A,l as Le,bU as me,dG as pe,z as de,j as qe,M as ne,w as je,u as oe,dy as ye,a as Ke,bL as $e,v as X,av as Je,aO as Ye,C as Qe,I as we,B as he,ce as Pe}from"./index-ihcskjKt.js";import{c as Xe,i as Ze,e as Ie,j as et,a as _e}from"./usePositionList-5SlPZsY2.js";import{T as tt}from"./cross-CbhIs7DK.js";import{c as st}from"./useGetPythTokenPrice-DxHNOitR.js";import{R as at}from"./RefreshButton-DtwRJDvy.js";import{N as ce}from"./NoData-BFX9XpKb.js";import{C as ot}from"./CoinPairInfo-CDiS7h0Q.js";import{M as lt}from"./msafe-BzcjPV-e.js";import{u as nt}from"./useAccountBalance-D7pkS3C9.js";import{u as it}from"./useTransaction-BEUdFaaa.js";import{u as rt}from"./useCurrentPos-qZJLM1cy.js";import{H as dt}from"./H5MapTable-CpOBMbH2.js";import{T as ct}from"./Table-CmEnXJpd.js";import{L as ut}from"./LiquidityAndYield-DOGWqOwH.js";import{u as mt}from"./useInterval-FApnpfRj.js";import"./useWrapPoolData-CzWcfmSl.js";import"./dlmm-B3MPeVqN.js";import"./utils-GUDa3Y46.js";import"./en_US-KAK2ZBDO-7b1QhAeP.js";import"./useFavoritePool-D10BRIh4.js";import"./useGetPoolList-BxNmDN4c.js";import"./useFavoriteDlmmPool-Kbo6eRe5.js";import"./useGetDlmmPoolList-x-FGvX6E.js";import"./config-DTm0VBgZ.js";import"./PoolTag-DVhitHGR.js";import"./useTrack-Cu3it5QI.js";import"./v4-C6aID195.js";import"./useSigner-C1gsxlX5.js";import"./useTransactionModal-DhEdYJgg.js";import"./detail-BpvHUFYz.js";import"./HiddenDotted-9cZ5UVdD.js";import"./usePosClaimFeeAndReward-R-HkZji1.js";import"./LiquidityValueBlock-DS5y0rnC.js";import"./activeOrders-CRpxOhzY.js";import"./CheckBox-CkL01dAe.js";import"./PieChart-Dq5PRqbH.js";import"./generateCategoricalChart-DzovH4HE.js";import"./debounce-MPJy35Ge.js";const pt=(e,l)=>({vaultPositionLoading:!1,setVaultPositionLoading:s=>{e(()=>({vaultPositionLoading:s}))},vaultPositionList:[],setVaultPositionList:s=>{e(()=>({vaultPositionList:s}))},vaultVestInfoObj:{},setVaultVestInfoObj:s=>{e(()=>({vaultVestInfoObj:s}))},clmmVestInfo:{},setClmmVestInfo:s=>{e(()=>({clmmVestInfo:s}))},posBaseListGroupByPool:{},setPosBaseListGroupByPool:s=>{e(()=>({posBaseListGroupByPool:s}))},posBaseListLoading:!1,setPosbaseListLoading:s=>{e(()=>({posBaseListLoading:s}))},posTotalCetusCompensation:"",setPosTotalCetusCompensation:s=>{e(()=>({posTotalCetusCompensation:s}))},posTotalAvailableClaim:"",setPosTotalAvailableClaim:s=>{e(()=>({posTotalAvailableClaim:s}))},vltTotalCetusCompensation:"",setVltTotalCetusCompensation:s=>{e(()=>({vltTotalCetusCompensation:s}))},vltTotalAvailableClaim:"",setVltTotalAvailableClaim:s=>{e(()=>({vltTotalAvailableClaim:s}))},posBaseList:[],setPosBaseList:s=>{e(()=>({posBaseList:s}))},redeemAllLoading:!1,setRedeemAllLoading:s=>{e(()=>({redeemAllLoading:s}))},vaultPosGroupByPool:[],setVaultPosGroupByPool:s=>{e(()=>({vaultPosGroupByPool:s}))}}),$=Ue(We(pt,{name:"useCompensationStore",partialize:e=>{const{vaultVestInfoObj:l,clmmVestInfo:s}=e;return{vaultVestInfoObj:l,clmmVestInfo:s}}}));function gt(){const e=Z("clmm"),{setClmmVestInfo:l}=$();return{getClmmVestInfo:async()=>{try{const a=await(e==null?void 0:e.Vest.getClmmVestInfo());if(console.log("ðŸš€ðŸš€ðŸš€ ~ useGetClmmVestInfo.ts:11 ~ getClmmVestInfo ~ res:",a),a){const r=a.global_vesting_periods.map(n=>({period:n.period,releaseTime:n.release_time,redeemedAmount:n.redeemed_amount,percentage:n.percentage})),o={...a,globalVestingPeriods:r};return l(o),o}}catch(a){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetClmmVestInfo.ts:28 ~ getClmmVestInfo ~ error:",a)}}}}function ge(){const{getPositionBaseList:e}=Xe(),{setPosBaseListGroupByPool:l,posBaseListLoading:s,setPosbaseListLoading:a,setPosTotalCetusCompensation:r,setPosTotalAvailableClaim:o,setPosBaseList:n,setRedeemAllLoading:d}=$(),{getPosPoolsOriginalObj:u,getPosPoolsRelatedData:m}=Ze(),{getClmmVestInfo:c}=gt(),{getAccurateTime:g}=Ve(),p=i=>i.reduce((x,b)=>{const v=b.clmmPool;return x[v]||(x[v]={list:[],clmmPoolAddress:v,tokenA:b.tokenA,tokenB:b.tokenB,isReverse:b.isReverse,displayTokenA:b.displayTokenA,displayTokenB:b.displayTokenB,vestData:b.vestData}),x[v].list.push(b),x},{}),C=async(i,x=!0)=>{if(i)try{x&&a(!0);const[b,v]=await Promise.all([c(),e(i,{useInVest:!0})]);console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationPositionPage.ts:60 ~ handleGetPositionList ~ rawList:",v),console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationPositionPage.ts:60 ~ handleGetPositionList ~ clmmVestInfo:",JSON.stringify(b));const f=await h(v.clmmPosBaseList,b);console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationPositionPage.ts:64 ~ handleGetPositionList ~ compensationList:",JSON.stringify(f[0]));const w=f.sort((E,M)=>A(M.vestData.cetusAmount).comparedTo(E.vestData.cetusAmount));n(w);const{totalAvailableClaim:z,totalCetusCompensation:R}=j(w);o(z),r(R);const y=p(w);l(y);const T=await u(w);m(w,T)}catch(b){console.error("handleGetPositionList error:",b)}finally{a(!1),d(!1)}},h=async(i,x)=>{const b=await g()/1e3;return i.reduce((v,f)=>{if(!Le(f==null?void 0:f.vestData))return v;const{isReverse:w,tokenA:z,tokenB:R}=f,y=f.vestData,T=A(y.impairedA||0).div(10**z.decimals).toString(),E=A(y.impairedB||0).div(10**R.decimals).toString(),M=y.periodDetails.map((F,J)=>{var re,te;const ee=((te=(re=x==null?void 0:x.global_vesting_periods)==null?void 0:re[J])==null?void 0:te.release_time)||0,se=A(F.cetusAmount||0).div(10**9),ie=A(b).gte(ee)&&!F.isRedeemed;return{...F,cetusAmount:se.toString(),releaseTime:ee,canClaim:ie,status:F.isRedeemed?"Claimed":ie?"Pending Claim":"Locked"}});let W=A(0),q=A(0);for(const F of M){const J=A(F.cetusAmount||0);A(b).gte(F.releaseTime)&&(W=W.add(J),F.isRedeemed||(q=q.add(J)))}const I=A(y.cetusAmount||0).div(10**9);return y.periodDetails=M,y.cetusAmount=I.toString(),y.releasedAmount=W.toString(),y.availableAmount=q.toString(),y.releasedAmountRatio=Math.ceil(I.gt(0)?W.div(I).mul(100).toNumber():0),y.impairedA=w?E:T,y.impairedB=w?T:E,v.push(f),v},[])},j=i=>{let x=A(0),b=A(0);for(const{vestData:v}of i)x=x.add((v==null?void 0:v.availableAmount)||0),b=b.add((v==null?void 0:v.cetusAmount)||0);return{totalAvailableClaim:x.toString(),totalCetusCompensation:b.toString()}};return{handleGetPositionList:C,posBaseListLoading:s,buildCompensationList:h,groupPositionsByPool:p}}function Re(){const e=Z("vaults"),{setVaultVestInfoObj:l}=$(),{volatileVaultsSdk:s}=me();return{getVaultsVestInfoList:async(r,o)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestInfo.ts:11 ~ getVaultsVestInfoList ~ haedalVaultIdList:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestInfo.ts:11 ~ getVaultsVestInfoList ~ vaultIdList:",r);try{const n=await(e==null?void 0:e.Vest.getVaultsVestInfoList(r)),d=pe=="open"?await s.Vest.getVaultsVestInfoList(o):[];if(console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestInfo.ts:11 ~ getVaultsVestInfoList ~ vestInfoList:",n,d),n||d){const u=[...n,...d].reduce((m,c)=>(m[c.vault_id]=c,m),{});return l(u),u}}catch(n){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestInfo.ts:14 ~ getVaultsVestInfoList ~ error:",n)}}}}function xt(e){return e.reduce((l,s)=>(l[s.vaultId]=s,l),{})}function bt(e){return console.log("ðŸš€ðŸš€ðŸš€ ~ wrapVaultVestList.ts:12 ~ wrapPeriodInfos ~ periodInfos:",e),e.map(l=>({period:l.period,amount:l.cetus_amount,isRedeemed:l.is_redeemed}))}async function ue(e,l){return e.map(s=>{console.log("ðŸš€ðŸš€ðŸš€ ~ wrapVaultVestList.ts:22 ~ wrapVaultVestList ~ nftItem:",s),console.log("ðŸš€ðŸš€ðŸš€ ~ wrapVaultVestList.ts:22 ~ wrapVaultVestList ~ vaultListObj:",l);const a=l[s.vault_id],{isReverse:r,tokenA:o,tokenB:n}=a,d=de(s.impaired_a).div(10**o.decimals).toString(),u=de(s.impaired_b).div(10**n.decimals).toString();return{...a,id:s.id,index:s.index,lpAmount:s.lp_amount,redeemedAmount:s.redeemed_amount,displayImpairedA:r?u:d,displayImpairedB:r?d:u,vestData:{...s,periodInfos:bt(s.period_infos)}}})}function Te(){const e=Z("vaults"),{volatileVaultsSdk:l}=me(),{getVaultPoolList:s}=st(),{setVaultPositionLoading:a,setVaultPositionList:r}=$(),o=pe=="open";return{getVaultVestList:async(u,m=!0)=>{m&&a(!0);try{const{poolList:c}=await s(),g=await(e==null?void 0:e.Vest.getOwnerVaultVestNFT(u)),p=o?await l.Vest.getOwnerVaultVestNFT(u):[];console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestList.ts:19 ~ getVaultVestList ~ nftList:",g),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestList.ts:20 ~ getVaultVestList ~ haedalNftList:",p);const C=xt(c);console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestList.ts:23 ~ getVaultVestList ~ vaultListObj:",C);const h=await ue(g,C),j=o?await ue(p,C):[],i=[...h,...j];console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestList.ts:24 ~ getVaultVestList ~ vaultList:",i);const x=qe.env=="testnet"?i==null?void 0:i.filter(b=>{var v,f,w,z,R,y,T,E;return((z=(w=(f=(v=e==null?void 0:e.sdkOptions)==null?void 0:v.vest)==null?void 0:f.config)==null?void 0:w.create_event_list)==null?void 0:z.some(M=>M.vault_vester_id===b.vestData.vester_id))||((E=(T=(y=(R=l==null?void 0:l.sdkOptions)==null?void 0:R.vest)==null?void 0:y.config)==null?void 0:T.create_event_list)==null?void 0:E.some(M=>M.vault_vester_id===b.vestData.vester_id))}):i;return console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestList.ts:39 ~ getVaultVestList ~ availableVestList:",x),r(x),x}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultVestList.ts:25 ~ getVaultVestList ~ error:",c),a(!1)}},getCurrentVaultVest:async(u,m,c,g)=>{let p;g=="haedal"?p=await(l==null?void 0:l.Vest.getOwnerVaultVestNFT(u)):p=await(e==null?void 0:e.Vest.getOwnerVaultVestNFT(u));const C=p==null?void 0:p.filter(j=>j.id==m);return ue(C,c)}}}function xe(){const{getVaultVestList:e}=Te(),{parseObjectKeysToCamelCase:l}=Ie(),{setVaultPosGroupByPool:s,setVltTotalCetusCompensation:a,setVltTotalAvailableClaim:r,setVaultPositionList:o,setRedeemAllLoading:n,setVaultPositionLoading:d}=$(),{getVaultsVestInfoList:u}=Re(),{getAccurateTime:m}=Ve(),c=async(h,j=!0)=>{if(!h)return;j&&d(!0);const i=await e(h,j);console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:18 ~ handleGetVaultList ~ vestList:",i),console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:18 ~ handleGetVaultList ~ vestList:",i);const x=[...new Set(i.filter(y=>y.category==="cetus").map(y=>y.vaultId))],b=[...new Set(i.filter(y=>y.category==="haedal").map(y=>y.vaultId))],v=await u(x,b),{processedList:f,totalAvailableClaim:w,totalCetusCompensation:z}=await g(i,v);console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:39 ~ handleGetVaultList ~ processedList:",f),console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:40 ~ handleGetVaultList ~ totalAvailableClaim:",w.toString());const R=f.sort((y,T)=>A(T.vestData.cetusAmount).comparedTo(y.vestData.cetusAmount));console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:38 ~ handleGetVaultList ~ sortedProcessedList:",R),o(R),r(w.toString()),a(z.toString()),s(C(R)),n(!1),d(!1)},g=async(h,j)=>{const i=await m()/1e3;let x=A(0),b=A(0);return{processedList:h.map(f=>{const w=p(f,j,i);return x=x.add(w.vestData.availableAmount),b=b.add(w.vestData.cetusAmount),w}),totalAvailableClaim:x,totalCetusCompensation:b}},p=(h,j,i)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:58 ~ parseVaultItem ~ vestInfoMap:",j);const{tokenA:x,tokenB:b,isReverse:v}=h,f=l(h.vestData);console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:57 ~ parseVaultItem ~ vestData:",f);const w=j[f.vaultId],z=f.periodInfos??[];console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:70 ~ parseVaultItem ~ vestInfo:",w);let R=A(0),y=A(0),T=A(0);const E=z.map((q,I)=>{var le,se;const F=A(q.amount||0).div(1e9),J=((se=(le=w.global_vesting_periods)==null?void 0:le[I])==null?void 0:se.release_time)??0,ee=A(i).gte(J)&&!q.isRedeemed;return T=T.add(F),A(i).gte(J)&&(R=R.add(F),q.isRedeemed||(y=y.add(F))),{...q,cetusAmount:F.toString(),releaseTime:J,canClaim:ee,status:q.isRedeemed?"Claimed":ee?"Pending Claim":"Locked",category:h.category}}),M=A(f.impairedA||0).div(10**x.decimals).toString(),W=A(f.impairedB||0).div(10**b.decimals).toString();return{...h,vestData:{...f,periodDetails:E,vaultsVestId:w.id,cetusAmount:T.toString(),releasedAmount:R.toString(),availableAmount:y.toString(),impairedA:v?W:M,impairedB:v?M:W,releasedAmountRatio:T.gt(0)?Math.ceil(R.div(T).mul(100).toNumber()):"0"}}},C=h=>(console.log("ðŸš€ðŸš€ðŸš€ ~ useCompensationVaultPage.ts:121 ~ groupVaultPositionsByPool ~ data:",h),h.reduce((j,i)=>{const x=i.clmmPoolAddress;return j[x]||(j[x]={list:[],isReverse:i==null?void 0:i.isReverse,tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,displayTokenA:i==null?void 0:i.displayTokenA,displayTokenB:i==null?void 0:i.displayTokenB,clmmPoolAddress:x,vestData:i==null?void 0:i.vestData,feeDisplay:i==null?void 0:i.feeDisplay,category:i==null?void 0:i.category,vaultId:i==null?void 0:i.vaultId}),j[x].list.push(i),j},{}));return{handleGetVaultList:c,groupVaultPositionsByPool:C,processVaultVestList:g,parseVaultItem:p}}function yt({currentTab:e,setCurrentTab:l,setRefreshCount:s}){const{handleGetPositionList:a}=ge(),{handleGetVaultList:r}=xe(),{currentAccount:o}=ne(),{posBaseList:n,vaultPositionList:d,posBaseListLoading:u,vaultPositionLoading:m}=$();console.log("ðŸš€ðŸš€ðŸš€ ~ CompensationHeader.tsx:17 ~ CompensationHaedar ~ vaultPositionList:",d);const c=S.useMemo(()=>{const g=o!=null&&o.address&&(n==null?void 0:n.length)>0?n.length:"",p=o!=null&&o.address&&(d==null?void 0:d.length)>0?d==null?void 0:d.length:"";return[{label:"Liquidity Positions",value:"positions",key:"positions",num:g},{label:"Vault",value:"vault",key:"vault",num:p}]},[n.length,d==null?void 0:d.length,e,o==null?void 0:o.address,u,m]);return t.jsx(_,{w:"100%",pos:"absolute",top:"0",minH:{base:"204px",lg:"174px"},bg:"compensation_header_bg",p:{base:"32px 8px 0",lg:"32px  0 0"},justifyContent:"center",alignItems:"flex-start",children:t.jsxs(O,{width:{base:"100%",lg:"1160px"},justifyContent:"flex-start",alignItems:"flex-start",gap:"12px",children:[t.jsx(L,{fontSize:"20px",color:"caption",fontWeight:"500",children:"Compensation"}),t.jsx(L,{color:"primary_gray",fontSize:"14px",children:"Claim your CETUS compensation here for exposed positions and vaults."}),t.jsxs(_,{w:"100%",justifyContent:"space-between",alignItems:"center",mt:"20px",children:[t.jsx(je,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"395px"},h:"48px",bg:"none",border:"none"},itemStyle:{marginRight:{base:"24px",lg:"40px"},fontSize:"16px",position:"relative"},tabList:c,currentTab:e,handleChangeTab:g=>{l(g.value)}}),t.jsx(at,{maxW:"32px",minW:"32px",h:"32px",iconStyle:{w:"16px",h:"16px"},handleRefresh:()=>{s(2e4),e=="positions"?a(o==null?void 0:o.address):r(o==null?void 0:o.address)},borderRadius:{base:"8px",lg:"8px"}})]})]})})}function Ae(){const{isApp:e}=oe();return t.jsxs(O,{w:"100%",bg:"bg_secondary",p:"16px",borderRadius:"16px",gap:"20px",align:"flex-start",children:[t.jsx(_,{w:"100%",justify:"space-between",children:t.jsx(_,{gap:"0",children:t.jsx(O,{gap:"4px",ml:"4px",align:"flex-start",children:t.jsx(Q,{height:"28px",width:"220px",borderRadius:"9px"})})})}),t.jsx(O,{w:{base:"100%",lg:"100%"},align:"flex-start",p:"16px",bg:"position_bg",borderRadius:"16px",border:"none",children:t.jsxs(_,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[t.jsx(O,{w:{base:"100%",lg:"40%"},gap:"4px",align:"flex-start",h:{base:"24px",lg:"58px"},justify:{base:"space-between",lg:"center"},flexDirection:{base:"row",lg:"column"},children:t.jsx(Q,{height:{base:"16px",lg:"26px"},width:{base:"100%",lg:"180px"},borderRadius:"12px"})}),t.jsxs(_,{w:{base:"100%",lg:"60%"},justifyContent:{base:"flex-start",lg:"space-between"},alignItems:{base:"flex-start",lg:"flex-end"},flexDirection:{base:"column",lg:"row"},children:[t.jsx(O,{gap:"4px",align:"flex-start",w:"100%",h:{base:"24px",lg:"58px"},justify:{base:"space-between",lg:"center"},flexDirection:{base:"row",lg:"column"},alignItems:"center",children:t.jsx(Q,{height:{base:"16px",lg:"26px"},width:{base:"100%",lg:"180px"},borderRadius:"12px"})}),t.jsx(O,{gap:"4px",align:"flex-start",w:"100%",h:{base:"24px",lg:"58px"},justify:{base:"space-between",lg:"center"},flexDirection:{base:"row",lg:"column"},alignItems:"center",children:t.jsx(Q,{height:{base:"16px",lg:"26px"},width:{base:"100%",lg:"180px"},borderRadius:"12px"})}),e?null:t.jsx(O,{gap:"4px",align:"flex-start",w:"100%",h:{base:"24px",lg:"58px"},justify:{base:"space-between",lg:"center"},flexDirection:{base:"row",lg:"column"},alignItems:"center",children:t.jsx(Q,{height:{base:"16px",lg:"26px"},width:{base:"100%",lg:"180px"},borderRadius:"12px"})})]})]})})]})}function ht(){const e=Z("burn");return{getBurnPosRedeemPayload:(s,a)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useBurnRedeem.ts:8 ~ getBurnPosRedeemPayload ~ params:",s);const r=s.map(o=>{var p,C,h,j;const{clmmPoolId:n,clmmPositionId:d,period:u,coinTypeA:m,coinTypeB:c,posId:g}=o;return{clmm_versioned_id:(C=(p=ye.clmm_vest)==null?void 0:p.config)==null?void 0:C.versioned_id,clmm_vester_id:(j=(h=ye.clmm_vest)==null?void 0:h.config)==null?void 0:j.clmm_vest_id,clmm_pool_id:n,burn_position_id:g,period:u,clmm_position_id:d,coin_type_a:m,coin_type_b:c}});return console.log("ðŸš€ðŸš€ðŸš€ ~ useBurnRedeem.ts:27 ~ getBurnPosRedeemPayload ~ options:",r),e==null||e.Burn.redeemVestPayload(r,a),{params:r,claimType:"burn"}}}}function Pt(){const e=Z("clmm");return{getClmmVestRedeemPayload:(s,a)=>{const r=s.map(o=>{const{clmmPoolId:n,clmmPositionId:d,period:u,coinTypeA:m,coinTypeB:c}=o;return{clmm_pool_id:n,clmm_position_id:d,period:u,coin_type_a:m,coin_type_b:c}});return e==null||e.Vest.buildRedeemPayload(r,a),{params:r,type:"clmm"}}}}function vt(){const e=Z("clmm"),l=Z("farms");return{getFarmVestRedeemPayload:async(a,r)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useFarmRedeem.ts:13 ~ getFarmVestRedeemPayload ~ params:",JSON.stringify(a));const o={pool_id:a==null?void 0:a.farmingPoolId,position_nft_id:a==null?void 0:a.farmPositionId},n=await l.Farms.withdrawReturnPayload(o,r);console.log("ðŸš€ ~ getFarmVestRedeemPayload ~ pos:",n,r);const d=[];a==null||a.period.forEach(m=>{const{clmmPoolId:c,coinTypeA:g,coinTypeB:p}=a;d.push({clmm_pool_id:c,clmm_position_id:n,coin_type_a:g,coin_type_b:p,period:m})}),console.log("ðŸš€ ~ getFarmVestRedeemPayload ~ redeemParms:",d),e.Vest.buildRedeemPayload(d,r);const u={clmm_pool_id:a==null?void 0:a.clmmPoolId,clmm_position_id:n,coin_type_a:a==null?void 0:a.coinTypeA,coin_type_b:a==null?void 0:a.coinTypeB,pool_id:a==null?void 0:a.farmingPoolId};return l.Farms.depositPayload(u,r),console.log("ðŸš€ðŸš€ðŸš€ ~ useFarmRedeem.ts:49 ~ getFarmVestRedeemPayload ~ tx:",r),{params:{withdrawParams:o,redeemParms:d,depositParams:u},type:"farms"}}}}function Ct(){const e=Z("vaults"),{volatileVaultsSdk:l}=me();return{getVaultRedeemPayload:async(a,r,o)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultRedeem.ts:8 ~ getVaultRedeemPayload ~ params:",a);const n=a.map(u=>{const{vaultId:m,vestingNftId:c,period:g,coinTypeA:p,coinTypeB:C}=u;return{vault_id:m,vesting_nft_id:c,period:g,coin_type_a:p,coin_type_b:C}}),d=r.map(u=>{const{vaultId:m,vestingNftId:c,vestCoinType:g,period:p,coinTypeA:C,coinTypeB:h}=u;return{vault_id:m,vesting_nft_id:c,period:p,coin_type_a:C,coin_type_b:h}});return n.length>0&&await(e==null?void 0:e.Vest.buildRedeemPayload(n,o)),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultRedeem.ts:38 ~ getVaultRedeemPayload ~ haedalOptions:",JSON.stringify(d)),d.length>0&&await(l==null?void 0:l.Vest.buildRedeemPayload(d,o)),{params:(n==null?void 0:n.length)>0?n:d,type:(n==null?void 0:n.length)>0?"vaults":"haedalVaults"}}}}function Se(e){const l=S.useMemo(()=>e==="vault",[e]),{signAndExecuteTransaction:s}=it(),{mevProtect:a,maxCapForGas:r,transactionMode:o,customGasPrice:n}=Ke(),{currentAccount:d}=ne(),{fetchAccountBalance:u}=nt(),[m,c]=S.useState(!1),{getClmmVestRedeemPayload:g}=Pt(),{getVaultRedeemPayload:p}=Ct(),{posBaseList:C,vaultPositionList:h,setPosBaseList:j,setPosBaseListGroupByPool:i,setPosTotalAvailableClaim:x,setPosTotalCetusCompensation:b,setVaultPositionList:v,setVaultPosGroupByPool:f,setVltTotalAvailableClaim:w,setVltTotalCetusCompensation:z,setRedeemAllLoading:R,clmmVestInfo:y,redeemAllLoading:T}=$(),{getCurrentPosByPosId:E}=rt(),{buildCompensationList:M,groupPositionsByPool:W,handleGetPositionList:q}=ge(),{groupVaultPositionsByPool:I,handleGetVaultList:F,processVaultVestList:J}=xe(),{getVaultsVestInfoList:ee}=Re(),{getCurrentVaultVest:le}=Te(),{getBurnPosRedeemPayload:se}=ht(),{getFarmVestRedeemPayload:ie}=vt(),re=k=>{var B,D;const P=[];for(const V of k){const K=((D=(B=V.vestData)==null?void 0:B.periodDetails)==null?void 0:D.filter(H=>H.canClaim).map(H=>H.period))||[];P[V.id]={clmmPoolId:V.clmmPool,clmmPositionId:V.posId,period:K,coinTypeA:V.coinTypeA,coinTypeB:V.coinTypeB,farmPositionId:V.id,farmingPoolId:V.farmsPool}}return console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:71 ~ buildFarmRedeemParams ~ result:",P),Object.values(P)||[]},te=k=>(console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:53 ~ buildRedeemParams ~ list:",k),k.flatMap(P=>{var B,D;return((D=(B=P.vestData)==null?void 0:B.periodDetails)==null?void 0:D.filter(V=>V.canClaim).map(V=>l?{vaultId:P.vaultId,vestingNftId:P.id,period:V.period,coinTypeA:P.tokenA.coinType,coinTypeB:P.tokenB.coinType}:{clmmPoolId:P.clmmPool,clmmPositionId:P.posId,period:V.period,coinTypeA:P.coinTypeA,coinTypeB:P.coinTypeB,posId:P.id}))??[]})),be=async k=>{const P=k?(l?h:C).filter(V=>(l?V.id:V.posId)===k):l?h:C;console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:79 ~ getRedeemPayload ~ list:",P);let B=new tt,D;if(l){const V=P.filter(G=>G.category=="cetus"),K=P.filter(G=>G.category=="haedal"),H=te(V),Y=te(K);console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:91 ~ getRedeemPayload ~ params:",H),D=await p(H,Y,B)}else{const V=P.filter(N=>N.posType=="clmm"),K=P.filter(N=>N.posType=="burn"),H=P.filter(N=>N.posType=="farms");console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:119 ~ getRedeemPayload ~ list:",P);const Y=te(K),G=te(V),U=re(H);if(console.log("useRedeem getRedeemPayload burnParams: ",Y),console.log("useRedeem getRedeemPayload clmmParams: ",G),console.log("useRedeem getRedeemPayload farmParams: ",U),Y.length>0&&(D=se(Y,B)),U.length>0){console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:130 ~ getRedeemPayload ~ farmParams:",U);for(let N=0;N<U.length;N++)D=await ie(U[N],B)}G.length>0&&(D=g(G,B))}return console.log("ðŸš€ ~ getRedeemPayload ~ msafeParams:",D),console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:104 ~ getRedeemPayload ~ tx:",B),{tx:B,msafeParams:{action:lt.PosVestingRedeem,txbParams:{...D}}}},De=async k=>{if(d!=null&&d.address){if(l)if(k){console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:138 ~ updateAfterRedeem ~ vaultPositionList:",h);const P=h.find(N=>N.id===k);if(!P)return;const B=await le(d.address,k,{[P.vaultId]:P},P.category);console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:142 ~ updateAfterRedeem ~ updated:",B);const D=h.map(N=>N.id===k?B[0]:N);console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:142 ~ updateAfterRedeem ~ updatedList:",D);const V=[],K=[];for(let N=0;N<D.length;N++){const ae=D[N];ae.category=="cetus"&&!V.includes(ae.vaultId)&&V.push(ae.vaultId),ae.category=="haedal"&&!K.includes(ae.vaultId)&&K.push(ae.vaultId)}const H=await ee(V,K);console.log("ðŸš€ðŸš€ðŸš€ ~ useRedeem.ts:149 ~ updateAfterRedeem ~ vestInfo:",H);const{processedList:Y,totalAvailableClaim:G,totalCetusCompensation:U}=await J(D,H);v(Y),f(I(Y)),w(G.toString()),z(U.toString())}else F(d.address);else if(k){const P=await E(d.address,k),B=await M([P],y),V=[...C.map(G=>G.posId===k?B[0]:G)].sort((G,U)=>U.vestData.cetusAmount-G.vestData.cetusAmount),K=W(V),H=V.reduce((G,U)=>G.add(U.vestData.availableAmount),de(0)),Y=V.reduce((G,U)=>G.add(U.vestData.cetusAmount),de(0));j(V),i(K),x(H.toString()),b(Y.toString())}else q(d.address);c(!1),R(!1)}};return{handleRedeem:async k=>{c(!0),R(!0);try{const{tx:P,msafeParams:B}=await be(k);await s(P,{},{maxCapForGas:r,customGasPrice:n,msafeParams:B})?(u(),setTimeout(()=>De(k),2e3)):(c(!1),R(!1))}catch(P){console.error("ðŸ§¨ handleRedeem error:",P),c(!1),R(!1)}},getRedeemPayload:be,redeemLoading:m,redeemAllLoading:T}}const ft={Claimed:{bg:"none",textColor:"white_color_opacity.50"},"Pending Claim":{bg:"primary_opacity.10",textColor:"primary"},Locked:{textColor:"text_caption",bg:"white_color_opacity.10"}},Vt=e=>ft[e];function Lt({isOpen:e,setIsOpen:l,periodDetails:s}){const a=S.useMemo(()=>[{title:t.jsx(L,{color:"primary_gray",fontSize:{base:"12px",lg:"14px"},children:"Release Date (UTC)"}),key:"date",render:o=>t.jsx(L,{color:"text_caption",fontSize:{base:"12px",lg:"14px"},children:$e(Number(o.releaseTime*1e3),"YMDHM")})},{title:t.jsx(L,{textAlign:"center",color:"primary_gray",fontSize:{base:"12px",lg:"14px"},children:"Amount (CETUS)"}),key:"amount",render:o=>t.jsx(L,{color:"text_caption",textAlign:"center",fontSize:{base:"12px",lg:"14px"},children:X(o.cetusAmount)})},{title:t.jsx(L,{color:"primary_gray",fontSize:{base:"12px",lg:"14px"},children:"Status"}),key:"status",render:o=>{const{bg:n,textColor:d}=Vt(o.status||"");return t.jsx(L,{as:"span",p:o.status!=="Claimed"?"2px 8px":"0",w:"auto",bg:n,borderRadius:"8px",color:d,fontSize:{base:"12px",lg:"14px"},children:o.status})}}],[]),{isApp:r}=oe();return t.jsxs(ke,{isOpen:e,onClose:()=>l(!1),isCentered:!0,children:[t.jsx(Ge,{}),t.jsxs(Ne,{minW:{base:"100%",lg:"500px"},children:[t.jsx(Oe,{children:"Compensation Details"}),t.jsx(Me,{mt:"0px"}),t.jsx(ze,{p:{base:"0 8px",lg:"0"},children:r?t.jsx(dt,{rowKey:"index",columns:a,dataSource:s,skeletonLength:3,loading:!1,itemHeight:"auto",rowStyle:(o,n)=>({w:"100%",p:"16px 8px",border:"none",bg:"#1C1C1C",borderRadius:"8px",gap:"16px"}),isShowBorder:!1}):t.jsx(ct,{rowKey:"index",columns:a,dataSource:s,skeletonLength:3,loading:!1,rowStyle:(o,n)=>({w:"100px",height:"48px",mt:n==0?"12px":"0",textAlign:"center",_hover:{bg:"none !important"}})})})]})]})}function jt({positionInfo:e,positionItemWidth:l=[],isVault:s=!1}){var C,h,j,i,x,b,v,f,w,z,R,y;const{getExplorerUrl:a}=Je(),{getClmmPosName:r}=et();Ce();const{posPoolsOriginalData:o}=_e(),n=S.useMemo(()=>{var T,E,M;if(s)return`#${(T=e==null?void 0:e.vestData)==null?void 0:T.index}`;if(console.log("ðŸš€ðŸš€ðŸš€ ~ CompensationPositionItemContent.tsx:34 ~ tokenName ~ positionInfo:",e),e!=null&&e.tokenName)return e==null?void 0:e.tokenName;{const W=(E=o==null?void 0:o[e==null?void 0:e.clmmPool])==null?void 0:E.index;return(M=r(Number(e==null?void 0:e.index),W))==null?void 0:M.split("|")[1]}},[e==null?void 0:e.tokenName,e==null?void 0:e.index,e==null?void 0:e.clmmPool,o,s]),[d,u]=S.useState(!1),{isApp:m}=oe(),{handleRedeem:c,redeemLoading:g}=Se(s?"vault":"positions"),p=S.useMemo(()=>{var T;if(s)return(T=e==null?void 0:e.vestData)==null?void 0:T.id;if(e.posType=="clmm")return e.posId;if(e.posType=="farms"||e.posType=="burn")return e.id},[e,s]);return t.jsxs(O,{w:"100%",bg:"position_bg",border:"none",p:{base:"20px 8px 16px",lg:"20px 16px 12px"},borderRadius:"16px",gap:"12px",children:[t.jsxs(_,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},children:[t.jsxs(O,{alignItems:"flex-start",w:{base:"100%",lg:l[0]},gap:{base:"20px",lg:"8px"},children:[t.jsxs(_,{w:{base:"100%",lg:"100%"},justify:{base:"space-between",lg:"flex-start"},children:[t.jsx(L,{color:"primary_gray",fontSize:{base:"14px",lg:"12px"},children:"ID"}),t.jsx(Q,{isLoaded:!0,children:t.jsx(L,{fontWeight:"500",fontSize:{base:"14px",lg:"12px"},color:"text_caption",children:n})})]}),t.jsxs(_,{w:{base:"100%",lg:"100%"},justify:{base:"space-between",lg:"flex-start"},children:[t.jsx(L,{color:"primary_gray",fontSize:{base:"14px",lg:"12px"},children:"Address"}),t.jsx(Ye,{fontWeight:"500",color:"text_caption",address:p,showLink:!1,fontSize:{base:"14px",lg:"12px"},onClickLink:()=>{window.open(a(p,"nftAddress"),"_blank")}})]})]}),t.jsxs(_,{w:{base:"100%",lg:l[1]},justify:{base:"space-between",lg:"flex-end"},children:[m&&t.jsx(L,{color:"primary_gray",fontSize:{base:"14px",lg:"12px"},children:"Total Compensation"}),t.jsxs(L,{color:"text_caption",children:[X((C=e==null?void 0:e.vestData)==null?void 0:C.cetusAmount),m?" CETUS":""]})]}),t.jsxs(_,{w:{base:"100%",lg:l[2]},justify:{base:"space-between",lg:"flex-end"},children:[m&&t.jsx(L,{color:"primary_gray",fontSize:{base:"14px",lg:"12px"},children:"Released Amount"}),t.jsxs(O,{alignItems:"flex-end",gap:"2px",children:[t.jsxs(L,{color:"text_caption",children:[X((h=e==null?void 0:e.vestData)==null?void 0:h.releasedAmount),m?" CETUS":""]}),t.jsxs(_,{gap:"4px",children:[t.jsxs(L,{fontSize:"12px",color:"primary",children:[(j=e==null?void 0:e.vestData)==null?void 0:j.releasedAmountRatio,"%"]}),t.jsx(Fe,{w:"60px",h:"4px",value:(i=e==null?void 0:e.vestData)==null?void 0:i.releasedAmountRatio,bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})]})]}),t.jsxs(_,{w:{base:"100%",lg:l[3]},justify:{base:"space-between",lg:"flex-end"},gap:"12px",children:[m&&t.jsx(L,{color:"primary_gray",fontSize:{base:"14px",lg:"12px"},children:"Avl. to Claim"}),t.jsxs(_,{children:[t.jsxs(L,{color:"text_caption",children:[X((x=e==null?void 0:e.vestData)==null?void 0:x.availableAmount),m?" CETUS":""]}),t.jsx(fe,{fontSize:"12px",w:"64px",h:"24px",borderRadius:"8px",onClick:()=>c(e.posId||e.id),isLoading:g,isDisabled:!((b=e==null?void 0:e.vestData)!=null&&b.availableAmount)||Number((v=e==null?void 0:e.vestData)==null?void 0:v.availableAmount)==0||g,children:"Claim"})]})]})]}),t.jsxs(_,{w:{base:"100%",lg:"100%"},justify:{base:"space-between",lg:"space-between"},borderTop:"1px solid",borderColor:"border",pt:{base:"16px",lg:"12px"},mt:{base:"4px",lg:"0"},flexDirection:{base:"column",lg:"row"},children:[t.jsxs(_,{justifyContent:"space-between",w:{base:"100%",lg:"unset"},children:[t.jsx(Qe,{placement:"top",children:t.jsxs(_,{alignItems:"center",gap:"0px",children:[t.jsx(L,{color:"primary_gray",fontSize:{base:"14px",lg:"12px"},children:"Position Loss"}),t.jsx(we,{xlinkHref:"#icon-icon_tips",svgW:"16px",svgH:"16px"})]}),tooltip:t.jsx(L,{lineHeight:"20px",fontSize:"12px",children:s?"Your loss in your vault liquidity according to the post-attack snapshot of your LP token share.":"Position loss calculated based on its pre-attack state and the resumed state."})}),t.jsx(Q,{isLoaded:!0,children:t.jsxs(_,{flexDirection:{base:"column",lg:"row"},alignItems:"flex-end",children:[t.jsxs(L,{fontWeight:"500",fontSize:{base:"14px",lg:"12px"},color:"text_caption",children:[X((f=e==null?void 0:e.vestData)==null?void 0:f.impairedA)," ",(w=e==null?void 0:e.displayTokenA)==null?void 0:w.symbol]}),t.jsxs(L,{fontWeight:"500",fontSize:{base:"14px",lg:"12px"},color:"text_caption",children:[X((z=e==null?void 0:e.vestData)==null?void 0:z.impairedB)," ",(R=e==null?void 0:e.displayTokenB)==null?void 0:R.symbol]})]})})]}),t.jsx(L,{color:"primary_gray",fontSize:{base:"14px",lg:"12px"},cursor:"pointer",userSelect:"none",_hover:{color:"primary"},onClick:()=>u(!0),mt:{base:"20px",lg:"0"},children:"Compensation Details >"})]}),t.jsx(Lt,{isOpen:d,setIsOpen:u,periodDetails:(y=e==null?void 0:e.vestData)==null?void 0:y.periodDetails})]})}const ve=["30%","25%","25%","25%"],wt=[{label:"NFT Info",value:"NFT Info"},{label:"Total  Compensation  (CETUS)",value:"Total  Compensation  (CETUS)"},{label:"Released Amount (CETUS)",value:"Released Amount (CETUS)"},{label:"Avl. to Claim  (CETUS)",value:"Avl. to Claim  (CETUS)"}];function _t({poolInfo:e,isVault:l}){const s=S.useMemo(()=>Le(e)?e.list:[],[e==null?void 0:e.list]);console.log("ðŸš€ðŸš€ðŸš€ ~ CompensationPositionItem.tsx:21 ~ positionList ~ positionList:",s);const{isApp:a}=oe();return t.jsxs(O,{gap:"12px",w:"100%",children:[!a&&t.jsx(_,{w:"100%",p:"0 16px",children:wt.map((r,o)=>t.jsx(_,{gap:"4px",w:ve[o],justify:o==0?"flex-start":"flex-end",children:t.jsx(L,{children:r.value})},r.value))}),t.jsx(O,{w:"100%",maxH:"440px",overflow:"auto",gap:{base:"8px",lg:"12px"},children:s.map(r=>t.jsx(jt,{positionInfo:r,positionItemWidth:ve,isVault:l},r==null?void 0:r.id))})]})}function Be({poolInfo:e,isShowPowered:l,isVault:s}){var m,c;console.log("ðŸš€ðŸš€ðŸš€ ~ CompensationPoolItem.tsx:12 ~ CompensationPoolItem ~ isShowPowered:",l),console.log("ðŸš€ðŸš€ðŸš€ ~ CompensationPoolItem.tsx:12 ~ CompensationPoolItem ~ poolInfo:",e);const a=Ce(),{posPoolsRelatedData:r}=_e(),[o,n]=S.useState(!0),d=S.useMemo(()=>{var g,p,C;return s?e.feeDisplay:(((C=r[(p=(g=e==null?void 0:e.list)==null?void 0:g[0])==null?void 0:p.posId])==null?void 0:C.displayFee)||"--")+"%"},[s,r,e]),{isApp:u}=oe();return t.jsx(he,{w:"100%",p:u?"8px":o?"12px 16px 16px":"12px 16px 8px",borderRadius:"16px",children:t.jsxs(O,{w:"100%",gap:{base:"16px",lg:"12px"},children:[t.jsxs(Ee,{direction:{base:"column",lg:"row"},justify:"space-between",w:"100%",gap:{base:"4px",lg:"8px"},onClick:()=>n(!o),height:{lg:"64px"},children:[t.jsx(ot,{type:"row",symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:d,...e,poolAddress:s?e==null?void 0:e.vaultId:e==null?void 0:e.clmmPoolAddress,poolType:"clmm"},haveName:!s,isShowPowered:l,versionBlockPosition:"right",clickFun:()=>{a(s?`/vaults-detail/${e==null?void 0:e.vaultId}/${e.category}`:`/liquidity?poolAddress=${e==null?void 0:e.clmmPoolAddress}`)}}),t.jsxs(_,{flexDirection:{base:"column",lg:"row"},gap:{base:"0px",lg:"8px"},children:[t.jsx(_,{mr:{base:"0px",lg:"8px"},w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"}}),t.jsx(_,{w:{base:"100%",lg:"unset"},flexDirection:{base:"column",lg:"row"},justify:"space-between",children:t.jsx(he,{cursor:"pointer",w:{base:"100%",lg:"unset"},p:"4px 0 4px 8px",h:"32px",borderRadius:"8px",bg:"none",border:{base:"1px solid",lg:"none"},borderColor:"border",_hover:{lg:{svg:{fill:"text_caption"},p:{color:"text_caption"}}},children:t.jsxs(_,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[t.jsxs(L,{fontSize:"12px",color:o?"text_caption":"text_paragraph",children:[(m=e==null?void 0:e.list)==null?void 0:m.length," ",((c=e==null?void 0:e.list)==null?void 0:c.length)>1?s?"NFTs":"Positions":s?"NFT":"Position"]}),t.jsx(we,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:o?"rotate(180deg)":"rotate(0deg)",svgFill:o?"text_caption":"text_paragraph"})]})})})]})]}),o&&t.jsx(_t,{poolInfo:e,isVault:s})]})})}function Rt(){var r;const{currentAccount:e,onWalletModal:l}=ne(),{posBaseListGroupByPool:s,posBaseListLoading:a}=$();return t.jsx(O,{w:"100%",gap:"12px",mt:{base:"0px",lg:"0"},children:e!=null&&e.address?a?[{},{},{}].map((o,n)=>t.jsx(Ae,{},n)):((r=Object.values(s))==null?void 0:r.length)>0?Object.values(s).map((o,n)=>t.jsx(Be,{poolInfo:o},n)):t.jsx(ce,{type:"nodata",text:"No compensation data"}):t.jsx(ce,{type:"nowallet",onboard:()=>l(!0)})})}function Tt({currentTab:e}){oe();const{posTotalCetusCompensation:l,posTotalAvailableClaim:s,vltTotalCetusCompensation:a,vltTotalAvailableClaim:r,posBaseListLoading:o,vaultPositionLoading:n}=$(),d=S.useMemo(()=>e=="positions"?l:a,[e,l,a]),u=S.useMemo(()=>e=="positions"?s:r,[e,s,r]),m=S.useMemo(()=>e=="positions"?o:n,[e,o,n]),c=S.useMemo(()=>{var i;return!!((i=Pe)!=null&&i.inMSafeWallet())},[Pe]),{handleRedeem:g,redeemLoading:p,redeemAllLoading:C}=Se(e),h=()=>t.jsxs(_,{w:"100%",justifyContent:"space-between",children:[t.jsx(L,{fontSize:{base:"13px",lg:"16px"},color:"primary_gray",children:"Total CETUS Compensation"}),t.jsx(Q,{isLoaded:!m,h:m?"28px":"auto",children:t.jsxs(L,{fontSize:{base:"14px",lg:"20px"},color:"primary",children:[X(d)," CETUS"]})})]}),j=()=>t.jsxs(_,{gap:"12px",w:"100%",justifyContent:"space-between",children:[t.jsx(L,{fontSize:{base:"13px",lg:"16px"},color:"primary_gray",children:"Available to Claim"}),t.jsx(Q,{isLoaded:!m,h:m?"28px":"auto",children:t.jsxs(_,{gap:"12px",children:[t.jsxs(L,{fontSize:{base:"14px",lg:"20px"},color:"primary_green",children:[X(u)," CETUS"]}),!c&&t.jsx(fe,{w:{base:"88px",lg:"112px"},h:{base:"24px",lg:"32px"},borderRadius:"8px",fontSize:"12px",fontWeight:"500",onClick:()=>g(),isLoading:p||C,isDisabled:!u||Number(u)==0||p||C,children:"Claim All"})]})})]});return t.jsx(ut,{leftChildren:t.jsx(h,{}),rightChildren:t.jsx(j,{})})}function At(){var m;const{vaultPositionLoading:e,vaultPosGroupByPool:l,vaultPositionList:s}=$();console.log("ðŸš€ðŸš€ðŸš€ ~ CompensationVault.tsx:31 ~ CompensationVault ~ vaultPosGroupByPool:",l);const{currentAccount:a,onWalletModal:r}=ne(),[o,n]=S.useState("all"),d=S.useMemo(()=>o=="all"?l:Object.values(l).filter(c=>c.category==o),[o,l]),u=S.useMemo(()=>{const c=!e&&(a!=null&&a.address)?s.filter(p=>p.category=="cetus").length:"",g=!e&&(a!=null&&a.address)?s.filter(p=>p.category=="haedal").length:"";return[{label:"All Vaults",value:"all",key:"all",num:!e&&(a!=null&&a.address)&&s.length>0?s.length:""},{label:"Cetus",value:"cetus",key:"cetus",num:c>0?c:""},{label:"Haedal",value:"haedal",key:"haedal",num:g>0?g:"",comingSoon:pe!=="open"}]},[o,l,e,a==null?void 0:a.address]);return t.jsxs(O,{w:"100%",gap:{base:"20px",lg:"12px"},alignItems:"flex-start",mt:{base:"4px",lg:"0"},children:[t.jsx(je,{type:"outlineTab",wrapStyle:{w:{base:"100%",lg:"496px"},h:"42px",borderRadius:{base:"8px",lg:"12px"},padding:"4px"},itemStyle:{w:"50%",fontSize:"16px",borderRadius:"8px"},tabList:u,currentTab:o,handleChangeTab:c=>{n(c.value)}}),a!=null&&a.address?e?[{},{},{}].map((c,g)=>t.jsx(Ae,{},g)):((m=Object.values(d))==null?void 0:m.length)>0?Object.values(d).map((c,g)=>t.jsx(Be,{isVault:!0,poolInfo:c,isShowPowered:c.category=="haedal"},g)):t.jsx(ce,{type:"nodata",text:"No compensation data"}):t.jsx(ce,{type:"nowallet",onboard:()=>r(!0)})]})}function hs(){const[e,l]=S.useState("positions"),{currentAccount:s}=ne(),{handleGetPositionList:a}=ge(),{handleGetVaultList:r}=xe(),{setPosBaseList:o,setVaultPositionList:n}=$();S.useEffect(()=>{s!=null&&s.address&&(o([]),n([]),a(s==null?void 0:s.address),r(s==null?void 0:s.address))},[s==null?void 0:s.address]);const[d,u]=S.useState(2e4);return mt({interval:d,callback:()=>{s!=null&&s.address&&(e=="positions"?a(s==null?void 0:s.address,!1):r(s==null?void 0:s.address,!1))}}),t.jsxs(O,{w:"100%",gap:"12px",children:[t.jsx(yt,{currentTab:e,setCurrentTab:l,setRefreshCount:u}),t.jsx(He,{h:{base:"204px",lg:"174px"}}),(s==null?void 0:s.address)&&t.jsx(Tt,{currentTab:e}),e=="positions"&&t.jsx(Rt,{}),e=="vault"&&t.jsx(At,{})]})}export{hs as default};
//# sourceMappingURL=Compensation-Dxkxe9ta.js.map
