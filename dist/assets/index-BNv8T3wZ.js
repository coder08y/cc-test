import{r as p,j as e,a4 as at,o as He,a5 as rt,q as me,B as F,$ as Re,X as xt,t as Ee,v as ot,w as L,V as P,C as U,Z as je,H as u,T as c,O as We,Q as $e,U as Be,ad as ct,M as pt,p as dt,ac as Me,m as gt,i as Fe,ai as ge,aj as ne,al as ut,am as ht,an as xe,ah as jt,I as bt,n as ue}from"./vendor-CBmAETR3.js";import{u as ce}from"./index-9yHNdYxH.js";import{av as pe,u as $,aO as ie,C as ee,S as N,d as X,p as yt,I as W,M as le,bo as wt,E as M,l as ve,c as fe,w as be,s as ze,bL as St,B as oe,t as he,Z as De,bl as mt,dS as Ue,dg as ft}from"./index-Lo8eQgA0.js";import{v as _t}from"./cross-J9VCREIf.js";import{u as te}from"./useDocumentSize-DzZXzGS0.js";import{C as Ct}from"./CheckBox-BfyJMUfq.js";import{u as ye,d as vt,e as zt}from"./CarouselBlock-BQy99RwQ.js";import{H as ae}from"./H5MapTable-7L-1qe6k.js";import{N as V}from"./NoData-BFX9XpKb.js";import{T as re,P as _e}from"./Table-N6ht64Bc.js";import{u as Ve,a as Ge,b as Ce,c as Dt}from"./useGetDcaOrderHistory-CecPEcq4.js";import{u as Ne}from"./useAccountBalance-Bp-GiNHM.js";import{u as Ke}from"./useTransaction-C3m_5TTr.js";import{u as Pt}from"./activeOrders-Blk-EQ9B.js";import{u as Ze}from"./useTokenRank-CM-9-tXe.js";import{D as Tt}from"./Drawer-DX1wga2y.js";import{H as I}from"./HTextLabelBox-0wWY3DfK.js";import{H as kt}from"./HistoryCard-Bb9R2Df9.js";import{C as Ye,P as Xe,E as qe,F as Qe,S as At,L as Ot,u as Je,O as Lt,b as Ht,a as Rt,c as Et}from"./useGetLimitOrderHistory-C13-CU61.js";import{u as Wt}from"./useRpcListener-aeXKG1ty.js";import{b as $t}from"./FarmsTable-xW-zVNxM.js";import{u as Bt}from"./LimitPriceChart-5hthKx3o.js";import{T as Ie}from"./TypeCon-DisMvTLJ.js";import"./index-BgoHGJbV.js";import"./debounce-MPJy35Ge.js";import"./index-D8UqOC8m.js";import"./en_US-KAK2ZBDO-KTAiToGz.js";import"./v4-C6aID195.js";import"./useTrack-T_4vPqTb.js";import"./useSigner-Dol5aKH6.js";import"./useTransactionModal-Bz8Bofje.js";import"./IconText-B4zyVb8C.js";import"./usePreviousValue-Da-o2xpb.js";import"./usePositionList-Bupy7RnX.js";import"./useWrapPoolData-tzYpVDlL.js";import"./dlmm-DZG9_A9Y.js";import"./utils-BTUfT3hi.js";import"./useFavoritePool-D0G8SNHz.js";import"./useGetPoolList-Bo7JxsYj.js";import"./index-mfa-9p2R.js";import"./ExpendItem-DrEG4ZJp.js";import"./LiquidityValueBlock-BFN5N1z7.js";import"./msafe-BzcjPV-e.js";import"./PositionPriceRangeBar-Df3DgWEY.js";import"./RangeValue-D-wFxWdA.js";import"./CoinPairInfo-BkYX588i.js";import"./config-DTm0VBgZ.js";import"./PoolTag-DVhitHGR.js";import"./charting_library.esm-BuRCvzzK.js";import"./useProData-C_Hyt5cN.js";import"./RefreshButton-BEUAg1WA.js";import"./SearchInput-Ci9E2gMO.js";import"./FilterTable-DLAlxMD_.js";function Mt({title:t,isOpen:n,onClose:i,children:s,cancelText:l,okText:r,onSubmit:x,footer:j=!1,placement:a="right",size:g,wrapStyle:o={},titleStyle:w={},haveCloseButton:d=!1}){const h=p.useMemo(()=>["left","right"].includes(a),[a]);return e.jsxs(at,{isOpen:n,placement:a,onClose:i,size:g||"md",children:[e.jsx(He,{}),e.jsxs(rt,{sx:h?{"@supports (height: 100dvh)":{h:"100dvh !important"},"@supports not (height: 100dvh)":{h:"100vh !important"},minH:"calc(100vh - 80px) !important"}:{},borderRadius:h?"0px":"16px 16px 0 0",...o,children:[d&&e.jsx(me,{mt:"-2px",color:"text_caption"}),t&&e.jsxs(e.Fragment,{children:[e.jsx(me,{color:"text_caption"}),e.jsxs(F,{p:h?"16px":"0 16px",...w,children:[e.jsx(Re,{p:"0",children:t}),!h&&e.jsx(xt,{orientation:"horizontal"})]})]}),e.jsx(Ee,{children:s}),e.jsx(ot,{children:typeof j!="boolean"?j:j&&e.jsxs(e.Fragment,{children:[e.jsx(L,{variant:"outline",mr:3,onClick:i,children:l}),e.jsx(L,{colorScheme:"blue",onClick:x,children:r})]})})]})]})}const Pe=10;function Ft({maxHeight:t}){const{getExplorerUrl:n}=pe(),{showTokenInfo:i,topHoldersTotal:s,topHolders:l,topHoldersLoading:r,coinBvPrice:x}=ce(),{getTopHolders:j}=ye(),{isApp:a}=$(),[g,o]=p.useState(!1),[w,d]=p.useState(1),[h,y]=p.useState([]);p.useEffect(()=>{i!=null&&i.coin_type&&(d(1),j(i.coin_type,1,Pe))},[i==null?void 0:i.coin_type]),p.useEffect(()=>{(l==null?void 0:l.length)>0?y(b=>w>1?[...b,...l]:[...l]):(y([]),d(1)),o(!1)},[l]);const C=()=>{o(!0);const b=w+1;i!=null&&i.coin_type&&(j(i.coin_type,w+1,Pe),d(b))};return te(),e.jsxs(P,{w:"100%",position:"relative",gap:"20px",children:[!r&&(h==null?void 0:h.length)===0?e.jsx(V,{type:"nodata",noBorder:!0,bg:"none"}):a?e.jsx(P,{w:"100%",gap:"4px",children:e.jsx(ae,{rowKey:"holder",columns:Te(i,n,x),dataSource:h,loading:r&&!g,itemSkeletonLength:5,itemHeight:"24px",rowStyle:(b,v)=>({w:"100%",p:"0px",mt:"12px"})})}):e.jsx(re,{rowKey:"holder",columns:Te(i,n,x),dataSource:h,skeletonLength:3,fixedHeader:!0,maxHeight:t,loading:r&&!g,isFlexStart:!0,trPadding:"0px",rowStyle:{h:"40px",_hover:{bg:"none !important"}}}),(g||!r)&&(h==null?void 0:h.length)<s&&(g?e.jsx(U,{w:"200px",margin:"auto",textAlign:"center",pb:"16px",pt:"8px",children:e.jsx(je,{size:"sm"})}):e.jsx(U,{children:e.jsx(L,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:C,children:"Load More"})}))]})}const Te=(t,n,i)=>[{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"#"}),key:"#",thConfig:{w:"15%"},render:(s,l)=>e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:l+1})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Account"}),key:"holder",thConfig:{w:"25%"},render:s=>e.jsxs(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:[e.jsx(ie,{address:s==null?void 0:s.holder,fontSize:"13px",showLink:!1,color:"text_caption",onClickLink:()=>window.open(n(s==null?void 0:s.holder,"account"))}),!!(s!=null&&s.image)&&e.jsx(ee,{placement:"top",tooltip:e.jsx(c,{fontSize:"12px",lineHeight:"20px",maxW:"280px",children:s==null?void 0:s.name}),children:e.jsx(N,{imageUrl:s==null?void 0:s.image,imgBoxStyle:{w:"16px",h:"16px"}})})]})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Balance"}),key:"balance",thConfig:{w:"25%"},render:s=>e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:s==null?void 0:s.balanceDisplay})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"USD Value"}),key:"usdValue",thConfig:{w:"25%"},render:s=>{const l=i!=null&&i.price?X(i==null?void 0:i.price).mul(s==null?void 0:s.balance).toString():"--";return e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:l!=="--"?yt(l,2):"--"})})}},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Percentage"}),key:"percentage",thConfig:{w:"10%"},render:s=>e.jsx(u,{w:"100%",justify:"flex-end",children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:s==null?void 0:s.percentage})})}],et=({currenTab:t,tabList:n,onChange:i})=>e.jsx(We,{isLazy:!0,children:({isOpen:s,onClose:l})=>e.jsxs(e.Fragment,{children:[e.jsx($e,{as:L,variant:"outline",h:"32px",border:"none",height:"32px",bg:"none",p:"0px",lineHeight:"16px",_hover:{bg:"none"},_active:{bg:"none"},onClick:()=>{console.log("Menu opened or toggled")},children:e.jsxs(u,{gap:"0",justify:"center",children:[e.jsx(c,{color:"primary_gray",fontSize:{base:"14px",lg:"13px"},children:t}),e.jsx(W,{mt:"1px",xlinkHref:"#icon-icon_arrow",svgW:"14px",transition:"transform 0.5s",svgH:"14px",transform:s?"rotate(180deg)":"none"})]})}),e.jsx(Be,{zIndex:9999,p:"4px",minW:"100px",children:e.jsx(P,{gap:"0px",children:n==null?void 0:n.map(r=>e.jsx(u,{h:"30px",justify:"center",w:"100%",p:"0 12px",cursor:"pointer",onClick:()=>{i(r.label),l()},children:e.jsx(c,{fontSize:"12px",color:r.label==t?"text_caption":"text_paragraph",children:r.label})},r.label))})})]})});function Ut(){const[t,n]=p.useState(!1),[i,s]=p.useState(!1),{dcaWithdrawPayload:l}=Ve(),{dcaCloseOrderPayload:r}=Ge(),{signAndExecuteTransaction:x}=Ke(),{fetchAccountBalance:j}=Ne(),{currentAccount:a}=le(),{getDcaOrderList:g}=Ce();return{closeAll:async d=>{s(!0);try{const h=d==null?void 0:d.map(b=>({order_id:b==null?void 0:b.orderID,in_coin_type:b==null?void 0:b.inCoin.coin_type,out_coin_type:b==null?void 0:b.outCoin.coin_type}));console.log("ðŸš€ ~ const closeOrderParams:any=pageList.map ~ closeOrderParams:",h);const y=await r(h),C=await x(y,{getShowInfo:b=>{const v={modalDescriptionText:"Closing DCA order",toastTitleText:"Closing DCA order"};return b==="success"&&(v.modalDescriptionText="DCA Order Closed",v.toastDescriptionContent="",v.toastTitleText="DCA Order Closed"),v}});console.log("ðŸš€ ~ closeAll ~ res:",C),C&&setTimeout(()=>{j(),g(a==null?void 0:a.address)},2e3),s(!1)}catch(h){console.log("ðŸš€ ~ closeAll ~ error:",h),s(!1)}},claimAll:async d=>{n(!0);try{const h=d==null?void 0:d.map(b=>({order_id:b==null?void 0:b.orderID,in_coin_type:b==null?void 0:b.inCoin.coin_type,out_coin_type:b==null?void 0:b.outCoin.coin_type}));console.log("ðŸš€ ~ const claimOrderParams:any=pageList.map ~ claimOrderParams:",h);const y=await l(h),C=await x(y,{getShowInfo:b=>{const v={modalDescriptionText:"DCA Order Claimed",toastTitleText:"DCA Order Claimed"};return b==="success"&&(v.toastDescriptionContent=""),v}});console.log("ðŸš€ ~ claimAll ~ res:",C),C&&setTimeout(()=>{j(),g(a==null?void 0:a.address)},2e3),n(!1)}catch(h){console.log("ðŸš€ ~ claimAll ~ error:",h),n(!1)}},isClaimAllLoading:t,isCloseAllLoading:i}}function tt({orderInfo:t}){const{inCoin:n,outCoin:i}=t;return e.jsxs(u,{children:[e.jsx(wt,{coinAIconUrl:n==null?void 0:n.logo_url,coinBIconUrl:i==null?void 0:i.logo_url,coinACoinType:n==null?void 0:n.coin_type,coinBCoinType:i==null?void 0:i.coin_type,w:"20px",h:"20px"}),e.jsxs(c,{color:"text_caption",fontSize:"13px",children:[n==null?void 0:n.symbol," â†’ ",i==null?void 0:i.symbol]})]})}function Vt({orderInfo:t,isProfile:n}){const{inCoin:i}=t,{isApp:s}=$();return e.jsxs(u,{flexDirection:n?s?"row":"column":"row",align:n?"flex-end":"center",gap:n?"4px":"8px",children:[e.jsxs(u,{children:[e.jsxs(c,{color:"text_caption",fontSize:n?"13px":"12px",children:[M(t==null?void 0:t.inDepositedOut)," ",i==null?void 0:i.symbol]}),e.jsxs(c,{color:n?"text_caption":"primary_gray",fontSize:n?"13px":"12px",children:["/ ",M(t==null?void 0:t.inDeposited)," ",i==null?void 0:i.symbol]})]}),e.jsxs(u,{children:[e.jsxs(c,{color:"primary_gray",fontSize:"12px",children:["(",t==null?void 0:t.inBalanceRatio,"%)"]}),(!n||!s)&&e.jsx(ct,{w:n?"40px":"50px",h:"4px",value:t==null?void 0:t.inBalanceRatio,bg:"#282828",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})]})}function st(){const[t,n]=p.useState(!1),[i,s]=p.useState(!1),[l,r]=p.useState(!1),[x,j]=p.useState([]),[a,g]=p.useState(0),{currentAccount:o}=le(),{dcaWithdrawPayload:w}=Ve(),{fetchCoinBalance:d}=Ne(),{signAndExecuteTransaction:h}=Ke(),{getDcaOrderList:y}=Ce(),{dcaCloseOrderPayload:C}=Ge(),{getDcaOrderHistory:b}=Dt();return{toClaim:async(S,O)=>{n(!0);try{console.log("ðŸš€ ~ closeOrder ~ orderInfo:",S);const m=[],_={order_id:S==null?void 0:S.orderID,in_coin_type:S==null?void 0:S.inCoin.coin_type,out_coin_type:S==null?void 0:S.outCoin.coin_type};m.push(_),console.log("ðŸš€ ~ toClaim ~ claimOrderParams:",m);const D=await w(m),A=await h(D,{getShowInfo:R=>{var T,G;const E={modalDescriptionText:`${(T=S==null?void 0:S.outCoin)==null?void 0:T.symbol} Claimed`,toastTitleText:`${(G=S==null?void 0:S.outCoin)==null?void 0:G.symbol} Claimed`};return R==="success"&&(E.toastDescriptionContent=""),E}});A&&(console.log("ðŸš€ ~ toClaim ~ res:",A),setTimeout(()=>{d(o==null?void 0:o.address,S==null?void 0:S.outCoin.coin_type),console.log("223213123123callback: ",O),O&&O(o==null?void 0:o.address)},2e3)),n(!1)}catch(m){console.log("ðŸš€ ~ toClaim ~ error:",m),n(!1)}},closeOrderAction:async S=>{s(!0);try{console.log("ðŸš€ ~ closeOrder ~ orderInfo:",S);const O=[{order_id:S==null?void 0:S.orderID,in_coin_type:S==null?void 0:S.inCoin.coin_type,out_coin_type:S==null?void 0:S.outCoin.coin_type}];console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:280 ~ closeOrder ~ closeOrderParams:",O);const m=await C(O),_=await h(m,{getShowInfo:D=>{const A={modalDescriptionText:"Closing DCA order",toastTitleText:"Closing DCA order"};return D==="success"&&(A.modalDescriptionText="DCA Order Closed",A.toastDescriptionContent="",A.toastTitleText="DCA Order Closed"),A}});console.log("ðŸš€ ~ closeOrder ~ res:",_),_&&setTimeout(()=>{d(),y(o==null?void 0:o.address)},2e3),s(!1)}catch(O){console.log("ðŸš€ ~ closeOrder ~ error:",O),s(!1)}},isCloseLoading:i,isClaimLoading:t,total:a,orderHistoryList:x,handleGetDcaOrderHistory:async(S,O,m,_=!1)=>{var A,R,E,T;console.log("ðŸš€ ~ handleGetDcaOrderHistory ~ loading:",_),r(_);const D=await b({orderId:S,limit:O,offset:m});console.log("ðŸš€ ~ handleGetDcaOrderHistory ~ res?.list:",D),ve(D)&&((A=D[S])!=null&&A.list)&&j((R=D[S])==null?void 0:R.list),ve(D)&&((E=D[S])!=null&&E.total)&&g((T=D[S])==null?void 0:T.total),r(!1),console.log("ðŸš€ ~ file: TestData.tsx:170 ~ handleGetDcaOrderHistory ~ res:",D)},orderHistoryListLoading:l}}const Se=({text:t,xlinkHref:n,svgFill:i="text_paragraph",onClick:s,svgSize:l="20px",svgMl:r="0px"})=>e.jsxs(u,{w:"100%",cursor:"pointer",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",_hover:{svg:{fill:"primary"},p:{color:"primary"}},onClick:x=>{fe(x),s()},children:[n&&e.jsx(W,{svgFill:i,xlinkHref:n,svgHover:"primary",svgW:l,svgH:l,minW:l,minH:l,ml:r}),e.jsx(c,{fontSize:"13px",children:t})]});function Gt(t){const{type:n,children:i,wrapStyle:s,menuHeight:l="60px",haveActiveLine:r=!0,textStyle:x={fontSize:"16px"}}=t,j=(a,g)=>"title"in t?!1:t!=null&&t.isActive?t==null?void 0:t.isActive(a,g):a===g.value;return $(),e.jsxs(u,{justify:"space-between",w:"100%",h:l,...s,sx:{">div":{p:{"&:before":{bg:r?"primary":"none"}}}},children:["title"in t?e.jsx(c,{color:"text_caption",...x,children:t==null?void 0:t.title}):e.jsx(be,{type:"borderTab",tabList:t.tabs,currentTab:t.currentTab,handleChangeTab:t.onTabChange,isActive:(a,g)=>j(a,g),wrapStyle:{h:l,border:"none",gap:"38px",...s},itemStyle:x}),i]})}function Nt({orderInfo:t,isActiveOrder:n,pageDirect:i}){const{inCoin:s,outCoin:l}=t,{orderHistoryList:r,handleGetDcaOrderHistory:x,orderHistoryListLoading:j}=st();p.useEffect(()=>{t!=null&&t.orderID&&x(t==null?void 0:t.orderID,9999,0,!0)},[t==null?void 0:t.orderID]);const{getExplorerUrl:a}=pe(),[g,o]=p.useState(i),w=142,d=(r==null?void 0:r.length)||0,h=(r==null?void 0:r.length)==0?"0px":(r==null?void 0:r.length)<=1?`${w*d+8}px`:`${w*d+(d-1)*32+8}px`;return e.jsxs(P,{pb:"16px",align:"flex-start",w:"100%",gap:"32px",position:"relative",h:(r==null?void 0:r.length)>=3?"460px":"unset",overflowY:"auto",children:[!j&&e.jsx(F,{w:"0px",h,borderRight:"1px dashed",borderColor:"border",position:"absolute",left:"6px",top:"8px"}),j?e.jsx(u,{h:"100px",w:"100%",justify:"center",children:e.jsx(je,{})}):(r==null?void 0:r.length)===0?e.jsx(V,{type:"nodata",text:"No orders",p:"12px",bg:"none"}):r.map(y=>{const C=ze(y.inAmount,s==null?void 0:s.decimals),b=ze(y.outAmount,l==null?void 0:l.decimals),v=X(C).div(b).toString(),k=X(1).div(v).toString();return e.jsxs(P,{pl:"20px",align:"flex-start",w:"100%",children:[e.jsxs(u,{w:"100%",gap:"16px",justifyContent:"space-between",position:"relative",children:[e.jsxs(c,{h:"20px",lineHeight:"20px",children:[St((y==null?void 0:y.time)*1e3,"YMDHM")," (UTC)"]}),e.jsx(W,{fontSize:"16px",xlinkHref:"#icon-icon_link1",onClick:()=>{window.open(a(y==null?void 0:y.tx,"tx"))}}),e.jsx(u,{justify:"center",h:"12px",w:"12px",bg:"primary_opacity.20",position:"absolute",left:"-20px",top:"4px",zIndex:"99999",borderRadius:"50%",children:e.jsx(F,{h:"6px",w:"6px",bg:"primary",borderRadius:"50%"})})]}),e.jsx(oe,{p:"16px",borderRadius:"12px",children:e.jsxs(P,{align:"flex-start",gap:"16px",children:[e.jsxs(P,{gap:"4px",align:"flex-start",children:[e.jsx(c,{whiteSpace:"nowrap",color:"text_caption",fontSize:"16px",h:"20px",lineHeight:"20px",children:g?`${M(v)} `:`${M(k)} `}),e.jsxs(u,{children:[e.jsx(c,{whiteSpace:"nowrap",h:"20px",fontSize:"12px",lineHeight:"20px",children:g?` ${s.symbol} per ${l.symbol}`:` ${l.symbol} per ${s.symbol}`}),e.jsx(W,{xlinkHref:"#icon-icon_swap1",svgW:"14px",svgH:"14px",ml:"-6px",onClick:()=>o(!g)})]})]}),e.jsxs(u,{w:"100%",gap:"4px",children:[e.jsx(N,{imageUrl:s==null?void 0:s.logo_url,w:"20px",h:"20px"}),e.jsx(c,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:`${M(C)}`}),e.jsx(c,{whiteSpace:"nowrap",h:"20px",lineHeight:"20px",children:` ${s.symbol}`}),e.jsx(c,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:" â†’ "}),e.jsx(N,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"}),e.jsx(c,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:`${M(b)}`}),e.jsx(c,{whiteSpace:"nowrap",h:"20px",lineHeight:"20px",children:`${l.symbol}`})]})]})})]},y==null?void 0:y.tx)})]})}function Kt({orderInfo:t,isActiveOrder:n,pageDirect:i,isClaimLoading:s=!1,toClaim:l}){const{inCoin:r,outCoin:x}=t;return e.jsxs(P,{pb:"24px",children:[(t==null?void 0:t.isShowTradeTips)&&(t==null?void 0:t.orderStatus)=="Active"&&n&&e.jsx(qt,{}),e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(tt,{orderInfo:t}),n&&l&&e.jsx(L,{isLoading:s,onClick:()=>l(t),isDisabled:(t==null?void 0:t.outBalance)<=0||s,h:"32px",fontSize:"12px",borderRadius:"8px",lineHeight:"32px",p:"0 8px",fontWeight:"500",children:"Claim"})]}),e.jsx(c,{fontSize:"16px",color:"text_caption",children:Zt(t,n,!0)}),e.jsx(c,{fontSize:"12px",children:"Amount Withdrawn"}),e.jsxs(u,{w:"100%",justify:"space-around",children:[e.jsxs(P,{children:[e.jsx(c,{fontSize:"16px",color:"text_caption",children:Yt(t)}),e.jsxs(c,{fontSize:"12px",children:["DCA ",r==null?void 0:r.symbol," Balance"]})]}),e.jsx(F,{as:"span",display:"inline-block",w:"1px",h:"20px",bg:"border"}),e.jsxs(P,{children:[e.jsx(c,{color:"text_caption",fontSize:"16px",children:Xt(t)}),e.jsxs(c,{fontSize:"12px",children:["DCA ",x==null?void 0:x.symbol," Balance "]})]})]}),e.jsxs(P,{mt:"28px",w:"100%",gap:"20px",children:[e.jsx(I,{label:"Invest Every",value:t==null?void 0:t.investEvery}),X(t==null?void 0:t.ofOrderLeft).gt("0")&&e.jsx(I,{label:"Orders Left",value:t==null?void 0:t.ofOrderLeft}),e.jsx(I,{label:"Each Order Size",value:`${t==null?void 0:t.eachOrderSize} ${r==null?void 0:r.symbol}`}),n&&((t==null?void 0:t.currentAvgPrice)&&(t==null?void 0:t.currentAvgPrice)!=="--"||(t==null?void 0:t.currentAvgPriceResever)&&(t==null?void 0:t.currentAvgPriceResever)!=="--")&&e.jsx(I,{label:"Current Avg. Price",value:i?`${t==null?void 0:t.currentAvgPrice} ${r==null?void 0:r.symbol} per ${x==null?void 0:x.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${x==null?void 0:x.symbol} per ${r==null?void 0:r.symbol}`}),!n&&(t==null?void 0:t.currentAvgPrice)!=="--"&&e.jsx(I,{label:"Avg. Price",value:i?`${t==null?void 0:t.currentAvgPrice} ${r==null?void 0:r.symbol} per ${x==null?void 0:x.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${x==null?void 0:x.symbol} per ${r==null?void 0:r.symbol}`}),n&&e.jsx(I,{label:"Next Order (UTC)",value:t==null?void 0:t.nextCycleAt}),e.jsx(I,{label:"Created (UTC)",value:t==null?void 0:t.createAt})]})]})}const Zt=(t,n,i=!1)=>{const{inCoin:s,outCoin:l}=t;return n?`${M(t==null?void 0:t.outWithdraw,2)} ${l==null?void 0:l.symbol}`:(t==null?void 0:t.orderStatus)==="PartialDeal"||(t==null?void 0:t.orderStatus)==="Close"?X(t==null?void 0:t.outWithdraw).gt(0)?e.jsxs(e.Fragment,{children:[M(t==null?void 0:t.inWithdrawn)," ",s==null?void 0:s.symbol,i&&e.jsx(F,{as:"span",display:"inline-block",m:"0 8px",w:"1px",h:"14px",bg:"border"}),M(t==null?void 0:t.outWithdraw)," ",l==null?void 0:l.symbol]}):`${M(t==null?void 0:t.inWithdrawn)} ${s==null?void 0:s.symbol}`:`${M(t==null?void 0:t.outWithdraw)} ${l==null?void 0:l.symbol}`},Yt=t=>M(t==null?void 0:t.inBalance,2)||"0",Xt=t=>(t==null?void 0:t.outBalance)>0?M(t==null?void 0:t.outBalance):t==null?void 0:t.outBalance,qt=()=>{const[t,n]=p.useState(!1);return e.jsxs(P,{p:"12px",align:"flex-start",bg:"primary_yellow_opacity.10",borderRadius:"8px",children:[e.jsxs(u,{align:"center",w:"100%",cursor:"pointer",onClick:()=>n(!t),children:[e.jsx(c,{fontSize:"12px",color:"primary_yellow",lineHeight:"20px",textAlign:"left",children:"The system tried to execute your order multiple times but did not get it through. This is possibly because:"}),e.jsx(W,{transform:t?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.5s",svgW:"12px",svgH:"12px",variant:"warning",xlinkHref:"#icon-icon_arrow"})]}),t&&e.jsxs(P,{align:"flex-start",w:"100%",children:[e.jsx(F,{w:"100%",h:"1px",bg:"primary_yellow_opacity.10",m:"4px 0"}),e.jsx(Qt,{})]})]})};function Qt(){return e.jsxs(P,{align:"flex-start",w:"100%",children:[e.jsx(c,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market price is not in your required price range"}),e.jsx(c,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market no longer exit"}),e.jsx(c,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market is extremely volatile"}),e.jsx(c,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",textAlign:"left",children:"This DCA will continue to be attempted and the estimated end date may be extended until your order is fully executed."})]})}function Jt({isOpen:t,onClose:n,orderInfo:i,isActiveOrder:s,isClaimLoading:l=!1,toClaim:r}){const{isApp:x}=$(),[j,a]=p.useState("overview"),{inCoin:g,outCoin:o}=i||{},w=[{label:"Overview",value:"overview"},{label:"Orders",value:"orders"}],[d,h]=p.useState(!1),{getTokenRank:y}=Ze();p.useEffect(()=>{if(g!=null&&g.coin_type&&(o!=null&&o.coin_type)){const v=y(g,o);console.log("ðŸš€ ~ TokenRank:",o,g,v),h(!v)}},[g==null?void 0:g.coin_type,o==null?void 0:o.coin_type]);const C=e.jsx(F,{w:"100%",borderBottom:"1px solid",borderColor:"border",children:e.jsx(Gt,{type:"tab",currentTab:j,tabs:w,onTabChange:v=>a(v.value),textStyle:{fontSize:"16px"},wrapStyle:{bg:"none",mt:"-12px",mb:"-4px"}})}),b=e.jsxs(e.Fragment,{children:[j==="overview"&&e.jsx(Kt,{orderInfo:i,isActiveOrder:s,pageDirect:d,isClaimLoading:l,toClaim:r}),j==="orders"&&e.jsx(Nt,{orderInfo:i,isActiveOrder:s,pageDirect:d})]});return x?e.jsx(It,{isOpen:t,onClose:n,renderTabs:C,renderContent:b}):e.jsxs(pt,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:n,isCentered:!0,children:[e.jsx(He,{}),e.jsxs(dt,{minWidth:"482px",children:[e.jsx(Re,{children:C}),e.jsx(me,{}),e.jsx(Ee,{p:"0 16px 0px",textAlign:"center",children:b})]})]})}function It({isOpen:t,onClose:n,renderTabs:i,renderContent:s}){return console.log("DetailDrawer rendered",t),e.jsxs(Tt,{isOpen:t,onClose:n,placement:"bottom",haveCloseButton:!0,children:[i,e.jsx(F,{h:"20px"}),s]})}function es({orderInfo:t,isActiveOrder:n=!0,refresh:i}){const{isApp:s}=$(),[l,r]=p.useState(!1),{getExplorerUrl:x}=pe(),{isClaimLoading:j,toClaim:a,closeOrderAction:g,isCloseLoading:o}=st(),{isOpen:w,onOpen:d,onClose:h}=Me(),y=()=>r(!0),C=()=>{o||g(t)},b=(t==null?void 0:t.outBalance)<=0||j,v=k=>{a(k,i)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{justify:"flex-end",children:n?e.jsxs(e.Fragment,{children:[e.jsx(L,{isLoading:j,onClick:()=>v(t),isDisabled:b,h:"32px",fontSize:"12px",borderRadius:"8px",fontWeight:"500",p:"0 8px",w:{base:"calc(100vw - 84px)",lg:"unset"},children:"Claim"}),e.jsx(ee,{placement:"bottom-end",showTooltip:!s,tooltip:e.jsx(nt,{getExplorerUrl:x,orderInfo:t,closeOrderAction:C,handleOpenDetail:y}),children:e.jsx(U,{children:e.jsx(L,{variant:"outline",w:"32px",h:"32px",p:"0",borderRadius:"8px",onClick:s?d:void 0,sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(W,{svgFill:s?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{w:{base:"calc(100vw - 84px)",lg:"unset"},onClick:y,h:"32px",fontSize:"12px",variant:"outline",borderRadius:"8px",fontWeight:"500",p:"0 8px",children:"Details"}),e.jsx(ee,{placement:"bottom-end",showTooltip:!s,tooltip:e.jsx(c,{fontSize:"12px",children:"View on Explorer"}),children:e.jsx(U,{children:e.jsx(L,{onClick:k=>{fe(k),window.open(x(t.orderID,"poolAddress"))},w:"32px",p:"0",h:"32px",fontSize:"12px",borderRadius:"8px",variant:"outline",_hover:{svg:{fill:"primary"}},children:e.jsx(W,{fontSize:"16px",xlinkHref:"#icon-icon_link1"})})})})]})}),l&&e.jsx(Jt,{isOpen:l,onClose:()=>r(!1),orderInfo:t,isActiveOrder:n,isClaimLoading:j,toClaim:v}),e.jsx(ts,{isOpen:w,onClose:h,getExplorerUrl:x,orderInfo:t,closeOrderAction:C,handleOpenDetail:y})]})}function nt({getExplorerUrl:t,orderInfo:n,closeOrderAction:i,handleOpenDetail:s}){return e.jsxs(P,{align:"flex-start",children:[e.jsx(Se,{text:"View Details",onClick:s}),e.jsx(Se,{text:"View on Explorer",onClick:()=>{window.open(t(n.orderID,"poolAddress"))}}),e.jsx(Se,{text:(n==null?void 0:n.outBalance)<=0?"Close":"Close and Withdraw",onClick:i})]})}function ts({isOpen:t,onClose:n,getExplorerUrl:i,orderInfo:s,closeOrderAction:l,handleOpenDetail:r}){return e.jsx(Mt,{isOpen:t,onClose:n,placement:"bottom",children:e.jsx(P,{align:"flex-start",sx:{">div":{w:"100%",">div":{justifyContent:"center",background:"none",p:{color:"text_caption",fontSize:"16px"}}}},children:e.jsx(nt,{getExplorerUrl:i,orderInfo:s,closeOrderAction:l,handleOpenDetail:r})})})}function ss({orderInfo:t,isProfile:n=!1,isRank:i=!1}){const s="400",l=p.useMemo(()=>({minPrice:t==null?void 0:t.minPrice,maxPrice:t==null?void 0:t.maxPrice,minPriceResever:t==null?void 0:t.minPriceResever,maxPriceResever:t==null?void 0:t.maxPriceResever}),[t]),r=p.useMemo(()=>t==null?void 0:t.outCoin,[t]),x=p.useMemo(()=>t==null?void 0:t.inCoin,[t]),[j,a]=p.useState(!0),{getTokenRank:g}=Ze();p.useEffect(()=>{if(i){const d=g(r,x);console.log("ðŸš€ ~ useEffect ~ direct:",d),a(d)}},[i,r==null?void 0:r.coin_type,x==null?void 0:x.coin_type]);const o=n?"13px":"12px",w=n?"text_paragraph":"primary_gray";return e.jsx(u,{mt:n?"0px":"3px",justify:n?"flex-end":"flex-start",children:e.jsx(gt,{isLoaded:!!(l!=null&&l.minPrice)&&!!r&&!!x,children:e.jsxs(u,{flexWrap:"wrap",gap:"4px",justify:"flex-start",align:n?"flex-end":"center",flexDirection:n?"column":"row",children:[e.jsx(c,{lineHeight:"16px",h:"16px",fontSize:o,fontWeight:s,color:"text_caption",whiteSpace:"nowrap",children:j?`${l==null?void 0:l.minPrice} - ${l==null?void 0:l.maxPrice}`:`${l==null?void 0:l.minPriceResever} - ${l==null?void 0:l.maxPriceResever}`}),e.jsxs(u,{gap:"4px",children:[e.jsxs(u,{gap:"0",children:[e.jsx(c,{fontSize:"12px",fontWeight:s,color:w,children:he(j?x==null?void 0:x.symbol:r==null?void 0:r.symbol,10)}),e.jsx(c,{fontSize:"12px",fontWeight:s,color:w,children:"Â perÂ "}),e.jsx(c,{fontSize:"12px",fontWeight:s,color:w,children:he(j?r==null?void 0:r.symbol:x==null?void 0:x.symbol,10)})]}),e.jsx(W,{xlinkHref:"#icon-icon_swap1",w:"14px",h:"14px",onClick:d=>{fe(d),a(!j)}})]})]})})})}function ns({currentOrderTab:t,orderTabList:n,setCurrentOrderTab:i,maxHeight:s}){const{currentAccount:l,onWalletModal:r}=le(),{getDcaOrderList:x}=Ce(),{setDcaOrderListLoading:j,dcaOrderListLoading:a,dcaActiveOrderList:g,dcaPastOrderList:o,setDcaActiveOrderList:w,setDcaPastOrderList:d}=Pt(),h=async(H,B=!1)=>{B&&j(!0),await x(H),j(!1)};p.useEffect(()=>{l!=null&&l.address&&h(l==null?void 0:l.address,!0)},[l==null?void 0:l.address]);const[y,C]=p.useState("Active DCAs"),b=y==="Active DCAs",v=10,k=p.useMemo(()=>[{label:"Active DCAs",value:"Active DCAs",num:a?"":g==null?void 0:g.length},{label:"Past DCAs",value:"Past DCAs",num:a?"":o==null?void 0:o.length}],[a,g,o]),z=p.useMemo(()=>b?g:o,[b,g,o]),{isApp:S}=$(),{closeAll:O,claimAll:m,isClaimAllLoading:_,isCloseAllLoading:D}=Ut(),{isOpen:A,onOpen:R,onClose:E}=Me(),[T,G]=p.useState([]),[se,Z]=p.useState(0),[K,Y]=p.useState(1),q=p.useMemo(()=>!b||!(z!=null&&z.length)?"0":z.reduce((H,B)=>X(H).plus((B==null?void 0:B.outBalance)||0),X(0)).toString(),[b,z]),Q=X(q).isZero()||_,J=!(z!=null&&z.length)||D,f=p.useMemo(()=>is(b,h),[b]);return p.useEffect(()=>{const H=(z==null?void 0:z.length)||0,B=(K-1)*v,we=B+v;H>0?H<=B?Y(1):(Z(H),G(z.slice(B,we))):(G([]),Z(0))},[z,K]),te(),e.jsxs(P,{w:"100%",children:[e.jsxs(u,{w:"100%",justify:"space-between",mt:{base:"0px",lg:"12px"},children:[e.jsxs(u,{gap:{base:"8px",lg:"16px"},children:[e.jsx(be,{type:"outlineTab",tabList:n,currentTab:t,handleChangeTab:H=>i(H==null?void 0:H.label),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 8px",borderRadius:"4px",gap:"4px"}}),e.jsx(et,{currenTab:y,tabList:k,onChange:H=>{const B=k.find(we=>we.label===H);B&&C(B==null?void 0:B.label)}})]}),b&&(z==null?void 0:z.length)>1&&(S?e.jsx(L,{bg:"card_bg",variant:"outline",w:"28px",h:"28px",p:"0",borderRadius:"8px",onClick:R,sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(W,{svgFill:"primary",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})}):e.jsx(ls,{isClaimAllLoading:_,claimDisabled:Q,claimAll:()=>m(z),isCloseAllLoading:D,closeDisabled:J,closeAll:()=>O(z)}))]}),e.jsxs(P,{w:"100%",position:"relative",gap:"20px",children:[l!=null&&l.address?!a&&(z==null?void 0:z.length)===0?e.jsx(V,{type:"nodata",text:b?"No active DCAs":"No past DCAs",noBorder:!0,bg:"none"}):S?e.jsx(ae,{rowKey:"orderID",columns:f,dataSource:T,loading:a,itemSkeletonLength:3,itemHeight:"24px",isShowBorder:!1,rowStyle:()=>({borderRadius:"12px",border:"1px solid",borderColor:"border",bg:"bg_secondary",p:"12px 8px"})}):e.jsx(re,{rowKey:"orderID",columns:f,dataSource:T,loading:a,trPadding:"0px",fixedHeader:!0,maxHeight:s,rowStyle:{h:"48px",cursor:"pointer",_hover:{bg:"none !important"}}}):e.jsx(V,{type:"nowallet",noBorder:!0,bg:"none",mt:"-4px",onboard:()=>{r(!0)}}),(z==null?void 0:z.length)>v&&e.jsx(U,{children:e.jsx(_e,{total:se,size:v,currentPage:K,onChange:Y})})]})]})}const is=(t,n)=>[{title:e.jsx(c,{fontSize:"13px",children:"Orders"}),key:"order",showLabel:!1,thConfig:{w:"18%"},render:s=>e.jsx(tt,{orderInfo:s})},{title:e.jsx(c,{fontSize:"13px",textAlign:"right",children:"Price Range"}),key:"price",thConfig:{w:"20%"},render:s=>e.jsx(u,{justify:"flex-end",children:e.jsx(ss,{orderInfo:s,isProfile:!0,isRank:!0})})},{title:e.jsx(c,{fontSize:"13px",textAlign:"right",children:"Filled Size"}),key:"completed",thConfig:{w:"15%"},render:s=>e.jsxs(u,{justify:"flex-end",children:[e.jsx(Vt,{orderInfo:s,isProfile:!0})," "]})},t&&{title:e.jsx(c,{fontSize:"13px",textAlign:"right",children:"Next Order (UTC)"}),key:"nextOrder",thConfig:{w:"20%"},render:({nextCycleAt:s})=>e.jsx(c,{color:"text_caption",children:s})},{title:e.jsx(c,{textAlign:"right",children:"Actions"}),key:"actions",showLabel:!1,thConfig:{w:"15%"},render:s=>e.jsx(es,{orderInfo:s,isActiveOrder:t,refresh:n})}].filter(Boolean);function ls({isClaimAllLoading:t,claimDisabled:n,claimAll:i,isCloseAllLoading:s,closeDisabled:l,closeAll:r}){return e.jsxs(u,{children:[e.jsx(L,{h:"28px",p:"8px",fontSize:"12px",fontWeight:"500",borderRadius:"8px",isLoading:t,isDisabled:n,onClick:i,children:"Claim All"}),e.jsx(L,{h:"28px",p:"8px",fontSize:"12px",fontWeight:"400",variant:"ghost",isLoading:s,isDisabled:l,onClick:r,children:"Close All"})]})}function as({historyInfo:t}){const[n,i]=p.useState({});return e.jsxs(Fe.Fragment,{children:[e.jsxs(ge,{cursor:"pointer",userSelect:"none",onClick:()=>{n[t==null?void 0:t.order_id]?n[t==null?void 0:t.order_id]=!1:n[t==null?void 0:t.order_id]=!0,i({...n})},sx:{w:"100%",td:{bg:"transparent !important",border:"none !important",p:{fontSize:"13px"},button:{fontSize:"13px"}}},children:[e.jsx(ne,{w:"20%",minW:"unset",children:e.jsx(Ye,{imgSize:"20px",info:t})}),e.jsx(ne,{w:"20%",minW:"unset",textAlign:"right",children:e.jsx(Xe,{info:t})}),e.jsx(ne,{w:"25%",minW:"unset",textAlign:"right",sx:{">div":{p:{whiteSpace:"nowrap",m:"0 12px"}}},children:e.jsx(qe,{info:t})}),e.jsx(ne,{w:"15%",minW:"unset",textAlign:"right",children:e.jsx(Qe,{info:t,isProfile:!0})}),e.jsx(ne,{w:"20%",minW:"unset",textAlign:"right",sx:{">div":{ml:"12px"}},children:e.jsx(At,{historyInfo:t,openExpendItemObj:n})})]}),!n[t==null?void 0:t.order_id]&&e.jsx(ge,{h:"16px"}),e.jsx(ge,{position:"relative",top:"0px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"},">div":{bg:"transparent !important",border:"none !important",borderColor:"border",borderTop:"none",p:"8px 0 16px"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:n[t==null?void 0:t.order_id]&&e.jsx(ne,{colSpan:5,sx:{p:{fontSize:"13px"},button:{fontSize:"13px"}},children:e.jsx(Ot,{historyInfo:t})})})]},t==null?void 0:t.order_id)}function rs(t){const{maxHeight:n,historyOrderList:i,historyOrderLoading:s}=t,{currentAccount:l,onWalletModal:r}=le(),x=10,[j,a]=p.useState([]),[g,o]=p.useState(0),[w,d]=p.useState(1);return p.useEffect(()=>{if((i==null?void 0:i.length)>0){o(i==null?void 0:i.length);const h=(w-1)*x,y=h+x;a(i.slice(h,y))}else a([])},[w,i]),te(),e.jsx(F,{w:"100%",children:l!=null&&l.address?i.length===0?e.jsx(V,{mt:"4px",type:"nodata",noBorder:!0,bg:"none",text:"You don't have any order history."}):e.jsxs(P,{w:"100%",children:[e.jsx(F,{overflowX:"auto",w:"100%",maxHeight:n,overflowY:"visible",position:"relative",children:e.jsxs(ut,{variant:"simple_list",w:"100%",overflowX:"auto",sx:{th:{fontSize:"13px",_first:{pl:"0 !important"}},td:{h:"28px !important",p:"0px !important"}},children:[e.jsx(ht,{sx:{position:"sticky",top:0,zIndex:1,bg:"bg_primary"},children:e.jsxs(ge,{children:[e.jsx(xe,{children:"Order Info"}),e.jsx(xe,{textAlign:"right",children:"Limit Price"}),e.jsx(xe,{textAlign:"right",children:"Expiry"}),e.jsx(xe,{textAlign:"right",whiteSpace:"nowrap",children:"Filled Size"}),e.jsx(xe,{textAlign:"right",children:"Status"})]})}),e.jsx(jt,{sx:{_hover:{tr:{bg:"none"}},td:{bg:"none !important",border:"none !important"}},children:s?e.jsx($t,{isPreMode:!0,itemList:[1,2,3],skeletonNum:5,rowStyle:{h:"28px !important"}}):e.jsx(Fe.Fragment,{children:j.map(h=>e.jsx(as,{historyInfo:h},h.order_id))})})]})}),!s&&(i==null?void 0:i.length)>x&&e.jsx(U,{w:"100%",children:e.jsx(_e,{total:g,size:x,currentPage:w,onChange:d})})]}):e.jsx(V,{type:"nowallet",noBorder:!0,mt:"4px",bg:"none",onboard:()=>{r(!0)}})})}function xs({maxHeight:t}){const{currentAccount:n,onWalletModal:i}=le(),{myOrderList:s,orderListLoading:l}=Je(),r=10,[x,j]=p.useState([]),[a,g]=p.useState(0),[o,w]=p.useState(1);p.useEffect(()=>{if((s==null?void 0:s.length)>0){g(s==null?void 0:s.length);const h=(o-1)*r,y=h+r;j(s.slice(h,y))}else j([])},[o,s]);const{isApp:d}=$();return te(),e.jsxs(P,{w:"100%",position:"relative",gap:"20px",mt:"4px",children:[n!=null&&n.address?!l&&(s==null?void 0:s.length)===0?e.jsx(V,{type:"nodata",text:"You don't have any open orders yet.",noBorder:!0,bg:"none"}):d?e.jsx(ae,{rowKey:"orderID",columns:ke(),dataSource:x,loading:l,itemSkeletonLength:3,isShowBorder:!1,itemHeight:"30px",rowStyle:()=>({borderRadius:"12px",border:"1px solid",borderColor:"border",bg:"bg_secondary",p:"12px 8px"})}):e.jsx(re,{rowKey:"orderID",columns:ke(),dataSource:x,loading:l,trPadding:"0px",fixedHeader:!0,maxHeight:t,rowStyle:{h:"40px",cursor:"pointer",_hover:{bg:"none !important"}}}):e.jsx(V,{type:"nowallet",noBorder:!0,bg:"none",onboard:()=>{i(!0)}}),(x==null?void 0:x.length)>r&&e.jsx(U,{children:e.jsx(_e,{total:a,size:r,currentPage:o,onChange:w})})]})}const ke=()=>[{title:e.jsx(c,{fontSize:"13px",children:"Order Info"}),key:"order",showLabel:!1,thConfig:{w:"18%"},render:n=>e.jsx(u,{sx:{p:{fontSize:"13px"}},children:e.jsx(Ye,{imgSize:"20px",info:n})})},{title:e.jsx(c,{fontSize:"13px",textAlign:"right",children:"Price"}),key:"price",thConfig:{w:"20%"},render:n=>e.jsx(u,{justify:"flex-end",sx:{p:{fontSize:"13px"}},ml:"12px",children:e.jsx(Xe,{info:n})})},{title:e.jsx(c,{fontSize:"13px",textAlign:"right",children:"Filled Size"}),key:"filled",thConfig:{w:"15%"},render:n=>e.jsxs(u,{justify:"flex-end",sx:{p:{fontSize:"13px"}},ml:"12px",children:[e.jsx(Qe,{info:n})," "]})},{title:e.jsx(c,{fontSize:"13px",textAlign:"right",children:"Expiry"}),key:"nextOrder",thConfig:{w:"20%"},render:n=>e.jsxs(u,{justify:"flex-end",sx:{p:{fontSize:"13px"}},ml:"12px",children:[e.jsx(qe,{info:n})," "]})},{title:e.jsx(c,{fontSize:"13px",textAlign:"right",children:"Action"}),showLabel:!1,key:"action",thConfig:{w:"20%"},render:n=>e.jsxs(u,{justify:"flex-end",sx:{button:{fontSize:"13px"}},children:[e.jsx(Lt,{orderInfo:n})," "]})}].filter(Boolean);function os({currentOrderTab:t,orderTabList:n,setCurrentOrderTab:i,maxHeight:s}){const{currentAccount:l}=le(),{getLimitOrderHistory:r,historyOrderList:x,historyOrderLoading:j}=Ht(),{fetchMyLimitOrder:a}=Rt(),{setMyOrderList:g,myOrderList:o,orderListLoading:w}=Je(),[d,h]=p.useState([]),[y,C]=p.useState({label:"Open Orders"}),b=p.useMemo(()=>{const m=[];return m.push({label:"Open Orders",num:y.label==="Open Orders"&&o.length>0&&!w?o.length.toString():void 0}),m.push({label:"Order History",num:y.label==="Order History"&&d.length>0&&!j?d.length.toString():void 0}),m},[y.label,o,d,j,w]);p.useEffect(()=>{v(!0)},[y.label,l]),Wt({onRpcChange:()=>{v(!0)}});const v=m=>{l!=null&&l.address&&(y.label==="Open Orders"?a(l.address,m):r(l.address,m))};p.useEffect(()=>{l!=null&&l.address&&(x==null?void 0:x.length)>0?h(x):h([])},[x,l==null?void 0:l.address]),p.useEffect(()=>{l!=null&&l.address||g([])},[l==null?void 0:l.address]);const{isApp:k}=$(),{handleCancelOrder:z,cancelOrderLoading:S}=Et(),O=y.label==="Open Orders"&&o.length>1;return e.jsx(e.Fragment,{children:e.jsxs(P,{w:"100%",gap:"0",align:"flex-start",mt:{base:"0px",lg:"12px"},children:[e.jsxs(u,{w:"100%",justify:"space-between",mb:"4px",children:[e.jsxs(u,{gap:{base:"8px",lg:"16px"},children:[e.jsx(be,{type:"outlineTab",tabList:n,currentTab:t,handleChangeTab:m=>i(m==null?void 0:m.label),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 8px",borderRadius:"4px",gap:"4px"}}),e.jsx(et,{currenTab:y.label,tabList:b,onChange:m=>{const _=b.find(D=>D.label===m);_&&C(_)}})]}),O&&e.jsx(L,{onClick:()=>{z(o)},isDisabled:S,isLoading:S,h:"28px",p:"8px",fontSize:"12px",fontWeight:"400",variant:"ghost",children:"Cancel All"})]}),y.label==="Open Orders"&&e.jsx(xs,{maxHeight:s}),y.label==="Order History"&&(k?e.jsx(kt,{historyOrderList:d,historyOrderLoading:j}):e.jsx(rs,{maxHeight:s,historyOrderList:d,historyOrderLoading:j}))]})})}function cs({maxHeight:t}){const n=[{label:"Limit Orders",value:"limitOrders"},{label:"DCA",value:"dca"}],[i,s]=p.useState("Limit Orders");return $(),e.jsx(oe,{w:"100%",borderRadius:"16px",p:{base:"0",lg:"0px 0px 16px"},bg:{base:"none",lg:"none"},backdropFilter:{base:"none",lg:"blur(20px)"},border:"none",mt:{base:"16px",lg:"-6px"},children:e.jsxs(F,{w:"100%",children:[i==="Limit Orders"&&e.jsx(os,{maxHeight:t,currentOrderTab:i,orderTabList:n,setCurrentOrderTab:s}),i==="DCA"&&e.jsx(ns,{maxHeight:t,currentOrderTab:i,orderTabList:n,setCurrentOrderTab:s})]})})}function it({onClick:t}){const{isApp:n}=$();return e.jsx(ee,{showTooltip:!n,placement:"top",tooltip:e.jsx(c,{fontSize:"12px",children:"View on Explorer"}),children:e.jsx(U,{children:e.jsx(W,{xlinkHref:"#icon-icon_link1",onClick:t,fontSize:"16px"})})})}const de=10;function ps({hideSmallPools:t}){const{showTokenInfo:n,proTokenMap:i,coinDexPools:s,coinDexPoolsLoading:l}=ce(),{getCoinDexPools:r,getTokenInfos:x}=ye(),[j,a]=p.useState(1),[g,o]=p.useState([]),[w,d]=p.useState(!1);p.useEffect(()=>{n!=null&&n.coin_type&&r({coinType:n==null?void 0:n.coin_type,hideSmallPools:t})},[t,n==null?void 0:n.coin_type]),p.useEffect(()=>{if(!l)if(a(1),o([]),(s==null?void 0:s.length)>0){const C=s.slice(0,de),b={};C.forEach(k=>{var z;return(z=k==null?void 0:k.coinList)==null?void 0:z.forEach(S=>{b[S]=!0})});const v=Object.keys(b);x(v),o(C),d(s.length>de)}else d(!1)},[s]);const h=()=>{const C=j*de,b=C+de,v=s.slice(C,b),k={};v.forEach(S=>{var O;return(O=S==null?void 0:S.coinList)==null?void 0:O.forEach(m=>{k[m]=!0})});const z=Object.keys(k);x(z),o(S=>[...S,...v]),a(S=>S+1),d(s.length>b)},{isApp:y}=$();return e.jsxs(P,{w:"100%",position:"relative",gap:"20px",children:[!l&&(s==null?void 0:s.length)===0?e.jsx(V,{type:"nodata",noBorder:!0,bg:"none"}):y?e.jsx(P,{w:"100%",gap:"4px",children:e.jsx(ae,{rowKey:"tx",columns:Ae(y,i),dataSource:g,loading:l,itemSkeletonLength:5,itemHeight:"24px",rowStyle:(C,b)=>({w:"100%",p:"0px",mt:"12px"})})}):e.jsx(re,{rowKey:"tx",columns:Ae(y,i),dataSource:g,skeletonLength:3,loading:l,isFlexStart:!0,trPadding:"0px",rowStyle:{h:"40px",_hover:{bg:"none !important"}}}),!l&&w&&e.jsx(U,{children:e.jsx(L,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:h,children:"Load More"})})]})}const Ae=(t,n)=>[{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Protocol"}),key:"protocol",render:i=>e.jsxs(u,{w:"100%",gap:"4px",justify:{base:"flex-end",lg:"flex-start"},children:[e.jsx(N,{imageUrl:`/images/aggregator-source/${i==null?void 0:i.dex}.png`,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(c,{fontSize:"13px",color:"text_caption",children:i!=null&&i.dex?(i==null?void 0:i.dex[0].toUpperCase())+(i==null?void 0:i.dex.slice(1)):""})]})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Pair"}),key:"pair",render:i=>{var s,l;return e.jsxs(u,{align:"center",justify:{base:"flex-end",lg:"flex-start"},gap:"0px",children:[(s=i==null?void 0:i.coinList)==null?void 0:s.map((r,x)=>{var j;return e.jsx(u,{gap:"0",justify:"flex-start",children:e.jsx(N,{w:"20px",h:"20px",maxH:"20px",imageUrl:(j=n==null?void 0:n.get(r))==null?void 0:j.logo_url})},r)}),(l=i==null?void 0:i.coinList)==null?void 0:l.map((r,x)=>{var j;return e.jsx(u,{gap:"4px",justify:"flex-start",sx:{_before:{content:x!==0?'"/"':'""',color:"text_caption",ml:"4px"}},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:(j=n==null?void 0:n.get(r))==null?void 0:j.symbol})},r)})]})}},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Price"}),key:"price",render:i=>e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:i==null?void 0:i.price})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"TVL"}),key:"tvl",render:i=>e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:i==null?void 0:i.tvl})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"APR"}),key:"apr",render:i=>e.jsx(u,{w:"100%",gap:"4px",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:(i==null?void 0:i.apr)=="0%"?"-":i==null?void 0:i.apr})})},!t&&{title:e.jsx(c,{fontSize:"13px"}),key:"tx",render:i=>e.jsx(u,{w:"100%",justify:"flex-end",children:e.jsx(it,{onClick:()=>window.open(i==null?void 0:i.link)})})}].filter(Boolean);function ds(){var O;const{getCoinTrades:t}=ye(),{wrapCoinTrades:n}=vt(),i=p.useRef({list:[],nextPageCursor:"",isFirstPage:!0}),[s,l]=p.useState({list:[],nextPageCursor:"",isFirstPage:!0}),[r,x]=p.useState({list:[],nextPageCursor:"",isFirstPage:!0}),[j,a]=p.useState(null),[g,o]=p.useState(!0),w=p.useRef(null),d=p.useRef(!1),h=m=>{d.current=m},y=async m=>{var Z,K,Y,q,Q,J;const _=((Z=w.current)==null?void 0:Z.coinType)&&De(m==null?void 0:m.coinType)!==De((K=w.current)==null?void 0:K.coinType)||((Y=w.current)==null?void 0:Y.type)&&(m==null?void 0:m.type)!==((q=w.current)==null?void 0:q.type)||((Q=w.current)==null?void 0:Q.maker)&&(m==null?void 0:m.maker)!==((J=w.current)==null?void 0:J.maker),D=!w.current,{coinType:A,type:R,maker:E,isRealTime:T,cursor:G,limit:se}=m;w.current=m,o(!0);try{const f=await t({coinType:A,type:R,sender:E,limit:se||10,cursor:G});T?(x({list:(f==null?void 0:f.list)||[],nextPageCursor:f==null?void 0:f.nextPageCursor,isFirstPage:f==null?void 0:f.isFirstPage}),i.current={list:(f==null?void 0:f.list)||[],nextPageCursor:f==null?void 0:f.nextPageCursor,isFirstPage:f==null?void 0:f.isFirstPage}):l(H=>f!=null&&f.isFirstPage?{list:f==null?void 0:f.list,nextPageCursor:f==null?void 0:f.nextPageCursor,isFirstPage:f==null?void 0:f.isFirstPage}:{...H,list:[...H==null?void 0:H.list,...f==null?void 0:f.list],nextPageCursor:f==null?void 0:f.nextPageCursor,isFirstPage:f==null?void 0:f.isFirstPage}),D&&k(A,R,E),_&&(z(),k(A,R,E))}catch(f){T?(x({list:[],nextPageCursor:"",isFirstPage:!0}),i.current={list:[],nextPageCursor:"",isFirstPage:!0}):l({list:[],nextPageCursor:"",isFirstPage:!0}),a(f)}finally{o(!1)}},{subscribe:C,send:b,isConnected:v}=Bt();p.useEffect(()=>C("TRADE_DATA",_=>{var R,E,T,G,se,Z,K,Y,q,Q,J;if(!_||d.current||(R=w.current)!=null&&R.type&&((T=(E=w.current)==null?void 0:E.type)==null?void 0:T.indexOf(_==null?void 0:_.type))<0)return;const D=n([_],!0);if((se=(G=i.current)==null?void 0:G.list)!=null&&se[0]&&(D!=null&&D[0])&&((Z=D==null?void 0:D[0])==null?void 0:Z.timestamp)<((q=(Y=(K=i.current)==null?void 0:K.list)==null?void 0:Y[0])==null?void 0:q.timestamp))return;const A=[...D,...(J=(Q=i.current)==null?void 0:Q.list)==null?void 0:J.slice(0,30)];i.current={...i.current,list:[...A]}}),[C,b]);const k=async(m,_,D)=>{const A={tokenId:m};_&&(A.tradeType=_),D&&(A.maker=D),b("SUBSCRIBE_TRADES",A,{isSubscription:!0})||(await mt(1e3),k(m,_,D))},z=()=>{b("UNSUBSCRIBE_TRADES")};return p.useEffect(()=>{const m=setInterval(()=>{var A,R,E;if(d.current){x(T=>({...T}));return}const _=Object.fromEntries((A=r==null?void 0:r.list)==null?void 0:A.map(T=>[T==null?void 0:T.id,T])),D=(E=(R=i.current)==null?void 0:R.list)==null?void 0:E.map((T,G)=>!(_!=null&&_[T==null?void 0:T.id])&&(T!=null&&T.isWsData)?{...T,haveAnimation:!0}:{...T,haveAnimation:!1});x({...i.current,list:[...D]})},1e3);return()=>clearInterval(m)},[d.current]),{data:p.useMemo(()=>{var m;return(m=w.current)!=null&&m.isRealTime?r:s},[s,r,(O=w.current)==null?void 0:O.isRealTime]),loading:g,error:j,isConnected:v,getTrades:y,setPauseWs:h,pauseWs:d.current}}function lt({traderAddress:t,setTraderAddress:n}){$();const[i,s]=p.useState(""),[l,r]=p.useState(!1),x=g=>{const o=_t(g);r(o)},j=()=>{s(""),n(""),r(!0)},a=()=>{n(i)};return p.useEffect(()=>{s(t)},[t]),e.jsx(We,{isLazy:!0,placement:"bottom-start",onClose:()=>{s(t),x(t)},onOpen:()=>{x(t)},children:({isOpen:g,onClose:o})=>e.jsxs(e.Fragment,{children:[e.jsx($e,{as:L,variant:"outline",position:"relative",h:"36px",border:"none",bg:"none",p:"0",w:{base:"100%",lg:"unset"},height:"16px",lineHeight:"16px",_hover:{bg:"none"},_active:{bg:"none"},children:e.jsxs(u,{gap:"0",justify:"center",children:[e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Trader"}),e.jsx(W,{mt:"1px",xlinkHref:"#icon-icon_filter",svgW:"16px",svgH:"16px"})]})}),g&&e.jsx(Be,{zIndex:9999,p:"4px",sx:{position:"absolute",left:{base:"0",lg:"-80px"},top:"8px"},children:e.jsxs(P,{w:"100%",spacing:"0",children:[e.jsx(oe,{h:"48px",lineHeight:"46px",w:"100%",p:"0 12px",borderRadius:"8px",children:e.jsxs(u,{w:"100%",h:"100%",children:[e.jsx(bt,{w:"100%",h:"24px",type:"text",placeholder:"Trader address",fontSize:"14px",lineHeight:"24px",value:i,pr:"16px",onChange:w=>{const d=w.target.value;s(d),x(d)}}),i?e.jsx(F,{position:"absolute",top:"18px",right:"10px",onClick:()=>s(""),children:e.jsx(W,{xlinkHref:"#icon-icon_close"})}):null]})}),i&&(l?e.jsxs(u,{h:"52px",gap:"4px",justify:"flex-start",mt:"-20px",bg:"primary_green_opacity.10",w:"100%",p:"24px 12px 8px",zIndex:"-1",borderRadius:"8px",children:[e.jsx(ue,{src:"/images/icon_yes.png",w:"18px",h:"18px"}),e.jsx(c,{fontSize:"12px",color:"primary_green",children:"Valid address"})]}):e.jsxs(u,{h:"52px",gap:"6px",justify:"flex-start",mt:"-20px",bg:"primary_red_opacity.10",w:"100%",p:"26px 12px 8px",zIndex:"-1",borderRadius:"8px",children:[e.jsx(W,{xlinkHref:"#icon-icon-warning",w:"16px",h:"16px",variant:"error"}),e.jsx(c,{fontSize:"12px",color:"primary_red",children:"Invalid address"})]})),e.jsxs(u,{w:"100%",justify:"space-between",mt:"8px",p:"0",children:[e.jsx(L,{fontSize:"12px",h:"28px",lineHeight:"28px",borderRadius:"8px",variant:"outline",w:"50%",onClick:()=>{j(),o()},children:"Clear"}),e.jsx(L,{fontSize:"12px",w:"50%",h:"28px",lineHeight:"28px",borderRadius:"8px",isDisabled:!l,onClick:()=>{a(),o()},children:"Apply"})]})]})})]})})}const gs=10;function us({maxHeight:t}){var O,m;const{getExplorerUrl:n}=pe(),{isApp:i}=$(),{showTokenInfo:s,isRealTime:l}=ce(),[r,x]=p.useState(!1),[j,a]=p.useState(""),[g,o]=p.useState(""),{getTrades:w,data:d,loading:h,setPauseWs:y,pauseWs:C}=ds(),b=p.useRef(!0),v=_=>{s!=null&&s.coin_type&&w({coinType:s.coin_type,type:g==null?void 0:g.toLowerCase(),maker:j,isRealTime:l,cursor:_?"":d==null?void 0:d.nextPageCursor,limit:gs}).then(D=>{l||x(!1)})};p.useEffect(()=>{v(!0),o(""),a("")},[s==null?void 0:s.coin_type]),p.useEffect(()=>{if(b.current){b.current=!1;return}s!=null&&s.coin_type&&v(!0)},[g,j,l]);const k=()=>{x(!0),v()},S={columns:p.useMemo(()=>hs({isApp:i,getExplorerUrl:n,traderAddress:j,setTraderAddress:a,type:g,setType:o,isRealTime:l,pauseWs:C}),[i,n,j,g]),dataSource:d==null?void 0:d.list,loading:h&&!r,rowKey:_=>_==null?void 0:_.id,rowClassName:_=>_!=null&&_.haveAnimation?`${_==null?void 0:_.type}-animation`:"",onBodyHover:()=>{console.log("onBodyHover####"),y(!0)},onBodyLeave:()=>y(!1)};return te(),e.jsxs(P,{w:"100%",spacing:"20px",position:"relative",children:[i&&l&&C&&e.jsxs(u,{bg:"checked_bg",cursor:"pointer",h:"20px",gap:"4px",p:"4px",borderRadius:"4px",border:"1px solid",borderColor:"border",position:"absolute",right:i?"auto":"140px",left:i?"140px":"auto",top:i?"-24px":"-44px",zIndex:"100000",children:[e.jsx(W,{svgW:"14px",boxW:"14px",svgH:"14px",boxH:"14px",xlinkHref:"#icon-icon_paused",svgFill:"primary",svgHover:"primary"}),e.jsx(c,{fontSize:"12px",color:"primary",children:"Paused"})]}),!h&&!((O=d==null?void 0:d.list)!=null&&O.length)&&i?e.jsx(V,{type:"nodata",noBorder:!0,bg:"none",text:"No trades history"}):i?e.jsxs(P,{w:"100%",children:[e.jsxs(u,{w:"100%",mt:"12px",children:[e.jsx(oe,{w:"35%",h:"40px",borderRadius:"8px",p:"0",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Ie,{type:g,setType:o})}),e.jsx(oe,{w:"65%",h:"40px",borderRadius:"8px",p:"0",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(lt,{traderAddress:j,setTraderAddress:a})})]}),e.jsx(ae,{...S,itemSkeletonLength:5,itemHeight:"24px",rowStyle:()=>({w:"100%",p:"0px",mt:"12px"})})]}):e.jsx(re,{...S,skeletonLength:3,isFlexStart:!0,fixedHeader:!0,maxHeight:t,trPadding:"0px",noData:((m=d==null?void 0:d.list)==null?void 0:m.length)==0?e.jsx(V,{type:"nodata",text:"No trades history",noBorder:!0,bg:"none"}):void 0,rowStyle:{h:"40px",borderRadius:"0px",_hover:{bg:"none !important"}},theadConfig:{h:"20px"}}),(r||!h)&&!l&&(d==null?void 0:d.nextPageCursor)&&(r?e.jsx(U,{w:"200px",margin:"auto",textAlign:"center",pb:"16px",pt:"8px",children:e.jsx(je,{size:"sm"})}):e.jsx(U,{children:e.jsx(L,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:k,children:"Load More"})}))]})}const hs=({isApp:t,getExplorerUrl:n,traderAddress:i,setTraderAddress:s,type:l,setType:r,isRealTime:x,pauseWs:j})=>[{title:e.jsx(u,{w:"80px",h:"20px",pl:"4px",children:!t&&x&&j?e.jsxs(u,{bg:"checked_bg",cursor:"pointer",h:"20px",gap:"4px",p:"4px",borderRadius:"4px",border:"1px solid",borderColor:"border",children:[e.jsx(W,{svgW:"14px",boxW:"14px",svgH:"14px",boxH:"14px",xlinkHref:"#icon-icon_paused",svgFill:"primary",svgHover:"primary"}),e.jsx(c,{fontSize:"12px",color:"primary",children:"Paused"})]}):e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Time"})}),key:"time",thConfig:{w:"80px"},render:a=>e.jsx(u,{justify:{base:"flex-end",lg:"flex-start"},w:"100%",pl:"4px",children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:zt(a==null?void 0:a.timestamp)})})},{title:t?e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Type"}):e.jsx(Ie,{type:l,setType:r}),key:"type",thConfig:{w:"15%"},render:a=>{var d,h,y;const g={buy:{color:"primary_green",bg:"primary_green_opacity.10"},add:{color:"primary",bg:"primary_opacity.10"},remove:{color:"primary_gray",bg:"rgba(127, 152, 167,0.1)"},default:{color:"primary_red",bg:"primary_red_opacity.10"}},{color:o,bg:w}=g[a==null?void 0:a.type]||g.default;return e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"12px",color:o,bg:w,h:"20px",p:"0 8px",borderRadius:"4px",lineHeight:"20px",children:((h=(d=a==null?void 0:a.type)==null?void 0:d[0])==null?void 0:h.toUpperCase())+((y=a==null?void 0:a.type)==null?void 0:y.slice(1))})})}},{title:e.jsx(c,{minW:"100px",color:"primary_gray",fontSize:"13px",children:"Value"}),key:"usdValue",thConfig:{w:"20%"},render:a=>e.jsxs(u,{gap:"0px",w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:[!x&&e.jsx(ue,{w:"16px",h:"16px",src:`/images/${a==null?void 0:a.iconName}.png`}),e.jsx(c,{fontSize:"13px",color:"text_caption",children:a==null?void 0:a.usdValue})]})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Amount"}),key:"price",thConfig:{w:"20%"},render:a=>{var g;return e.jsx(P,{w:"100%",align:{base:"flex-end",lg:"flex-start"},spacing:"2px",children:(g=a==null?void 0:a.coinChanges)==null?void 0:g.map((o,w)=>{var d,h;return e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(ee,{placement:"top",showTooltip:!t,tooltip:e.jsxs(u,{children:[!x&&e.jsx(N,{imageUrl:o==null?void 0:o.logo,w:"20px",h:"20px",minH:"20px",minW:"20px"}),e.jsxs(c,{color:"text_caption",children:[" ",he(o==null?void 0:o.symbol,12)]}),e.jsx(ie,{address:o==null?void 0:o.coinType,onClickLink:()=>window.open(n(o==null?void 0:o.coinType,"coin"))})]}),children:e.jsxs(u,{children:[!x&&e.jsx(N,{w:"20px",h:"20px",imageUrl:o==null?void 0:o.logo}),e.jsxs(c,{fontSize:"13px",color:(d=o==null?void 0:o.amount)!=null&&d.includes("-")?"primary_red":(h=o==null?void 0:o.amount)!=null&&h.includes("+")?"primary_green":(a==null?void 0:a.type)=="add"?"primary":"text_caption",children:[o==null?void 0:o.amount," ",he(o==null?void 0:o.symbol,8)]})]})})},`${(o==null?void 0:o.coinType)||"unknown"}-${w}`)})})}},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Dex"}),key:"dex",thConfig:{w:"10%"},render:a=>e.jsxs(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:[!x&&e.jsx(ee,{showTooltip:!t,placement:"top",tooltip:e.jsx(c,{fontSize:"12px",children:a!=null&&a.dex?a.dex[0].toUpperCase()+a.dex.slice(1):""}),children:e.jsx(U,{children:e.jsx(N,{imageUrl:`/images/aggregator-source/${a==null?void 0:a.dex}.png`,imgBoxStyle:{w:"20px",h:"20px"}})})}),x&&e.jsx(c,{fontSize:"13px",textTransform:"capitalize",children:a==null?void 0:a.dex})]})},{title:t?e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Trader"}):e.jsx(lt,{traderAddress:i,setTraderAddress:s}),key:"sender",thConfig:{w:"10%"},render:a=>e.jsxs(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},pr:"4px",children:[!x&&e.jsx(N,{imageUrl:Ue(a==null?void 0:a.sender)||"",imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(ie,{address:a==null?void 0:a.sender,fontSize:"13px",showLink:!1,color:"text_caption",onClickLink:()=>window.open(n(a==null?void 0:a.sender,"account"))})]})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",pr:"4px",children:"TXN"}),key:"txDigest",thConfig:{w:"10%"},render:a=>e.jsx(u,{w:"100%",justify:"flex-end",children:e.jsx(it,{onClick:()=>window.open(n(a==null?void 0:a.txDigest,"tx"))})})}],Oe=10;function js({maxHeight:t}){var d;const{getExplorerUrl:n}=pe(),{showTokenInfo:i,coinTransactionBlocks:s,coinTransactionLoading:l}=ce(),{getCoinTransactionBlocks:r}=ye(),[x,j]=p.useState([]),[a,g]=p.useState(!1),{isApp:o}=$();p.useEffect(()=>{i!=null&&i.coin_type&&(j([]),r(i.coin_type,"",Oe))},[i==null?void 0:i.coin_type]),p.useEffect(()=>{s&&(j(h=>{const y=(s==null?void 0:s.list)||[];return s!=null&&s.isFirstPage?[...y]:s!=null&&s.nextPageCursor&&h.length?[...h,...y]:[...y]}),g(!1))},[s]);const w=()=>{i!=null&&i.coin_type&&(s!=null&&s.nextPageCursor)&&(g(!0),r(i.coin_type,s==null?void 0:s.nextPageCursor,Oe))};return te(),e.jsxs(P,{w:"100%",position:"relative",gap:"20px",children:[o?e.jsx(P,{w:"100%",gap:"4px",children:e.jsx(ae,{rowKey:"txDigest",columns:Le(n),dataSource:x,loading:l&&!a,itemSkeletonLength:5,itemHeight:"24px",rowStyle:(h,y)=>({w:"100%",p:"0px",mt:"12px"})})}):e.jsx(re,{rowKey:"txDigest",columns:Le(n),dataSource:x,skeletonLength:3,loading:l&&!a,isFlexStart:!0,trPadding:"0px",fixedHeader:!0,maxHeight:t,noData:(d=s==null?void 0:s.list)!=null&&d.length?void 0:e.jsx(V,{type:"nodata",noBorder:!0,bg:"none"}),rowStyle:{h:"40px",_hover:{bg:"none !important"}}},x.length),(a||!l)&&(s==null?void 0:s.nextPageCursor)&&e.jsx(U,{w:"100%",py:"12px",children:a?e.jsx(je,{size:"sm"}):e.jsx(L,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:w,isDisabled:a,children:"Load More"})})]})}const Le=t=>[{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Digest"}),key:"digest",thConfig:{w:"24%"},render:n=>{var i;return e.jsxs(u,{w:"100%",gap:"4px",justify:{base:"flex-end",lg:"flex-start"},mr:"12px",children:[e.jsx(ie,{address:n==null?void 0:n.txDigest,fontSize:"13px",showLink:!1,color:"text_caption",onClickLink:()=>window.open(t(n==null?void 0:n.txDigest,"tx"))}),(i=n==null?void 0:n.labels)==null?void 0:i.map(s=>e.jsx(ee,{placement:"top",tooltip:e.jsx(c,{fontSize:"12px",lineHeight:"20px",maxW:"280px",children:s==null?void 0:s.name}),children:e.jsx(N,{imageUrl:s==null?void 0:s.image,imgBoxStyle:{w:"16px",h:"16px"}})}))]})}},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Payload"}),key:"payload",thConfig:{w:"20%"},render:n=>e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:(n==null?void 0:n.payload)==="TransferObjects"?e.jsx(c,{fontSize:"13px",color:"text_caption",children:n==null?void 0:n.payload}):e.jsx(ie,{address:n==null?void 0:n.payload,fontSize:"13px",showLink:!1,color:"text_caption",onClickLink:()=>n!=null&&n.payloadPackage?window.open(t(n==null?void 0:n.payloadPackage,"package")):{}})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Sender"}),key:"sender",thConfig:{w:"20%"},render:n=>e.jsxs(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:[e.jsx(N,{imageUrl:Ue(n==null?void 0:n.sender),imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(ie,{address:n==null?void 0:n.sender,fontSize:"13px",showLink:!1,color:"text_caption",onClickLink:()=>window.open(t(n==null?void 0:n.sender,"account"))})]})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Txns"}),key:"txns",thConfig:{w:"8%"},render:n=>e.jsx(u,{w:"100%",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:n==null?void 0:n.txns})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Status"}),key:"status",thConfig:{w:"8%"},render:n=>e.jsx(u,{w:"100%",gap:"4px",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(ue,{src:(n==null?void 0:n.status)==="success"?"/images/icon_yes.png":"/images/img_fail.png",w:"16px",h:"16px"})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Age"}),key:"age",thConfig:{w:"10%"},render:n=>e.jsx(u,{w:"100%",gap:"4px",justify:{base:"flex-end",lg:"flex-start"},children:e.jsx(c,{fontSize:"13px",color:"text_caption",children:ft(n==null?void 0:n.timestamp)})})},{title:e.jsx(c,{color:"primary_gray",fontSize:"13px",children:"Gas"}),key:"gas",thConfig:{minW:"180px"},render:n=>e.jsxs(u,{w:"100%",gap:"4px",justify:{base:"flex-end",lg:"flex-end"},children:[e.jsx(ue,{src:"/images/icon_gas@2x.png",w:"16px",h:"16px"}),e.jsxs(c,{fontSize:"13px",color:"text_caption",children:[n==null?void 0:n.gas," SUI"]})]})}];function bn(){const[t,n]=p.useState(!0),{isApp:i}=$(),{size:s}=te(),{topHoldersTotal:l,topHoldersLoading:r,currTradeTab:x,setCurrTradeTab:j,coinDetailLoading:a,isRealTime:g,setIsRealTime:o}=ce(),w=(s==null?void 0:s.h)-545>300?(s==null?void 0:s.h)-545:300,d=p.useMemo(()=>[{label:"Trades",value:"trades"},{label:"Holders",value:"holders",num:a?void 0:M(l)},{label:"Transaction Blocks",value:"transaction"},{label:"Orders",value:"orders"}],[l,a]),h=()=>e.jsx(u,{w:{base:"100%",lg:"unset"},ml:{base:"0",lg:"8px"},gap:"12px",justify:{base:"space-between",lg:"flex-start"},children:e.jsxs(u,{children:[e.jsx(Ct,{width:"20px",height:"20px",checked:g,onClick:()=>o(!g)}),e.jsx(c,{fontSize:"12px",whiteSpace:"nowrap",color:"primary_gray",children:"RealTime Activity"})]})}),y=()=>{switch(x){case"Trades":return e.jsx(us,{maxHeight:w});case"Holders":return e.jsx(Ft,{maxHeight:w});case"Pools":return e.jsx(ps,{hideSmallPools:t});case"Transaction Blocks":return e.jsx(js,{maxHeight:w});case"Orders":return e.jsx(cs,{maxHeight:w});default:return null}};return e.jsxs(P,{w:"100%",gap:{base:"0",lg:"8px"},align:"flex-start",children:[e.jsx(F,{w:"100%",overflow:"auto",children:e.jsxs(u,{w:"100%",minW:{base:"unset",lg:"550px"},justify:"space-between",children:[e.jsx(be,{type:"borderTab",currentTab:x,tabList:d,handleChangeTab:C=>j(C==null?void 0:C.label),wrapStyle:{bg:"none",h:"52px",gap:"20px",border:"none",mt:{base:"8px",lg:"0"}},itemStyle:{fontSize:"15px",fontWeight:500,position:"relative",whiteSpace:"nowrap",_hover:{svg:{fill:"primary"},p:{color:"primary"}}}}),!i&&x==="Trades"&&h()]})}),i&&x==="Trades"&&e.jsx(u,{w:"100%",m:"16px 0 4px",children:h()}),e.jsx(P,{w:"100%",minH:"300px",children:y()})]})}export{bn as ProModeTradeTab};
