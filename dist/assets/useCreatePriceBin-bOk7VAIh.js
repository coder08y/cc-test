import{r as a,j as r,a as Sn,aE as xt,aF as In,aG as pt,a3 as ke,k as jn,V as ne,H as ge,T as W,B as nt,Z as wn,m as mt,I as kn,S as Mn,n as It}from"./vendor-CBmAETR3.js";import{aj as En,t as Ye,d as $,eZ as Ze,q as Pn,I as _n,ai as Oe,u as Rn,C as Nn,L as je,a8 as lt,S as Wt,ah as qt,f as Tn,aW as tt,a5 as zn}from"./index-BpSfzecM.js";import"./cross-DJ28FxNa.js";import{R as $n,X as Zt,Y as Kt}from"./YAxis-DLEZvSSr.js";import{B as Qt}from"./BarChart-3cDt1x1m.js";import{T as Jt,B as en}from"./generateCategoricalChart-CmRMqbFo.js";import{A as Gt}from"./ActionButton-1ExqaF95.js";import{I as Ln}from"./InputBox-DUnOULwS.js";import{u as On}from"./index-C7OfScvw.js";import{_ as de}from"./objectSpread2-B-AaJtUa.js";import{h as Fn,d as Hn}from"./dlmm-DdxfaipV.js";function Wn(e,t){const n=a.useRef(Date.now()),o=a.useRef();return a.useCallback((...l)=>{const u=Date.now();u-n.current>t?(o.current&&(clearTimeout(o.current),o.current=null),e(...l),n.current=u):o.current||(o.current=setTimeout(()=>{e(...l),n.current=Date.now(),o.current=null},t-(u-n.current)))},[e,t])}function Ct(e){const{fill:t,x:n,y:o,width:c,height:l,radius:u=2,shape:p}=e,f=l>2?u:0;return r.jsx("g",{children:p==="rect"?r.jsx("rect",{x:n,y:o,width:c,height:l,fill:t}):r.jsx("path",{d:`
              M${n},${o+l}
              L${n},${o+f}
              Q${n},${o} ${n+f},${o}
              L${n+c-f},${o}
              Q${n+c},${o} ${n+c},${o+f}
              L${n+c},${o+l}
              Z
            `,fill:t})})}function bt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function qn(e){if(Array.isArray(e))return bt(e)}function Gn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tn(e,t){if(e){if(typeof e=="string")return bt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}function Xn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Re(e){return qn(e)||Gn(e)||tn(e)||Xn()}function Dn(e){if(Array.isArray(e))return e}function Vn(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,c,l,u,p=[],f=!0,d=!1;try{if(l=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;f=!1}else for(;!(f=(o=l.call(n)).done)&&(p.push(o.value),p.length!==t);f=!0);}catch(h){d=!0,c=h}finally{try{if(!f&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(d)throw c}}return p}}function Bn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(e,t){return Dn(e)||Vn(e,t)||tn(e,t)||Bn()}var nn={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var l="",u=0;u<arguments.length;u++){var p=arguments[u];p&&(l=c(l,o(p)))}return l}function o(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var u="";for(var p in l)t.call(l,p)&&l[p]&&(u=c(u,p));return u}function c(l,u){return u?l?l+" "+u:l+u:l}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(nn);var Un=nn.exports;const Xe=Sn(Un);function Ke(e){var t=a.useRef();t.current=e;var n=a.useCallback(function(){for(var o,c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return(o=t.current)===null||o===void 0?void 0:o.call.apply(o,[t].concat(l))},[]);return n}function Yn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Xt=Yn()?a.useLayoutEffect:a.useEffect,rn=function(t,n){var o=a.useRef(!0);Xt(function(){return t(o.current)},n),Xt(function(){return o.current=!1,function(){o.current=!0}},[])},Dt=function(t,n){rn(function(o){if(!o)return t()},n)};function Vt(e){var t=a.useRef(!1),n=a.useState(e),o=fe(n,2),c=o[0],l=o[1];a.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function u(p,f){f&&t.current||l(p)}return[c,u]}function dt(e){return e!==void 0}function Zn(e,t){var n=t||{},o=n.defaultValue,c=n.value,l=n.onChange,u=n.postState,p=Vt(function(){return dt(c)?c:dt(o)?typeof o=="function"?o():o:typeof e=="function"?e():e}),f=fe(p,2),d=f[0],h=f[1],m=c!==void 0?c:d,S=u?u(m):m,x=Ke(l),y=Vt([m]),C=fe(y,2),g=C[0],s=C[1];Dt(function(){var M=g[0];d!==M&&x(d,M)},[g]),Dt(function(){dt(c)||h(c)},[c]);var A=Ke(function(M,T){h(M,T),s([m],T)});return[S,A]}var yt={},Kn=function(t){};function Qn(e,t){}function Jn(e,t){}function er(){yt={}}function on(e,t,n){!t&&!yt[n]&&(e(!1,n),yt[n]=!0)}function Qe(e,t){on(Qn,e,t)}function tr(e,t){on(Jn,e,t)}Qe.preMessage=Kn;Qe.resetWarned=er;Qe.noteOnce=tr;function nr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=new Set;function c(l,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,f=o.has(l);if(Qe(!f,"Warning: There may be circular references"),f)return!1;if(l===u)return!0;if(n&&p>1)return!1;o.add(l);var d=p+1;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var h=0;h<l.length;h++)if(!c(l[h],u[h],d))return!1;return!0}if(l&&u&&xt(l)==="object"&&xt(u)==="object"){var m=Object.keys(l);return m.length!==Object.keys(u).length?!1:m.every(function(S){return c(l[S],u[S],d)})}return!1}return c(e,t)}function sn(e,t){if(e==null)return{};var n,o,c=In(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function St(e,t,n){return(e-t)/(n-t)}function jt(e,t,n,o){var c=St(t,n,o),l={};switch(e){case"rtl":l.right="".concat(c*100,"%"),l.transform="translateX(50%)";break;case"btt":l.bottom="".concat(c*100,"%"),l.transform="translateY(50%)";break;case"ttb":l.top="".concat(c*100,"%"),l.transform="translateY(-50%)";break;default:l.left="".concat(c*100,"%"),l.transform="translateX(-50%)";break}return l}function We(e,t){return Array.isArray(e)?e[t]:e}var le={BACKSPACE:8,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},De=a.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),rr=a.createContext({}),or=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],Bt=a.forwardRef(function(e,t){var n=e.prefixCls,o=e.value,c=e.valueIndex,l=e.onStartMove,u=e.onDelete,p=e.style,f=e.render,d=e.dragging,h=e.draggingDelete,m=e.onOffsetChange,S=e.onChangeComplete,x=e.onFocus,y=e.onMouseEnter,C=sn(e,or),g=a.useContext(De),s=g.min,A=g.max,M=g.direction,T=g.disabled,N=g.keyboard,E=g.range,Z=g.tabIndex,oe=g.ariaLabelForHandle,P=g.ariaLabelledByForHandle,j=g.ariaRequired,b=g.ariaValueTextFormatterForHandle,i=g.styles,I=g.classNames,L="".concat(n,"-handle"),v=function(H){T||l(H,c)},F=function(H){x==null||x(H,c)},X=function(H){y(H,c)},ae=function(H){if(!T&&N){var w=null;switch(H.which||H.keyCode){case le.LEFT:w=M==="ltr"||M==="btt"?-1:1;break;case le.RIGHT:w=M==="ltr"||M==="btt"?1:-1;break;case le.UP:w=M!=="ttb"?1:-1;break;case le.DOWN:w=M!=="ttb"?-1:1;break;case le.HOME:w="min";break;case le.END:w="max";break;case le.PAGE_UP:w=2;break;case le.PAGE_DOWN:w=-2;break;case le.BACKSPACE:case le.DELETE:u==null||u(c);break}w!==null&&(H.preventDefault(),m(w,c))}},se=function(H){switch(H.which||H.keyCode){case le.LEFT:case le.RIGHT:case le.UP:case le.DOWN:case le.HOME:case le.END:case le.PAGE_UP:case le.PAGE_DOWN:S==null||S();break}},ue=jt(M,o,s,A),B={};if(c!==null){var pe;B={tabIndex:T?null:We(Z,c),role:"slider","aria-valuemin":s,"aria-valuemax":A,"aria-valuenow":o,"aria-disabled":T,"aria-label":We(oe,c),"aria-labelledby":We(P,c),"aria-required":We(j,c),"aria-valuetext":(pe=We(b,c))===null||pe===void 0?void 0:pe(o),"aria-orientation":M==="ltr"||M==="rtl"?"horizontal":"vertical",onMouseDown:v,onTouchStart:v,onFocus:F,onMouseEnter:X,onKeyDown:ae,onKeyUp:se}}var me=a.createElement("div",pt({ref:t,className:Xe(L,ke(ke(ke({},"".concat(L,"-").concat(c+1),c!==null&&E),"".concat(L,"-dragging"),d),"".concat(L,"-dragging-delete"),h),I.handle),style:de(de(de({},ue),p),i.handle)},B,C));return f&&(me=f(me,{index:c,prefixCls:n,value:o,dragging:d,draggingDelete:h})),me}),sr=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],ir=a.forwardRef(function(e,t){var n=e.prefixCls,o=e.style,c=e.onStartMove,l=e.onOffsetChange,u=e.values,p=e.handleRender,f=e.activeHandleRender,d=e.draggingIndex,h=e.draggingDelete,m=e.onFocus,S=sn(e,sr),x=a.useRef({}),y=a.useState(!1),C=fe(y,2),g=C[0],s=C[1],A=a.useState(-1),M=fe(A,2),T=M[0],N=M[1],E=function(b){N(b),s(!0)},Z=function(b,i){E(i),m==null||m(b)},oe=function(b,i){E(i)};a.useImperativeHandle(t,function(){return{focus:function(b){var i;(i=x.current[b])===null||i===void 0||i.focus()},hideHelp:function(){jn.flushSync(function(){s(!1)})}}});var P=de({prefixCls:n,onStartMove:c,onOffsetChange:l,render:p,onFocus:Z,onMouseEnter:oe},S);return a.createElement(a.Fragment,null,u.map(function(j,b){var i=d===b;return a.createElement(Bt,pt({ref:function(L){L?x.current[b]=L:delete x.current[b]},dragging:i,draggingDelete:i&&h,style:We(o,b),key:b,value:j,valueIndex:b},P))}),f&&g&&a.createElement(Bt,pt({key:"a11y"},P,{value:u[T],valueIndex:null,dragging:d!==-1,draggingDelete:h,render:f,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),lr=function(t){var n=t.prefixCls,o=t.style,c=t.children,l=t.value,u=t.onClick,p=a.useContext(De),f=p.min,d=p.max,h=p.direction,m=p.includedStart,S=p.includedEnd,x=p.included,y="".concat(n,"-text"),C=jt(h,l,f,d);return a.createElement("span",{className:Xe(y,ke({},"".concat(y,"-active"),x&&m<=l&&l<=S)),style:de(de({},C),o),onMouseDown:function(s){s.stopPropagation()},onClick:function(){u(l)}},c)},ar=function(t){var n=t.prefixCls,o=t.marks,c=t.onClick,l="".concat(n,"-mark");return o.length?a.createElement("div",{className:l},o.map(function(u){var p=u.value,f=u.style,d=u.label;return a.createElement(lr,{key:p,prefixCls:l,style:f,value:p,onClick:c},d)})):null},ur=function(t){var n=t.prefixCls,o=t.value,c=t.style,l=t.activeStyle,u=a.useContext(De),p=u.min,f=u.max,d=u.direction,h=u.included,m=u.includedStart,S=u.includedEnd,x="".concat(n,"-dot"),y=h&&m<=o&&o<=S,C=de(de({},jt(d,o,p,f)),typeof c=="function"?c(o):c);return y&&(C=de(de({},C),typeof l=="function"?l(o):l)),a.createElement("span",{className:Xe(x,ke({},"".concat(x,"-active"),y)),style:C})},cr=function(t){var n=t.prefixCls,o=t.marks,c=t.dots,l=t.style,u=t.activeStyle,p=a.useContext(De),f=p.min,d=p.max,h=p.step,m=a.useMemo(function(){var S=new Set;if(o.forEach(function(y){S.add(y.value)}),c&&h!==null)for(var x=f;x<=d;)S.add(x),x+=h;return Array.from(S)},[f,d,h,c,o]);return a.createElement("div",{className:"".concat(n,"-step")},m.map(function(S){return a.createElement(ur,{prefixCls:n,key:S,value:S,style:l,activeStyle:u})}))},Ut=function(t){var n=t.prefixCls,o=t.style,c=t.start,l=t.end,u=t.index,p=t.onStartMove,f=t.replaceCls,d=a.useContext(De),h=d.direction,m=d.min,S=d.max,x=d.disabled,y=d.range,C=d.classNames,g="".concat(n,"-track"),s=St(c,m,S),A=St(l,m,S),M=function(Z){!x&&p&&p(Z,-1)},T={};switch(h){case"rtl":T.right="".concat(s*100,"%"),T.width="".concat(A*100-s*100,"%");break;case"btt":T.bottom="".concat(s*100,"%"),T.height="".concat(A*100-s*100,"%");break;case"ttb":T.top="".concat(s*100,"%"),T.height="".concat(A*100-s*100,"%");break;default:T.left="".concat(s*100,"%"),T.width="".concat(A*100-s*100,"%")}var N=f||Xe(g,ke(ke({},"".concat(g,"-").concat(u+1),u!==null&&y),"".concat(n,"-track-draggable"),p),C.track);return a.createElement("div",{className:N,style:de(de({},T),o),onMouseDown:M,onTouchStart:M})},fr=function(t){var n=t.prefixCls,o=t.style,c=t.values,l=t.startPoint,u=t.onStartMove,p=a.useContext(De),f=p.included,d=p.range,h=p.min,m=p.styles,S=p.classNames,x=a.useMemo(function(){if(!d){if(c.length===0)return[];var C=l??h,g=c[0];return[{start:Math.min(C,g),end:Math.max(C,g)}]}for(var s=[],A=0;A<c.length-1;A+=1)s.push({start:c[A],end:c[A+1]});return s},[c,d,l,h]);if(!f)return null;var y=x!=null&&x.length&&(S.tracks||m.tracks)?a.createElement(Ut,{index:null,prefixCls:n,start:x[0].start,end:x[x.length-1].end,replaceCls:Xe(S.tracks,"".concat(n,"-tracks")),style:m.tracks}):null;return a.createElement(a.Fragment,null,y,x.map(function(C,g){var s=C.start,A=C.end;return a.createElement(Ut,{index:g,prefixCls:n,style:de(de({},We(o,g)),m.track),start:s,end:A,key:g,onStartMove:u})}))},gr=130;function Yt(e){var t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function dr(e,t,n,o,c,l,u,p,f,d,h){var m=a.useState(null),S=fe(m,2),x=S[0],y=S[1],C=a.useState(-1),g=fe(C,2),s=g[0],A=g[1],M=a.useState(!1),T=fe(M,2),N=T[0],E=T[1],Z=a.useState(n),oe=fe(Z,2),P=oe[0],j=oe[1],b=a.useState(n),i=fe(b,2),I=i[0],L=i[1],v=a.useRef(null),F=a.useRef(null),X=a.useRef(null),ae=a.useContext(rr),se=ae.onDragStart,ue=ae.onDragChange;rn(function(){s===-1&&j(n)},[n,s]),a.useEffect(function(){return function(){document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",F.current),X.current&&(X.current.removeEventListener("touchmove",v.current),X.current.removeEventListener("touchend",F.current))}},[]);var B=function(w,R,k){R!==void 0&&y(R),j(w);var z=w;k&&(z=w.filter(function(O,D){return D!==s})),u(z),ue&&ue({rawValues:w,deleteIndex:k?s:-1,draggingIndex:s,draggingValue:R})},pe=Ke(function(H,w,R){if(H===-1){var k=I[0],z=I[I.length-1],O=o-k,D=c-z,Y=w*(c-o);Y=Math.max(Y,O),Y=Math.min(Y,D);var U=l(k+Y);Y=U-k;var q=I.map(function(re){return re+Y});B(q)}else{var K=(c-o)*w,J=Re(P);J[H]=I[H];var ce=f(J,K,H,"dist");B(ce.values,ce.value,R)}}),me=function(w,R,k){w.stopPropagation();var z=k||n,O=z[R];A(R),y(O),L(z),j(z),E(!1);var D=Yt(w),Y=D.pageX,U=D.pageY,q=!1;se&&se({rawValues:z,draggingIndex:R,draggingValue:O});var K=function(re){re.preventDefault();var te=Yt(re),Ce=te.pageX,ye=te.pageY,Me=Ce-Y,be=ye-U,ee=e.current.getBoundingClientRect(),Se=ee.width,Ne=ee.height,we,Te;switch(t){case"btt":we=-be/Ne,Te=Me;break;case"ttb":we=be/Ne,Te=Me;break;case"rtl":we=-Me/Se,Te=be;break;default:we=Me/Se,Te=be}q=d?Math.abs(Te)>gr&&h<P.length:!1,E(q),pe(R,we,q)},J=function ce(re){re.preventDefault(),document.removeEventListener("mouseup",ce),document.removeEventListener("mousemove",K),X.current&&(X.current.removeEventListener("touchmove",v.current),X.current.removeEventListener("touchend",F.current)),v.current=null,F.current=null,X.current=null,p(q),A(-1),E(!1)};document.addEventListener("mouseup",J),document.addEventListener("mousemove",K),w.currentTarget.addEventListener("touchend",J),w.currentTarget.addEventListener("touchmove",K),v.current=K,F.current=J,X.current=w.currentTarget},he=a.useMemo(function(){var H=Re(n).sort(function(O,D){return O-D}),w=Re(P).sort(function(O,D){return O-D}),R={};w.forEach(function(O){R[O]=(R[O]||0)+1}),H.forEach(function(O){R[O]=(R[O]||0)-1});var k=d?1:0,z=Object.values(R).reduce(function(O,D){return O+Math.abs(D)},0);return z<=k?P:n},[n,P,d]);return[s,x,N,he,me]}function hr(e,t,n,o,c,l){var u=a.useCallback(function(x){return Math.max(e,Math.min(t,x))},[e,t]),p=a.useCallback(function(x){if(n!==null){var y=e+Math.round((u(x)-e)/n)*n,C=function(M){return(String(M).split(".")[1]||"").length},g=Math.max(C(n),C(t),C(e)),s=Number(y.toFixed(g));return e<=s&&s<=t?s:null}return null},[n,e,t,u]),f=a.useCallback(function(x){var y=u(x),C=o.map(function(A){return A.value});n!==null&&C.push(p(x)),C.push(e,t);var g=C[0],s=t-e;return C.forEach(function(A){var M=Math.abs(y-A);M<=s&&(g=A,s=M)}),g},[e,t,o,n,u,p]),d=function x(y,C,g){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof C=="number"){var A,M=y[g],T=M+C,N=[];o.forEach(function(j){N.push(j.value)}),N.push(e,t),N.push(p(M));var E=C>0?1:-1;s==="unit"?N.push(p(M+E*n)):N.push(p(T)),N=N.filter(function(j){return j!==null}).filter(function(j){return C<0?j<=M:j>=M}),s==="unit"&&(N=N.filter(function(j){return j!==M}));var Z=s==="unit"?M:T;A=N[0];var oe=Math.abs(A-Z);if(N.forEach(function(j){var b=Math.abs(j-Z);b<oe&&(A=j,oe=b)}),A===void 0)return C<0?e:t;if(s==="dist")return A;if(Math.abs(C)>1){var P=Re(y);return P[g]=A,x(P,C-E,g,s)}return A}else{if(C==="min")return e;if(C==="max")return t}},h=function(y,C,g){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",A=y[g],M=d(y,C,g,s);return{value:M,changed:M!==A}},m=function(y){return l===null&&y===0||typeof l=="number"&&y<l},S=function(y,C,g){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",A=y.map(f),M=A[g],T=d(A,C,g,s);if(A[g]=T,c===!1){var N=l||0;g>0&&A[g-1]!==M&&(A[g]=Math.max(A[g],A[g-1]+N)),g<A.length-1&&A[g+1]!==M&&(A[g]=Math.min(A[g],A[g+1]-N))}else if(typeof l=="number"||l===null){for(var E=g+1;E<A.length;E+=1)for(var Z=!0;m(A[E]-A[E-1])&&Z;){var oe=h(A,1,E);A[E]=oe.value,Z=oe.changed}for(var P=g;P>0;P-=1)for(var j=!0;m(A[P]-A[P-1])&&j;){var b=h(A,-1,P-1);A[P-1]=b.value,j=b.changed}for(var i=A.length-1;i>0;i-=1)for(var I=!0;m(A[i]-A[i-1])&&I;){var L=h(A,-1,i-1);A[i-1]=L.value,I=L.changed}for(var v=0;v<A.length-1;v+=1)for(var F=!0;m(A[v+1]-A[v])&&F;){var X=h(A,1,v+1);A[v+1]=X.value,F=X.changed}}return{value:A[g],values:A}};return[f,S]}function Ar(e){return a.useMemo(function(){if(e===!0||!e)return[!!e,!1,!1,0];var t=e.editable,n=e.draggableTrack,o=e.minCount,c=e.maxCount;return[!0,t,!t&&n,o||0,c]},[e])}var ln=a.forwardRef(function(e,t){var n=e.prefixCls,o=n===void 0?"rc-slider":n,c=e.className,l=e.style,u=e.classNames,p=e.styles,f=e.id,d=e.disabled,h=d===void 0?!1:d,m=e.keyboard,S=m===void 0?!0:m,x=e.autoFocus,y=e.onFocus,C=e.onBlur,g=e.min,s=g===void 0?0:g,A=e.max,M=A===void 0?100:A,T=e.step,N=T===void 0?1:T,E=e.value,Z=e.defaultValue,oe=e.range,P=e.count,j=e.onChange,b=e.onBeforeChange,i=e.onAfterChange,I=e.onChangeComplete,L=e.allowCross,v=L===void 0?!0:L,F=e.pushable,X=F===void 0?!1:F,ae=e.reverse,se=e.vertical,ue=e.included,B=ue===void 0?!0:ue,pe=e.startPoint,me=e.trackStyle,he=e.handleStyle,H=e.railStyle,w=e.dotStyle,R=e.activeDotStyle,k=e.marks,z=e.dots,O=e.handleRender,D=e.activeHandleRender,Y=e.track,U=e.tabIndex,q=U===void 0?0:U,K=e.ariaLabelForHandle,J=e.ariaLabelledByForHandle,ce=e.ariaRequired,re=e.ariaValueTextFormatterForHandle,te=a.useRef(null),Ce=a.useRef(null),ye=a.useMemo(function(){return se?ae?"ttb":"btt":ae?"rtl":"ltr"},[ae,se]),Me=Ar(oe),be=fe(Me,5),ee=be[0],Se=be[1],Ne=be[2],we=be[3],Te=be[4],Ie=a.useMemo(function(){return isFinite(s)?s:0},[s]),Ve=a.useMemo(function(){return isFinite(M)?M:100},[M]),Fe=a.useMemo(function(){return N!==null&&N<=0?1:N},[N]),un=a.useMemo(function(){return typeof X=="boolean"?X?Fe:!1:X>=0?X:!1},[X,Fe]),rt=a.useMemo(function(){return Object.keys(k||{}).map(function(G){var _=k[G],V={value:Number(G)};return _&&xt(_)==="object"&&!a.isValidElement(_)&&("label"in _||"style"in _)?(V.style=_.style,V.label=_.label):V.label=_,V}).filter(function(G){var _=G.label;return _||typeof _=="number"}).sort(function(G,_){return G.value-_.value})},[k]),cn=hr(Ie,Ve,Fe,rt,v,un),wt=fe(cn,2),ot=wt[0],kt=wt[1],fn=Zn(Z,{value:E}),Mt=fe(fn,2),ze=Mt[0],gn=Mt[1],Ae=a.useMemo(function(){var G=ze==null?[]:Array.isArray(ze)?ze:[ze],_=fe(G,1),V=_[0],Q=V===void 0?Ie:V,ie=ze===null?[]:[Q];if(ee){if(ie=Re(G),P||ze===void 0){var $e=P>=0?P+1:2;for(ie=ie.slice(0,$e);ie.length<$e;){var Ee;ie.push((Ee=ie[ie.length-1])!==null&&Ee!==void 0?Ee:Ie)}}ie.sort(function(Pe,_e){return Pe-_e})}return ie.forEach(function(Pe,_e){ie[_e]=ot(Pe)}),ie},[ze,ee,Ie,P,ot]),Be=function(_){return ee?_:_[0]},st=Ke(function(G){var _=Re(G).sort(function(V,Q){return V-Q});j&&!nr(_,Ae,!0)&&j(Be(_)),gn(_)}),Et=Ke(function(G){G&&te.current.hideHelp();var _=Be(Ae);i==null||i(_),Qe(!i,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),I==null||I(_)}),dn=function(_){if(!(h||!Se||Ae.length<=we)){var V=Re(Ae);V.splice(_,1),b==null||b(Be(V)),st(V);var Q=Math.max(0,_-1);te.current.hideHelp(),te.current.focus(Q)}},hn=dr(Ce,ye,Ae,Ie,Ve,ot,st,Et,kt,Se,we),Je=fe(hn,5),Pt=Je[0],An=Je[1],vn=Je[2],ft=Je[3],_t=Je[4],Rt=function(_,V){if(!h){var Q=Re(Ae),ie=0,$e=0,Ee=Ve-Ie;Ae.forEach(function(Le,it){var Ht=Math.abs(_-Le);Ht<=Ee&&(Ee=Ht,ie=it),Le<_&&($e=it)});var Pe=ie;Se&&Ee!==0&&(!Te||Ae.length<Te)?(Q.splice($e+1,0,_),Pe=$e+1):Q[ie]=_,ee&&!Ae.length&&P===void 0&&Q.push(_);var _e=Be(Q);if(b==null||b(_e),st(Q),V){var He,Ue;(He=document.activeElement)===null||He===void 0||(Ue=He.blur)===null||Ue===void 0||Ue.call(He),te.current.focus(Pe),_t(V,Pe,Q)}else i==null||i(_e),Qe(!i,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),I==null||I(_e)}},xn=function(_){_.preventDefault();var V=Ce.current.getBoundingClientRect(),Q=V.width,ie=V.height,$e=V.left,Ee=V.top,Pe=V.bottom,_e=V.right,He=_.clientX,Ue=_.clientY,Le;switch(ye){case"btt":Le=(Pe-Ue)/ie;break;case"ttb":Le=(Ue-Ee)/ie;break;case"rtl":Le=(_e-He)/Q;break;default:Le=(He-$e)/Q}var it=Ie+Le*(Ve-Ie);Rt(ot(it),_)},pn=a.useState(null),Nt=fe(pn,2),gt=Nt[0],Tt=Nt[1],mn=function(_,V){if(!h){var Q=kt(Ae,_,V);b==null||b(Be(Ae)),st(Q.values),Tt(Q.value)}};a.useEffect(function(){if(gt!==null){var G=Ae.indexOf(gt);G>=0&&te.current.focus(G)}Tt(null)},[gt]);var Cn=a.useMemo(function(){return Ne&&Fe===null?!1:Ne},[Ne,Fe]),zt=Ke(function(G,_){_t(G,_),b==null||b(Be(Ae))}),$t=Pt!==-1;a.useEffect(function(){if(!$t){var G=Ae.lastIndexOf(An);te.current.focus(G)}},[$t]);var et=a.useMemo(function(){return Re(ft).sort(function(G,_){return G-_})},[ft]),bn=a.useMemo(function(){return ee?[et[0],et[et.length-1]]:[Ie,et[0]]},[et,ee,Ie]),Lt=fe(bn,2),Ot=Lt[0],Ft=Lt[1];a.useImperativeHandle(t,function(){return{focus:function(){te.current.focus(0)},blur:function(){var _,V=document,Q=V.activeElement;(_=Ce.current)!==null&&_!==void 0&&_.contains(Q)&&(Q==null||Q.blur())}}}),a.useEffect(function(){x&&te.current.focus(0)},[]);var yn=a.useMemo(function(){return{min:Ie,max:Ve,direction:ye,disabled:h,keyboard:S,step:Fe,included:B,includedStart:Ot,includedEnd:Ft,range:ee,tabIndex:q,ariaLabelForHandle:K,ariaLabelledByForHandle:J,ariaRequired:ce,ariaValueTextFormatterForHandle:re,styles:p||{},classNames:u||{}}},[Ie,Ve,ye,h,S,Fe,B,Ot,Ft,ee,q,K,J,ce,re,p,u]);return a.createElement(De.Provider,{value:yn},a.createElement("div",{ref:Ce,className:Xe(o,c,ke(ke(ke(ke({},"".concat(o,"-disabled"),h),"".concat(o,"-vertical"),se),"".concat(o,"-horizontal"),!se),"".concat(o,"-with-marks"),rt.length)),style:l,onMouseDown:xn,id:f},a.createElement("div",{className:Xe("".concat(o,"-rail"),u==null?void 0:u.rail),style:de(de({},H),p==null?void 0:p.rail)}),Y!==!1&&a.createElement(fr,{prefixCls:o,style:me,values:Ae,startPoint:pe,onStartMove:Cn?zt:void 0}),a.createElement(cr,{prefixCls:o,marks:rt,dots:z,style:w,activeStyle:R}),a.createElement(ir,{ref:te,prefixCls:o,style:he,values:ft,draggingIndex:Pt,draggingDelete:vn,onStartMove:zt,onOffsetChange:mn,onFocus:y,onBlur:C,handleRender:O,activeHandleRender:D,onChangeComplete:Et,onDelete:Se?dn:void 0}),a.createElement(ar,{prefixCls:o,marks:rt,onClick:Rt})))});const ve="#4A9AEF",xe="#00D8B6",qe="rgba(0,216,182,0.2)",Ge="rgba(59,130,246,0.2)";function ht(e,t,n,o){return(e==null?void 0:e.bin_id)==t&&$(e.amount_a).gt(0)?o?"url(#splitGradientOpacity)":"url(#splitGradient)":$(e==null?void 0:e.bin_id).lte(t)?o?n?Ge:qe:n?ve:xe:($(e==null?void 0:e.bin_id).gte(t),o?n?qe:Ge:n?xe:ve)}const vr=(e,t)=>{var c,l;const n=(c=e==null?void 0:e.newBins)!=null&&c.liquidity?$((l=e==null?void 0:e.newBins)==null?void 0:l.liquidity).div(e==null?void 0:e.totalLiquidity).toString():"0";return $(t).mul(n).toNumber()},xr=e=>{const{payload:t,x:n,y:o,height:c,width:l,isOpacity:u,radius:p,BarShape:f,isReverse:d}=e,h=$(c).mul(t.quantityA).toNumber(),m=$(c).minus(h).toNumber();return r.jsxs("g",{children:[r.jsx(Ct,{x:n,y:o,width:l,height:h,radius:p,fill:u?d?qe:Ge:d?xe:ve,shape:f}),r.jsx(Ct,{x:n,y:o+h,width:l,height:m,radius:h==0?p:0,fill:u?d?Ge:qe:d?ve:xe,shape:f})]})},At=e=>{const{payload:t,x:n,y:o,height:c,width:l,isOpacity:u,activeBin:p,BarShape:f}=e;return(t==null?void 0:t.quantityA)!==void 0&&(t==null?void 0:t.bin_id)==p?r.jsx(xr,{...e}):r.jsx(Ct,{...e,shape:f})},pr=(e,t,n,o,c,l)=>{var A;const[u,p]=a.useState(null),{x:f,y:d,width:h,payload:m,index:S}=e,x=e.height,y=S===u;let C=0;c&&((A=m==null?void 0:m.newBins)!=null&&A.liquidity)&&(C=vr(m,x));let g=0;c&&(g=$(x).minus(C).toNumber());const s=m!=null&&m.noRadius||!(m!=null&&m.liquidity)?0:2;return r.jsxs("g",{onMouseEnter:()=>p(S),onMouseLeave:()=>p(null),children:[c?r.jsxs("g",{children:[r.jsx(At,{x:f,y:d,width:h,height:C,radius:s,fill:ht(m,t,n,!0),activeBin:t,payload:m.newBins,isOpacity:!0,BarShape:l,isReverse:n}),r.jsx(At,{x:f,y:d+C,width:h,height:g,radius:s,fill:ht(m,t,n),activeBin:t,payload:m,BarShape:l,isReverse:n})]}):r.jsx(At,{x:f,y:d,width:h,height:x,radius:s,fill:ht(m,t,n),activeBin:t,payload:m,BarShape:l,isReverse:n}),y&&r.jsx("rect",{x:f,y:d,width:h,height:x,fill:"rgba(0,0,0,0.3)"}),m.bin_id==t&&r.jsxs("g",{children:[r.jsx("line",{x1:f+h/2,y1:0,x2:f+h/2,y2:o-30,stroke:"#fff",strokeWidth:2}),r.jsx("path",{d:`M${f+h/2-5},1 Q${f+h/2-5},0 ${f+h/2-4},0 L${f+h/2+4},0 Q${f+h/2+5},0 ${f+h/2+5},1 L${f+h/2},8 Z`,fill:"#fff"})]})]})},at=(e,t)=>!t||t==="--"?"--":Pn($(e).mul(t).toString(),2);function mr({width:e,data:t,activeBin:n,height:o=192,fromPosition:c,type:l="position",direct:u=!0,noDataText:p,isReverse:f=!1,onChangeRange:d,isShowSlider:h,tokenAPrice:m,tokenBPrice:S,strategy:x,chartBinsData:y,dataLoading:C}){var B,pe,me,he,H;const[g,s]=a.useState(),[A,M]=a.useState(!1),[T,N]=a.useState(),[E,Z]=a.useState();En(()=>{s(t),N(t),Z(t)},[t]);const oe=a.useMemo(()=>!!(t!=null&&t.toLarge),[t==null?void 0:t.toLarge]),P=a.useCallback(({active:w,payload:R})=>{var K,J,ce;if(!w||!((K=R==null?void 0:R[0])!=null&&K.payload))return null;const k=R[0].payload,z=n<=k.bin_id,O=n>=k.bin_id,D=!!((J=k.newBins)!=null&&J.liquidity)&&k.newBins.liquidity!=="0",Y=(ce=k.newBins)!=null&&ce.isIncrease?"Add":"Remove",U=(re,te,Ce=!1)=>r.jsxs(ge,{gap:"4px",children:[te&&r.jsx(Cr,{color:te}),r.jsxs(W,{fontSize:"12px",color:"text_paragraph",children:[re,Ce?` (${Y})`:""]})]}),q=re=>r.jsx(W,{fontSize:"12px",color:"text_caption",flex:"1",textAlign:"right",children:Ze(re)});return r.jsx(ne,{gap:"16px",minW:"200px",bg:"#141618",borderRadius:"6px",border:"1px solid",borderColor:"border",padding:"8px",className:"current-liquidity-chart-tooltip",children:r.jsxs(ne,{w:"100%",gap:"8px",align:"flex-start",children:[r.jsxs(ge,{w:"100%",justify:"space-between",pl:"4px",pt:"4px",pr:"4px",children:[U("Bin Price"),q(k.price)]}),r.jsxs(ne,{w:"100%",gap:"8px",flexDirection:f?"column-reverse":"column",children:[z&&r.jsxs(ne,{w:"100%",gap:"8px",children:[z&&r.jsxs(ne,{w:"100%",bg:"bg_fifth",borderRadius:"4px",p:"8px 4px",gap:"8px",children:[r.jsxs(ge,{w:"100%",justify:"space-between",children:[U(Ye(k.baseSymbol,8),k.bin_id<n?f?ve:xe:f?xe:ve),q(k.baseAmount)]}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",w:"100%",textAlign:"right",children:at(k.baseAmount,m)})]}),z&&D&&r.jsxs(ne,{w:"100%",bg:"bg_fifth",borderRadius:"4px",p:"8px 4px",gap:"8px",children:[r.jsxs(ge,{w:"100%",justify:"space-between",children:[U(Ye(k.baseSymbol,8),k.bin_id<n?f?ve:xe:f?xe:ve,!0),q(k.newBins.baseAmount||"0")]}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",w:"100%",textAlign:"right",children:at(k.newBins.baseAmount||"0",m)})]})]}),O&&r.jsxs(ne,{w:"100%",gap:"8px",children:[O&&r.jsxs(ne,{w:"100%",bg:"bg_fifth",borderRadius:"4px",p:"8px 4px",gap:"8px",children:[r.jsxs(ge,{w:"100%",justify:"space-between",children:[U(Ye(k.quoteSymbol,8),k.bin_id>n?f?xe:ve:f?ve:xe),q(k.quoteAmount)]}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",w:"100%",textAlign:"right",children:at(k.quoteAmount,S)})]}),O&&D&&r.jsxs(ne,{w:"100%",bg:"bg_fifth",borderRadius:"4px",p:"8px 4px",gap:"8px",children:[r.jsxs(ge,{w:"100%",justify:"space-between",children:[U(Ye(k.quoteSymbol,8),k.bin_id>n?f?xe:ve:f?ve:xe,!0),q(k.newBins.quoteAmount||"0")]}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",w:"100%",textAlign:"right",children:at(k.newBins.quoteAmount,S)})]})]})]})]})})},[n,f,m,S]),j=a.useCallback(w=>{var q,K;const R=(q=t==null?void 0:t.list)==null?void 0:q.length;if(!R)return;const k=u?n-w:n-(R-w-1),z=u?n+(R-w-1):n+w,O=((K=t==null?void 0:t.list)==null?void 0:K.findIndex(J=>J.bin_id===n))||0,D=u?n-O:n-(R-O-1),Y=u?n+(R-O-1):n+O;(k!==D||z!==Y)&&d?(d(k,z,!0),E&&s(E)):T&&(s(T),Z(T)),M(!1)},[n,t,u,d,T,E]),[b,i]=a.useState(void 0);a.useEffect(()=>{var R;const w=(R=t==null?void 0:t.list)==null?void 0:R.findIndex(k=>k.bin_id===n);i(w)},[n,t]);const I=Wn(a.useCallback(async w=>{var K,J,ce,re,te,Ce;const R=(K=t==null?void 0:t.list)==null?void 0:K.findIndex(ye=>ye.bin_id===n);if(R===w||((J=t==null?void 0:t.list)==null?void 0:J.length)<2)return;const k=(ce=t==null?void 0:t.list)==null?void 0:ce.length,z=R-w,O=(t==null?void 0:t.list[0].bin_id)<(t==null?void 0:t.list[((re=t==null?void 0:t.list)==null?void 0:re.length)-1].bin_id);let D,Y;z<0,O?(D=(t==null?void 0:t.list[0].bin_id)+z,Y=(t==null?void 0:t.list[k-1].bin_id)+z):(D=(t==null?void 0:t.list[k-1].bin_id)-z,Y=(t==null?void 0:t.list[0].bin_id)-z);const U=y&&await y(D,Y);if(U){A?Z({...U}):s({...U});return}let q=[];if(k>0){const ye=u?w-R:R-w,Me=$((te=t==null?void 0:t.list[1])==null?void 0:te.price).minus((Ce=t==null?void 0:t.list[0])==null?void 0:Ce.price).toNumber();for(let ee=0;ee<k;ee++){const Se=t==null?void 0:t.list[ee],Ne=u?ee-ye:ee+ye,we=t==null?void 0:t.list[Ne];we?q.push(we):q.push({...Se,bin_id:Se.bin_id-ye,price:u?$(Se.price).minus($(Me).mul(ee)).toNumber():$(Se.price).plus($(Me).mul(ee)).toNumber(),liquidity:0})}const be=Math.max(...q.map(ee=>Number(ee.liquidity)||0));A?Z({list:q,max:be}):s({list:q,max:be})}},[n,t,y,A]),10),L=a.useCallback(w=>{A||(M(!0),N(g)),i(w),I(w)},[I,A,g]),v=a.useMemo(()=>A&&E?E:g!=null&&g.list&&g.list.length>0?g:t||{list:[],max:0},[g,t==null?void 0:t.list,A,E]),F=a.useMemo(()=>{var w;return((w=v==null?void 0:v.list)==null?void 0:w.length)>200?"rect":"path"},[(B=v==null?void 0:v.list)==null?void 0:B.length]),X=a.useMemo(()=>{var k,z;return(k=v==null?void 0:v.list)!=null&&k.length?e/((z=v==null?void 0:v.list)==null?void 0:z.length)/2:0},[(pe=v==null?void 0:v.list)==null?void 0:pe.length,e]),ae=a.useMemo(()=>{var k,z;if(!((k=v==null?void 0:v.list)!=null&&k.length))return e;const w=e/((z=v==null?void 0:v.list)==null?void 0:z.length);return e-w},[(me=v==null?void 0:v.list)==null?void 0:me.length,e,X]),se=a.useMemo(()=>{var w,R;return(w=v==null?void 0:v.list)!=null&&w.length&&((R=v==null?void 0:v.list)==null?void 0:R.length)>650?2:0},[v==null?void 0:v.list,n]),ue=a.useMemo(()=>{var w,R;return(w=v==null?void 0:v.list)!=null&&w.length&&((R=v==null?void 0:v.list)==null?void 0:R.length)>650?2:0},[v==null?void 0:v.list,n]);return r.jsx(ne,{gap:"0px",p:"0px",width:e,height:o,position:"relative",children:oe?r.jsx(yr,{}):v&&((he=v==null?void 0:v.list)==null?void 0:he.length)>0?r.jsxs(ne,{w:"100%",h:"100%",children:[r.jsx($n,{width:"100%",height:"100%",children:r.jsxs(Qt,{data:(v==null?void 0:v.list)||[],margin:{top:12,right:se,left:ue,bottom:0},children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"splitGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[r.jsx("stop",{offset:"50%",stopColor:u?xe:ve}),r.jsx("stop",{offset:"50%",stopColor:u?ve:xe})]})}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"splitGradientOpacity",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[r.jsx("stop",{offset:"50%",stopColor:u?qe:Ge}),r.jsx("stop",{offset:"50%",stopColor:u?Ge:qe})]})}),r.jsx(Zt,{dataKey:"price",tickLine:!1,tick:{fontSize:"12px",fill:"#909CA4"},tickMargin:7,tickFormatter:w=>Ze(w)}),r.jsx(Kt,{type:"number",domain:[0,v==null?void 0:v.max],hide:!0}),r.jsx("line",{x1:0,y1:o-29,x2:"100%",y2:o-29,stroke:"#355369",strokeWidth:"2px"}),r.jsx(Jt,{cursor:!1,content:r.jsx(P,{}),wrapperStyle:{zIndex:999999}}),r.jsx(en,{dataKey:c?"totalLiquidity":"liquidity",shape:w=>pr(w,n,f,o,c,F)})]})}),h&&b!==void 0&&r.jsx(nt,{w:"100%",position:"absolute",left:"0px",bottom:"28px",zIndex:100,style:{transform:`translateX(${X}px)`,width:`${ae}px`},children:r.jsx(ln,{className:"dlmm-current-liquidity-slider",min:0,max:Math.max(0,(((H=v==null?void 0:v.list)==null?void 0:H.length)||1)-1),value:b,onChange:L,onChangeComplete:j,step:1,dots:!1,dotStyle:{display:"none"},trackStyle:[{backgroundColor:"#355369",height:2,borderRadius:0,zIndex:100}],railStyle:{backgroundColor:"#355369",height:2,borderRadius:0,zIndex:100},handleStyle:{borderColor:"none!important",backgroundColor:"#fff!important",borderRadius:"2px",width:18,height:10,opacity:1,top:"1px",zIndex:100,outline:"none"}})})]}):r.jsx(br,{type:l,noDataText:p,height:o,loading:C})})}const Cr=({color:e})=>r.jsx(nt,{w:"12px",h:"12px",bg:e,borderRadius:"4px"}),br=({type:e="simulation",noDataText:t,height:n,loading:o})=>r.jsxs(ne,{w:"100%",h:n?n-8+"px":"100%",gap:"8px",bg:"center / contain no-repeat url('/images/dlmm_liquidity_bg.png') #72c1f708",alignItems:"center",justify:"center",position:"absolute",left:"0px",top:"0px",backdropFilter:"blur(2px)",borderRadius:"12px",children:[o&&r.jsx(wn,{size:"sm"}),t?r.jsx(W,{color:"text_caption",fontSize:"14px",children:t}):r.jsxs(r.Fragment,{children:[r.jsx(W,{color:"text_caption",fontSize:"14px",children:"Preview your liquidity position"}),r.jsx(W,{color:"text_paragraph",fontSize:"12px",children:"Please enter deposit amount and select price range"})]})]}),yr=()=>r.jsxs(ne,{w:"100%",h:"100%",gap:"8px",bg:"center / contain no-repeat url('/images/dlmm_liquidity_bg.png') #72c1f708",alignItems:"center",justify:"center",position:"absolute",left:"0px",top:"0px",backdropFilter:"blur(2px)",borderRadius:"12px",children:[r.jsx(W,{color:"text_caption",fontSize:"14px",children:"Missing chart data"}),r.jsx(W,{color:"text_paragraph",fontSize:"12px",children:"Chart cannot be generated for this price range"})]}),qr=a.memo(mr);function Gr({label:e="Current Price",price:t,perText:n,showIcon:o=!0}){return r.jsxs(ge,{gap:"4px",children:[o&&r.jsx(nt,{p:"2px",borderRadius:"4px",bg:"white_color_opacity.10",mr:"4px",children:r.jsx(_n,{xlinkHref:"#icon-funnel",svgFill:"text_caption",fontSize:"16px"})}),r.jsx(W,{fontSize:"14px",children:e}),t&&r.jsxs(r.Fragment,{children:[r.jsx(W,{color:"text_caption",fontSize:"14px",children:t}),r.jsx(W,{fontSize:"14px",children:n})]}),!t&&r.jsx(mt,{w:"66px",h:"14px",display:"inline-block"})]})}function Xr({title:e,perText:t,data:n,direct:o,loading:c,handleAddPrice:l,handleSubPrice:u,onPriceChange:p,minPrice:f="0",maxPrice:d="âˆž",subDisabled:h,addDisabled:m,verifyAction:S=!0}){const[x,y]=a.useState(""),C=a.useRef(),g=N=>{const E=N.target.value;E&&E.startsWith("-")||(console.log(E,T(E)||T(E.split(",").join("")),"handleChange"),(T(E)||T(E.split(",").join("")))&&y(E))};a.useEffect(()=>{if(!n||!n.price)return;const N=o?n.displayPrice:n.displayReversePrice;y(N||""),C.current=N.toString()},[n==null?void 0:n.price,o,n==null?void 0:n.changeCount]);const s=a.useCallback(()=>{S?o?l(n):u(n):l(n)},[o,n==null?void 0:n.price]),A=a.useCallback(()=>{S?o?u(n):l(n):u(n)},[o,n==null?void 0:n.price]),M=a.useCallback(()=>{if(C.current===x)return;let N;if(console.log(x,typeof x,!x,n,"handleOnBlur"),!x){N=(o?n.displayPrice:n.displayReversePrice)??"",y(N);return}let E;try{E=p(n,o?Oe(x):$(1).div(Oe(x)).toString())}catch{E=p(n,x)}console.log(E,"handleOnBlur"),E&&y(o?E==null?void 0:E.displayPrice:E==null?void 0:E.displayReversePrice)},[x,n,o]),T=N=>N===""||/^-?\d*\.?\d*$/.test(N)||N==="âˆž";return r.jsx(Ln,{borderRadius:"12px",p:"12px",children:r.jsxs(ge,{flex:"1",justify:"space-between",children:[r.jsx(Gt,{type:"Sub",onClick:A,disabled:(f!=="âˆž"?$(Oe(x)).lte(Oe(f)):x==="âˆž")||h}),r.jsxs(ne,{children:[r.jsx(W,{fontSize:"12px",color:"primary_gray",children:e}),c?r.jsx(mt,{w:"100px",h:"14px"}):r.jsx(kn,{value:x,onChange:g,placeholder:"0.0",style:{width:"calc(100% - 8px)",background:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",opacity:1,outline:"none",color:"var(--chakra-colors-text_caption)",fontSize:"14px",height:"14px",lineHeight:"14px",textAlign:"center",fontWeight:"500"},onBlur:M}),c?r.jsx(mt,{w:"100px",h:"12px"}):r.jsx(W,{fontSize:"12px",color:"primary_gray",children:t})]}),r.jsx(Gt,{type:"Add",onClick:s,disabled:(d!=="âˆž"?$(Oe(x)).gte(Oe(d)):x==="âˆž")||m})]})})}function Dr(){const{strategy:e,setStrategy:t}=On();return r.jsxs(ge,{w:"100%",justify:"space-between",gap:"0px",children:[r.jsx(vt,{size:"m",type:je.Spot,isActive:e===je.Spot,onClick:()=>t(je.Spot)}),r.jsx(vt,{size:"m",type:je.Curve,isActive:e===je.Curve,onClick:()=>t(je.Curve)}),r.jsx(vt,{size:"m",type:je.BidAsk,isActive:e===je.BidAsk,onClick:()=>t(je.BidAsk)})]})}const Sr={[je.Spot]:{title:"Spot",activeIcon:"/images/strategy/img_spo_sel.png",inactiveIcon:"/images/strategy/img_spo_nor.png",tooltip:"Evenly distributes liquidity across the selected price range, providing uniform coverage throughout the range."},[je.Curve]:{title:"Curve",activeIcon:"/images/strategy/img_cur_sel.png",inactiveIcon:"/images/strategy/img_cur_nor.png",tooltip:"Concentrates liquidity within your selected price range to enhance capital efficiency."},[je.BidAsk]:{title:"Bid-Ask",activeIcon:"/images/strategy/img_bid_sel.png",inactiveIcon:"/images/strategy/img_bid_nor.png",tooltip:"Allocates liquidity in an inverse curve distribution to capture volatility of bid-ask spread."}},Ir={s:{flexDir:"column-reverse",gap:"8px",p:"12px"},m:{flexDir:"column-reverse",gap:"10px",align:"center",p:"12px 28px"},l:{flexDir:"column-reverse",gap:"8px",p:"12px 44px"}},jr={s:{w:"60px",h:"24px"},m:{w:"86px",h:"24px"},l:{w:"80px",h:"32px"}},vt=({isActive:e,onClick:t,type:n,size:o="s"})=>{const{title:c,activeIcon:l,inactiveIcon:u,tooltip:p}=Sr[n],f=Ir[o],{w:d,h}=jr[o],{isApp:m}=Rn();return r.jsx(Nn,{gutter:-4,tooltip:r.jsx(W,{fontSize:"12px",lineHeight:"20px",children:p}),showTooltip:!m,children:r.jsxs(Mn,{w:"100%",bg:e?"center -10px / cover no-repeat url('/images/strategy/img_light.png')":"center -80px / cover no-repeat url('/images/strategy/img_light.png') ",...f,alignItems:"center",onClick:()=>t(n),cursor:"pointer",_hover:{p:{color:"text_caption"}},children:[r.jsx(W,{whiteSpace:"nowrap",fontSize:"14px",fontWeight:e?"500":"400",color:e?"primary":"primary_gray",children:c}),r.jsx(It,{src:e?l:u,w:d,h,opacity:e?1:.5})]})})},an="data:image/png;base64,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",wr=1e3,ut="#00D8B6",ct="#4A9AEF";function kr(e){var u,p;const{minBinId:t,maxBinId:n,height:o,data:c}=e,l=a.useMemo(()=>t!==void 0&&n!==void 0?$(t).minus(n).abs().gte(wr):!1,[t,n]);return r.jsx(nt,{as:"div",p:"0px",w:{base:"100%",lg:`${e.width}px`},h:`${e.height}px`,margin:"0 auto",pos:"relative",overflow:"visible",children:l?r.jsx(Pr,{height:e.height?e.height+22:120}):((p=(u=e==null?void 0:e.data)==null?void 0:u.list)==null?void 0:p.length)>0?r.jsx(Mr,{...e}):r.jsx(Er,{height:e.height?e.height+22:120,maxBinLoading:e.maxBinLoading||!1})})}function Mr({activeBin:e,data:t,width:n,onChangeRange:o,height:c=120,noToolTip:l,isSimple:u,minBinId:p,maxBinId:f,currentLiquidityBins:d,otherPosBinObj:h,isReverse:m=!1,type:S}){const[x,y]=a.useState([0,0]),[C,g]=a.useState(null),s=t==null?void 0:t.list;a.useMemo(()=>{if(!s||s.length===0)return{};const P=s.length,j={};if(P<=8)for(let b=1;b<P-1;b++)j[b]=Ze(Oe(s[b].price));else{const i=Math.floor(P/8),I=Math.max(1,i),L=P-1-i,v=(L-I)/5;for(let F=0;F<6;F++){const X=Math.round(I+F*v),ae=Math.max(I,Math.min(X,L));j[ae]=Ze(Oe(s[ae].price))}}return console.log("ðŸš€ ~ SelectChart ~ result:",j),j},[s]);const A=a.useCallback(P=>{var i,I;if(!s||s.length===0)return;const j=(i=s[P[0]])==null?void 0:i.bin_id,b=(I=s[P[1]])==null?void 0:I.bin_id;j!==void 0&&b!==void 0&&($(b).gte(j)?o(j,b):o(b,j))},[s,o]);a.useEffect(()=>{var P,j;if(p!==void 0&&f!==void 0&&s&&(s==null?void 0:s.length)>0){const b=((P=s==null?void 0:s[0])==null?void 0:P.bin_id)<((j=s==null?void 0:s[(s==null?void 0:s.length)-1])==null?void 0:j.bin_id),i=s.findIndex(F=>F.bin_id===p),I=s.findIndex(F=>F.bin_id===f),L=i===-1?b?0:s.length-1:i,v=I===-1?b?s.length-1:0:I;y([Math.min(L,v),Math.max(L,v)])}else u&&y([0,(s==null?void 0:s.length)-1])},[p,f,s,u]);const M=a.useMemo(()=>{var P,j;return d&&((P=d==null?void 0:d.list)==null?void 0:P.length)>0?Object.fromEntries((j=d==null?void 0:d.list)==null?void 0:j.map(b=>[b==null?void 0:b.bin_id,b])):{}},[d]),T=a.useMemo(()=>(s==null?void 0:s.length)>200?"rect":"path",[s==null?void 0:s.length]),N=a.useCallback(P=>{const{x:j,y:b,width:i,height:I,index:L,payload:v}=P,F=x[0]<=x[1]?L>=x[0]&&L<=x[1]:L>=x[1]&&L<=x[0],X=(v==null?void 0:v.bin_id)===e,ae=L===C,se=Math.max(0,I);let ue="#222C35";F&&(ue="#354F62"),X&&(ue="#568BB0"),ae&&(ue="#76C8FF");const B=3;return r.jsxs("g",{children:[T==="rect"||se<1?r.jsx("rect",{x:j,y:b,width:i,height:se,fill:ue}):r.jsx("path",{d:`
            M${j},${b+se}
            L${j},${b+B}
            Q${j},${b} ${j+B},${b}
            L${j+i-B},${b}
            Q${j+i},${b} ${j+i},${b+B}
            L${j+i},${b+se}
            Z
          `,fill:ue}),r.jsx("rect",{x:j,y:0,width:i,height:c,fill:"transparent",onMouseEnter:()=>g(L),onMouseLeave:()=>g(null),style:{cursor:"pointer"}})]})},[x,e,C,c,T]),E=a.useCallback(({active:P,payload:j,coordinate:b})=>{var z,O,D,Y;if(!P)return null;const i=(z=j==null?void 0:j[0])==null?void 0:z.payload,I=M==null?void 0:M[i==null?void 0:i.bin_id],L=h==null?void 0:h[i==null?void 0:i.bin_id];let v=S==="liquidity"?(L==null?void 0:L.amount_a)||"0":(I==null?void 0:I.baseAmount)||"0",F=S==="liquidity"?(L==null?void 0:L.amount_b)||"0":(I==null?void 0:I.quoteAmount)||"0";const X=Number(v)?Number((i==null?void 0:i.baseAmount)||"0")?lt($(v).lt(i==null?void 0:i.baseAmount)?$(v).div(i==null?void 0:i.baseAmount).mul(100).toString():"100",2):"100%":"0%",ae=Number(F)?Number((i==null?void 0:i.quoteAmount)||"0")?lt($(F).lt(i==null?void 0:i.quoteAmount)?$(F).div(i==null?void 0:i.quoteAmount).mul(100).toString():"100",2):"100%":"0%",se=e<=(i==null?void 0:i.bin_id),ue=e>=(i==null?void 0:i.bin_id),B=!!(I!=null&&I.newBins)&&((O=I==null?void 0:I.newBins)==null?void 0:O.liquidity)&&((D=I==null?void 0:I.newBins)==null?void 0:D.liquidity)!=="0"||S==="liquidity"&&(+(I==null?void 0:I.baseAmount)||+(I==null?void 0:I.quoteAmount));let pe="0%",me="0%";if(B){const U=I==null?void 0:I.newBins;let q=S==="liquidity"?!0:U.isIncrease,K=S==="liquidity"?(I==null?void 0:I.baseAmount)||"0":(U==null?void 0:U.baseAmount)||"0",J=S==="liquidity"?(I==null?void 0:I.quoteAmount)||"0":(U==null?void 0:U.quoteAmount)||"0";const ce=q?$(v).add(K).toString():$(v).minus(K).toString(),re=q?$(F).add(J).toString():$(F).minus(J).toString(),te=q?$(i==null?void 0:i.baseAmount).add(K).toString():$(i==null?void 0:i.baseAmount).minus(K).toString(),Ce=q?$(i==null?void 0:i.quoteAmount).add(J).toString():$(i==null?void 0:i.quoteAmount).minus(J).toString();pe=$(ce).lte(0)?"0%":$(i==null?void 0:i.baseAmount).lte(0)?"100%":lt($(ce).div(te).mul(100).toString(),2),me=$(re).lte(0)?"0%":$(i==null?void 0:i.quoteAmount).lte(0)?"100%":lt($(re).div(Ce).mul(100).toString(),2)}const he=((Y=document==null?void 0:document.querySelector(".dlmm_select_range_tooltip"))==null?void 0:Y.clientWidth)??200,H=(b==null?void 0:b.x)||0,k=n-H>=he?Math.min(H,n-he):Math.max(0,H-he);return r.jsx("div",{style:{position:"absolute",bottom:"-40px",left:`${k}px`,zIndex:999999},children:r.jsxs(ne,{minW:"200px",bg:"#141618",borderRadius:"12px",border:"1px solid",borderColor:"#2A3238",padding:"8px",gap:"8px",justify:"space-between",className:"dlmm_select_range_tooltip",children:[r.jsxs(ge,{justify:"space-between",w:"100%",children:[r.jsx(W,{fontSize:"12px",color:"text_paragraph",children:"Bin Price"}),r.jsx(W,{fontSize:"12px",color:"text_caption",children:Ze(i==null?void 0:i.price)})]}),r.jsxs(ne,{w:"100%",gap:"12px",flexDirection:m?"column-reverse":"column",children:[se&&r.jsxs(ne,{padding:"8px 4px",bg:"bg_fifth",borderRadius:"4px",gap:"8px",w:"100%",align:"space-between",justify:"center",children:[r.jsxs(ge,{w:"100%",gap:"16px",justify:"space-between",children:[r.jsxs(ge,{gap:"4px",children:[r.jsx(Wt,{imageUrl:i==null?void 0:i.baseLogo,w:"16px",h:"16px"}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",children:Ye(i==null?void 0:i.baseSymbol,8)})]}),r.jsx(W,{fontSize:"12px",color:"text_caption",children:qt(i==null?void 0:i.baseAmount)})]}),r.jsxs(ge,{w:"100%",gap:"16px",justify:"space-between",children:[r.jsx(W,{whiteSpace:"nowrap",fontSize:"12px",color:(i==null?void 0:i.bin_id)<e?m?ct:ut:m?ut:ct,children:"Your share in this bin"}),r.jsxs(W,{fontSize:"12px",color:"text_caption",whiteSpace:"nowrap",children:[X,!!B&&!isNaN(B)&&" -> ",!!B&&!isNaN(B)&&pe]})]})]}),ue&&r.jsxs(ne,{padding:"8px 4px",bg:"bg_fifth",borderRadius:"4px",gap:"8px",w:"100%",align:"space-between",justify:"center",children:[r.jsxs(ge,{w:"100%",gap:"16px",justify:"space-between",children:[r.jsxs(ge,{gap:"4px",children:[r.jsx(Wt,{imageUrl:i==null?void 0:i.quoteLogo,w:"16px",h:"16px"}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",children:Ye(i==null?void 0:i.quoteSymbol,8)})]}),r.jsx(W,{fontSize:"12px",color:"text_caption",children:qt(i==null?void 0:i.quoteAmount)})]}),r.jsxs(ge,{w:"100%",gap:"16px",justify:"space-between",children:[r.jsx(W,{fontSize:"12px",whiteSpace:"nowrap",color:(i==null?void 0:i.bin_id)>e?m?ut:ct:m?ct:ut,children:"Your share in this bin"}),r.jsxs(W,{fontSize:"12px",color:"text_caption",whiteSpace:"nowrap",children:[ae,!!B&&!isNaN(B)&&" -> ",!!B&&!isNaN(B)&&me]})]})]})]})]})})},[M,e,m,S,h,n]),Z=a.useMemo(()=>s!=null&&s.length&&(s==null?void 0:s.length)>650?2:0,[s,e]),oe=a.useMemo(()=>s!=null&&s.length&&(s==null?void 0:s.length)>650?2:0,[s,e]);return r.jsxs(nt,{as:"div",p:"0px",w:{base:"100%",lg:`${n}px`},h:`${c}px`,margin:"0 auto",overflow:"visible",children:[r.jsxs(Qt,{width:n,height:c+30,data:s,margin:{top:0,right:Z,left:oe,bottom:0},barCategoryGap:0,barGap:0,onMouseLeave:()=>g(null),children:[r.jsx(Zt,{dataKey:"price",tickLine:!1,tick:{fontSize:"12px",fill:"#909CA4"},tickMargin:7,tickFormatter:P=>Ze(P)}),r.jsx(Kt,{hide:!0}),!l&&r.jsx(Jt,{cursor:!1,content:r.jsx(E,{})}),r.jsx(en,{dataKey:"liquidity",barSize:20,shape:N,isAnimationActive:!0,animationDuration:800,animationEasing:"ease-in-out"})]}),r.jsx("div",{style:{width:"100%",position:"absolute",left:0,bottom:"0px"},children:r.jsx(ln,{className:"bin-range-select-chart-slider",range:!0,min:0,max:s.length-1,value:x,onChange:P=>y(P),onChangeComplete:A,step:1,dots:!1,dotStyle:{display:"none"},disabled:!!u,handleStyle:[{borderColor:"#00D8B6",backgroundColor:"#00D8B6",borderRadius:"4px 2px 2px 4px",width:14,height:16,opacity:1,top:"-2px",zIndex:103,display:u?"none":"block"},{borderColor:"#4A9AEF",backgroundColor:"#4A9AEF",borderRadius:"2px 4px 4px 2px",width:14,height:16,opacity:1,top:"-2px",zIndex:103,display:u?"none":"block"}],trackStyle:[{backgroundColor:"#355369",height:2,borderRadius:0}],railStyle:{backgroundColor:"#22323E",height:2,borderRadius:0}})})]})}const Er=({height:e,maxBinLoading:t})=>r.jsxs(ne,{w:"100%",gap:"0px",children:[r.jsx(It,{src:an,h:`${e-22}px`}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",mt:"10px",children:t?"Loading ...":"No liquidity data"})]}),Pr=({height:e})=>r.jsxs(ne,{w:"100%",gap:"0px",children:[r.jsx(It,{src:an,h:`${e-22}px`}),r.jsx(W,{fontSize:"12px",color:"text_paragraph",mt:"10px",children:"Missing chart data"})]}),Vr=a.memo(kr);function Br(){const e=Tn("dlmm"),t=(f,d,h,m,S)=>{const x=d-S,y=d+S,C=tt.getPriceFromBinId(x,f,h,m),g=tt.getPriceFromBinId(y,f,h,m);return{lower_bin_id:x,upper_bin_id:y,lower_price:C,upper_price:g}};return{getQuickBinPriceRange:t,getDefaultBinPriceAndId:(f,d,h,m)=>{const S=$(Hn).sub(2).div(2).toNumber();return t(f,d,h,m,S)},handleActionBinPrice:(f,d,h,m,S="Add")=>{const x=f==null?void 0:f.binId;if(S==="Sub"){const y=x-1,C=tt.getPriceFromBinId(y,d,h,m);return{bin_id:y,price:C}}else{const y=x+1,C=tt.getPriceFromBinId(y,d,h,m);return{bin_id:y,price:C}}},getBinInfosByAutoFill:async({input_amount:f,bin_step:d,strategy_type:h,lower_bin_id:m,upper_bin_id:S,fix_amount_a:x,active_id:y,amount_in_active_bin:C,pool_id:g})=>{try{return await(e==null?void 0:e.Position.calculateAddLiquidityInfo({active_id:y,bin_step:d,lower_bin_id:m,upper_bin_id:S,active_bin_of_pool:C,strategy_type:h,coin_amount:f,fix_amount_a:x,pool_id:g}))}catch(s){throw console.log("getBinInfosByAutoFill",s),s}},getBinInfosByBothAmount:async({amount_a:f,amount_b:d,bin_step:h,strategy_type:m,lower_bin_id:S,upper_bin_id:x,active_id:y,amount_in_active_bin:C,pool_id:g})=>{console.log({amount_a:f,amount_b:d,active_id:y,bin_step:h,lower_bin_id:S,upper_bin_id:x,amount_a_in_active_bin:(C==null?void 0:C.amount_a)||"0",amount_b_in_active_bin:(C==null?void 0:C.amount_b)||"0",strategy_type:m},"calculateAddLiquidityInfo");try{const s=await(e==null?void 0:e.Position.calculateAddLiquidityInfo({amount_a:f,amount_b:d,active_id:y,bin_step:h,lower_bin_id:S,upper_bin_id:x,strategy_type:m,active_bin_of_pool:C,pool_id:g}));return console.log(s,"calculateAddLiquidityInfo"),s}catch(s){throw s}},getNumBins:(f,d)=>{const h=d-f;return $(h).plus(1).toNumber()},getPriceDataFromBinId:(f,d,h,m)=>{const S=tt.getPriceFromBinId(f,d,h,m),x=zn(S),[y,C,g]=Fn(x);return[y,C,g]}}}export{Vr as B,qr as C,Gr as F,wr as M,Xr as P,vt as S,Ct as a,Dr as b,Br as u};
