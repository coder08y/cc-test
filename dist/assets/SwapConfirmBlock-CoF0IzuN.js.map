{"version":3,"file":"SwapConfirmBlock-CoF0IzuN.js","sources":["../../src/hooks/swap/useSwapButtonStatus.ts","../../src/components/swap/PriceRatio.tsx","../../src/components/swap/SwapRoutes/index.tsx","../../src/components/swap/SwapConfirmBlock.tsx"],"sourcesContent":["import { AggregatorServerErrorCode, SwapRouterData } from '@/types/swap'\nimport { useAccountStore } from '@cetus/stores'\nimport { Token } from '@cetus/types'\nimport { textEllipses } from '@cetus/utils'\nimport { d } from '@cetusprotocol/common-sdk'\nimport { useMemo } from 'react'\n\nexport function useSwapButtonStatus(\n  fromAmount: string,\n  toAmount: string,\n  fromBalance?: string,\n  fromCoin?: Token,\n  toCoin?: Token,\n  routerData?: SwapRouterData\n) {\n  const { currentAccount } = useAccountStore()\n\n  const submitBtnInfo = useMemo(() => {\n    const btnInfo: {\n      text?: string\n      disabled: boolean\n    } = {\n      text: 'Swap',\n      disabled: false\n    }\n\n    // 判断钱包\n    if (!currentAccount?.address) {\n      btnInfo.text = 'Connect Wallet'\n      btnInfo.disabled = false\n      return btnInfo\n    }\n\n    // token 选择判断\n    if (!fromCoin || !toCoin) {\n      btnInfo.text = 'Select a token'\n      btnInfo.disabled = true\n      return btnInfo\n    }\n\n    // 判断输入\n    if (!+fromAmount && !+toAmount) {\n      btnInfo.text = 'Enter an amount'\n      btnInfo.disabled = true\n      return btnInfo\n    }\n    // errorCode\n    if (routerData && routerData.errorCode) {\n      if (routerData.errorCode === AggregatorServerErrorCode.InsufficientLiquidity) {\n        btnInfo.text = 'Insufficient liquidity for this trade'\n        btnInfo.disabled = true\n        return btnInfo\n      }\n      if (routerData.errorCode === AggregatorServerErrorCode.NoRouter || routerData.errorCode === AggregatorServerErrorCode.HoneyPot) {\n        btnInfo.text = 'No Available Route'\n        btnInfo.disabled = true\n        return btnInfo\n      }\n    }\n\n    //判断余额\n    if (+fromAmount && d(fromAmount).gt(fromBalance || 0)) {\n      btnInfo.disabled = true\n      btnInfo.text = `Insufficient ${textEllipses(fromCoin?.symbol, 10)} Balance`\n      return btnInfo\n    }\n\n    if (!+fromAmount || !+toAmount) {\n      btnInfo.disabled = true\n      return btnInfo\n    }\n\n    return btnInfo\n  }, [currentAccount?.address, fromAmount, toAmount, fromBalance, routerData?.errorCode, fromCoin, toCoin])\n\n  return {\n    btnText: submitBtnInfo.text,\n    btnDisabled: submitBtnInfo.disabled\n  }\n}\n","import { usePriceImpact } from '@/hooks/swap/usePriceImpact'\nimport { SwapRouterData } from '@/types'\nimport { CurrentPrice } from '@cetus/design'\nimport { Token } from '@cetus/types'\nimport { Icon } from '@cetus/ui-kit'\nimport { d } from '@cetus/utils'\nimport { HStack, Text, VStack } from '@chakra-ui/react'\nimport PriceImpact from './PriceImpact'\n\ntype PriceRatioProps = {\n  fromCoin?: Token\n  toCoin?: Token\n  routerData?: SwapRouterData\n  findRouterLoading: boolean\n  isWidget?: boolean\n  bg?: string\n}\n\nfunction PriceRatio(props: PriceRatioProps) {\n  const { fromCoin, toCoin, findRouterLoading, isWidget = false, routerData, bg = 'primary_opacity.10' } = props\n\n  const { marketPrice, priceImpact, sources, priceImpactTextInfo, showIncalculable } = usePriceImpact(\n    fromCoin,\n    toCoin,\n    routerData?.fromAmountUi,\n    routerData?.toAmountUi\n  )\n  return (\n    <VStack w=\"100%\" p=\"8px\" gap=\"8px\" bg={bg} borderRadius=\"12px\" align=\"flex-start\">\n      <CurrentPrice\n        fromToken={fromCoin as Token}\n        toToken={toCoin as Token}\n        fromValue={routerData?.fromAmountUi}\n        toValue={routerData?.toAmountUi}\n        isLoading={findRouterLoading}\n        color=\"text_caption\"\n        fontSize={isWidget ? '12px' : '14px'}\n      />\n\n      {!showIncalculable && d(priceImpact).lte(-30) && (\n        <HStack w=\"100%\" justify=\"flex-start\">\n          <Icon xlinkHref=\"#icon-warning\" svgFill=\"primary_red\" svgHover=\"primary_red\" fontSize=\"16px\" />\n          <Text color=\"primary_red\" fontSize=\"12px\" lineHeight=\"20px\" fontWeight=\"500\">\n            High price difference. Be cautious before submitting your order.\n          </Text>\n        </HStack>\n      )}\n\n      <PriceImpact\n        fromToken={fromCoin as Token}\n        isWidget={isWidget}\n        toToken={toCoin as Token}\n        marketPrice={marketPrice}\n        priceImpact={priceImpactTextInfo}\n        isLoading={findRouterLoading}\n        sources={sources}\n        showIncalculable={showIncalculable}\n      />\n    </VStack>\n  )\n}\n\nexport default PriceRatio\n","import { Token } from '@cetus/types'\nimport { Icon } from '@cetus/ui-kit'\nimport { cancelBubble } from '@cetus/utils'\nimport { Box, HStack, Text } from '@chakra-ui/react'\nimport { useState } from 'react'\nimport OverView from './OverView'\nimport RoutesModal from './RoutesModal'\n\ntype SwapRoutesProps = {\n  data: any\n  findRouterLoading: boolean\n  allProviders?: string[]\n  fromAmount: string\n  toAmount: string\n  fromCoin?: Token\n  toCoin?: Token\n  isSwapWidget?: boolean\n  handleSwapWidgetRouterClick?: () => void\n}\n\nfunction SwapRoutes(props: SwapRoutesProps) {\n  const { data, allProviders, findRouterLoading, fromAmount, toAmount, fromCoin, toCoin, isSwapWidget = false, handleSwapWidgetRouterClick } = props\n  const [open, setOpen] = useState(false)\n  return (\n    <>\n      <HStack w=\"100%\" justify=\"space-between\" align=\"flex-start\" p=\"0 8px\" mt=\"2px\">\n        <Text fontSize={isSwapWidget ? '12px' : '14px'} fontWeight=\"500\" whiteSpace=\"nowrap\">\n          Auto Router\n        </Text>\n        <Box\n          mt=\"-2px\"\n          onClick={e => {\n            cancelBubble(e)\n            if (isSwapWidget) {\n              if (handleSwapWidgetRouterClick) {\n                handleSwapWidgetRouterClick()\n              }\n            } else {\n              setOpen(!open)\n            }\n          }}\n          cursor=\"pointer\"\n        >\n          <OverView allProviders={allProviders} loading={findRouterLoading} isSwapWidget={isSwapWidget}>\n            <Icon xlinkHref=\"#icon-icon_spread\" fontSize=\"16px\" />\n          </OverView>\n        </Box>\n      </HStack>\n      {open && !isSwapWidget && (\n        <RoutesModal\n          isOpen={open}\n          onClose={() => setOpen(false)}\n          fromCoin={fromCoin}\n          toCoin={toCoin}\n          allProviders={allProviders}\n          data={data}\n          fromAmount={fromAmount}\n          toAmount={toAmount}\n        />\n      )}\n    </>\n  )\n}\n\nexport default SwapRoutes\n","import { useRefValue } from '@/hooks/common/useRefValue'\nimport { usePriceImpact } from '@/hooks/swap/usePriceImpact'\nimport { useGetAmountLimit, useGetPriceAcceptRouterData } from '@/hooks/swap/useSwapHelper'\nimport useGlobalStore from '@/store/common/global'\nimport useProStore from '@/store/pro'\nimport { SwapRfqData, SwapRouterData } from '@/types/swap'\nimport { CurrentPrice, TradeConfirmAmountInfo } from '@cetus/design'\nimport { Token } from '@cetus/types'\nimport { HTextLabelBox, Icon } from '@cetus/ui-kit'\nimport { Decimal, formatNumber } from '@cetus/utils'\nimport { d } from '@cetusprotocol/common-sdk'\nimport { Button, HStack, Text, VStack } from '@chakra-ui/react'\nimport cloneDeep from 'lodash-es/cloneDeep'\nimport { useEffect, useMemo, useRef, useState } from 'react'\nimport PriceImpact from '../swap/PriceImpact'\nimport SolidPieCountdown from './rfq/SolidPieCountdown'\n\ntype SwapConfirmBlockProps = {\n  data: SwapRouterData | SwapRfqData\n  lastRouterData?: SwapRouterData\n  fromCoin: Token\n  toCoin: Token\n  isWidget: boolean\n  isSelectedRfq: boolean\n  rftCountdownFlagRef?: React.MutableRefObject<number | undefined>\n  onClose: () => void\n  handleRouterSwap: (data: SwapRouterData | SwapRfqData) => void\n}\n\nexport default function SwapConfirmBlock(props: SwapConfirmBlockProps) {\n  const { lastRouterData, fromCoin, toCoin, onClose, data, handleRouterSwap, isWidget, isSelectedRfq = false, rftCountdownFlagRef } = props\n  const { slippage } = useGlobalStore()\n  const rftCountdownFlag = useRefValue(rftCountdownFlagRef)\n\n  const [countDownEnd, setCountDownEnd] = useState<boolean>(false)\n\n  const isClicking = useRef(false)\n  // 原始值\n  const [originData, setOriginData] = useState<SwapRouterData | SwapRfqData>(data)\n\n  const fromAmountUi = useMemo(() => {\n    return isSelectedRfq ? originData?.fromAmountUi : originData?.fromAmountUi\n  }, [originData])\n\n  const toAmountUi = useMemo(() => {\n    return isSelectedRfq ? originData?.toAmountUi : originData?.toAmountUi\n  }, [originData])\n\n  const originRouterData = useMemo(() => {\n    return isSelectedRfq ? undefined : (originData as SwapRouterData)\n  }, [originData])\n\n  const originRfqData = useMemo(() => {\n    return isSelectedRfq ? (originData as SwapRfqData) : undefined\n  }, [originData])\n\n  // 计算最小接收/最大付出\n  const { amountLimit } = useGetAmountLimit(slippage, originRouterData)\n\n  // 用户点击了 忽视PriceImpact\n  const [ignorePriceImpact, setIgnorePriceImpact] = useState<boolean>(false)\n\n  useEffect(() => {\n    if (rftCountdownFlag !== undefined && rftCountdownFlag <= 0) {\n      setCountDownEnd(true)\n    }\n  }, [rftCountdownFlag])\n\n  // 计算价差\n  const {\n    priceImpactTextInfo,\n    marketPrice,\n    sources: priceSources,\n    showPriceImpactTips,\n    showPriceImpactWarn,\n    showIncalculable\n  } = usePriceImpact(fromCoin, toCoin, fromAmountUi, toAmountUi)\n\n  // 如兑换价格和原始值不一致，返回变动后对象\n  const { priceAcceptRouterData } = useGetPriceAcceptRouterData(originRouterData, lastRouterData)\n  const [isLoading, setIsLoading] = useState<boolean>(false)\n\n  const showPriceUpdated = useMemo(() => {\n    return isSelectedRfq ? false : priceAcceptRouterData !== undefined\n  }, [priceAcceptRouterData, isSelectedRfq])\n\n  const amountLimitCoin = useMemo(() => {\n    return originRouterData?.byAmountIn ? toCoin : fromCoin\n  }, [originData])\n\n  const handlePriceAcceptClick = () => {\n    if (priceAcceptRouterData) {\n      if (isClicking.current) return\n      isClicking.current = true\n\n      const safeData = cloneDeep(priceAcceptRouterData)\n      setOriginData({ ...safeData })\n\n      setTimeout(() => {\n        isClicking.current = false\n      }, 300)\n    }\n  }\n\n  const buttonDisabled = useMemo(() => {\n    if (ignorePriceImpact) {\n      return false\n    }\n\n    if (showPriceImpactWarn) {\n      return true\n    }\n    return false\n  }, [ignorePriceImpact, showPriceImpactWarn])\n\n  const showButton = useMemo(() => {\n    if (isSelectedRfq) {\n      return !countDownEnd\n    }\n    return !showPriceUpdated\n  }, [isSelectedRfq, countDownEnd, showPriceUpdated])\n  const { isProMode, currentProTab } = useProStore()\n\n  const buttonText = useMemo(() => {\n    if (isSelectedRfq) {\n      return 'Trade'\n    }\n    return isProMode && !isWidget ? currentProTab : 'Confirm Swap'\n  }, [isSelectedRfq, isProMode, isWidget, currentProTab])\n\n  return (\n    <VStack textAlign=\"center\" gap=\"0px\" p=\"0px\" w=\"100%\">\n      <VStack w=\"100%\" gap=\"16px\" pl=\"16px\" pr=\"16px\" pb={isSelectedRfq ? '12px' : '24px'}>\n        {/* 交易数量展示 */}\n        <TradeConfirmAmountInfo\n          bg={isWidget ? 'swap_bg_primary' : 'bg_primary'}\n          coinA={{\n            amount: fromAmountUi || '0',\n            ...(fromCoin as Token)\n          }}\n          iconParams={{\n            xlinkHref: '#icon-a-icon_trade',\n            svgFill: 'text_caption',\n            fontSize: '12px'\n          }}\n          coinB={{\n            amount: toAmountUi || '0',\n            ...(toCoin as Token)\n          }}\n        />\n        {/* 价格 */}\n        <HStack\n          w=\"100%\"\n          minH=\"48px\"\n          bg={isWidget ? 'swap_bg_primary' : 'bg_primary'}\n          borderRadius=\"8px\"\n          border=\"1px solid\"\n          borderColor=\"border\"\n          justifyContent=\"center\"\n          zIndex=\"100\"\n        >\n          <CurrentPrice fromToken={fromCoin!} toToken={toCoin!} fromValue={fromAmountUi} toValue={toAmountUi} color=\"text_caption\" />\n        </HStack>\n        {/* 价格提示\t */}\n        {showPriceImpactTips && (\n          <HStack\n            zIndex=\"99\"\n            w=\"100%\"\n            mt=\"-26px\"\n            bg={showPriceImpactWarn ? 'primary_red_opacity.10' : 'primary_yellow_opacity.10'}\n            borderRadius=\"12px\"\n            border=\"1px solid\"\n            borderColor=\"border\"\n            justifyContent=\"center\"\n            p=\"18px 16px 10px\"\n          >\n            <Text color={showPriceImpactWarn ? 'primary_red' : 'primary_yellow'} fontSize=\"12px\" lineHeight=\"20px\" textAlign=\"start\" fontWeight=\"500\">\n              High price difference. Be cautious before submitting your order.\n            </Text>\n          </HStack>\n        )}\n        {!isSelectedRfq && (\n          <HTextLabelBox\n            wrapStyle={{ h: '20px', lineHeight: '20px' }}\n            label=\"Slippage Tolerance\"\n            labelStyle={{\n              fontSize: '14px'\n            }}\n            value={`${d(slippage).mul(100)}%`}\n            valueStyle={{\n              fontSize: '14px'\n            }}\n          />\n        )}\n        {!isSelectedRfq && (\n          <HTextLabelBox\n            wrapStyle={{ h: '20px', lineHeight: '20px' }}\n            label={originRouterData?.byAmountIn ? 'Minimum Received' : 'Maximum Input'}\n            labelStyle={{\n              fontSize: '14px'\n            }}\n            value={`${formatNumber(amountLimit || 0, amountLimitCoin?.decimals, false, Decimal.ROUND_DOWN).toString()} ${amountLimitCoin?.symbol}`}\n            valueStyle={{\n              fontSize: '14px'\n            }}\n          />\n        )}\n\n        {/* 价差 */}\n        <PriceImpact\n          fromToken={fromCoin!}\n          toToken={toCoin!}\n          sources={priceSources}\n          marketPrice={marketPrice}\n          priceImpact={priceImpactTextInfo}\n          showIncalculable={showIncalculable}\n        />\n        {/* 价格警告 */}\n        {showPriceImpactWarn && (\n          <VStack w=\"100%\" gap=\"8px\">\n            <HStack\n              w=\"100%\"\n              bg=\"primary_red_opacity.10\"\n              borderRadius=\"12px\"\n              border=\"1px solid\"\n              borderColor=\"border\"\n              justifyContent=\"start\"\n              p=\"10px 16px\"\n            >\n              <Text color=\"primary_red\" fontSize=\"12px\" lineHeight=\"20px\" textAlign=\"start\">\n                The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?\n              </Text>\n            </HStack>\n            <HStack w=\"100%\" justifyContent=\"space-between\" gap=\"16px\">\n              <Button\n                variant=\"outline\"\n                w=\"100%\"\n                color=\"text_highlight\"\n                fontSize=\"14px\"\n                borderColor={ignorePriceImpact ? 'text_highlight' : 'button_outline_border'}\n                onClick={() => {\n                  setIgnorePriceImpact(true)\n                }}\n              >\n                Yes, please continue.\n              </Button>\n              <Button variant=\"outline\" w=\"100%\" color=\"text_highlight\" fontSize=\"14px\" borderColor=\"button_outline_border\" onClick={() => onClose()}>\n                No,cancel it.\n              </Button>\n            </HStack>\n          </VStack>\n        )}\n        {showPriceUpdated && !isSelectedRfq && (\n          <HStack w=\"100%\" justifyContent=\"space-between\">\n            <HStack>\n              <Icon xlinkHref=\"#icon-icon_priceupdated1\" svgW=\"20px\" svgH=\"20px\" />\n              <Text color=\"text_caption\" fontWeight=\"500\" fontSize=\"14px\">\n                Price updated\n              </Text>\n            </HStack>\n            <Button onClick={handlePriceAcceptClick} h=\"40px\" borderRadius=\"12px\" fontSize=\"16px\" fontWeight=\"500\" p=\"0 42px\">\n              Accept\n            </Button>\n          </HStack>\n        )}\n        {/* 如果选择的是rfq，则显示倒计时 */}\n        {isSelectedRfq && (\n          <HStack\n            mt=\"-4px\"\n            w=\"100%\"\n            h=\"40px\"\n            bg={countDownEnd ? 'primary_yellow_opacity.10' : 'rfq_72C1F7_10'}\n            borderRadius=\"12px\"\n            justify=\"center\"\n            align=\"center\"\n          >\n            {!countDownEnd && (\n              <SolidPieCountdown rftCountdownFlag={rftCountdownFlag} totalSeconds={Number(originRfqData?.rfqQuote?.total_countdown || 0)} />\n            )}\n            {countDownEnd && (\n              <Text color=\"primary_yellow\" fontWeight=\"400\" fontSize=\"12px\">\n                Cetus Tide offer expired, please request again.\n              </Text>\n            )}\n          </HStack>\n        )}\n      </VStack>\n\n      {showButton && (\n        <Button\n          isDisabled={buttonDisabled}\n          isLoading={isLoading}\n          mt=\"4px\"\n          w=\"100%\"\n          h=\"52px\"\n          borderRadius=\"12px\"\n          fontSize=\"16px\"\n          fontWeight=\"500\"\n          variant={isProMode && !isWidget && !isSelectedRfq ? `solid-${currentProTab?.toLocaleLowerCase()}` : 'solid'}\n          // variant=\"solid\"\n          onClick={() => {\n            if (isLoading) {\n              return\n            }\n            setIsLoading(true)\n            handleRouterSwap(originData)\n          }}\n        >\n          {buttonText}\n        </Button>\n      )}\n    </VStack>\n  )\n}\n"],"names":["useSwapButtonStatus","fromAmount","toAmount","fromBalance","fromCoin","toCoin","routerData","currentAccount","useAccountStore","submitBtnInfo","useMemo","btnInfo","AggregatorServerErrorCode","d","textEllipses","PriceRatio","props","findRouterLoading","isWidget","bg","marketPrice","priceImpact","sources","priceImpactTextInfo","showIncalculable","usePriceImpact","jsxs","VStack","jsx","CurrentPrice","HStack","Icon","Text","PriceImpact","SwapRoutes","data","allProviders","isSwapWidget","handleSwapWidgetRouterClick","open","setOpen","useState","Fragment","Box","e","cancelBubble","OverView","RoutesModal","SwapConfirmBlock","lastRouterData","onClose","handleRouterSwap","isSelectedRfq","rftCountdownFlagRef","slippage","useGlobalStore","rftCountdownFlag","useRefValue","countDownEnd","setCountDownEnd","isClicking","useRef","originData","setOriginData","fromAmountUi","toAmountUi","originRouterData","originRfqData","amountLimit","useGetAmountLimit","ignorePriceImpact","setIgnorePriceImpact","useEffect","priceSources","showPriceImpactTips","showPriceImpactWarn","priceAcceptRouterData","useGetPriceAcceptRouterData","isLoading","setIsLoading","showPriceUpdated","amountLimitCoin","handlePriceAcceptClick","safeData","cloneDeep","buttonDisabled","showButton","isProMode","currentProTab","useProStore","buttonText","TradeConfirmAmountInfo","HTextLabelBox","formatNumber","Decimal","Button","SolidPieCountdown","_a"],"mappings":"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"}