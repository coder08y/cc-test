import{bj as Le,as as S,d as i,aV as Ee,s as Me,v as Ve,V as Z,ad as we,g as be,R as $e}from"./index-ihcskjKt.js";import"./cross-CbhIs7DK.js";const xe={100:2,500:10,1e3:20,2500:60,1e4:200,2e4:220,10:1,200:4,300:6,400:8,1500:30,2e3:40,3e3:80,4e3:100,6e3:120,8e3:160,4e4:260},He=Object.values(xe),Ze={"0x3f40c8bbb1c986a513373c9229bdccfe36d3d030f86d5207833b03859e48a3a9":"2500","0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2":"2500"},Pe=[],$=(l,T)=>{if(!l||(l==null?void 0:l.length)<1)return T?"0%":"0";const N=l.reduce((C,ie)=>{const Re=ie?String(ie):"0",Fe=Le(Re);return C.add(Fe)},i(0));return T?i(N).gt(1e4)?">1,000,000%":S(N.mul(100).toString(),"%"):N.toString()},J=(l,T,N,ne)=>{if(!l)return T?"0%":"0";if(l==="--")return"--";const C=Le(l);return ne?i(C).gt(1e4)?">1,000,000%":T?S(i(C).mul(100).toString(),"%"):C:N&&i(C).gt(100)?">10,000%":T?S(i(C).mul(100).toString(),"%"):C},Ne=(l,T)=>{const N=Me(l,T);return Ve(N.toString(),T)},je=l=>{const T=new Date(l).getDate();return T<10?`0${T}`:String(T)},Ue=l=>{var T;return Ee((T=i(l))==null?void 0:T.mul(60*60*24).toString(),0)};function ze(){const l=e=>{var t,s,f;const u=e==null?void 0:e.has_mining;let g=i(0);const r=[],a=[];if(u){const v=((f=(s=(t=e==null?void 0:e.object)==null?void 0:t.rewarder_manager)==null?void 0:s.fields)==null?void 0:f.rewarders)||[],_=(e==null?void 0:e.rewarder_apr)||[];v==null||v.forEach((D,A)=>{var b,R,F,x,h;const y=i((b=D==null?void 0:D.fields)==null?void 0:b.emissions_per_second).mul(we.pow(2,-64)).toString();if(e!=null&&e[`rewarder_display${A+1}`]&&i(y).gt(0)){const P=J(_[A]);g=g.add(P);const m=(h=Z((x=(F=(R=D==null?void 0:D.fields)==null?void 0:R.reward_coin)==null?void 0:F.fields)==null?void 0:x.name))==null?void 0:h.source_address;r.push({coinType:m,emissionsEveryDay:Ue(y)}),a.push({coinType:m,apr:P,aprDisplay:J(P,!0)})}})}return{haveMining:u&&r.length>0,miningRewardList:r,miningAprList:a,miningAprTotal:g.toString()}},T=e=>{var R,F,x,h,P,m,c,d,n,w;const u=(e==null?void 0:e.is_forward)===!1,g=e==null?void 0:e.has_farming,r=[];let a="",t="",s="",f="",v=0,_=0,D="",A="",y=i(0),b=!1;if(g){a=(R=e==null?void 0:e.stable_farming)==null?void 0:R.stable_farming_pool;const L=(F=e==null?void 0:e.stable_farming)==null?void 0:F.stable_rewarder;console.log("ðŸš€ ~ handleFarms ~ farmsRewarderOriginList:",L),L==null||L.forEach((E,I)=>{const M=i(E==null?void 0:E.amount_second);if(e!=null&&e.stable_farming[`show_rewarder_${I+1}`]&&M.gt(0)){b=!0;const z=J(E==null?void 0:E.apr);y=y==null?void 0:y.add(z),r.push({coinType:Z(E.coin).source_address,emissionsEveryDay:M.mul(86400).toDP(2,we.ROUND_HALF_UP).toString()})}}),t=(x=e==null?void 0:e.stable_farming)==null?void 0:x.tvl,s=S((h=e==null?void 0:e.stable_farming)==null?void 0:h.tvl,"$"),f=S(i(y).mul(100).toString(),"%",2,!0),v=(P=e==null?void 0:e.stable_farming)==null?void 0:P.effective_tick_lower,_=(m=e==null?void 0:e.stable_farming)==null?void 0:m.effective_tick_upper;const U=be.tickIndexToPrice(v,(c=e==null?void 0:e.coin_a)==null?void 0:c.decimals,(d=e==null?void 0:e.coin_b)==null?void 0:d.decimals).toString(),j=be.tickIndexToPrice(_,(n=e==null?void 0:e.coin_a)==null?void 0:n.decimals,(w=e==null?void 0:e.coin_b)==null?void 0:w.decimals).toString();D=u?i(1).div(j).toString():U,A=u?i(1).div(U).toString():j}return{haveFarming:b,farmsRewarderList:r,farmsApr:y.toString(),farmingAprDisplay:f,farmsStatedTvl:t,farmsStatedTvlDisplay:s,farmsEffectiveTickLower:v,farmsEffectiveTickUpper:_,displayFarmsEffectMinPrice:D,displayFarmsEffectMaxPrice:A,farmsPoolAddress:a}},N=(e,u=!1)=>{var G,K,X,re,ae,Y,q;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:110 ~ wrapPoolData ~ pool:",e);const g=e==null?void 0:e.object,r=(G=e==null?void 0:e.object)==null?void 0:G.index,a=e.address,t=(e==null?void 0:e.is_forward)===!1,s={...e==null?void 0:e.coin_a,coin_type:(X=Z((K=e==null?void 0:e.coin_a)==null?void 0:K.address))==null?void 0:X.source_address},f={...e==null?void 0:e.coin_b,coin_type:(ae=Z((re=e==null?void 0:e.coin_b)==null?void 0:re.address))==null?void 0:ae.source_address},v=t?f:s,_=t?s:f,D=`${v==null?void 0:v.symbol} - ${_==null?void 0:_.symbol}`,A=i(e.fee).mul(1e4).toString(),y=i(e.fee).mul(100).toString()+"%",b=e==null?void 0:e.tick_spacing,R=S(e.pure_tvl_in_usd||0,"$",2,!1,!0),F=S(e.vol_in_usd_24h||0,"$",2,!1,!0),x=S(e.fee_24_h||0,"$",2,!1,!0),h=J((Y=e==null?void 0:e.apr)==null?void 0:Y.fee_apr_24h),P=J((q=e==null?void 0:e.apr)==null?void 0:q.fee_apr_24h,!0),{haveMining:m,miningRewardList:c,miningAprList:d,miningAprTotal:n}=l(e),{haveFarming:w,farmsRewarderList:L,farmsApr:U,farmingAprDisplay:j,farmsStatedTvl:E,farmsStatedTvlDisplay:I,farmsEffectiveTickLower:M,farmsEffectiveTickUpper:z,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:k,farmsPoolAddress:p}=T(e),O=$([h,n]),te=i(O).gt(1e4)?">1,000,000%":S(i(O).mul(100).toString(),"%"),o=$([O,U]),ee=$([h,U],!0),ce=$([O,U],!0),W=e.is_vaults,se=!W&&e.vaults&&e.vaults.length>0&&e.show_vaults?"haedal":W?"cetus":"",Q=e.show_vaults&&e.vaults&&e.vaults.length>0&&e.vaults[e.vaults.length-1];return u?{poolAddress:a,name:D,isReverse:t,tokenA:s,tokenB:f,displayTokenA:v,displayTokenB:_,haveMining:m,miningRewardList:null,miningAprList:null,haveFarming:w,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:A,fee:e.fee,feeDisplay:y,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:W,isLocalData:u,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:M,farmsEffectiveTickUpper:z,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:k,farmsPoolAddress:p,tickSpacing:b,index:r,object:g,haveZap:(s==null?void 0:s.is_trusted)&&(f==null?void 0:f.is_trusted)&&e.pure_tvl_in_usd>1e4,vaultCategory:se,vaultId:Q}:{poolAddress:a,name:D,isReverse:t,tokenA:s,tokenB:f,displayTokenA:v,displayTokenB:_,haveMining:m,miningRewardList:c,miningAprList:d,haveFarming:w,farmsRewarderList:L,farmsApr:U,farmingAprDisplay:j,feeApr:h,feeAprDisplay:P,miningAprTotal:n,feeAndMiningAprDisplay:te,totalAprDisplay:ce,fee:e.fee,feeRate:A,feeDisplay:y,tvlDisplay:R,tvl:e.pure_tvl_in_usd||0,volume24Display:F,fees24Display:x,isVaults:W,farmsStatedTvl:E,farmsStatedTvlDisplay:I,feeAndFarmsApr:o,feeAndFarmsAprDisplay:ee,farmsEffectiveTickLower:M,farmsEffectiveTickUpper:z,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:k,farmsPoolAddress:p,tickSpacing:b,index:r,object:g,haveZap:(s==null?void 0:s.is_trusted)&&(f==null?void 0:f.is_trusted)&&e.pure_tvl_in_usd>1e4,vaultCategory:se,vaultId:Q}},ne=e=>{var P,m,c,d;const{farmingRewarder:u,showReverse:g}=e;if(!u)return{displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsApr:"0",farmingAprDisplay:"0",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,farmsPoolAddress:"",farmsRewarderList:[],farmsStatedTvl:"",farmsStatedTvlDisplay:"",haveFarming:!1};const{effectiveTickLower:r,effectiveTickUpper:a,rewarderCoins:t,tvl:s}=u,f=be.tickIndexToPrice(r,(P=e==null?void 0:e.coinA)==null?void 0:P.decimals,(m=e==null?void 0:e.coinB)==null?void 0:m.decimals).toString(),v=be.tickIndexToPrice(a,(c=e==null?void 0:e.coinA)==null?void 0:c.decimals,(d=e==null?void 0:e.coinB)==null?void 0:d.decimals).toString(),_=g?i(1).div(v).toString():f,D=g?i(1).div(f).toString():v;let A=i(0);t.forEach(n=>{A=A.add(n==null?void 0:n.apr)});const y=A.toString(),b=S(A.mul(100).toString(),"%",2,!0),R=u.farmingPool,F=u.tvl,x=S(F,"$"),h=[];return t.forEach(n=>{i(n==null?void 0:n.emissionsPerSecond).gt(0)&&h.push({coinType:Z(n==null?void 0:n.coinType).source_address,emissionsEveryDay:i(n==null?void 0:n.emissionsPerSecond).mul(86400).toDP(2,we.ROUND_HALF_UP).toString()})}),{displayFarmsEffectMinPrice:_,displayFarmsEffectMaxPrice:D,farmsApr:y,farmingAprDisplay:b,farmsEffectiveTickLower:r,farmsEffectiveTickUpper:a,farmsPoolAddress:R,farmsRewarderList:h,farmsStatedTvl:F,farmsStatedTvlDisplay:x,haveFarming:h.length>0}},C=e=>{const{miningRewarders:u,showReverse:g}=e;if(!u)return{miningAprTotal:0,miningRewardList:[],haveMining:!1,miningAprList:[]};let r=i(0);const a=[],t=[];return u.forEach(s=>{r=r.add(s==null?void 0:s.apr);const f=$e.isSuiCoin((s==null?void 0:s.coinType)||"");s.display&&i(s==null?void 0:s.emissionsPerSecond).gt(0)&&(a.push({coinType:Z(s==null?void 0:s.coinType).source_address,emissionsEveryDay:i(s==null?void 0:s.emissionsPerSecond).mul(10**s.decimals).mul(86400).toDP(2,we.ROUND_HALF_UP).toString(),sort:f?1:0}),t.push({coinType:Z(s==null?void 0:s.coinType).source_address,apr:s==null?void 0:s.apr,aprDisplay:J(s==null?void 0:s.apr,!0,!1,!0)}))}),{miningAprTotal:r.toString(),miningRewardList:a.sort((s,f)=>s.sort-f.sort),haveMining:a.length>0,miningAprList:t}},ie=e=>{const{vault:u,extensions:g}=e;if(!u)return{isUnstableVault:!1,isVault:!1,vaultId:"",vaultCategory:""};const{category:r,id:a,display:t}=u;return{isUnstableVault:r==="haedal",isVaults:r==="cetus",vaultId:a,vaultCategory:t?r:""}};return{wrapPoolData:N,wrapPoolDataV2:(e,u=!1)=>{var Y,q,fe,de,ue,me,ge,ve,ye,Ae,_e,De,Se,Te,le,he;const{showReverse:g,feeRate:r,stats:a,tvl:t,pool:s,extensions:f}=e,{displayFarmsEffectMinPrice:v,displayFarmsEffectMaxPrice:_,farmingAprDisplay:D,farmsApr:A,farmsEffectiveTickLower:y,farmsEffectiveTickUpper:b,farmsPoolAddress:R,farmsRewarderList:F,farmsStatedTvl:x,farmsStatedTvlDisplay:h,haveFarming:P}=ne(e),m={...e==null?void 0:e.coinA,coin_type:(q=Z((Y=e==null?void 0:e.coinA)==null?void 0:Y.coinType))==null?void 0:q.full_address,logo_url:(fe=e==null?void 0:e.coinA)==null?void 0:fe.logoURL,address:(de=e==null?void 0:e.coinA)==null?void 0:de.coinType,is_trusted:(ue=e==null?void 0:e.coinA)==null?void 0:ue.isVerified},c={...e==null?void 0:e.coinB,coin_type:(ge=Z((me=e==null?void 0:e.coinB)==null?void 0:me.coinType))==null?void 0:ge.full_address,logo_url:(ve=e==null?void 0:e.coinB)==null?void 0:ve.logoURL,address:(ye=e==null?void 0:e.coinB)==null?void 0:ye.coinType,is_trusted:(Ae=e==null?void 0:e.coinB)==null?void 0:Ae.isVerified},d=g?c:m,n=g?m:c,w=i(r).div(10**6).toString(),{miningAprTotal:L,miningRewardList:U,haveMining:j,miningAprList:E}=C(e),I=(_e=a==null?void 0:a.filter(V=>V.dateType==="24H")[0])==null?void 0:_e.apr,M=(De=a==null?void 0:a.filter(V=>V.dateType==="7D")[0])==null?void 0:De.apr,z=(Se=a==null?void 0:a.filter(V=>V.dateType==="30D")[0])==null?void 0:Se.apr,B=(Te=a==null?void 0:a.filter(V=>V.dateType==="24H")[0])==null?void 0:Te.fee,k=$([I,A]),p=$([I,A],!0),O=$([I,L],!0),te=J(I,!0),o=i(w).mul(100).toString()+"%",ee=S(B,"$"),ce=$([I,L]),W=$([ce,A],!0),se=(m==null?void 0:m.isVerified)&&(c==null?void 0:c.isVerified)&&i(t).gt(1e4),{vaultCategory:Q,vaultId:G,isVaults:K}=ie(e),X=S(e.tvl||0,"$",2,!1,!0),re=S(((le=a==null?void 0:a.filter(V=>V.dateType==="24H")[0])==null?void 0:le.vol)||0,"$",2,!1,!0),ae=S(((he=a==null?void 0:a.filter(V=>V.dateType==="7D")[0])==null?void 0:he.vol)||0,"$",2,!1,!0);return u?{poolAddress:s,poolId:s,name:`${d==null?void 0:d.symbol} - ${n==null?void 0:n.symbol}`,isReverse:g,tokenA:m,tokenB:c,displayTokenA:d,displayTokenB:n,haveMining:j,miningRewardList:null,miningAprList:null,haveFarming:P,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeApr7d:"--",feeApr30d:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:i(r).div(100).toString(),fee:e.fee,feeDisplay:o,tvlDisplay:"--",tvl:"--",volume24Display:"--",volume7Display:"--",fees24Display:"--",isVaults:K,isLocalData:u,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:y,farmsEffectiveTickUpper:b,displayFarmsEffectMinPrice:v,displayFarmsEffectMaxPrice:_,farmsPoolAddress:R,haveZap:(m==null?void 0:m.is_trusted)&&(c==null?void 0:c.is_trusted)&&e.pure_tvl_in_usd>1e4,vaultCategory:Q,vaultId:G,isFrozen:Pe.includes(s),poolType:"clmm"}:{displayFarmsEffectMinPrice:v,displayFarmsEffectMaxPrice:_,displayTokenA:d,displayTokenB:n,farmsEffectiveTickLower:y,farmsEffectiveTickUpper:b,farmsApr:A,farmingAprDisplay:D,farmsPoolAddress:R,farmsRewarderList:F,farmsStatedTvl:x,farmsStatedTvlDisplay:h,fee:w,feeApr:I,feeApr7d:M,feeApr30d:z,feeAprDisplay:te,feeAndFarmsApr:k,feeAndFarmsAprDisplay:p,feeAndMiningAprDisplay:O,feeDisplay:o,feeRate:i(r).div(100).toString(),haveFarming:P,haveZap:se,isReverse:g,vaultCategory:Q,vaultId:G,haveMining:j,miningRewardList:U,miningAprList:E,miningAprTotal:L.toString(),name:`${d==null?void 0:d.symbol} - ${n==null?void 0:n.symbol}`,poolAddress:s,poolId:s,tokenA:m,tokenB:c,totalAprDisplay:W,tvl:t,tvlDisplay:X,volume24Display:re,volume7Display:ae,fees24Display:ee,isVaults:K,isFrozen:Pe.includes(s),poolType:"clmm"}},wrapDLmmPoolData:(e,u=!1)=>{var q,fe,de,ue,me,ge,ve,ye,Ae,_e,De,Se,Te,le,he,V;const{showReverse:g,stats:r,tvl:a,pool:t,extensions:s,baseFeeRate:f,protocolFeeRate:v}=e,{displayFarmsEffectMinPrice:_,displayFarmsEffectMaxPrice:D,farmingAprDisplay:A,farmsApr:y,farmsEffectiveTickLower:b,farmsEffectiveTickUpper:R,farmsPoolAddress:F,farmsRewarderList:x,farmsStatedTvl:h,farmsStatedTvlDisplay:P,haveFarming:m}=ne(e),c={...e==null?void 0:e.coinA,coin_type:(fe=Z((q=e==null?void 0:e.coinA)==null?void 0:q.coinType))==null?void 0:fe.full_address,logo_url:(de=e==null?void 0:e.coinA)==null?void 0:de.logoURL,address:(ue=e==null?void 0:e.coinA)==null?void 0:ue.coinType,is_trusted:(me=e==null?void 0:e.coinA)==null?void 0:me.isVerified},d={...e==null?void 0:e.coinB,coin_type:(ve=Z((ge=e==null?void 0:e.coinB)==null?void 0:ge.coinType))==null?void 0:ve.full_address,logo_url:(ye=e==null?void 0:e.coinB)==null?void 0:ye.logoURL,address:(Ae=e==null?void 0:e.coinB)==null?void 0:Ae.coinType,is_trusted:(_e=e==null?void 0:e.coinB)==null?void 0:_e.isVerified},n=g?d:c,w=g?c:d,L=f,{miningAprTotal:U,miningRewardList:j,haveMining:E,miningAprList:I}=C(e),M=(De=r==null?void 0:r.filter(H=>H.dateType==="24H")[0])==null?void 0:De.apr,z=(Se=r==null?void 0:r.filter(H=>H.dateType==="7D")[0])==null?void 0:Se.apr,B=(Te=r==null?void 0:r.filter(H=>H.dateType==="30D")[0])==null?void 0:Te.apr,k=(le=r==null?void 0:r.filter(H=>H.dateType==="24H")[0])==null?void 0:le.fee,p=$([M,y]),O=$([M,y],!0),te=$([M,U],!0),o=J(M,!0),ee=i(L).mul(100).toString()+"%",ce=S(k,"$"),W=$([M,U]),se=$([W,y],!0),Q=(c==null?void 0:c.isVerified)&&(d==null?void 0:d.isVerified)&&i(a).gt(1e4),{vaultCategory:G,vaultId:K,isVaults:X}=ie(e),re=S(e.tvl||0),ae=S(((he=r==null?void 0:r.filter(H=>H.dateType==="24H")[0])==null?void 0:he.vol)||0),Y=S(((V=r==null?void 0:r.filter(H=>H.dateType==="7D")[0])==null?void 0:V.vol)||0);return u?{binStep:e==null?void 0:e.binStep,poolAddress:t,poolId:t,id:t,name:`${n==null?void 0:n.symbol} - ${w==null?void 0:w.symbol}`,isReverse:g,tokenA:c,tokenB:d,displayTokenA:n,displayTokenB:w,haveMining:E,miningRewardList:null,miningAprList:null,haveFarming:m,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeApr7d:"--",feeApr30d:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:L,protocolFeeRate:v,fee:e.fee,feeDisplay:ee,tvlDisplay:"--",tvl:"--",volume24Display:"--",volume7Display:"--",fees24Display:"--",isVaults:X,isLocalData:u,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:b,farmsEffectiveTickUpper:R,displayFarmsEffectMinPrice:_,displayFarmsEffectMaxPrice:D,farmsPoolAddress:F,haveZap:(c==null?void 0:c.is_trusted)&&(d==null?void 0:d.is_trusted)&&e.pure_tvl_in_usd>1e4,vaultCategory:G,vaultId:K,isFrozen:Pe.includes(t),poolType:"dlmm",createTimestamp:0}:{binStep:e==null?void 0:e.binStep,displayFarmsEffectMinPrice:_,displayFarmsEffectMaxPrice:D,displayTokenA:n,displayTokenB:w,farmsEffectiveTickLower:b,farmsEffectiveTickUpper:R,farmsApr:y,farmingAprDisplay:A,farmsPoolAddress:F,farmsRewarderList:x,farmsStatedTvl:h,farmsStatedTvlDisplay:P,fee:L,feeApr:M,feeApr7d:z,feeApr30d:B,feeAprDisplay:o,feeAndFarmsApr:p,feeAndFarmsAprDisplay:O,feeAndMiningAprDisplay:te,feeDisplay:ee,feeRate:L,protocolFeeRate:v,haveFarming:m,haveZap:Q,isReverse:g,vaultCategory:G,vaultId:K,haveMining:E,miningRewardList:j,miningAprList:I,miningAprTotal:U.toString(),name:`${n==null?void 0:n.symbol} - ${w==null?void 0:w.symbol}`,poolAddress:t,poolId:t,id:t,tokenA:c,tokenB:d,totalAprDisplay:se,totalApr:e==null?void 0:e.totalApr,tvl:a,tvlDisplay:re,volume24Display:ae,volume7Display:Y,fees24Display:ce,isVaults:X,isFrozen:Pe.includes(t),poolType:"dlmm",createTimestamp:Number((e==null?void 0:e.createTimestamp)||0)}}}}export{Ze as C,Pe as F,He as S,xe as T,J as a,Ne as b,je as d,ze as u};
//# sourceMappingURL=useWrapPoolData-CzWcfmSl.js.map
