import{M as p,f as C,a2 as w,V as h,Z as E}from"./index-Lo8eQgA0.js";import{r as t}from"./vendor-CBmAETR3.js";function u(){const{currentAccount:e}=p(),i=C("clmm"),{setTokenBalanceObj:d,clearData:c,setIsLoading:f,isLoading:B,ownerAddress:m}=w(),n=t.useRef(e==null?void 0:e.address);t.useEffect(()=>{n.current=e==null?void 0:e.address},[e==null?void 0:e.address]);const y=async(s=(e==null?void 0:e.address)||"",o=!1)=>{try{if(B&&!o)return[];if(s){f(!0);const a=await i.FullClient.getOwnerCoinBalances(s);console.log(a,"fetchAccountBalance");const l={};return a.forEach(r=>{r.coinType=E(r.coinType,!1),l[h(r.coinType).full_address]=r}),s==n.current&&d(l,s),a}}catch(a){console.log("ðŸš€ ~ file: useAccountBalance.ts:18 ~ fetchAccountBalance ~ error:",a),m!==s&&c();return}finally{f(!1)}return[]},g=async(s=(e==null?void 0:e.address)||"",o)=>{try{if(s&&o){const a=await i.FullClient.getOwnerCoinBalances(s,o),l={};return a.forEach(r=>{l[h(r.coinType).full_address]=r}),s==n.current&&d(l,s),l}}catch(a){console.log("ðŸš€ ~ file: useAccountBalance.ts:18 ~ fetchCoinBalance ~ error:",a)}};return t.useEffect(()=>{e||(c(),f(!1))},[e==null?void 0:e.address]),{fetchAccountBalance:y,fetchCoinBalance:g,isLoading:B}}export{u};
