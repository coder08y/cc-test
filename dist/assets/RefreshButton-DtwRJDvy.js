import{r as e,j as c,C as v,F as T,B as g,Z as w}from"./vendor-CBmAETR3.js";import{c as y,I}from"./index-ihcskjKt.js";function _(m,d,...i){let t=null;const o=async()=>{try{await m(...i)}catch(r){console.error("Callback error:",r),clearTimeout(t)}t=setTimeout(o,d)};return t=setTimeout(o,d),{clear:()=>{t&&clearTimeout(t)}}}function A(m){const{variant:d,handleRefresh:i,isAutoRefresh:t,refreshInterval:o,innerStyle:r={},isRefreshed:b,iconStyle:j={},...C}=m,[R,l]=e.useState(!1),[B,f]=e.useState(0),s=e.useRef(null),n=e.useRef(null),a=e.useCallback(async u=>{f(360),l(!0);try{await i(u)}catch(p){console.error("RefreshButton refresh error",p),l(!1),f(0)}},[i]),x=e.useRef(a);e.useEffect(()=>{x.current=a},[a]);const h=e.useCallback(()=>{if(n.current&&n.current(),t&&o){const{clear:u}=_(()=>{var p;(p=x.current)==null||p.call(x,!1)},o*1e3);n.current=u}},[t,o]),k=e.useCallback(async u=>{y(u),n.current&&n.current(),await a(!0),h()},[a,h]);return e.useEffect(()=>(h(),()=>{s.current&&(clearTimeout(s.current),s.current=null),n.current&&(n.current(),n.current=null)}),[h]),e.useEffect(()=>(typeof b=="boolean"?b&&(l(!1),f(0)):R&&(s.current=setTimeout(()=>{l(!1),f(0)},1e3)),()=>{s.current&&(clearTimeout(s.current),s.current=null)}),[R,b]),c.jsx(v,{h:"40px",w:"40px",borderRadius:"8px",bg:r!=null&&r.bg?r==null?void 0:r.bg:"bg_secondary",border:"1px solid",borderColor:"border",cursor:"pointer",onClick:k,_hover:{color:"text_caption",svg:{fill:"text_caption"}},...C,children:c.jsx(T,{w:"24px",h:"24px",bg:"checked_bg",alignItems:"center",justifyContent:"center",borderRadius:"4px",...r,children:c.jsx(g,{children:R?c.jsx(T,{w:"20px",h:"20px",alignItems:"center",justifyContent:"center",children:c.jsx(w,{w:"16px",h:"16px",speed:"1.2s",sx:{color:"text_paragraph"}})}):c.jsx(g,{children:c.jsx(I,{...j,xlinkHref:"#icon-icon_refresh",variant:"gray"})})})})})}export{A as R};
//# sourceMappingURL=RefreshButton-DtwRJDvy.js.map
