{"version":3,"file":"index-CPyR2bLz.js","sources":["../../../../node_modules/.pnpm/ahooks@3.9.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/ahooks/es/utils/domTarget.js","../../../../node_modules/.pnpm/ahooks@3.9.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/ahooks/es/utils/createEffectWithTarget.js","../../../../node_modules/.pnpm/ahooks@3.9.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/ahooks/es/utils/useEffectWithTarget.js","../../../../node_modules/.pnpm/ahooks@3.9.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/ahooks/es/useRafState/index.js"],"sourcesContent":["import { isFunction } from './index';\nimport isBrowser from './isBrowser';\nexport function getTargetElement(target, defaultElement) {\n    if (!isBrowser) {\n        return undefined;\n    }\n    if (!target) {\n        return defaultElement;\n    }\n    var targetElement;\n    if (isFunction(target)) {\n        targetElement = target();\n    }\n    else if ('current' in target) {\n        targetElement = target.current;\n    }\n    else {\n        targetElement = target;\n    }\n    return targetElement;\n}\n","import { useRef } from 'react';\nimport useUnmount from '../useUnmount';\nimport depsAreSame from './depsAreSame';\nimport { getTargetElement } from './domTarget';\nvar createEffectWithTarget = function (useEffectType) {\n    /**\n     *\n     * @param effect\n     * @param deps\n     * @param target target should compare ref.current vs ref.current, dom vs dom, ()=>dom vs ()=>dom\n     */\n    var useEffectWithTarget = function (effect, deps, target) {\n        var hasInitRef = useRef(false);\n        var lastElementRef = useRef([]);\n        var lastDepsRef = useRef([]);\n        var unLoadRef = useRef(undefined);\n        useEffectType(function () {\n            var _a;\n            var targets = Array.isArray(target) ? target : [target];\n            var els = targets.map(function (item) { return getTargetElement(item); });\n            // init run\n            if (!hasInitRef.current) {\n                hasInitRef.current = true;\n                lastElementRef.current = els;\n                lastDepsRef.current = deps;\n                unLoadRef.current = effect();\n                return;\n            }\n            if (els.length !== lastElementRef.current.length ||\n                !depsAreSame(lastElementRef.current, els) ||\n                !depsAreSame(lastDepsRef.current, deps)) {\n                (_a = unLoadRef.current) === null || _a === void 0 ? void 0 : _a.call(unLoadRef);\n                lastElementRef.current = els;\n                lastDepsRef.current = deps;\n                unLoadRef.current = effect();\n            }\n        });\n        useUnmount(function () {\n            var _a;\n            (_a = unLoadRef.current) === null || _a === void 0 ? void 0 : _a.call(unLoadRef);\n            // for react-refresh\n            hasInitRef.current = false;\n        });\n    };\n    return useEffectWithTarget;\n};\nexport default createEffectWithTarget;\n","import { useEffect } from 'react';\nimport createEffectWithTarget from './createEffectWithTarget';\nvar useEffectWithTarget = createEffectWithTarget(useEffect);\nexport default useEffectWithTarget;\n","import { __read } from \"tslib\";\nimport { useCallback, useRef, useState } from 'react';\nimport useUnmount from '../useUnmount';\nfunction useRafState(initialState) {\n    var ref = useRef(0);\n    var _a = __read(useState(initialState), 2), state = _a[0], setState = _a[1];\n    var setRafState = useCallback(function (value) {\n        cancelAnimationFrame(ref.current);\n        ref.current = requestAnimationFrame(function () {\n            setState(value);\n        });\n    }, []);\n    useUnmount(function () {\n        cancelAnimationFrame(ref.current);\n    });\n    return [state, setRafState];\n}\nexport default useRafState;\n"],"names":["getTargetElement","target","defaultElement","isBrowser","targetElement","isFunction","createEffectWithTarget","useEffectType","useEffectWithTarget","effect","deps","hasInitRef","useRef","lastElementRef","lastDepsRef","unLoadRef","_a","targets","els","item","depsAreSame","useUnmount","useEffect","useRafState","initialState","ref","__read","useState","state","setState","setRafState","useCallback","value"],"mappings":"oLAEO,SAASA,EAAiBC,EAAQC,EAAgB,CACrD,GAAKC,EAGL,IAAI,CAACF,EACD,OAAOC,EAEX,IAAIE,EACJ,OAAIC,EAAWJ,CAAM,EACjBG,EAAgBH,EAAM,EAEjB,YAAaA,EAClBG,EAAgBH,EAAO,QAGvBG,EAAgBH,EAEbG,EACX,CChBG,IAACE,EAAyB,SAAUC,EAAe,CAOlD,IAAIC,EAAsB,SAAUC,EAAQC,EAAMT,EAAQ,CACtD,IAAIU,EAAaC,EAAAA,OAAO,EAAK,EACzBC,EAAiBD,EAAAA,OAAO,EAAE,EAC1BE,EAAcF,EAAAA,OAAO,EAAE,EACvBG,EAAYH,EAAAA,OAAO,MAAS,EAChCL,EAAc,UAAY,CACtB,IAAIS,EACAC,EAAU,MAAM,QAAQhB,CAAM,EAAIA,EAAS,CAACA,CAAM,EAClDiB,EAAMD,EAAQ,IAAI,SAAUE,EAAM,CAAE,OAAOnB,EAAiBmB,CAAI,CAAG,CAAC,EAExE,GAAI,CAACR,EAAW,QAAS,CACrBA,EAAW,QAAU,GACrBE,EAAe,QAAUK,EACzBJ,EAAY,QAAUJ,EACtBK,EAAU,QAAUN,EAAM,EAC1B,MACJ,EACIS,EAAI,SAAWL,EAAe,QAAQ,QACtC,CAACO,EAAYP,EAAe,QAASK,CAAG,GACxC,CAACE,EAAYN,EAAY,QAASJ,CAAI,MACrCM,EAAKD,EAAU,WAAa,MAAQC,IAAO,QAAkBA,EAAG,KAAKD,CAAS,EAC/EF,EAAe,QAAUK,EACzBJ,EAAY,QAAUJ,EACtBK,EAAU,QAAUN,EAAM,EAElC,CAAC,EACDY,EAAW,UAAY,CACnB,IAAIL,GACHA,EAAKD,EAAU,WAAa,MAAQC,IAAO,QAAkBA,EAAG,KAAKD,CAAS,EAE/EJ,EAAW,QAAU,EACzB,CAAC,CACL,EACA,OAAOH,CACX,EC3CIA,EAAsBF,EAAuBgB,EAAAA,SAAS,ECC1D,SAASC,EAAYC,EAAc,CAC/B,IAAIC,EAAMb,EAAAA,OAAO,CAAC,EACdI,EAAKU,EAAOC,WAASH,CAAY,EAAG,CAAC,EAAGI,EAAQZ,EAAG,CAAC,EAAGa,EAAWb,EAAG,CAAC,EACtEc,EAAcC,cAAY,SAAUC,EAAO,CAC3C,qBAAqBP,EAAI,OAAO,EAChCA,EAAI,QAAU,sBAAsB,UAAY,CAC5CI,EAASG,CAAK,CAClB,CAAC,CACL,EAAG,CAAA,CAAE,EACL,OAAAX,EAAW,UAAY,CACnB,qBAAqBI,EAAI,OAAO,CACpC,CAAC,EACM,CAACG,EAAOE,CAAW,CAC9B","x_google_ignoreList":[0,1,2,3]}