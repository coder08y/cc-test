{"version":3,"file":"TableSortTh-CJhvMpou.js","sources":["../../../cetus-design/src/components/common/TableSortTh.tsx"],"sourcesContent":["import useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { Icon } from '@cetus/ui-kit'\nimport { cancelBubble } from '@cetus/utils'\nimport {\n  Center,\n  HStack,\n  HTMLChakraProps,\n  PlacementWithLogical,\n  Popover,\n  PopoverBody,\n  PopoverContent,\n  PopoverContentProps,\n  PopoverTrigger,\n  Portal,\n  Text,\n  VStack\n} from '@chakra-ui/react'\n\ninterface LabelInfo {\n  label: string\n  value: string\n}\n\ninterface TooltipProps {\n  content: string | React.ReactNode\n  description?: string | React.ReactNode\n  placement?: PlacementWithLogical\n  xlinkHref?: string\n}\n\ninterface TableSortThProps extends HTMLChakraProps<'div'> {\n  labelInfo: LabelInfo\n  tooltip?: TooltipProps\n  sortRule: 'asc' | 'desc'\n  sortBy: LabelInfo\n  clickSort: (value: LabelInfo) => void\n  labelFontSize?: string\n  width?: string\n  haveManySort?: boolean //当前列是否有超过一个排序\n  appShowIcon?: boolean //h5页面是否需要sort icon\n  showSortIcon?: boolean //多个页面共用一个table 部分页面不需要排序时 需要去掉sort icon\n  defaultShowSortIcon?: boolean //一些页面需要一直展示排序icon 如仓位列表\n  tooltipStyle?: PopoverContentProps\n}\n\nexport default function TableSortTh({\n  labelInfo,\n  tooltip,\n  sortRule = 'desc',\n  labelFontSize = '14px',\n  appShowIcon = false,\n  showSortIcon = true,\n  sortBy,\n  clickSort,\n  width,\n  haveManySort = true,\n  defaultShowSortIcon = false,\n  tooltipStyle = {},\n  ...rest\n}: TableSortThProps) {\n  const { isApp } = useWindowWidth()\n\n  const mergedTooltip: TooltipProps = {\n    content: '',\n    placement: 'top',\n    xlinkHref: '#icon-icon_tips',\n    ...tooltip\n  }\n\n  const hasSplitLabel = labelInfo.label.includes('/') && haveManySort && showSortIcon\n  const splitLabels = hasSplitLabel ? labelInfo.label.split('/') : []\n  const splitValues = hasSplitLabel ? labelInfo.value.split('/') : []\n\n  const renderSortIcon = (value: string) => (\n    <VStack h=\"20px\" gap=\"0\">\n      <Icon\n        xlinkHref=\"#icon-icon_ascending_nor\"\n        svgH=\"10px\"\n        svgHover=\"primary\"\n        svgFill={sortBy?.value === value && sortRule === 'asc' ? 'primary' : ''}\n      />\n      <Icon\n        xlinkHref=\"#icon-icon_descending_nor\"\n        svgH=\"10px\"\n        svgHover=\"primary\"\n        svgFill={sortBy?.value === value && sortRule === 'desc' ? 'primary' : ''}\n      />\n    </VStack>\n  )\n\n  const renderLabel = (label: string, value: string) => (\n    <HStack gap=\"0px\" onClick={() => clickSort({ value, label })}>\n      <Text\n        fontSize={labelFontSize}\n        _hover={{ color: 'text_caption' }}\n        color={isApp && !appShowIcon ? 'text_paragraph' : sortBy?.value === value ? 'text_caption' : 'text_paragraph'}\n      >\n        {label}\n      </Text>\n      {(sortBy?.value === value || defaultShowSortIcon) && renderSortIcon(value)}\n    </HStack>\n  )\n\n  return (\n    <HStack w={width || 'unset'} mr=\"-4px\" justify=\"flex-end\" cursor={showSortIcon ? 'pointer' : 'text'} gap=\"0px\" {...rest}>\n      {/* 同一列有两个排序 */}\n\n      {hasSplitLabel ? (\n        <HStack gap=\"2px\">\n          {renderLabel(splitLabels[0], splitValues[0])}\n          <Text fontSize={labelFontSize} color=\"text_paragraph\">\n            /\n          </Text>\n          {renderLabel(splitLabels[1], splitValues[1])}\n        </HStack>\n      ) : (\n        <HStack gap=\"0px\" onClick={showSortIcon ? () => clickSort(labelInfo) : () => {}}>\n          <Text\n            fontSize={labelFontSize}\n            _hover={{ color: showSortIcon ? 'text_caption' : 'text_paragraph' }}\n            color={isApp && !appShowIcon ? 'text_paragraph' : labelInfo.value === sortBy?.value ? 'text_caption' : 'text_paragraph'}\n          >\n            {labelInfo.label}\n          </Text>\n          {mergedTooltip?.content && (\n            <Popover isLazy trigger={isApp ? 'click' : 'hover'} placement={mergedTooltip?.placement}>\n              <PopoverTrigger>\n                <Center as=\"button\" onClick={cancelBubble} ml=\"4px\">\n                  <Icon xlinkHref={mergedTooltip?.xlinkHref || ''} />\n                </Center>\n              </PopoverTrigger>\n              <Portal>\n                <PopoverContent w=\"fit-content\" maxW=\"320px\" {...tooltipStyle}>\n                  <PopoverBody>\n                    {typeof mergedTooltip.content === 'string' ? (\n                      <VStack gap=\"4px\" align=\"flex-start\">\n                        <Text fontSize=\"12px\" lineHeight=\"20px\" dangerouslySetInnerHTML={{ __html: mergedTooltip.content }} />\n                        {mergedTooltip.description && (\n                          <Text fontSize=\"12px\" lineHeight=\"20px\" dangerouslySetInnerHTML={{ __html: mergedTooltip.description }} />\n                        )}\n                      </VStack>\n                    ) : (\n                      <Text fontSize=\"12px\" lineHeight=\"20px\">\n                        {mergedTooltip.content}\n                      </Text>\n                    )}\n                  </PopoverBody>\n                </PopoverContent>\n              </Portal>\n            </Popover>\n          )}\n          {showSortIcon && (!isApp || appShowIcon) && (sortBy?.value === labelInfo.value || defaultShowSortIcon) && renderSortIcon(labelInfo.value)}\n        </HStack>\n      )}\n    </HStack>\n  )\n}\n"],"names":["TableSortTh","labelInfo","tooltip","sortRule","labelFontSize","appShowIcon","showSortIcon","sortBy","clickSort","width","haveManySort","defaultShowSortIcon","tooltipStyle","rest","isApp","useWindowWidth","mergedTooltip","hasSplitLabel","splitLabels","splitValues","renderSortIcon","value","jsxs","VStack","jsx","Icon","renderLabel","label","HStack","Text","Popover","PopoverTrigger","Center","cancelBubble","Portal","PopoverContent","PopoverBody"],"mappings":"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"}