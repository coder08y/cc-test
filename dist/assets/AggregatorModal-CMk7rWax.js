const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SourceGrid-5QE50ixM.js","assets/vendor-CBmAETR3.js","assets/useSwapHelper-BDfKH-rI.js","assets/index-Lo8eQgA0.js","assets/cross-J9VCREIf.js","assets/index-VqB3HDun.css","assets/useGetPoolList-Bo7JxsYj.js","assets/utils-BTUfT3hi.js","assets/useWrapPoolData-tzYpVDlL.js","assets/en_US-KAK2ZBDO-KTAiToGz.js","assets/CheckBox-BfyJMUfq.js","assets/index-CPyR2bLz.js","assets/index-D8UqOC8m.js","assets/isBrowser-DgCPUZ4c.js","assets/index-Dq_SzPY7.js","assets/aggregator-CK22pvE4.js","assets/TooltipIcon-Bqqgb7rr.js","assets/index-CgYRIMgB.js","assets/index-9yHNdYxH.js"])))=>i.map(i=>d[i]);
import{_ as ue}from"./cross-J9VCREIf.js";import{r as c,j as e,H as v,n as de,T as b,a8 as pe,M as Q,o as X,p as Y,$ as K,q as xe,t as Z,v as ee,w as H,V as F,S as he,X as fe,ar as ge,aq as je,m as Ce}from"./vendor-CBmAETR3.js";import{A as Se,b as U}from"./aggregator-CK22pvE4.js";import{c as ve,A as x}from"./useSwapHelper-BDfKH-rI.js";import{ae as be,aj as W,I as se,z as me}from"./index-Lo8eQgA0.js";import{T as re}from"./TooltipIcon-Bqqgb7rr.js";import{a as ke}from"./index-CgYRIMgB.js";import{i as Ae}from"./index-Dq_SzPY7.js";import{i as Me}from"./index-9yHNdYxH.js";var we=function(l,t){var i=ke(l),u=c.useRef(null),p=c.useCallback(function(){u.current&&clearTimeout(u.current)},[]);return c.useEffect(function(){if(!(!Ae(t)||t<0))return u.current=setTimeout(i,t),p},[t]),p};const B=l=>l.reduce((t,i)=>t+(i!=null&&i.subItems?i.subItems.length:1),0),V=(l,t)=>l.reduce((i,u)=>u!=null&&u.subItems?i+u.subItems.reduce((p,m)=>p+(t[m.id]?1:0),0):i+(t[u.id]?1:0),0),R=[x.HAWAL,x.HAEDALHMMV2],Ee=[{parent:x.HAEDAL,child:x.HAWAL},{parent:x.HAEDALPMM,child:x.HAEDALHMMV2}];function Pe(l){console.log("showRfqSwitch: ",l);const{providersSwitchStates:t,setProvidersSwitchStates:i,isOpenRfqSwitch:u,setIsOpenRfqSwitch:p,rfqConfigs:m}=ve(),{providers:a}=be(),[o,C]=c.useState({...t}),[E,k]=c.useState(u),[S,D]=c.useState([]),[g,P]=c.useState([]);W(()=>{C({...t}),k(u)},[t,u]),W(()=>{const r={},s=[],n=[],z={},G=a.filter(j=>!R.includes(j));console.log("ðŸš€ðŸš€ðŸš€ ~ useCustomizeRouting.ts:64 ~ useCustomizeRouting ~ newProviders:",G),G.forEach(j=>{const d=Se[j];if(console.log("ðŸš€ðŸš€ðŸš€ ~ useCustomizeRouting.ts:66 ~ useCustomizeRouting ~ dex:",d),d){const M=t[d.id];M===void 0?z[d.id]=!0:z[d.id]=M;const w=_(j);if(w){const T=r[w.groupName]||[];T.push(d),r[w.groupName]=T}else d.type==="dex"?n.push(d):s.push(d)}}),console.log("ðŸš€ðŸš€ðŸš€ ~ useCustomizeRouting.ts:97 ~ useCustomizeRouting ~ groupedList:",r);for(const[j,d]of Object.entries(r))if(d.length>0){const M=d[0],w={...M,id:M.groupId,name:j,subItems:d.sort((T,ce)=>ce.sort-T.sort)};M.type==="dex"?n.push(w):s.push(w)}console.log("ðŸš€ðŸš€ðŸš€ ~ useCustomizeRouting.ts:108 ~ useCustomizeRouting ~ otherList:",s),s.sort((j,d)=>d.sort-j.sort),n.sort((j,d)=>d.sort-j.sort),D([...s]),P([...n]),console.log("ðŸš€ðŸš€ðŸš€ ~ useCustomizeRouting.ts:121 ~ useCustomizeRouting ~ providersMap:",z),i(z)},[a]);const _=r=>(console.log("ðŸš€ðŸš€ðŸš€ ~ useCustomizeRouting.ts:124 ~ findGroupDex ~ AggregatorDexGroup:",U),U.find(s=>s.items.includes(r))),O=r=>{if(r){k(!0);const s={};a.forEach(n=>s[n]=!0),R.forEach(n=>{a.includes(n)&&(s[n]=!0)}),C(s)}else{k(!1);const s={};a.forEach(n=>s[n]=!1),R.forEach(n=>{a.includes(n)&&(s[n]=!1)}),C({...s,[x.CETUS]:!0,[x.CETUSDLMM]:!0})}},q=r=>{r?g.forEach(s=>{s!=null&&s.subItems?s.subItems.forEach(n=>{o[n.id]=!0}):o[s.id]=!0}):g.forEach(s=>{s.id===x.CETUS||s.id===x.CETUSDLMM?o[s.id]=!0:s!=null&&s.subItems?s.subItems.forEach(n=>{o[n.id]=!1}):o[s.id]=!1}),C({...o})},h=r=>{S.forEach(s=>{s!=null&&s.subItems?s.subItems.forEach(n=>{o[n.id]=r}):o[s.id]=r}),R.forEach(s=>{a.includes(s)&&(o[s]=r)}),C({...o})},f=(r,s)=>{o[r]=s,Ee.forEach(n=>{r===n.parent&&a.includes(n.child)&&(o[n.child]=s)}),C({...o})},A=c.useMemo(()=>g.every(r=>r!=null&&r.subItems?r.subItems.every(s=>o[s.id]):o[r.id]),[JSON.stringify(g),JSON.stringify(o)]),I=c.useMemo(()=>S.every(r=>r!=null&&r.subItems?r.subItems.every(s=>o[s.id]):o[r.id]),[JSON.stringify(S),JSON.stringify(o)]),L=c.useMemo(()=>A&&I,[A,I]),y=c.useMemo(()=>(a==null?void 0:a.filter(r=>r!==x.CETUS&&!!o[r]).length)===0,[o]),oe=c.useMemo(()=>(a==null?void 0:a.filter(r=>r!==x.CETUS&&r!==x.CETUSDLMM&&!!o[r]).length)>=1||u&&l,[o,a,u]),ne=()=>{l&&p(E),i({...o})},N=c.useMemo(()=>!0,[m]),ie=c.useMemo(()=>{var s;const r=(s=a==null?void 0:a.filter(n=>!R.includes(n)))==null?void 0:s.length;return N&&l?r+1:r},[a==null?void 0:a.length,N]),le=c.useMemo(()=>({checked:V(g,o),total:B(g)}),[g,o]),ae=c.useMemo(()=>({checked:V(S,o),total:B(S)}),[S,o]);return{handleSelectAllProviderClick:O,handleSelectAllDexProviderClick:q,handleSelectAllOtherProviderClick:h,handleProviderClick:f,selectAllProviders:L,selectAllDexProviders:A,otherProviderList:S,selectAllOtherProviders:I,dexProviderList:g,currProvidersSwitchStates:o,providersSwitchStates:t,isOpenAggregatorMode:oe,handleSaveClick:ne,allSourceNum:ie,dexSourceNumMap:le,otherSourceNumMap:ae,isOpenRfq:E,setIsOpenRfq:k,hasRfqProvider:N,isAllowInputReceiveSide:y}}const Ie=({title:l="Cetus Tide",marginTop:t="0px",showTooltipIcon:i=!1,bg_color:u="transparent",tx_bg_color:p,font_size:m="14px"})=>e.jsx(v,{bg:u,p:"0px",pr:"6px",borderRadius:"12px",children:e.jsx(re,{tooltipCon:"Cetus Tide enables zero-slippage swaps through a unique RFQ model powered by pro market makers. It compares quotes with aggregator prices and pops up when offering a better rate.",showTooltipIcon:i,children:e.jsxs(v,{gap:"4px",mt:t,cursor:"pointer",mr:"5px",children:[e.jsx(de,{src:"/images/rfq_logo@2x.png",boxSize:"24px"}),e.jsx(b,{textColor:"text_caption",fontSize:m,fontWeight:"500",whiteSpace:"nowrap",bgGradient:p,bgClip:p?"text":"transparent",children:l})]})})});function te(l){const[t,i]=c.useState(!1),u=we(()=>{i(!0)},300);return c.useEffect(()=>()=>u(),[]),e.jsx(pe,{sx:{".chakra-switch__track":{p:"0px",transitionDuration:t?"var(--chakra-transition-duration-fast) !important":"0s"},".chakra-switch__thumb":{transitionDuration:t?"var(--chakra-transition-duration-normal) !important":"0s"}},...l})}function Re({isOpen:l,onOk:t,onClose:i}){return e.jsxs(Q,{autoFocus:!1,returnFocusOnClose:!1,isOpen:l,onClose:i,isCentered:!0,children:[e.jsx(X,{}),e.jsxs(Y,{children:[e.jsx(K,{children:"Tips"}),e.jsx(xe,{}),e.jsx(Z,{children:e.jsxs(v,{children:[e.jsx(se,{xlinkHref:"#icon-icon_tips",svgHover:"text_paragraph",cursor:"default"}),e.jsx(b,{color:"text_caption",children:"Do you want to save your changes?"})]})}),e.jsxs(ee,{gap:"16px",children:[e.jsx(H,{flex:"1",onClick:t,h:"40px",borderRadius:"8px",children:"Confirm"}),e.jsx(H,{flex:"1",variant:"outline",h:"40px",borderRadius:"8px",onClick:i,children:"No"})]})]})]})}function De({num:l,total:t}){return e.jsxs(v,{h:"16px",lineHeight:"16px",p:"2px 8px",borderRadius:"8px",bg:"aggregator_switch",gap:"0px",children:[e.jsxs(b,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"primary",children:[l,"Â "]}),t!==void 0&&e.jsxs(b,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"text_paragraph",children:["/ ",t]})]})}function Oe(l){const{isChecked:t,onChange:i}=l;return e.jsxs(v,{mt:"-8px",mb:"-8px",w:"100%",justify:"space-between",h:"52px",border:"1px solid",borderColor:"transparent",borderBottomColor:"border",borderTopColor:"border",children:[e.jsx(Ie,{showTooltipIcon:!0}),e.jsx(te,{isChecked:t,onChange:i})]})}const J=c.lazy(()=>ue(()=>import("./SourceGrid-5QE50ixM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),Le=({isOpen:l,onClose:t,showRfqSwitch:i})=>{const[u,p]=c.useState(!1),{handleSelectAllProviderClick:m,handleSelectAllDexProviderClick:a,handleSelectAllOtherProviderClick:o,handleProviderClick:C,selectAllProviders:E,selectAllDexProviders:k,otherProviderList:S,selectAllOtherProviders:D,dexProviderList:g,currProvidersSwitchStates:P,providersSwitchStates:_,handleSaveClick:O,allSourceNum:q,dexSourceNumMap:h,otherSourceNumMap:f,isOpenRfq:A,setIsOpenRfq:I,hasRfqProvider:L}=Pe(i),y=()=>{Me(_,P)?t():p(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{autoFocus:!1,returnFocusOnClose:!1,isOpen:l,onClose:y,isCentered:!0,children:[e.jsx(X,{}),e.jsxs(Y,{bg:"background",w:{base:"calc(100vw - 16px)",lg:"540px"},maxW:"unset",children:[e.jsx(K,{children:e.jsxs(v,{w:"100%",justify:"space-between",children:[e.jsx(b,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Aggregator Settings"}),e.jsx(se,{xlinkHref:"#icon-icon_close",onClick:y})]})}),e.jsx(Z,{children:e.jsxs(F,{w:"100%",gap:"24px",children:[e.jsxs(v,{w:"100%",justify:"space-between",align:"flex-end",children:[e.jsxs(F,{w:"100%",gap:"8px",align:"flex-start",children:[e.jsxs(v,{gap:"4px",children:[e.jsx(b,{fontSize:"16px",color:"text_caption",fontWeight:"500",children:"Liquidity Sources"}),e.jsx(re,{tooltipCon:"Your trade is routed through one or more of these liquidity sources."})]}),e.jsx(b,{lineHeight:{base:"12px",lg:"14px"},fontSize:{base:"12px",lg:"14px"},children:"Disable/Enable Liquidity Sources"})]}),e.jsxs(F,{align:"flex-end",flex:"0 0 108px",children:[e.jsx(b,{children:"Select all"}),e.jsxs(v,{justifyContent:"flex-end",h:"16px",gap:"4px",children:[e.jsx(De,{num:me((h==null?void 0:h.checked)||0).plus((f==null?void 0:f.checked)||0).plus(L&&A&&i?1:0).toNumber(),total:q}),e.jsx(te,{id:"select-all",isChecked:!!E,onChange:()=>m(!E)})]})]})]}),L&&i&&e.jsx(Oe,{id:"rfq-switch",isChecked:A,onChange:()=>{I(!A)}}),e.jsxs(he,{flexDir:"column",w:"100%",p:"0",gap:"20px",align:"flex-start",maxH:{base:"calc(100vh - 280px)",lg:"600px"},overflow:"hidden",children:[e.jsx(c.Suspense,{fallback:e.jsx($,{}),children:e.jsx(J,{title:"Dex",isAllChecked:k,onAllSelect:()=>a(!k),onItemSelect:C,list:g,checkedMap:P,totalNum:h==null?void 0:h.total,checkedNum:h==null?void 0:h.checked})}),e.jsx(fe,{orientation:"horizontal"}),e.jsx(c.Suspense,{fallback:e.jsx($,{}),children:e.jsx(J,{title:"Other",isAllChecked:D,onAllSelect:()=>o(!D),onItemSelect:C,list:S,checkedMap:P,totalNum:f==null?void 0:f.total,checkedNum:f==null?void 0:f.checked})})]})]})}),e.jsxs(ee,{gap:"16px",p:"8px 16px 16px",children:[e.jsx(H,{flex:"1",variant:"outline",p:"0 15px",onClick:t,children:"Cancel"}),e.jsx(H,{flex:"1",onClick:()=>{O(),t()},children:"Save"})]})]})]}),u&&e.jsx(Re,{isOpen:u,onClose:()=>{p(!1),t()},onOk:()=>{O(),p(!1),t()}})]})};function $(){return e.jsx(ge,{w:"100%",templateColumns:{base:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},maxH:{base:"unset",lg:"152px"},overflow:"scroll",gap:"8px",children:[1,2,3,4,5,6,7,8,9].map(l=>e.jsx(je,{children:e.jsx(Ce,{w:"100%",h:"36px"})},l))})}const Ue=c.memo(Le);export{Ue as A,De as N,Ie as R,te as a,Pe as u};
