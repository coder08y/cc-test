import{f as m,a as f,d as u,ak as l,al as T}from"./index-BpSfzecM.js";import"./cross-DJ28FxNa.js";function d(){const c=m("clmm"),{userTimeHasChang:r}=f(),o=async()=>{if(c)try{const e=await c.FullClient.getObject({id:l,options:{showContent:!0}}),t=T(e);return console.log("ðŸš€ ~ fetchCHainTime ~ filed:",t),Number(t.timestamp_ms)}catch(e){console.log("ðŸš€ ~ fetchCHainTime ~ error:",e)}};return{fetchChainTime:o,calculateTimeDiff:async()=>{const e=await o();return e?e-new Date().getTime():0},getCountDown:async e=>{if(!e||e===0)return 0;const t=new Date;let n=0,i=t.getTime();r?(i=await o()||t.getTime(),n=e*1e3-i):n=e*1e3-t.getTime();const a=Math.floor(n/1e3%60),s=a>30?30:a;return console.log("ðŸš€ ~ getCountDown ~ timeDiff:",{userTimeHasChang:r,difference:n,duration:s,expired_at:e,nowTime:i}),s},getAccurateTime:async()=>{try{const e=await o(),t=new Date().getTime();if(e){const n=e-t;if(u(n).abs().gt(5*1e3))return e}return t}catch{return new Date().getTime()}}}}export{d as u};
