import{r as d,e as Y,ap as $,d as de,aC as ot,aD as lt,_ as Hs,j as s,M as ds,o as ps,p as xs,q as hs,t as gs,l as Je,V as F,H,T as A,w as K,B as z,C as pe,P as Fs,x as Es,W as Ws,y as zs,A as Ds,n as Ns,S as Ps,X as ct,as as Qe,F as ls,Z as Os,I as ut,$ as dt,a0 as pt,a1 as xt}from"./vendor-CBmAETR3.js";import{c as Vs,b as ht,P as gt,a as ft}from"./PositionTypeAndCollapse-BLBBuOd3.js";import{b as Ke}from"./VolumeChart-CgtIPmnL.js";import{a as Us,u as fs}from"./useFavoriteDlmmPool-BAgWoipQ.js";import{u as mt}from"./useGetDlmmPoolList-DgjXNLvP.js";import{u as ms,a as vt,V as yt}from"./useStatistics-BeYwO0B5.js";import{ae as vs,I as ue,c as xe,u as ie,C as ge,a6 as jt,x as bt,a7 as wt,f1 as St,e as Xe,bo as _t,t as ke,av as Ct,aO as ns,S as Ye,V as Fe,B as He,a as _e,a0 as rs,d as me,_ as ks,b as qs,aY as Tt,l as At,M as Gs,Q as Qs,p as Rs,aq as Xs,w as Pt,aJ as kt}from"./index-BpSfzecM.js";import"./cross-DJ28FxNa.js";import{a as cs}from"./index-CbQm3ih3.js";import{d as Rt,i as Ze}from"./isBrowser-DgCPUZ4c.js";import{u as ys,a as Mt}from"./index-D8UqOC8m.js";import{d as Lt}from"./debounce-MPJy35Ge.js";import{P as Bt}from"./generateCategoricalChart-CmRMqbFo.js";import{a as Pe}from"./index-CgYRIMgB.js";import{a as Ht}from"./index-Dq_SzPY7.js";import{N as $e}from"./NoData-BFX9XpKb.js";import{P as Ft,T as Et}from"./Table-CbnPAf5M.js";import{V as Ys}from"./VirtualTable-DpVGsPWY.js";import{S as $s}from"./SortDropBlock-B-n__xh7.js";import{b as Ee,C as Wt}from"./CoinPairInfo-BH5hoU3X.js";import{a as We}from"./PositionItemContent-DLz2oagg.js";import{T as fe}from"./TableSortTh-B7oL9qGd.js";import{A as Js}from"./index-DfyAgMoy.js";import{a as Ks,F as zt}from"./VaultsAction-DQ6-bqcC.js";import{A as Dt}from"./AnalyticsCharts-CAr4nBvF.js";import{u as Zs}from"./swapWidget-DsvWJZa9.js";import{u as Is}from"./swapWidgetConfig-UYiO35jy.js";import{b as Nt}from"./config-DTm0VBgZ.js";import{R as et}from"./RewardsBlock-K5YLAwFo.js";import{H as st}from"./H5MapTable-DTBE_3Qm.js";import{a as tt,u as ze}from"./useFavoritePool-5MLb1oZG.js";import{u as Ot}from"./useGetPoolList-4kFQ2tyG.js";import{a as Vt,i as Ut,c as qt}from"./VaultsAprBlock-Bvb3Su6d.js";import{A as Gt}from"./AnalyticsCharts-BMwK7tjv.js";import{V as Qt}from"./PositionItem-DfdoLJIX.js";import{I as is}from"./IconText-CCehETWQ.js";import{i as Xt}from"./icon_clmm-sLI9GHAc.js";import{i as Yt}from"./icon_dlmm-BKyFDzFK.js";import{u as $t}from"./useCreatePool-CDFSrv9X.js";import{c as nt,a as js,u as Jt}from"./usePositionList-heG2hQcx.js";import{V as Ms}from"./VTextLabelBox-CuuDZpMe.js";import{c as Kt}from"./usePosClaimFeeAndReward-COsUjXqP.js";import{u as Zt}from"./useTransaction-uEos3ZjK.js";import{M as It,b as en,a as sn}from"./LiquidityAndYield-DhlshzYl.js";import{u as tn}from"./useNotifiSubscription-UwVjL9WV.js";import{u as nn}from"./useRpcListener-BdFabOsZ.js";import"./PositionCurrentPrice-C10xNmHB.js";import"./DLMMPositionItem-erXw9pnn.js";import"./CheckBox-eomO844M.js";import"./RefreshButton-bgRHxGzR.js";import"./SearchInputBlock-D9UW3h2i.js";import"./VaultsTab-7yLBtbMG.js";import"./index-S9fozw96.js";import"./Loading-DOvYGudd.js";import"./TooltipIcon-DVhxXZmh.js";import"./index-CqgM3rES.js";import"./index-C7OfScvw.js";import"./useWrapPoolData-CMGMCXwG.js";import"./EmptyTooltip-DzkM7sEr.js";import"./_getAllKeysIn-Juzb7Mj8.js";import"./_defineProperty-Bpc363rP.js";import"./YAxis-DLEZvSSr.js";import"./BarChart-3cDt1x1m.js";import"./utils-CMHkC_9A.js";import"./en_US-KAK2ZBDO-C1Pw6Q2s.js";import"./maxBy-BjNHtTns.js";import"./index-CLgd2W9i.js";import"./PoolTag-DVhitHGR.js";import"./useAccountBalance-DV0qM_Vy.js";import"./detail-C9A3dtWB.js";import"./dlmm-DdxfaipV.js";import"./usePosRemove-04piisVo.js";import"./msafe-BzcjPV-e.js";import"./useInterval-FApnpfRj.js";import"./HiddenDotted-BCHLZhII.js";import"./StatusPosition-CL7kLY-2.js";import"./icon_active_new@2x-Bekkt6Xc.js";import"./useGetClmmPositionDailyEarning-DV5RvJKu.js";import"./detail-Cbbl8wNo.js";import"./LiquidityValueBlock-CJnPKpci.js";import"./PositionPriceRangeBar-Bdy_fJqo.js";import"./useGetPythTokenPrice-Co4DlB3j.js";import"./BackButton-DoozH78n.js";import"./Slippage-8fJCLOYr.js";import"./index-gw6wWhzj.js";import"./useTokenBalance-c3RAkCCY.js";import"./RemoveBlock-C31WZQk2.js";import"./addLiquidity-DNM9DGI2.js";import"./FreshProgressV2-DfCij7Ow.js";import"./useSwapHelper-RreJ3kMc.js";import"./HTextLabelBox-D0r99Smv.js";import"./TradeInputGroup-C0B6uidS.js";import"./_baseClone-B759QteI.js";import"./last-CxFZ9vay.js";import"./TradeConfirmAmountInfo-C8pVFbTE.js";import"./TotalAmount-B2jkoq59.js";import"./v4-C6aID195.js";import"./ErrorTips-lJshH5MT.js";import"./RemoveBlock-CGdGO_rZ.js";import"./DepositRatio-D2zurS6C.js";import"./WithTooltipInfo-Vqx8IrEo.js";import"./usePriceImpact-DTCbq_0I.js";import"./MarketSource-Zu8s3YB-.js";import"./useTransactionModal-DL7w_I3R.js";import"./useCurrentPos-C5suLYji.js";import"./usePosAdd-DG3IUn6t.js";import"./AutoClaimCheckBox-lw6rJPdV.js";import"./ExpendItem-BR-Au2GE.js";import"./RangeValue-CrFwA76f.js";import"./useTokenRank-CM-9-tXe.js";import"./useFindBestRouting-CX4IIQLi.js";import"./TvlChart-CBoLRZaM.js";import"./AreaChart-DBMzOkAF.js";import"./Area-Bqahw1_r.js";import"./useTrack-Cdn9qear.js";import"./useSigner-Ct94kXtL.js";import"./activeOrders-CgYBFie-.js";import"./PieChart-D9NtH4qL.js";import"./useNotifiAlerts-7h-tWLbZ.js";import"./useXCetusHelper-rG98hv61.js";import"./usePreviousValue-Da-o2xpb.js";var rt=function(e,t){var r=t.manual,a=t.ready,i=a===void 0?!0:a,n=t.defaultParams,l=n===void 0?[]:n,o=t.refreshDeps,c=o===void 0?[]:o,p=t.refreshDepsAction,x=d.useRef(!1);return x.current=!1,cs(function(){!r&&i&&(x.current=!0,e.run.apply(e,Y([],$(l),!1)))},[i]),cs(function(){x.current||r||(x.current=!0,p?p():e.refresh())},Y([],$(c),!1)),{onBefore:function(){if(!i)return{stopNow:!0}}}};rt.onInit=function(e){var t=e.ready,r=t===void 0?!0:t,a=e.manual;return{loading:!a&&r}};var it=function(e,t){var r=d.useRef({deps:t,obj:void 0,initialized:!1}).current;return(r.initialized===!1||!Rt(r.deps,t))&&(r.deps=t,r.obj=e(),r.initialized=!0),r.obj},Ve=new Map,rn=function(e,t,r){var a=Ve.get(e);a!=null&&a.timer&&clearTimeout(a.timer);var i=void 0;t>-1&&(i=setTimeout(function(){Ve.delete(e)},t)),Ve.set(e,de(de({},r),{timer:i}))},an=function(e){return Ve.get(e)},Ue=new Map,on=function(e){return Ue.get(e)},ln=function(e,t){Ue.set(e,t),t.then(function(r){return Ue.delete(e),r}).catch(function(){Ue.delete(e)})},Se={},cn=function(e,t){Se[e]&&Se[e].forEach(function(r){return r(t)})},as=function(e,t){return Se[e]||(Se[e]=[]),Se[e].push(t),function(){var a=Se[e].indexOf(t);Se[e].splice(a,1)}},un=function(e,t){var r=t.cacheKey,a=t.cacheTime,i=a===void 0?5*60*1e3:a,n=t.staleTime,l=n===void 0?0:n,o=t.setCache,c=t.getCache,p=d.useRef(void 0),x=d.useRef(void 0),h=function(u,v){o?o(v):rn(u,i,v),cn(u,v.data)},g=function(u,v){return v===void 0&&(v=[]),c?c(v):an(u)};return it(function(){if(r){var u=g(r);u&&Object.hasOwnProperty.call(u,"data")&&(e.state.data=u.data,e.state.params=u.params,(l===-1||Date.now()-u.time<=l)&&(e.state.loading=!1)),p.current=as(r,function(v){e.setState({data:v})})}},[]),ys(function(){var u;(u=p.current)===null||u===void 0||u.call(p)}),r?{onBefore:function(u){var v=g(r,u);return!v||!Object.hasOwnProperty.call(v,"data")?{}:l===-1||Date.now()-v.time<=l?{loading:!1,data:v==null?void 0:v.data,error:void 0,returnNow:!0}:{data:v==null?void 0:v.data,error:void 0}},onRequest:function(u,v){var j=on(r);return j&&j!==x.current?{servicePromise:j}:(j=u.apply(void 0,Y([],$(v),!1)),x.current=j,ln(r,j),{servicePromise:j})},onSuccess:function(u,v){var j;r&&((j=p.current)===null||j===void 0||j.call(p),h(r,{data:u,params:v,time:Date.now()}),p.current=as(r,function(b){e.setState({data:b})}))},onMutate:function(u){var v;r&&((v=p.current)===null||v===void 0||v.call(p),h(r,{data:u,params:e.state.params,time:Date.now()}),p.current=as(r,function(j){e.setState({data:j})}))}}:{}},dn=function(e,t){var r=t.debounceWait,a=t.debounceLeading,i=t.debounceTrailing,n=t.debounceMaxWait,l=d.useRef(void 0),o=d.useMemo(function(){var c={};return a!==void 0&&(c.leading=a),i!==void 0&&(c.trailing=i),n!==void 0&&(c.maxWait=n),c},[a,i,n]);return d.useEffect(function(){if(r){var c=e.runAsync.bind(e);return l.current=Lt(function(p){p()},r,o),e.runAsync=function(){for(var p=[],x=0;x<arguments.length;x++)p[x]=arguments[x];return new Promise(function(h,g){var u;(u=l.current)===null||u===void 0||u.call(l,function(){c.apply(void 0,Y([],$(p),!1)).then(h).catch(g)})})},function(){var p;(p=l.current)===null||p===void 0||p.cancel(),e.runAsync=c}}},[r,o]),r?{onCancel:function(){var c;(c=l.current)===null||c===void 0||c.cancel()}}:{}},pn=function(e,t){var r=t.loadingDelay,a=t.ready,i=d.useRef(void 0);if(!r)return{};var n=function(){i.current&&clearTimeout(i.current)};return{onBefore:function(){return n(),a!==!1&&(i.current=setTimeout(function(){e.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){n()},onCancel:function(){n()}}};function bs(){return Ze?document.visibilityState!=="hidden":!0}var qe=new Set;function xn(e){return qe.add(e),function(){qe.has(e)&&qe.delete(e)}}if(Ze){var hn=function(){bs()&&qe.forEach(function(e){return e()})};window.addEventListener("visibilitychange",hn,!1)}var gn=function(e,t){var r=t.pollingInterval,a=t.pollingWhenHidden,i=a===void 0?!0:a,n=t.pollingErrorRetryCount,l=n===void 0?-1:n,o=d.useRef(void 0),c=d.useRef(void 0),p=d.useRef(0),x=function(){var h;o.current&&clearTimeout(o.current),(h=c.current)===null||h===void 0||h.call(c)};return cs(function(){r||x()},[r]),r?{onBefore:function(){x()},onError:function(){p.current+=1},onSuccess:function(){p.current=0},onFinally:function(){l===-1||l!==-1&&p.current<=l?o.current=setTimeout(function(){!i&&!bs()?c.current=xn(function(){e.refresh()}):e.refresh()},r):p.current=0},onCancel:function(){x()}}:{}};function fn(e,t){var r=!1;return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];r||(r=!0,e.apply(void 0,Y([],$(a),!1)),setTimeout(function(){r=!1},t))}}var mn=function(){return Ze&&typeof navigator.onLine<"u"?navigator.onLine:!0},Ge=new Set;function vn(e){return Ge.add(e),function(){Ge.has(e)&&Ge.delete(e)}}if(Ze){var Ls=function(){!bs()||!mn()||Ge.forEach(function(e){return e()})};window.addEventListener("visibilitychange",Ls,!1),window.addEventListener("focus",Ls,!1)}var yn=function(e,t){var r=t.refreshOnWindowFocus,a=t.focusTimespan,i=a===void 0?5e3:a,n=d.useRef(void 0),l=function(){var o;(o=n.current)===null||o===void 0||o.call(n)};return d.useEffect(function(){if(r){var o=fn(e.refresh.bind(e),i);n.current=vn(function(){o()})}return function(){l()}},[r,i]),ys(function(){l()}),{}},jn=function(e,t){var r=t.retryInterval,a=t.retryCount,i=d.useRef(void 0),n=d.useRef(0),l=d.useRef(!1);return a?{onBefore:function(){l.current||(n.current=0),l.current=!1,i.current&&clearTimeout(i.current)},onSuccess:function(){n.current=0},onError:function(){if(n.current+=1,a===-1||n.current<=a){var o=r??Math.min(1e3*Math.pow(2,n.current),3e4);i.current=setTimeout(function(){l.current=!0,e.refresh()},o)}else n.current=0},onCancel:function(){n.current=0,i.current&&clearTimeout(i.current)}}:{}},bn=function(e,t){var r=t.throttleWait,a=t.throttleLeading,i=t.throttleTrailing,n=d.useRef(void 0),l={};return a!==void 0&&(l.leading=a),i!==void 0&&(l.trailing=i),d.useEffect(function(){if(r){var o=e.runAsync.bind(e);return n.current=Bt(function(c){c()},r,l),e.runAsync=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return new Promise(function(x,h){var g;(g=n.current)===null||g===void 0||g.call(n,function(){o.apply(void 0,Y([],$(c),!1)).then(x).catch(h)})})},function(){var c;e.runAsync=o,(c=n.current)===null||c===void 0||c.cancel()}}},[r,a,i]),r?{onCancel:function(){var o;(o=n.current)===null||o===void 0||o.cancel()}}:{}},wn=function(e){d.useEffect(function(){var t=e==null?void 0:e();if(!(t&&typeof t=="object"&&typeof t.then=="function"))return t},[])},Sn=function(){var e=$(d.useState({}),2),t=e[1];return d.useCallback(function(){return t({})},[])},_n=function(){function e(t,r,a,i){i===void 0&&(i={}),this.serviceRef=t,this.options=r,this.subscribe=a,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=de(de(de({},this.state),{loading:!r.manual}),i)}return e.prototype.setState=function(t){t===void 0&&(t={}),this.state=de(de({},this.state),t),this.subscribe()},e.prototype.runPluginHandler=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var i=this.pluginImpls.map(function(n){var l;return(l=n[t])===null||l===void 0?void 0:l.call.apply(l,Y([n],$(r),!1))}).filter(Boolean);return Object.assign.apply(Object,Y([{}],$(i),!1))},e.prototype.runAsync=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ot(this,void 0,void 0,function(){var a,i,n,l,o,c,p,x,h,g,u,v,j,b,P,S,B,y,w,E,D;return lt(this,function(M){switch(M.label){case 0:if(this.count+=1,a=this.count,i=this.runPluginHandler("onBefore",t),n=i.stopNow,l=n===void 0?!1:n,o=i.returnNow,c=o===void 0?!1:o,p=Hs(i,["stopNow","returnNow"]),l)return[2,new Promise(function(){})];if(this.setState(de({loading:!0,params:t},p)),c)return[2,Promise.resolve(p.data)];(j=(v=this.options).onBefore)===null||j===void 0||j.call(v,t),M.label=1;case 1:return M.trys.push([1,3,,4]),x=this.runPluginHandler("onRequest",this.serviceRef.current,t).servicePromise,x||(x=(u=this.serviceRef).current.apply(u,Y([],$(t),!1))),[4,x];case 2:return h=M.sent(),a!==this.count?[2,new Promise(function(){})]:(this.setState({data:h,error:void 0,loading:!1}),(P=(b=this.options).onSuccess)===null||P===void 0||P.call(b,h,t),this.runPluginHandler("onSuccess",h,t),(B=(S=this.options).onFinally)===null||B===void 0||B.call(S,t,h,void 0),a===this.count&&this.runPluginHandler("onFinally",t,h,void 0),[2,h]);case 3:if(g=M.sent(),a!==this.count)return[2,new Promise(function(){})];throw this.setState({error:g,loading:!1}),(w=(y=this.options).onError)===null||w===void 0||w.call(y,g,t),this.runPluginHandler("onError",g,t),(D=(E=this.options).onFinally)===null||D===void 0||D.call(E,t,void 0,g),a===this.count&&this.runPluginHandler("onFinally",t,void 0,g),g;case 4:return[2]}})})},e.prototype.run=function(){for(var t=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];this.runAsync.apply(this,Y([],$(r),!1)).catch(function(i){t.options.onError||console.error(i)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,Y([],$(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,Y([],$(this.state.params||[]),!1))},e.prototype.mutate=function(t){var r=Ht(t)?t(this.state.data):t;this.runPluginHandler("onMutate",r),this.setState({data:r})},e}();function Cn(e,t,r){t===void 0&&(t={}),r===void 0&&(r=[]);var a=t.manual,i=a===void 0?!1:a,n=t.ready,l=n===void 0?!0:n,o=Hs(t,["manual","ready"]),c=de({manual:i,ready:l},o),p=Mt(e),x=Sn(),h=it(function(){var g=r.map(function(u){var v;return(v=u==null?void 0:u.onInit)===null||v===void 0?void 0:v.call(u,c)}).filter(Boolean);return new _n(p,c,x,Object.assign.apply(Object,Y([{}],$(g),!1)))},[]);return h.options=c,h.pluginImpls=r.map(function(g){return g(h,c)}),wn(function(){if(!i&&l){var g=h.state.params||t.defaultParams||[];h.run.apply(h,Y([],$(g),!1))}}),ys(function(){h.cancel()}),{loading:h.state.loading,data:h.state.data,error:h.state.error,params:h.state.params||[],cancel:Pe(h.cancel.bind(h)),refresh:Pe(h.refresh.bind(h)),refreshAsync:Pe(h.refreshAsync.bind(h)),run:Pe(h.run.bind(h)),runAsync:Pe(h.runAsync.bind(h)),mutate:Pe(h.mutate.bind(h))}}function at(e,t,r){return Cn(e,t,Y(Y([],$([]),!1),[dn,pn,gn,yn,bn,rt,un,jn],!1))}function Tn({poolInfo:e,isOpen:t,onClose:r}){return s.jsxs(ds,{autoFocus:!1,closeOnOverlayClick:!0,returnFocusOnClose:!1,isOpen:t,onClose:r,isCentered:!0,children:[s.jsx(ps,{}),s.jsxs(xs,{border:"none !important",minW:{base:"100%",lg:"600px"},children:[s.jsx(hs,{top:"18px",right:"12px"}),s.jsx(gs,{p:"0px !important",children:s.jsx(Dt,{poolInfo:e})})]})]})}function An({poolInfo:e,changeAnalyticsModal:t}){console.log("🚀 ~ DLMMActionContent ~ poolInfo:",e);const r=Je(),{addFavorites:a,removeFavorites:i}=Us(),{dlmmPoolFavoriteIds:n}=fs(),l=d.useMemo(()=>n==null?void 0:n.includes((e==null?void 0:e.poolId)||""),[JSON.stringify(n),e==null?void 0:e.poolId]),{isSwapWidgetDisplay:o}=vs(),{setFromCoin:c,setToCoin:p}=Zs(),{setIsOpen:x}=Is();return s.jsxs(F,{align:"flex-start",padding:"8px",children:[s.jsx(os,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{t(!0)}}),s.jsx(os,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var h,g;o?(c(e==null?void 0:e.displayTokenA),p(e==null?void 0:e.displayTokenB),x(!0)):r(`/swap/${(h=e==null?void 0:e.tokenA)==null?void 0:h.coinType}/${(g=e==null?void 0:e.tokenB)==null?void 0:g.coinType}`)}}),s.jsx(os,{text:"Add to Watchlist",xlinkHref:l?"#icon-icon_star_sel":"#icon-icon_star",svgFill:l?"primary":"text_paragraph",onClick:()=>{l?i(e==null?void 0:e.poolId):a(e==null?void 0:e.poolId)}})]})}const os=({text:e,xlinkHref:t,svgFill:r="text_paragraph",onClick:a})=>s.jsxs(H,{w:"100%",cursor:"pointer",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",_hover:{svg:{fill:"primary"},p:{color:"primary"}},onClick:i=>{xe(i),a()},children:[s.jsx(ue,{svgFill:r,xlinkHref:t,svgHover:"primary",svgW:e=="Add to Watchlist"?"22px":"20px",svgH:e=="Add to Watchlist"?"22px":"20px",minW:e=="Add to Watchlist"?"22px":"20px",minH:e=="Add to Watchlist"?"22px":"20px",ml:e=="Add to Watchlist"?"-2px":"0px"}),s.jsx(A,{fontSize:"13px",children:e})]});function Pn({isOpen:e,list:t,onExpand:r=()=>{}}){const{isApp:a}=ie(),i=d.useMemo(()=>(t==null?void 0:t.length)===1,[t]);return a?s.jsxs(K,{w:"calc(100vw - 42px)",variant:"outline",display:"flex",gap:"4px",bg:"transparent",onClick:r,children:[s.jsx(z,{p:"3px 8px",className:"dlmm_action_pools",children:s.jsxs(A,{fontWeight:"500",fontSize:"12px",color:e?"text_highlight":"primary_gray",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)>1?"Pools":"Pool"]})}),s.jsx(ue,{xlinkHref:"#icon-icon_descending_nor",transform:i?"rotate(270deg)":e?"rotate(-180deg)":"rotate(0deg)",transition:"transform 0.5s",fontSize:"20px"})]}):s.jsxs(K,{variant:"unstyled",display:"flex",gap:"4px",bg:"transparent",className:"dlmm_action",children:[s.jsx(z,{p:"3px 8px",bg:"card_bg",border:"1px solid",borderColor:"card_bg",borderRadius:"12px",className:"dlmm_action_pools",children:s.jsxs(A,{fontWeight:"500",fontSize:"12px",color:e?"text_caption":"primary_gray",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)>1?"Pools":"Pool"]})}),s.jsx(ue,{xlinkHref:"#icon-icon_descending_nor",transform:i?"rotate(270deg)":e?"rotate(-180deg)":"rotate(0deg)",transition:"transform 0.5s",fontSize:"20px"})]})}function kn({poolInfo:e}){const{isApp:t}=ie(),[r,a]=d.useState(!1),[i,n]=d.useState(!1),{clearVaultsActionData:l}=Ks();d.useEffect(()=>{console.log("🚀🚀🚀 ~ ActionsBlock.tsx:22 ~ useEffect ~ clearVaultsActionData:"),l()},[r]);const o=Je(),[c,p]=d.useState(!1);return s.jsxs(H,{w:{base:e!=null&&e.showTokenName?"calc(100vw - 24px)":"calc(100vw - 60px)",lg:"unset"},pr:{base:"0px",lg:"unset"},justify:t?"space-between":"flex-end",gap:"8px",children:[e.vaultCategory?s.jsx(ge,{placement:"bottom-end",tooltip:s.jsx(A,{_hover:{color:"primary"},cursor:"pointer",color:t?"primary":"text_paragraph",children:"Auto"}),showTooltip:i,children:s.jsx(pe,{w:t?"calc(100%)":"unset",children:s.jsxs(K,{p:"0",variant:"ghost",w:{base:"100%",lg:"32px"},padding:t?"0 12px":"",h:"32px",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},onClick:x=>{x.stopPropagation(),a(!r)},onMouseMove:()=>{n(!0)},onMouseLeave:()=>{n(!1)},children:[s.jsx(ue,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_auto",svgW:"20px",svgH:"20px"}),t&&s.jsx(A,{color:t?"primary":"text_paragraph",marginLeft:"4px",children:"Auto"})]})})}):null,s.jsx(K,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{o(`/dlmm?poolId=${e==null?void 0:e.poolId}`)},children:"Deposit"}),s.jsxs(Fs,{isLazy:!0,trigger:t?"click":"hover",placement:t?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[s.jsx(Es,{children:s.jsx(pe,{onClick:x=>{xe(x)},children:s.jsx(K,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:s.jsx(ue,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),s.jsx(Ws,{children:s.jsx(zs,{borderRadius:"12px",w:"fit-content",children:s.jsx(Ds,{p:"0",fontSize:"12px",w:"fit-content",children:s.jsx(An,{poolInfo:e,changeAnalyticsModal:x=>p(x)})})})})]}),c&&s.jsx(Tn,{poolInfo:e,isOpen:c,onClose:()=>p(!1)})]})}function Rn({poolInfo:e,isParent:t,isOpen:r,list:a,onExpand:i,...n}){return t?s.jsx(Pn,{isOpen:r,list:a,onExpand:i}):s.jsx(kn,{poolInfo:e})}const us=({coinTypeA:e,coinTypeB:t,mt:r})=>{const{getShowCoinTag:a}=jt(),{importTokenList:i}=bt(),{verifiedTokenMap:n}=wt(),l=d.useMemo(()=>(e||t)&&(n==null?void 0:n.size)>0?a(e)||a(t):!1,[e,t,n,i]);return s.jsx(s.Fragment,{children:l&&s.jsx(H,{mt:r,w:"16px",h:"16px",onClick:o=>{xe(o)},children:s.jsx(ge,{placement:"top",tooltip:s.jsx(A,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:s.jsx(pe,{children:s.jsx(Ns,{w:"100%",h:"100%",src:St})})})})})},Mn=({poolInfo:e,haveName:t=!1,placement:r="top-start",symbolEllipsesDecimals:a=0,nameEllipsesDecimals:i=0,symbolFontWeight:n="500",showPool:l,...o})=>{const{isApp:c}=ie(),x=!("list"in e)||l;return s.jsx(H,{p:"12px 0",onClick:h=>{c&&xe(h)},children:s.jsx(pe,{children:s.jsx(Ln,{symbolFontWeight:n,poolInfo:e,symbolEllipsesDecimals:a,haveName:t,nameEllipsesDecimals:i,showPool:x,...o})})})},Ln=({poolInfo:e,haveName:t=!1,fontSize:r="11px",symbolFontSize:a="14px",symbolFontWeight:i=500,symbolEllipsesDecimals:n=0,nameEllipsesDecimals:l=0,isShowPowered:o=!1,poolType:c="clmm",hasFee:p=!0,imgBoxStyle:x,isParent:h=!0,haveFarming:g,haveMining:u,isOnlyOneData:v,showPool:j})=>{var y,w,E,D,M,G,U,Q,te,N,J,W,Z,ne;const{isApp:b}=ie(),{tokenInfo:P}=Xe((y=e==null?void 0:e.displayTokenA)==null?void 0:y.coinType),{tokenInfo:S}=Xe((w=e==null?void 0:e.displayTokenB)==null?void 0:w.coinType),B=e!=null&&e.feeDisplay?e==null?void 0:e.feeDisplay:"--";return s.jsxs(H,{cursor:"pointer",children:[s.jsx(ge,{gutter:6,placement:"top-start",tooltip:s.jsx(Be,{poolInfo:e,showPool:j}),children:s.jsx(_t,{coinACoinType:(E=e==null?void 0:e.displayTokenA)==null?void 0:E.coinType,coinBCoinType:(D=e==null?void 0:e.displayTokenB)==null?void 0:D.coinType,coinAIconUrl:((M=e==null?void 0:e.displayTokenA)==null?void 0:M.logoURL)||(P==null?void 0:P.logo_url),coinBIconUrl:((G=e==null?void 0:e.displayTokenB)==null?void 0:G.logoURL)||(S==null?void 0:S.logo_url),imgBoxStyle:x})}),h?s.jsxs(Ps,{flexDir:"column",gap:"4px",children:[s.jsxs(H,{children:[s.jsx(ge,{gutter:p?6:14,placement:"top-start",tooltip:s.jsx(Be,{poolInfo:e,showPool:j}),children:s.jsxs(A,{color:"text_caption",fontSize:a,fontWeight:i,children:[ke(((U=e==null?void 0:e.displayTokenA)==null?void 0:U.symbol)||(P==null?void 0:P.symbol),n)," - ",ke(((Q=e==null?void 0:e.displayTokenB)==null?void 0:Q.symbol)||(S==null?void 0:S.symbol),n)]})}),b&&g&&s.jsx(Ee,{}),b&&u&&s.jsx(We,{}),s.jsx(us,{coinTypeA:(e==null?void 0:e.coinTypeA)||((te=e==null?void 0:e.displayTokenA)==null?void 0:te.coinType),coinTypeB:(e==null?void 0:e.coinTypeB)||((N=e==null?void 0:e.displayTokenB)==null?void 0:N.coinType)})]}),p&&s.jsx(ge,{gutter:24,placement:"top-start",tooltip:s.jsx(Be,{poolInfo:e,showPool:j}),children:s.jsx(Bs,{displayFee:B,fontSize:r,symbolFontWeight:i,poolInfo:e})})]}):s.jsxs(Ps,{flexDir:e!=null&&e.showTokenName?"column":"row",gap:e!=null&&e.showTokenName?"4px":"8px",children:[(e==null?void 0:e.showTokenName)&&s.jsxs(H,{children:[s.jsx(ge,{gutter:6,placement:"top-start",tooltip:s.jsx(Be,{poolInfo:e,showPool:j}),children:s.jsxs(H,{gap:"0",h:"14px",children:[s.jsx(A,{color:"text_caption",fontSize:a,fontWeight:i,children:ke(((J=e==null?void 0:e.displayTokenA)==null?void 0:J.symbol)||(P==null?void 0:P.symbol),n)}),s.jsx(A,{color:"text_caption",fontSize:a,children:" -"}),s.jsxs(A,{color:"text_caption",fontSize:a,fontWeight:i,children:[" ",ke(((W=e==null?void 0:e.displayTokenB)==null?void 0:W.symbol)||(S==null?void 0:S.symbol),n)]})]})}),b&&g&&s.jsx(Ee,{}),b&&u&&s.jsx(We,{}),v&&s.jsx(us,{coinTypeA:(e==null?void 0:e.coinTypeA)||((Z=e==null?void 0:e.displayTokenA)==null?void 0:Z.coinType),coinTypeB:(e==null?void 0:e.coinTypeB)||((ne=e==null?void 0:e.displayTokenB)==null?void 0:ne.coinType)})]}),s.jsx(ge,{gutter:24,placement:"top-start",tooltip:s.jsx(Be,{poolInfo:e,showPool:j}),children:s.jsx(Bs,{displayFee:B,fontSize:r,symbolFontWeight:i,poolInfo:e})}),!(e!=null&&e.showTokenName)&&s.jsxs(s.Fragment,{children:[b&&g&&s.jsx(Ee,{}),b&&u&&s.jsx(We,{})]})]})]})},Bs=({fontSize:e,symbolFontWeight:t,poolInfo:r,displayFee:a,color:i="primary"})=>{var n;return s.jsx(He,{w:"fit-content",p:"2px 8px",borderRadius:"12px",borderColor:"card_bg",bg:"card_bg",className:"dlmm_fee_and_bin_step",children:s.jsxs(H,{h:"12px",children:[s.jsx(A,{fontSize:e,color:i,lineHeight:"1",fontWeight:t,children:a}),s.jsx(ct,{orientation:"vertical",h:"10px"}),s.jsxs(A,{fontSize:e,color:i,fontWeight:t,children:[(r==null?void 0:r.binStep)||((n=Nt)==null?void 0:n[r==null?void 0:r.fee])," bps"]})]})})},Be=({poolInfo:e,showPool:t=!0})=>{var c,p,x,h,g,u;const{getExplorerUrl:r}=Ct(),{isApp:a}=ie(),i=(c=e==null?void 0:e.tokenA)==null?void 0:c.coinType,n=(p=e==null?void 0:e.tokenB)==null?void 0:p.coinType,{tokenInfo:l}=Xe(i),{tokenInfo:o}=Xe(n);return s.jsxs(F,{align:"flex-start",children:[t&&s.jsxs(s.Fragment,{children:[s.jsxs(H,{w:"100%",justify:"space-between",children:[s.jsx(H,{children:s.jsx(A,{fontSize:"12px",color:"text_caption",children:"Pool"})}),s.jsx(ns,{address:e==null?void 0:e.poolId,color:"text_caption",showLink:!!a,onClickLink:()=>{window.open(r(e==null?void 0:e.poolId,"poolAddress"),"_blank")}})]}),s.jsx(z,{h:"1px",w:" 100%",bg:"border"})]}),s.jsxs(H,{w:"100%",justify:"space-between",children:[s.jsxs(H,{children:[s.jsx(Ye,{imageUrl:((x=e==null?void 0:e.tokenA)==null?void 0:x.logoURL)||(l==null?void 0:l.logo_url),w:"20px",h:"20px",coinType:i,showTagWidth:"10px",showTagHeight:"10px"}),s.jsx(A,{fontSize:"12px",color:"text_caption",children:ke(((h=e==null?void 0:e.tokenA)==null?void 0:h.symbol)||(l==null?void 0:l.symbol),8)})]}),s.jsx(ns,{address:Fe(i).full_address,showLink:!!a,onClickLink:()=>{window.open(r(i,"coin"))}})]}),s.jsxs(H,{w:"100%",justify:"space-between",children:[s.jsxs(H,{children:[s.jsx(Ye,{imageUrl:((g=e==null?void 0:e.tokenB)==null?void 0:g.logoURL)||(o==null?void 0:o.logo_url),w:"20px",h:"20px",coinType:n,showTagWidth:"10px",showTagHeight:"10px"}),s.jsx(A,{fontSize:"12px",color:"text_caption",children:ke(((u=e==null?void 0:e.tokenB)==null?void 0:u.symbol)||(o==null?void 0:o.symbol),8)})]}),s.jsx(ns,{address:Fe(n).full_address,showLink:!!a,onClickLink:()=>{window.open(r(n,"coin"))}})]})]})},Bn=(e,t,r,a,i)=>[{title:s.jsx(A,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:({hasFee:n,isParent:l,...o})=>{const c=l&&n||!(o!=null&&o.coinTypeA)&&(o==null?void 0:o.showTokenName);return s.jsxs(H,{pl:"0",align:c?"flex-start":"center",children:[s.jsx(Mn,{poolInfo:{...o},symbolEllipsesDecimals:10,hasFee:n,symbolFontSize:"14px",imgBoxStyle:l?{w:"32px",h:"32px"}:{w:"28px",h:"28px"},isParent:l??!1,showPool:n,haveFarming:o==null?void 0:o.haveFarming,haveMining:o==null?void 0:o.haveMining,isOnlyOneData:c}),!i&&(o==null?void 0:o.haveFarming)&&s.jsx(Ee,{mt:c?"12px":"0"}),!i&&(o==null?void 0:o.haveMining)&&s.jsx(We,{mt:c?"12px":"0"})]})}},{title:s.jsx(fe,{labelInfo:a.tvl,sortRule:e,sortBy:t,clickSort:n=>r(n)}),key:"tvlDisplay"},{title:s.jsx(fe,{labelInfo:a.vol,sortRule:e,sortBy:t,clickSort:n=>r(n)}),key:"volume24Display"},{title:s.jsx(fe,{labelInfo:a.fees,sortRule:e,sortBy:t,clickSort:n=>r(n)}),key:"fees24Display"},{title:s.jsx(A,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:n,farmsRewarderList:l})=>n&&(n==null?void 0:n.length)<=0&&l&&(l==null?void 0:l.length)<=0,render:({miningRewardList:n,farmsRewarderList:l,isParent:o,hasFee:c},p)=>s.jsx(et,{miningRewardList:n,farmsRewarderList:l,isParent:o,showRate:c})},{title:s.jsx(fe,{labelInfo:a.totalApr,sortRule:e,sortBy:t,tooltip:{content:"Estimated based on trading activity in the past 24 hours plus mining and farming rewards. For pool groups, the displayed APR represents the highest value among active pools in that category. Estimated APR = [(24h fees + 24h rewards) × 365 / TVL] × 100%"},clickSort:n=>r(n),justifyContent:"flex-end"}),key:"apr24h",render:n=>n!=null&&n.totalAllAprDisplay&&!(n!=null&&n.hasFee)?s.jsx(A,{color:"text_highlight",fontWeight:"500",children:n==null?void 0:n.totalAllAprDisplay}):s.jsx(Js,{poolInfo:n,placement:i?"auto-start":"top"})},{title:s.jsx(A,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:({isParent:n,isOpen:l,list:o,onExpand:c,...p})=>s.jsx(z,{children:s.jsx(Rn,{isParent:n,isOpen:l,list:o,onExpand:c,poolInfo:p})})}];function Hn({item:e,columns:t,goLiquidity:r,isOpen:a=!1,onOpen:i,loading:n,itemSkeletonLength:l,itemHeight:o}){var S,B;const[c,p]=d.useState(!1),{setBackUrl:x}=_e(),h=y=>{xe(y),i(e==null?void 0:e.id,!a),a||p(!1)},g=y=>{xe(y),p(!c)},u=e==null?void 0:e.list,v=(S=e==null?void 0:e.list)==null?void 0:S.slice(0,3),j=d.useMemo(()=>(u==null?void 0:u.length)===1,[u]);ie();const b=((B=v==null?void 0:v.map((y,w)=>rs(t,{...y,hasFee:!0},w)))==null?void 0:B.reduce((y,w)=>{var E,D;return me(y).plus((((E=w==null?void 0:w.filter(M=>!(M!=null&&M.hidden)))==null?void 0:E.length)-2)*30).plus(18).plus(84).plus((((D=w==null?void 0:w.filter(M=>!(M!=null&&M.hidden)))==null?void 0:D.length)-1)*8).toNumber()},0))+((v==null?void 0:v.length)-1)*8+16,P=y=>{var w;j?(x("/pools?tab=dlmm_pools"),r(`/dlmm?poolId=${(w=u==null?void 0:u[0])==null?void 0:w.poolId}`,e)):h(y)};return s.jsxs(F,{borderRadius:"12px",gap:"0",bg:a?"bg_secondary":"transparent",w:"100%",children:[s.jsx(ks,{data:n?[]:rs(t,{...e,hasFee:j,isParent:!0,isOpen:a,onExpand:P,...j?u==null?void 0:u[0]:{}}),loading:n,skeletonLength:l,onClick:P,itemHeight:o,style:{w:"100%",p:"8px",borderRadius:"12px",bg:a?"text_highlight_opacity.10":"transparent"}}),!j&&s.jsx(Qe,{in:a,animateOpacity:!0,transition:{enter:{duration:.8}},style:{width:"100%"},children:s.jsxs(s.Fragment,{children:[s.jsx(Qe,{startingHeight:b,in:c,style:{width:"100%"},children:s.jsx(F,{w:"100%",p:"8px",gap:"8px",children:Array.isArray(u)&&(u==null?void 0:u.length)>0&&(u==null?void 0:u.map((y,w)=>s.jsx(ks,{data:n?[]:rs(t,{...y,hasFee:!0},w),loading:n,skeletonLength:l,onClick:()=>{x("/pools?tab=dlmm_pools"),r(`/dlmm?poolId=${y.poolId}`,y)},style:{w:"100%",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px"},itemHeight:o},y==null?void 0:y.poolId)))})}),Array.isArray(u)&&(u==null?void 0:u.length)>3?s.jsx(pe,{w:"100%",children:s.jsxs(K,{h:"44px",variant:"unstyled",onClick:g,display:"flex",gap:"4px",cursor:"pointer",_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[s.jsx(A,{fontSize:"12px",color:c?"text_highlight":"text_paragraph",children:c?"Show Less":"Show All"}),s.jsx(ue,{xlinkHref:"#icon-icon_arrow",transform:c?"rotate(180deg)":"rotate(0deg)",fontSize:"12px"})]})}):s.jsx(z,{h:"9px",w:"100%"})]})})]})}function Fn({dataSource:e,columns:t,itemSkeletonLength:r,skeletonLength:a=3,rowKey:i,loading:n,pagination:l,wrapStyle:o,onBodyHover:c,onBodyLeave:p,itemHeight:x,isShowBorder:h=!0,haveDividingLine:g=!0,openPoolsGroup:u,goLiquidity:v,isWatch:j,onOpenPoolsGroup:b}){var B;const P=new Array(a).fill(0),{setBackUrl:S}=_e();return j?s.jsx(st,{rowKey:"poolAddress",dataSource:e,columns:t,loading:n,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(y,w)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:y=>{S("/pools"),console.log(y,"item"),v(`/dlmm?poolId=${y.poolId}`,y)}}):s.jsxs(F,{w:"100%",...o||{},onMouseEnter:()=>c&&c(),onMouseLeave:()=>p&&p(),border:"1px solid",borderColor:"border",borderRadius:"12px",children:[(B=e&&(e!=null&&e.length)&&!n?e:P)==null?void 0:B.map((y,w)=>s.jsxs(F,{w:"100%",children:[s.jsx(Hn,{item:y,columns:t,loading:n,isOpen:u==null?void 0:u[y==null?void 0:y.id],onOpen:b,goLiquidity:v,itemSkeletonLength:r,itemHeight:x},y==null?void 0:y.id),h&&g&&s.jsx(z,{w:"100%",h:"1px",bg:"border"})]},n?w:typeof i=="function"?i(y):i?y[i]:w)),l&&(l==null?void 0:l.total)>(l==null?void 0:l.size)&&s.jsx(pe,{mt:"16px",children:s.jsx(Ft,{...l})})]})}const En=({item:e,columns:t,goLiquidity:r,isOpen:a=!1,onOpen:i})=>{var j;const[n,l]=d.useState(!1),{setBackUrl:o}=_e(),c=b=>{xe(b),i(e==null?void 0:e.id,!a),a||l(!1)},p=b=>{xe(b),l(!n)},x=e==null?void 0:e.list,h=(j=e==null?void 0:e.list)==null?void 0:j.slice(0,3),{isApp:g}=ie(),u=d.useMemo(()=>(x==null?void 0:x.length)===1,[x==null?void 0:x.length]),v=b=>{var P;u?(o("/pools?tab=dlmm_pools"),r(`/dlmm?poolId=${(P=x==null?void 0:x[0])==null?void 0:P.poolId}`,e)):c(b)};return s.jsxs(F,{border:"1px solid",borderColor:a?"border":"transparent",borderRadius:"12px",gap:"0",bg:a?"bg_secondary":"transparent",className:"dlmm-tutorial-step-1",mb:a?"12px":"0",children:[s.jsxs(z,{pos:"relative",onClick:v,cursor:"pointer",_hover:{".dlmm_action":{svg:{fill:"text_caption"},p:{color:"text_caption"}},bg:g?"auto":"primary_opacity.10",borderRadius:"12px",".dlmm_fee_and_bin_step":{borderColor:"token_inactive_border"},".dlmm_action_pools":{borderColor:"token_inactive_border"},".dlmm_pools_arrow":{".dlmm_pools_arrow_ani_4":{animationIterationCount:1},".dlmm_pools_arrow_ani_3":{animationIterationCount:1},".dlmm_pools_arrow_ani_2":{animationIterationCount:1},".dlmm_pools_arrow_ani_1":{animationIterationCount:1}}},as:"div",display:"grid",w:"100%",h:"76px",p:"0 12px",borderRadius:"12px 12px 0 0",columnGap:"12px",bg:a?"white_color_opacity.5":"transparent",gridTemplateColumns:"1fr 128px 128px 128px 90px 120px 128px",children:[a&&s.jsx(z,{position:"absolute",top:"76px",left:"28px",h:`${me(60).mul(n?(x==null?void 0:x.length)-.5:(h==null?void 0:h.length)-.5).plus(9).toString()}px`,w:"1px",bg:"border"}),t==null?void 0:t.map((b,P)=>s.jsx(ls,{align:"center",justify:P===0?"flex-start":"flex-end",children:b!=null&&b.render?b==null?void 0:b.render({...e,isOpen:a,list:e==null?void 0:e.list,onExpand:v,hasFee:u,isParent:!0,...u?x==null?void 0:x[0]:{}}):s.jsx(A,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:(e==null?void 0:e[b==null?void 0:b.key])||"--"})},b.key))]}),!u&&s.jsx(Qe,{in:a,animateOpacity:!0,transition:{enter:{duration:.8}},style:{width:"100%"},children:s.jsxs(s.Fragment,{children:[s.jsxs(F,{w:"100%",gap:"8px",children:[s.jsx(z,{h:"1px"}),s.jsx(F,{w:"100%",gap:"0px",children:s.jsx(Qe,{startingHeight:60*(h==null?void 0:h.length),in:n,style:{width:"100%"},children:x==null?void 0:x.map((b,P)=>s.jsxs(z,{w:"100%",p:"0 8px",borderRadius:"12px",pos:"relative",children:[s.jsx(z,{w:"100%",h:"60px",pl:"32px",children:s.jsx(z,{h:"100%",className:"dlmm-tutorial-step-2",as:"div",display:"grid",w:"100%",borderRadius:"12px",p:"0 6px",onClick:()=>{o("/pools?tab=dlmm_pools"),r(`/dlmm?poolId=${b.poolId}`,e)},cursor:"pointer",_hover:{bg:"primary_opacity.10",".dlmm_fee_and_bin_step":{borderColor:"token_inactive_border"},".dlmm_action_pools":{borderColor:"token_inactive_border"}},columnGap:"12px",gridTemplateColumns:"1fr 128px 128px 128px 90px 120px 128px",children:t==null?void 0:t.map((S,B)=>s.jsx(ls,{align:"center",justify:B===0?"flex-start":"flex-end",children:S!=null&&S.render?S==null?void 0:S.render({...b,hasFee:!0}):s.jsx(A,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:(b==null?void 0:b[S==null?void 0:S.key])||"--"})},S.key))})}),s.jsx(z,{pos:"absolute",w:"12px",h:"1px",bg:"border",top:"50%",left:"28px"})]},b.poolId))})})]}),(x==null?void 0:x.length)>3?s.jsx(pe,{w:"100%",children:s.jsxs(K,{h:"44px",variant:"unstyled",onClick:p,display:"flex",gap:"4px",cursor:"pointer",_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[s.jsx(A,{fontSize:"12px",children:n?"Show Less":"Show All"}),s.jsx(ue,{xlinkHref:"#icon-icon_arrow",transform:n?"rotate(180deg)":"rotate(0deg)",fontSize:"12px"})]})}):s.jsx(z,{h:"9px",w:"100%"})]})})]})};function Wn({isRefreshed:e,handleIsRefreshed:t}){const{isTerm:r}=vs(),{getStatistics:a}=ms(),{goDlmmLiquidity:i}=Ke(),{getDlmmPoolList:n}=mt(),{getFavoritePoolList:l}=Us(),{dlmmPoolRefreshStatus:o,setDlmmPoolRefreshStatus:c,setDlmmPoolListLength:p,tutorialOpen:x,dlmmPoolListLength:h,isDlmmWatchList:g,setIsDlmmWatchList:u,isDlmmAllPools:v,setIsDlmmAllPools:j,isDlmmIncentivizedOnly:b,setIsDlmmIncentivizedOnly:P,setDlmmPoolFavoriteIdsChange:S,dlmmPoolFavoriteIdsChange:B,dlmmPoolFavoriteIds:y}=fs(),[w,E]=d.useState({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:20,offset:0,coin_type:"",pool:""}),[D,M]=d.useState(),G=f=>{E(k=>({...k,isListLoading:!0,...f}))},U=f=>{var k;G({offset:0}),P((k=f.target)==null?void 0:k.checked),j(!1),q==null||q.forEach(L=>{ee(L==null?void 0:L.id,!1)})},Q=f=>{var k;G({offset:0}),j((k=f.target)==null?void 0:k.checked),u(!1),P(!1)},te=()=>{G({offset:0}),j(!1),u(!g),S(!1)};d.useEffect(()=>{console.log("🚀 ~ useEffect ~ poolFavoriteIds:",B,y),g&&B&&(S(!1),G({offset:0}),u(!0))},[y==null?void 0:y.length,B]);const N=d.useRef(null),J=()=>{console.log("🚀 ~ handleRefresh ~ handleRefresh:"),console.log("🚀 ~ handleRefresh ~ handleRefresh:"),t(!1),c("pending"),ye(1),G({offset:0,isListLoading:!1}),N.current=setTimeout(()=>{console.log("🚀 ~ timer.current=setTimeout ~ poolRefreshStatus:",o),o=="pending"&&c("timeout")},1e4),a()},[W,Z]=d.useState([]),ne=f=>{Z([...W,f])},he=f=>{Z(W.filter(k=>(k==null?void 0:k.coin_type)!==(f==null?void 0:f.coin_type)))},I=20,[ae,_]=d.useState(!1),[O,C]=d.useState("desc"),[V,ve]=d.useState({label:"Volume (24H)",value:"vol"}),[oe,X]=d.useState(0),[re,ye]=d.useState(1),[q,le]=d.useState([]),[ce,je]=d.useState(!0);d.useEffect(()=>()=>{le([])},[]);const De=async f=>{var ws,Ss,_s,Cs,Ts;const k=(f==null?void 0:f.isListLoading)??!0,L=g,Oe=W.length==2?`${(ws=W[0])==null?void 0:ws.coin_type},${(Ss=W[1])==null?void 0:Ss.coin_type}`:W.length==1?`${(_s=W[0])==null?void 0:_s.coin_type}`:"",{offset:we=0}=f;we==0&&ye(1),Number(we)>=I?_(!0):je(k);const Te=b?["mining","farming"]:["mining","farming","noIncentives"],Ae={...f,coin_type:Oe,display_all_pools:L?!0:v??!0,offset:we,has_mining:Te.includes("mining"),has_farming:Te.includes("farming"),no_incentives:Te.includes("noIncentives")};let T;try{L?(Ae.pools=y==null?void 0:y.filter(Boolean),T=await l(Ae)):T=await n(Ae),T&&(console.log("🚀 ~ fetchDatafetchPoolsData ~ result:",JSON.stringify(T),T),T!=null&&T.isLocal?(c("error"),le(T==null?void 0:T.list),X(T.total),p(L?(T==null?void 0:T.total)||"0":((Cs=T.list)==null?void 0:Cs.reduce((se,ts)=>{var As;return me(se).plus(((As=ts==null?void 0:ts.pools)==null?void 0:As.length)||0).toString()},"0"))||"0"),ye(1)):(Number(we)>=I?(le(se=>se.concat(T.list)),h===""&&(X(T.total),p(T==null?void 0:T.total)),h!==""&&(T==null?void 0:T.total)>0&&(X(T.total),p(T==null?void 0:T.total))):(le(T.list),X(T.total),p(T==null?void 0:T.total)),c("success")),je(!1))}catch(se){console.log("🚀 ~  ~ error:",se),se!=null&&se.list&&((Ts=se==null?void 0:se.list)==null?void 0:Ts.length)>0&&(c("error"),le(se.list),X(se.total),p(""),je(!1))}je(!1),_(!1)};at(()=>De(w),{refreshDeps:[w,W,g,v,b],manual:!1,debounceWait:150});const{failedTsToast:Ie}=qs();d.useEffect(()=>{if(console.log("🚀 ~ PoolsContent ~ poolRefreshStatus:",o),o!=="pending"){const f={linkLabel:"",getShowInfo:()=>({toastTitleText:o=="error"?"Request Error":o=="timeout"?"Please check the network status.":""})};(o=="success"||o=="error")&&clearTimeout(N.current),(o=="error"||o=="timeout")&&Ie(f),t(!0)}},[o]);const{isApp:be}=ie(),Ce=f=>{console.log("🚀 ~ clickSort ~ item:",f);const k=document.querySelector(".scroll-container");if(k==null||k.scrollTo({top:0,behavior:"auto"}),be)(f==null?void 0:f.value)!==(V==null?void 0:V.value)&&(G({offset:0,order_by:`-${f==null?void 0:f.value}`}),C("desc"),ve(f));else if((f==null?void 0:f.value)==(V==null?void 0:V.value)){G({offset:0,order_by:O=="desc"?`${f==null?void 0:f.value}`:`-${f==null?void 0:f.value}`});const L=O=="desc"?"asc":"desc";C(L)}else G({offset:0,order_by:`-${f==null?void 0:f.value}`}),C("desc"),ve(f)},Re=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],Ne=Re.reduce((f,k)=>(f[k.value]=k,f),{}),es=f=>{const k=f*I;De({...w,offset:k}),ye(L=>L+1)},Me=d.useMemo(()=>{const f=(re-1)*I+(q==null?void 0:q.length);return o!=="error"&&Number(oe)>f},[oe,re,I,o,q==null?void 0:q.length]);d.useEffect(()=>(a(),N.current&&(clearTimeout(N.current),N.current=null),()=>{N.current&&(clearTimeout(N.current),N.current=null)}),[]);const m=d.useRef(null);d.useEffect(()=>{let f=null;return!ce&&m.current&&(f=new IntersectionObserver(k=>{const L=k[0];L&&L.isIntersecting&&Me&&!ae&&(console.log("🚀 ~ useEffect ~ entry:",L),es(re))},{threshold:.5,rootMargin:"100px"}),f.observe(m.current)),()=>{f&&f.disconnect()}},[ce,re,Me,ae]);const R=Bn(O,V,Ce,Ne,be),ee=(f,k)=>{M({[f]:k})},{setBackUrl:ss}=_e(),{dlmmTutorialStep:Le}=Tt();return s.jsx(s.Fragment,{children:s.jsxs(F,{gap:"16px",w:"100%",background:"bg_primary",children:[s.jsx(Vs,{handleIsDisplayChecked:Q,handleIsWatchList:te,onClickIncentiveTypes:U,handleRefresh:J,selectCoinList:W,onClickSelectCoinList:ne,onDeleteSelectCoinList:he,isRefreshed:e,isDlmmPools:!0,isPools:!1}),s.jsx(z,{h:"1px",w:"100%",bg:"border"}),s.jsxs(F,{w:"100%",position:"relative",gap:"20px",children:[!ce&&(q==null?void 0:q.length)==0?s.jsx($e,{type:"nodata",text:"No pools found",children:s.jsx(A,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):be?s.jsxs(F,{w:"100%",gap:"4px",children:[s.jsxs(H,{w:"100%",justify:"space-between",mb:"12px",children:[s.jsx(A,{fontSize:"24px",color:"text_caption",children:"Pools"}),s.jsx($s,{sortText:"Sort by",minW:"180px",currentSort:V,sortByList:Re,onSortByChange:Ce,xlinkHref:O=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{G({offset:0,order_by:O=="desc"?`${V==null?void 0:V.value}`:`-${V==null?void 0:V.value}`});const f=O=="desc"?"asc":"desc";C(f)}})]}),s.jsx(Fn,{rowKey:"id",isWatch:g,dataSource:q,columns:R,loading:ce,itemSkeletonLength:7,itemHeight:"30px",goLiquidity:i,openPoolsGroup:D,onOpenPoolsGroup:ee})]}):ce?s.jsx(Et,{rowKey:"id",columns:R,dataSource:q,skeletonLength:10,loading:ce,rowStyle:{h:"80px",cursor:"pointer"}}):g?s.jsx(Ys,{columns:R,data:q,stickyHeaderTop:"80px",rowKey:"id",rowHeight:80,gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",columnGap:"12px",px:"0 16px",bg:"bg_primary",isApp:be,justify:"flex-end",isLoading:ce,onRowClick:f=>{ss("/pools?tab=dlmm_pools"),i(`/dlmm?poolId=${f.poolId}`,f)}}):s.jsxs(F,{w:"100%",gap:"0",children:[s.jsx(z,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"1fr 128px 128px 128px 90px 120px 128px",h:"36px",columnGap:"12px",p:"0 16px",position:"sticky",top:"80px",bg:"background",zIndex:99,children:R==null?void 0:R.map((f,k)=>s.jsx(ls,{as:"div",align:"center",justify:k===0?"flex-start":"flex-end",children:f.title},f.key))}),s.jsx(z,{w:"100%",children:q==null?void 0:q.map((f,k)=>s.jsx(En,{item:f,columns:R,goLiquidity:i,isOpen:D==null?void 0:D[f==null?void 0:f.id],onOpen:ee},f==null?void 0:f.id))})]}),me(h).gt(me(w==null?void 0:w.offset).plus(1).mul(I))&&s.jsx(z,{ref:m,children:ae?s.jsx(Os,{size:"sm",color:"text_caption"}):""})]})]})})}function zn({poolInfo:e,isOpen:t,onClose:r}){return s.jsxs(ds,{autoFocus:!1,closeOnOverlayClick:!0,returnFocusOnClose:!1,isOpen:t,onClose:r,isCentered:!0,children:[s.jsx(ps,{}),s.jsxs(xs,{border:"none !important",minW:{base:"100%",lg:"600px"},children:[s.jsx(hs,{top:"18px",right:"12px"}),s.jsx(gs,{p:"0px !important",children:s.jsx(Gt,{poolInfo:e})})]})]})}function Dn({poolInfo:e,changeAnalyticsModal:t}){const r=Je(),{addFavorites:a,removeFavorites:i}=tt(),{poolFavoriteIds:n}=ze();Ke();const{setBackUrl:l}=_e(),o=d.useMemo(()=>n==null?void 0:n.includes((e==null?void 0:e.poolAddress)||""),[JSON.stringify(n),e==null?void 0:e.poolAddress]),{setIsOpen:c}=Is(),{setFromCoin:p,setToCoin:x}=Zs(),{isSwapWidgetDisplay:h}=vs();return s.jsxs(F,{align:"flex-start",padding:"8px",children:[s.jsx(is,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{t(!0)}}),s.jsx(is,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var g,u;h?(p(e==null?void 0:e.displayTokenA),x(e==null?void 0:e.displayTokenB),c(!0)):r(`/swap/${(g=e==null?void 0:e.displayTokenA)==null?void 0:g.coin_type}/${(u=e==null?void 0:e.displayTokenB)==null?void 0:u.coin_type}`)}}),s.jsx(is,{text:"Add to Watchlist",xlinkHref:o?"#icon-icon_star_sel":"#icon-icon_star",svgFill:o?"primary":"text_paragraph",svgSize:"22px",svgMl:"-2px",onClick:()=>{o?i(e==null?void 0:e.poolAddress):a(e==null?void 0:e.poolAddress)}})]})}const Nn=({isHover:e})=>e?s.jsxs("div",{className:"BX_AEComposition",children:[s.jsx("div",{className:"BX_Class3 BX_BG3 BX_Ani3",id:"BX_Layer3"}),s.jsx("div",{className:"BX_Class2 BX_BG2 BX_Ani2",id:"BX_Layer2"}),s.jsx("div",{className:"BX_Class1 BX_BG1 BX_Ani1",id:"BX_Layer1"})]}):s.jsx(Ns,{src:"/images/icon_star@2x.png",minW:"16px",h:"16px",position:"absolute",top:"-4px",right:"-4px"});function On({poolInfo:e}){const{isApp:t}=ie(),{goLiquidity:r}=Ke(),[a,i]=d.useState(!1),[n,l]=d.useState(!1),{clearVaultsActionData:o}=Ks();d.useEffect(()=>{o()},[a]);const{setBackUrl:c}=_e(),[p,x]=d.useState(!1),[h,g]=d.useState("Stake"),{isVaultsFarming:u}=Vt(e==null?void 0:e.vaultId),[v,j]=d.useState(!1),[b,P]=d.useState(!1);return s.jsxs(H,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:t?"space-between":"flex-end",gap:"8px",children:[e.vaultCategory?s.jsx(ge,{placement:"bottom-end",tooltip:u?s.jsxs(F,{p:"4px 4px 0",alignItems:"flex-start",children:[s.jsx(A,{fontSize:"12px",color:"text_caption",children:"3rd party farming rewards available."}),s.jsx(A,{fontSize:"12px",children:"Incentives on Haedal"})]}):s.jsx(A,{_hover:{color:"primary"},cursor:"pointer",color:t?"primary":"text_paragraph",onClick:S=>{S.stopPropagation(),i(!a)},children:"Auto"}),showTooltip:n&&!p&&!a,children:s.jsx(pe,{w:t?"calc(100%)":"unset",position:"relative",children:s.jsxs(K,{p:"0",variant:"ghost",w:{base:"100%",lg:"32px"},padding:t?"0 12px":"",h:"32px",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},onClick:S=>{S.stopPropagation(),i(!a)},onMouseMove:()=>{l(!0),j(!0)},onMouseLeave:()=>{j(!1)},children:[s.jsx(ue,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_auto",svgW:"20px",svgH:"20px"}),u&&s.jsx(Nn,{isHover:v}),t&&s.jsx(A,{color:t?"primary":"text_paragraph",marginLeft:"4px",children:"Auto"})]})})}):null,s.jsx(K,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{c("/pools"),r(`/clmm?poolAddress=${e==null?void 0:e.poolAddress}`,e)},children:"Deposit"}),s.jsxs(Fs,{isLazy:!0,trigger:t?"click":"hover",placement:t?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[s.jsx(Es,{children:s.jsx(pe,{onClick:S=>{xe(S)},children:s.jsx(K,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:s.jsx(ue,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),s.jsx(Ws,{children:s.jsx(zs,{borderRadius:"12px",w:"fit-content",children:s.jsx(Ds,{p:"0",fontSize:"12px",w:"fit-content",children:s.jsx(Dn,{poolInfo:e,changeAnalyticsModal:S=>P(S)})})})})]}),a?s.jsx(Qt,{isOpen:a,setIsOpen:i,setIsOpenFarmingModal:x,setFarmingModalAction:g,displayTokenA:e.displayTokenA,displayTokenB:e.displayTokenB,feeDisplay:e.feeDisplay,clmmPool:e.poolAddress,category:e.vaultCategory,vaultId:e.vaultId,isReverse:e.isReverse,isVaultsFarming:u,onClose:()=>{l(!1),i(!1)}},e.vaultId):null,p&&s.jsx(zt,{isOpen:p,setIsOpen:x,setIsOpenPre:i,onClose:()=>x(!1),farmingModalAction:h,vaultsId:e==null?void 0:e.vaultId,isDetail:!1}),b&&s.jsx(zn,{poolInfo:e,isOpen:b,onClose:()=>P(!1)})]})}function Vn({isRefreshed:e,handleIsRefreshed:t}){const{getStatistics:r}=ms(),{poolRefreshStatus:a,setPoolRefreshStatus:i,setPoolListLength:n,poolFavoriteIds:l,isWatchList:o,setIsWatchList:c,isIncentivizedOnly:p,setIsIncentivizedOnly:x,isAllPools:h,setIsAllPools:g,poolFavoriteIdsChange:u,setPoolFavoriteIdsChange:v}=ze(),{getPoolList:j}=Ot(),{getFavoritePoolList:b}=tt(),{goLiquidity:P}=Ke(),[S,B]=d.useState({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:20,offset:0,coin_type:"",pool:""}),y=m=>{B(R=>({...R,isListLoading:!0,...m}))},w=m=>{var R;y({offset:0}),x((R=m.target)==null?void 0:R.checked),g(!1)},E=m=>{var R;y({offset:0}),g((R=m.target)==null?void 0:R.checked),c(!1),x(!1)},D=()=>{y({offset:0}),g(!1),c(!o),v(!1)};d.useEffect(()=>{console.log("🚀 ~ useEffect ~ poolFavoriteIds:",u,l),o&&u&&(v(!1),console.log("🚀 ~ useEffect ~ isWatchList:",o),y({offset:0}),c(!0))},[l==null?void 0:l.length,u]);const M=d.useRef(null),G=()=>{console.log("🚀 ~ handleRefresh ~ handleRefresh:"),t(!1),i("pending"),re(1),y({offset:0,isListLoading:!1}),M.current=setTimeout(()=>{console.log("🚀 ~ timer.current=setTimeout ~ poolRefreshStatus:",a),a=="pending"&&i("timeout")},1e4),r()},{selectCoinList:U,setSelectCoinList:Q}=ze(),te=m=>{console.log("🚀 ~ onClickSelectCoinList ~ tokenInfo:",m),Q([...U,m])},N=m=>{Q(U.filter(R=>(R==null?void 0:R.coin_type)!==(m==null?void 0:m.coin_type)))},J=20,[W,Z]=d.useState(!0),[ne,he]=d.useState(!0),[I,ae]=d.useState("desc"),[_,O]=d.useState({label:"Volume (24H)",value:"vol"}),[C,V]=d.useState([]),[ve,oe]=d.useState(0),[X,re]=d.useState(1),ye=async m=>{var Oe,we,Te,Ae;const R=(m==null?void 0:m.isListLoading)??!0,ee=o,ss=U.length==2?`${(Oe=U[0])==null?void 0:Oe.coin_type},${(we=U[1])==null?void 0:we.coin_type}`:U.length==1?`${(Te=U[0])==null?void 0:Te.coin_type}`:"",{offset:Le=0}=m;Le==0&&re(1),Number(Le)>=J?Z(!0):he(R);const f=p?["mining","farming"]:["mining","farming","noIncentives"],k={...m,coin_type:ss,display_all_pools:ee?!0:h??!0,offset:Le,has_mining:f.includes("mining"),has_farming:f.includes("farming"),no_incentives:f.includes("noIncentives")};console.log("🚀 ~ fetchDatafetchPoolsData ~ query:",k,h);let L;try{ee?(k.pools=l,L=await b(k)):L=await j(k),console.log("🚀 ~  ~ result:",L),L&&(console.log("🚀 ~ fetchDatafetchPoolsData ~ result:",L),L!=null&&L.isLocal?(i("error"),V(L.list),oe(L.total),n(L.total||"0"),re(1)):(Number(Le)>=J?V(T=>T.concat(L.list)):V(L.list),oe(L.total),n((L.total||0).toString()),i("success")),he(!1))}catch(T){console.log("🚀 ~  ~ error:",T),T!=null&&T.list&&((Ae=T==null?void 0:T.list)==null?void 0:Ae.length)>0&&(i("error"),V(T.list),oe(T.total),n(""),he(!1))}};at(()=>ye(S),{refreshDeps:[S,U,o,h,p],manual:!1,debounceWait:150}),d.useEffect(()=>{W&&Z(!1)},[C.length]);const{failedTsToast:q}=qs();d.useEffect(()=>{if(console.log("🚀 ~ PoolsContent ~ poolRefreshStatus:",a),a!=="pending"){const m={linkLabel:"",getShowInfo:()=>({toastTitleText:a=="error"?"Request Error":a=="timeout"?"Please check the network status.":""})};(a=="success"||a=="error")&&clearTimeout(M.current),(a=="error"||a=="timeout")&&q(m),t(!0)}},[a]);const{isApp:le}=ie(),ce=m=>{console.log("🚀 ~ clickSort ~ item:",m);const R=document.querySelector(".scroll-container");if(R==null||R.scrollTo({top:0,behavior:"auto"}),le)(m==null?void 0:m.value)!==(_==null?void 0:_.value)&&(y({offset:0,order_by:`-${m==null?void 0:m.value}`}),ae("desc"),O(m));else if((m==null?void 0:m.value)==(_==null?void 0:_.value)){y({offset:0,order_by:I=="desc"?`${m==null?void 0:m.value}`:`-${m==null?void 0:m.value}`});const ee=I=="desc"?"asc":"desc";ae(ee)}else y({offset:0,order_by:`-${m==null?void 0:m.value}`}),ae("desc"),O(m)},je=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],De=je.reduce((m,R)=>(m[R.value]=R,m),{}),Ie=m=>{const R=m*J;ye({...S,offset:R}),re(ee=>ee+1)},be=d.useMemo(()=>{const m=(X-1)*J+(C==null?void 0:C.length);return a!=="error"&&Number(ve)>m},[ve,X,J,a,C==null?void 0:C.length]);d.useEffect(()=>(r(),M.current&&(clearTimeout(M.current),M.current=null),()=>{M.current&&(clearTimeout(M.current),M.current=null)}),[]);const Ce=d.useRef(null);d.useEffect(()=>{let m=null;return!ne&&Ce.current&&(m=new IntersectionObserver(R=>{const ee=R[0];ee&&ee.isIntersecting&&be&&!W&&(console.log("🚀 ~ useEffect ~ entry:",ee),Ie(X))},{threshold:.5,rootMargin:"100px"}),m.observe(Ce.current)),()=>{m&&m.disconnect()}},[ne,X,be,W]);const Re=Un(I,_,ce,De,le),{setBackUrl:Ne}=_e(),{getHaedalFarmingList:es}=Ut(),{vaultsFarmObj:Me}=qt();return d.useEffect(()=>{At(Me)||es()},[Me]),s.jsxs(F,{gap:"16px",w:{base:"100%",lg:"1160px"},background:"bg_primary",children:[s.jsx(Vs,{handleIsDisplayChecked:E,handleIsWatchList:D,onClickIncentiveTypes:w,handleRefresh:G,selectCoinList:U,onClickSelectCoinList:te,onDeleteSelectCoinList:N,isRefreshed:e}),s.jsx(z,{h:"1px",w:"100%",bg:"border"}),s.jsxs(F,{w:"100%",position:"relative",gap:"20px",children:[!ne&&(C==null?void 0:C.length)==0?s.jsx($e,{type:"nodata",text:"No pools found",children:s.jsx(A,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):le?s.jsxs(F,{w:"100%",gap:"4px",children:[s.jsxs(H,{w:"100%",justify:"space-between",children:[s.jsx(A,{fontSize:"24px",color:"text_caption",children:"Pools"}),s.jsx($s,{sortText:"Sort by",minW:"168px",currentSort:_,sortByList:je,onSortByChange:ce,xlinkHref:I=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{y({offset:0,order_by:I=="desc"?`${_==null?void 0:_.value}`:`-${_==null?void 0:_.value}`});const m=I=="desc"?"asc":"desc";ae(m)}})]}),s.jsx(st,{rowKey:"poolAddress",dataSource:C,columns:Re,loading:ne,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(m,R)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:m=>{Ne("/pools"),P(`/clmm?poolAddress=${m.poolAddress}`,m)}})]}):s.jsx(Ys,{columns:Re,data:C,stickyHeaderTop:"80px",rowKey:"poolAddress",rowHeight:80,gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",columnGap:"12px",px:"0 16px",bg:"bg_primary",isApp:le,justify:"flex-end",isLoading:ne,onRowClick:m=>{Ne("/pools"),P(`/clmm?poolAddress=${m.poolAddress}`,m)},rowStyle:{_hover:{".clmm_fee":{borderColor:"token_inactive_border"}}}}),s.jsx(z,{ref:Ce,children:W?s.jsx(Os,{size:"sm",color:"text_caption"}):""})]})]})}const Un=(e,t,r,a,i)=>[{title:s.jsx(A,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:n=>{var l,o;return s.jsxs(H,{children:[s.jsx(Wt,{poolInfo:{...n,poolType:"clmm"},symbolEllipsesDecimals:10,type:"row"}),(n==null?void 0:n.haveFarming)&&s.jsx(Ee,{}),(n==null?void 0:n.haveMining)&&s.jsx(We,{}),s.jsx(us,{coinTypeA:(l=n==null?void 0:n.tokenA)==null?void 0:l.coin_type,coinTypeB:(o=n==null?void 0:n.tokenB)==null?void 0:o.coin_type})]})}},{title:s.jsx(fe,{labelInfo:a.tvl,sortRule:e,sortBy:t,clickSort:n=>r(n)}),key:"tvlDisplay"},{title:s.jsx(fe,{labelInfo:a.vol,sortRule:e,sortBy:t,clickSort:n=>r(n)}),key:"volume24Display"},{title:s.jsx(fe,{labelInfo:a.fees,sortRule:e,sortBy:t,clickSort:n=>r(n)}),key:"fees24Display"},{title:s.jsx(A,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:n,farmsRewarderList:l})=>n&&(n==null?void 0:n.length)<=0&&l&&(l==null?void 0:l.length)<=0,render:({miningRewardList:n,farmsRewarderList:l})=>s.jsx(et,{miningRewardList:n,farmsRewarderList:l})},{title:s.jsx(fe,{labelInfo:a.totalApr,sortRule:e,sortBy:t,tooltip:{content:"Estimated according to trading activity in the past 24 hours plus mining and farming rewards.",description:"Estimated APR = [(24h fees + 24h rewards) × 365 / TVL] × 100%"},clickSort:n=>r(n),justifyContent:"flex-end",tooltipStyle:{maxW:{base:"300px",lg:"400px"}}}),key:"apr24h",render:n=>s.jsx(Js,{poolInfo:n,placement:i?"auto-start":"top"})},{title:s.jsx(A,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:n=>s.jsx(On,{poolInfo:n})}],qn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAB+5JREFUaEPVmG2IXFcZx3/n3HPv7OxmNy8mXUVL4xqq1QTBopaKH6YKvlToB0uFKPjWImgaI6I0lGZmEGtFqBQj2qpgP0i1NSjRDxU/VOgXi4gilPtBoR/WRmPTukl2kro7c495zrnnzpnZ990ZwV2Gmbl35s7/9/z/z3POjOL//E+NVf+TNuEu1RvnZ4wPwNqUV5jlB+zmPvX8uCDGA2Ct4WVmOcsNPMNZEk7zY9UaB8ToAUT8PNdxPSmf4QxdbsYAKW0eGz3EaAFE/AUOYMh4iI9xjm+SOPGgS4jTo4UYHYCI7/AaNCl/Zi/f53co9jnh3gFKmDYPjw5iNAAiHvZylRr/wXCKL3GJ45X4GCBzIG0eHA3EzgGslZDsc7IWqJEzw6M8i2a3q3iIkDgwCNLmgZ1D7AxAxL/IHrJrLarQ7Cfly3yOC5x0kRHBAUAeBwCJVQ3IaPOVnUFsH8BXfhfnqTGN4VUSuqSc5DdYDq0qXKACmMBMlHG6d/sQ2wMQ8QtMo9HMkHKODE3CGd7OH/jlgPggOjRxPXLF94N34rPbg9g6gLWaC0yRYhzANCn/viZBIvQAp1jk01VU4tiI2AAjoqX6AUrOCcTHtw6xNQARf546GYa9JCySuLE5WUboGE9juXFF40reg/h+1UHc8OtDuLX56NYgNg8QxM+6DYHhMoYrJBhSElJ+zwF+ynMYlHMgVDw0bgwhx+S53EKTx3G6ffMQmwMQ8X+nxhuQ+Mi0SfgnqYuQB8h4mA8xz2knXqoash7EisDQuGEKBYAA5/vBbzvetzmIjQGsldfIZTUvkXARTUZCjZRdaJbcM0nwvSxwvBqdccVjgQIWQwXRww5p2rx3Y4j1Abx4SajiHy4uMms0VzDscWHpA9zHt1niI05cHCF5t29SfyUROhwhORcDxHund64PsTaAF5/wNydcUUPzOhcOzSUMM2UPiAPda1uIk5xBcbhqSifY9mPjoFSY/V7w5CordQDs90abI2tDrA4QxEu7xgCSdnHAOC+8AxIoRcbneYaE11dN6YRY36QSG+eE8o+DQ7EboYmDY/EKrmjzttUhVgJ48VJpfy4AHJQGvpCQJJorxpDMvzZV524lXXqL6vVutOcmP6jqy4ZaF2rL/rvLcgpLBruUYS/vwi5OYxdnKBb2g8r6UyisCWFiVRNJ+QLITXrizSshBgFEfBtF04lXPPZHxW27NcYoajVtzF9uVly9Syl7GxQ34WFX/7N27S9gSmMvC8h1FC9fj13e43vENbQKI6O/0LktuYNp86ZBiL6AIGYY4PaFmSxbvBvV+yTW3tRXFQkcFruO9tLXATj76m6KVw7Su3QQTBp/AepvCJPSDSnxG/sQKwFUW/HkWxW3mj1ZYr+I4RjW7oVNCg5XdFDDBpXXUGrgctXLehm9i4fodQ6BKkGk8n50eBj50+oYB9V35eEggFyYlkr/dfhTGh6y2ANVqUKVh6sbV381zWtGrDzhwjoE2qvRvXSYYukGSCMAcUGpnCkazKrzgwDy7IVf7KlNLv/aot7jLi/XHRAYqS+GlLnX2fI9G/z+4K4bhEfifedVQHZpH8sX3wVq0veAVjmJajDnxa8EkE3iS0+1CkvTnR2ougURHY7FUYkrXwyTrQGjdQkx7IBUuYoK9CZYvvxuLPtzUj0gflUAOThxXiBss/qEYRcKW4IMVVxeF6q7lgkVeChheaCKUQkQASqS3Fx9R6MzN1dVfk0HwgkH0Sv8QBVhchPh1TvjY+VxueuVDsS5Hu4bZUEEViUss6PjXnCRQWmVG11vdGbvWCF+TQcqiBd/1iqUOFFChHgIjHx+ECzHQ+UDrCwRsZ4AMZRzEVk1sUBJkQReifgkN2Zt8RsCuDjNP9EqKPoQzomidENckFcV/t6JLx8PRyg0rVTfuRMJV9o74s7JvUIlKjepbnRmj65a+Q0jFH/+xPxPWoUtmnR7ZZTk80uhRfnjc1FgBSw09PA64I6XPYJy/w4iEcGyCssyLIcSH5vJdEPxm3KgitMLj7eKXq9ZrWdBeK/AStXlRHAmjlNciaryodJyUqMchAdRSZIbPdHozK1f+S05UEH89UclhPWiQ2OLM65PymMuVmFShfUkGpdlxn3WNaRSfedJntZNozN3z7qxGajJcFQ3ep49/72WLYqmmzYuMuVNms89Lxe0eGq58eqnSmhQNwXkuTuWyOE8TacanSObF7+lCMVg2Z++07K223Riu13olaJLIOtgyoau5n4p3o/GqlnFAZXoPJXMHzmx6cpvK0IDEM99yzshDix3fWtYafJo5LqRGH2UPHbTxj1w57RO8jSbanRu2br4bTsQJGXPfr1VdLtNpKFDpMKkCmtHtfWI4iMOJDJtdJ5NTzQ6t9y/5crv2IEK4renWkV32TvhIIIL0XoQRqpMG1c2iU2SZxNJo/P+B7ctfscOVBC/+mqrKLpN6QeX/3hBq/ZR5bZYxqZJ8pqZanTu2Jn4kQHIhcxTx1tWnHBrQbkuiCMD2xuNUiqvJZONztFHdlT5kUUobmzz+N0eQuIURmq01VaJyWuTWaNz9IcjET9SBwKIefQTLWuLpg17pqpUKq+nuxqde0YnfiwALk6P3NkqCtl2VPvovC5b4hNPjKzyY4nQQJy+8WG/FbdFXq/XGp0TZ0cufmwOBBD9tQ98oa5rP+/cPx7xYwfYaF81ivPDP9yM4pr/02v8F6pCzk+EsR79AAAAAElFTkSuQmCC",Gn="/assets/pool_bg-DIChGQZi.png";function Qn({onClose:e,currentLockItem:t}){var B,y,w,E,D,M,G,U;const{currentAccount:r}=Gs(),{signAndExecuteTransaction:a}=Zt(),{getBurnTxPayload:i}=Kt(),{getPositionBaseList:n}=nt(),{posLiquidityData:l}=js(),[o,c]=d.useState(!1),[p,x]=d.useState(""),[h,g]=d.useState(!1),u=Q=>{const N=Q.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");x(N),console.log("🚀 ~ inputChange ~ e:",Q.target.value,Q.target.value.toLowerCase()),Q.target.value.toLowerCase()=="lock my liquidity forever"?g(!0):g(!1)},{getTokenAmountValue:v}=Qs(),j=l[t==null?void 0:t.posId],b=v((B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type,j==null?void 0:j.displayCoinAmountA,"--"),P=v((y=t==null?void 0:t.displayTokenB)==null?void 0:y.coin_type,j==null?void 0:j.displayCoinAmountB,"--"),S=async()=>{console.log("🚀 ~ currentLockItem:",t),c(!0);try{const Q=i(t);console.log("🚀 ~ toBurn ~ tx:",Q);const te=await a(Q,{getShowInfo:N=>{var W,Z;const J={modalDescriptionText:`${(W=t==null?void 0:t.displayTokenA)==null?void 0:W.symbol} - ${(Z=t==null?void 0:t.displayTokenB)==null?void 0:Z.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("🚀 ~ toBurn ~ status:",N),J}});console.log("🚀 ~ toBurn ~ res:",te),te&&(await n(r==null?void 0:r.address),e()),c(!1)}catch(Q){c(!1),console.log("🚀 ~ claimYieldAction ~ error:",Q)}};return s.jsxs(F,{w:"100%",gap:"12px",children:[s.jsxs(F,{w:"100%",align:"flex-start",gap:"20px",children:[s.jsx(A,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),s.jsx(A,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),s.jsxs(F,{w:"100%",children:[s.jsx(It,{posInfo:t,pageFrom:"lpBurnNext"}),s.jsx(He,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:s.jsx(He,{p:"16px 12px",borderRadius:"12px",children:s.jsxs(F,{gap:"16px",children:[s.jsxs(H,{w:"100%",justify:"space-between",children:[s.jsxs(H,{children:[s.jsx(Ye,{imageUrl:(w=t==null?void 0:t.displayTokenA)==null?void 0:w.logo_url,w:"20px",h:"20px",coinType:(E=t==null?void 0:t.displayTokenA)==null?void 0:E.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),s.jsxs(A,{color:"text_caption",children:[j==null?void 0:j.displayCoinAmountA," ",(D=t==null?void 0:t.displayTokenA)==null?void 0:D.symbol]})]}),s.jsx(A,{color:"text_caption",children:Rs(b,2)})]}),s.jsxs(H,{w:"100%",justify:"space-between",children:[s.jsxs(H,{children:[s.jsx(Ye,{imageUrl:(M=t==null?void 0:t.displayTokenB)==null?void 0:M.logo_url,w:"20px",h:"20px",coinType:(G=t==null?void 0:t.displayTokenB)==null?void 0:G.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),s.jsxs(A,{color:"text_caption",children:[j==null?void 0:j.displayCoinAmountB," ",(U=t==null?void 0:t.displayTokenB)==null?void 0:U.symbol]})]}),s.jsx(A,{color:"text_caption",children:Rs(P,2)})]})]})})})]}),s.jsxs(H,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[s.jsx(ue,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),s.jsx(A,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),s.jsxs(He,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[s.jsx(A,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),s.jsx(A,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),s.jsx(He,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:s.jsx(ut,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:p,onChange:u})})]}),s.jsxs(F,{w:"100%",gap:"8px",pb:"16px",children:[s.jsx(K,{isLoading:o,w:"100%",mt:"8px",h:"52px",fontWeight:"500",isDisabled:!h||o,onClick:S,children:"Confirm"}),s.jsx(K,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:e,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function Xn({isOpen:e,onClose:t}){const[r,a]=d.useState(!1),[i,n]=d.useState({});d.useEffect(()=>{n({}),a(!1)},[e]);const l=c=>{(c==null?void 0:c.posId)==(i==null?void 0:i.posId)?n({}):n(c)},{isApp:o}=ie();return s.jsxs(ds,{autoFocus:!1,returnFocusOnClose:!1,isOpen:e,onClose:t,isCentered:!0,children:[s.jsx(ps,{}),s.jsxs(xs,{minWidth:o?"300px":"482px",children:[s.jsx(dt,{children:s.jsx(pt,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),s.jsx(hs,{}),s.jsxs(gs,{p:"16px 16px 0",textAlign:"center",children:[!r&&s.jsx(en,{onClose:t,currentLockItem:i,onClickCheckBox:c=>l(c),onClickLock:()=>a(!0)}),r&&s.jsx(Qn,{onClose:t,currentLockItem:i})]})]})]})}function Yn({isRefreshed:e}){var B,y,w;const{tab:t}=Xs(),r=Je(),[a,i]=d.useState(!1),{statisticsData:n}=vt(),{poolListLength:l,setPoolListLength:o}=ze(),{dlmmPoolListLength:c}=fs(),{showPosListLength:p}=js(),{setPoolType:x,setCurrentStep:h}=$t(),{isApp:g}=ie(),u=me((p==null?void 0:p.clmm_position_count)??0).plus((p==null?void 0:p.dlmm_position_count)??0).toString(),v=d.useMemo(()=>(console.log("🚀 ~ PoolsTopData ~ poolListLength:",l),[{label:"CLMM",value:"clmm_pools",num:t===void 0||t==="clmm_pools"?l:"",imgInfo:g?void 0:{src:Xt,w:g?"16px":"22px",h:g?"16px":"22px"}},{label:"DLMM",value:"dlmm_pools",beta:!0,betaUrl:"/images/icon_beta@2x.png",num:t==="dlmm_pools"?c:"",imgInfo:g?void 0:{src:Yt,w:g?"16px":"22px",h:g?"16px":"22px"}},{label:g?"Positions":"My Positions",value:"positions",num:t==="positions"&&me(u).gt(0)?u:"",imgInfo:g?void 0:{src:qn,w:g?"16px":"22px",h:g?"16px":"22px"}}]),[l,c,p,t,g]),[j,b]=d.useState(!1),P=()=>{t==="dlmm_pools"?(x("dlmm"),h(2)):(x("clmm"),h(2)),r("/create-pool")},S=()=>{x(t==="dlmm_pools"?"dlmm":"clmm"),r("/select-pool")};return s.jsxs(F,{w:{base:"100%",lg:"1160px"},children:[s.jsxs(H,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[s.jsxs(F,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[s.jsx(A,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),s.jsxs(F,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:Gn,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[s.jsx(Ms,{wrapStyle:{alignItems:g?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:((B=n==null?void 0:n.summary)==null?void 0:B.totalTvl)||"",isLoading:!n}),s.jsx(Ms,{wrapStyle:{alignItems:g?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:((y=n==null?void 0:n.summary)==null?void 0:y.cumulativeVol)||"",isLoading:!n})]})]}),s.jsx(z,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:s.jsx(yt,{statisticsData:n,pageFrom:"pools",isRefresh:!e})})]}),s.jsxs(H,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[s.jsx(Pt,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"547px"},h:"60px"},itemStyle:{flex:g?"auto":"1",fontSize:g?"15px":"16px"},betaStyle:{right:"-10px"},tabList:v,currentTab:((w=v==null?void 0:v.find(E=>(E==null?void 0:E.value)===t))==null?void 0:w.label)||"CLMM",handleChangeTab:E=>{r(`/pools?tab=${E.value}`)}}),s.jsxs(H,{w:{base:"100%",lg:"unset"},children:[t=="positions"?s.jsx(xt,{isOpen:j,label:s.jsx(A,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:s.jsx(K,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:()=>{b(!1),i(!0)},children:"LP Burn"})}):s.jsx(K,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:P,children:"Create a new pool"}),s.jsx(K,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:S,children:"Add Liquidity"})]})]}),a&&s.jsx(Xn,{isOpen:a,onClose:()=>i(!1)})]})}function $n({isRefreshed:e,handleIsRefreshed:t}){const{getStatistics:r}=ms(),{fetchTokenPrices:a}=Qs(),{currentAccount:i,onWalletModal:n}=Gs(),{getPositionBaseList:l}=nt(),{posRewardsData:o,farmsPosRewardsData:c,posBaseList:p,showPosListLength:x,setShowPosListLength:h,setMyPosYieldValue:g,posBaseListLoading:u,posBaseListGroupByPool:v}=js(),{dlmmPosBaseList:j,dlmmPosRewardsData:b,dlmmPosBaseListGroupByPool:P}=Jt(),[S,B]=d.useState([]),{getNotifiPositionTransfer:y}=tn(),w=[...p,...j],[E,D]=d.useState(!0),M=()=>{console.log("🚀 ~ handleRefresh ~ handleRefresh:"),t(!1),g(""),r(),Z(),i!=null&&i.address&&N(i==null?void 0:i.address),setTimeout(()=>{t(!0)},1e3)};nn({onRpcChange:()=>{i!=null&&i.address&&N(i==null?void 0:i.address)}});const[G,U]=d.useState([]),Q=_=>{console.log("🚀 ~ onClickIncentiveTypes ~ tokenInfo:",_),U(O=>[...O,_])},te=_=>{console.log("🚀 ~ onClickIncentiveTypes ~ tokenInfo:",_),U(O=>O.filter(C=>(C==null?void 0:C.coin_type)!==(_==null?void 0:_.coin_type)))};d.useEffect(()=>{g(""),i!=null&&i.address?(console.log("🚀 ~ useEffect ~ currentAccount?.address:",i==null?void 0:i.address),N(i==null?void 0:i.address)):h({})},[i==null?void 0:i.address]);const N=async _=>{await l(_)},{notifiClient:J,notifiSources:W}=kt();d.useEffect(()=>{y(w,J,W)},[w,J,W]);const Z=()=>{const _=[];if((w==null?void 0:w.length)>0){w.map(C=>{_.push(Fe(C==null?void 0:C.coinTypeA).full_address),_.push(Fe(C==null?void 0:C.coinTypeB).full_address);const V=(C==null?void 0:C.posType)==="dlmm"?b[C==null?void 0:C.id]||[]:(C==null?void 0:C.posType)=="clmm"?o[C==null?void 0:C.posId]||[]:o[C==null?void 0:C.id]||[],ve=c[C==null?void 0:C.id]||[],oe=V.concat(ve);oe==null||oe.map(X=>{var re;me(X==null?void 0:X.display_amount_owed).gt(0)&&_.push(Fe((re=X==null?void 0:X.token)==null?void 0:re.coin_type).full_address)})});const O=Array.from(new Set(_));console.log("🚀 ~ refreshTokenPrice ~ list:",w,_,O),a(O)}};d.useEffect(()=>{Z()},[w==null?void 0:w.length,o,b]),d.useEffect(()=>(r(),()=>{h({})}),[]),d.useEffect(()=>{u&&h({}),u||setTimeout(()=>{D(!1)},200)},[u]);const{setIsExpandAllPosition:ne,isExpendPositionMap:he,setIsExpendPosition:I,clearIsExpendPositionMap:ae}=ze();return d.useEffect(()=>{const _=Object.values(he).every(O=>O);ne(_)},[he]),d.useEffect(()=>()=>{ae()},[]),s.jsxs(F,{gap:"16px",w:"100%",children:[s.jsx(sn,{}),s.jsx(z,{w:"100%",children:s.jsx(ht,{isProfile:!1,isVaults:!1,isShowChildren:!!w&&(w==null?void 0:w.length)>0,handleRefresh:M,selectCoinList:G,onClickSelectCoinList:Q,onDeleteSelectCoinList:te,showPosListGroupByPool:S,changeShowPosListGroupByPool:_=>B(_)})}),s.jsx(z,{h:"1px",w:"100%",bg:"border"}),i!=null&&i.address?u||E?[{},{},{},{}].map((_,O)=>s.jsx(gt,{},O)):(S==null?void 0:S.length)>0?S.map((_,O)=>s.jsx(ft,{poolInfo:_},(_==null?void 0:_.clmmPoolAddress)||(_==null?void 0:_.dlmmPoolAddress))):s.jsx($e,{type:"nodata",text:"No Liquidity Positions"}):s.jsx($e,{type:"nowallet",imgSize:"140px",onboard:()=>n(!0),imgStyle:{mb:"0px"}})]})}function ca(){const{tab:e}=Xs(),[t,r]=d.useState(!0),a=i=>{r(i)};return s.jsxs(F,{gap:"16px",w:"100%",pt:"40px",children:[s.jsx(Yn,{isRefreshed:t}),(e=="clmm_pools"||e===void 0)&&s.jsx(Vn,{isRefreshed:t,handleIsRefreshed:a}),e=="dlmm_pools"&&s.jsx(Wn,{isRefreshed:t,handleIsRefreshed:a}),e=="positions"&&s.jsx($n,{isRefreshed:t,handleIsRefreshed:a})]})}export{ca as default};
