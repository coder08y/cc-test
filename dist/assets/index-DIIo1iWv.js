import{D as R,F as C,G as E,u as gn,H as ve,J as F,K as hn,L as we,M as L,N as vn,O as wn,Q as xn,U as _,W as Pn,X as yt,Y as On,Z as En,$ as Gn,a0 as Sn,a1 as re,a2 as tt,a3 as nt,r as In,a4 as An,a5 as Dn,a6 as Ft,a7 as Un,a8 as $n,a9 as Cn,aa as Ln,ab as Bn,ac as kn,ad as Fn,ae as jn,af as rt,ag as at,ah as zn,ai as Tn,aj as Mn}from"./cross-CbhIs7DK.js";function Vn(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var i;const s=c=>c===null?null:JSON.parse(c,void 0),f=(i=n.getItem(a))!=null?i:null;return f instanceof Promise?f.then(s):s(f)},setItem:(a,i)=>n.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>n.removeItem(a)}}const Ee=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Ee(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ee(r)(n)}}}},Rn=(e,t)=>(n,r,a)=>{let i={storage:Vn(()=>localStorage),partialize:m=>m,version:0,merge:(m,h)=>({...h,...m}),...t},s=!1;const f=new Set,c=new Set;let u=i.storage;if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,a);const l=()=>{const m=i.partialize({...r()});return u.setItem(i.name,{state:m,version:i.version})},o=a.setState;a.setState=(m,h)=>{o(m,h),l()};const y=e((...m)=>{n(...m),l()},r,a);a.getInitialState=()=>y;let d;const g=()=>{var m,h;if(!u)return;s=!1,f.forEach(p=>{var P;return p((P=r())!=null?P:y)});const b=((h=i.onRehydrateStorage)==null?void 0:h.call(i,(m=r())!=null?m:y))||void 0;return Ee(u.getItem.bind(u))(i.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==i.version){if(i.migrate){const P=i.migrate(p.state,p.version);return P instanceof Promise?P.then(I=>[!0,I]):[!0,P]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var P;const[I,D]=p;if(d=i.merge(D,(P=r())!=null?P:y),n(d,!0),I)return l()}).then(()=>{b==null||b(d,void 0),d=r(),s=!0,c.forEach(p=>p(d))}).catch(p=>{b==null||b(void 0,p)})};return a.persist={setOptions:m=>{i={...i,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:m=>(f.add(m),()=>{f.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},i.skipHydration||g(),d||y},da=Rn,mt=e=>{let t;const n=new Set,r=(u,l)=>{const o=typeof u=="function"?u(t):u;if(!Object.is(o,t)){const y=t;t=l??(typeof o!="object"||o===null)?o:Object.assign({},t,o),n.forEach(d=>d(t,y))}},a=()=>t,f={setState:r,getState:a,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(r,a,f);return f},la=e=>e?mt(e):mt;var ye,x,jt,M,_t,zt,Ge,it,Se,Ie,Y={},Tt=[],Hn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,st=Array.isArray;function j(e,t){for(var n in t)e[n]=t[n];return e}function Mt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Nn(e,t,n){var r,a,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?a=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?ye.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return ee(e,s,r,a,null)}function ee(e,t,n,r,a){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:a??++jt,__i:-1,__u:0};return a==null&&x.vnode!=null&&x.vnode(i),i}function me(e){return e.children}function te(e,t){this.props=e,this.context=t}function H(e,t){if(t==null)return e.__?H(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?H(e):null}function Vt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Vt(e)}}function bt(e){(!e.__d&&(e.__d=!0)&&M.push(e)&&!ae.__r++||_t!==x.debounceRendering)&&((_t=x.debounceRendering)||zt)(ae)}function ae(){var e,t,n,r,a,i,s,f;for(M.sort(Ge);e=M.shift();)e.__d&&(t=M.length,r=void 0,i=(a=(n=e).__v).__e,s=[],f=[],n.__P&&((r=j({},a)).__v=a.__v+1,x.vnode&&x.vnode(r),ot(n.__P,r,a,n.__n,n.__P.namespaceURI,32&a.__u?[i]:null,s,i??H(a),!!(32&a.__u),f),r.__v=a.__v,r.__.__k[r.__i]=r,Nt(s,r,f),r.__e!=i&&Vt(r)),M.length>t&&M.sort(Ge));ae.__r=0}function Rt(e,t,n,r,a,i,s,f,c,u,l){var o,y,d,g,m,h=r&&r.__k||Tt,b=t.length;for(n.__d=c,Wn(n,t,h),c=n.__d,o=0;o<b;o++)(d=n.__k[o])!=null&&(y=d.__i===-1?Y:h[d.__i]||Y,d.__i=o,ot(e,d,y,a,i,s,f,c,u,l),g=d.__e,d.ref&&y.ref!=d.ref&&(y.ref&&ft(y.ref,null,d),l.push(d.ref,d.__c||g,d)),m==null&&g!=null&&(m=g),65536&d.__u||y.__k===d.__k?c=Ht(d,c,e):typeof d.type=="function"&&d.__d!==void 0?c=d.__d:g&&(c=g.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=c,n.__e=m}function Wn(e,t,n){var r,a,i,s,f,c=t.length,u=n.length,l=u,o=0;for(e.__k=[],r=0;r<c;r++)(a=t[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(s=r+o,(a=e.__k[r]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ee(null,a,null,null,null):st(a)?ee(me,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?ee(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,i=null,(f=a.__i=Jn(a,n,s,l))!==-1&&(l--,(i=n[f])&&(i.__u|=131072)),i==null||i.__v===null?(f==-1&&o--,typeof a.type!="function"&&(a.__u|=65536)):f!==s&&(f==s-1?o--:f==s+1?o++:(f>s?o--:o++,a.__u|=65536))):a=e.__k[r]=null;if(l)for(r=0;r<u;r++)(i=n[r])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=H(i)),Wt(i,i))}function Ht(e,t,n){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=Ht(r[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=H(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Jn(e,t,n,r){var a=e.key,i=e.type,s=n-1,f=n+1,c=t[n];if(c===null||c&&a==c.key&&i===c.type&&!(131072&c.__u))return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;s>=0||f<t.length;){if(s>=0){if((c=t[s])&&!(131072&c.__u)&&a==c.key&&i===c.type)return s;s--}if(f<t.length){if((c=t[f])&&!(131072&c.__u)&&a==c.key&&i===c.type)return f;f++}}return-1}function gt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Hn.test(t)?n:n+"px"}function X(e,t,n,r,a){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||gt(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||gt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=it,e.addEventListener(t,i?Ie:Se,i)):e.removeEventListener(t,i?Ie:Se,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ht(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=it++;else if(t.t<n.u)return;return n(x.event?x.event(t):t)}}}function ot(e,t,n,r,a,i,s,f,c,u){var l,o,y,d,g,m,h,b,p,P,I,D,B,v,w,k,A=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[f=t.__e=n.__e]),(l=x.__b)&&l(t);e:if(typeof A=="function")try{if(b=t.props,p="prototype"in A&&A.prototype.render,P=(l=A.contextType)&&r[l.__c],I=l?P?P.props.value:l.__:r,n.__c?h=(o=t.__c=n.__c).__=o.__E:(p?t.__c=o=new A(b,I):(t.__c=o=new te(b,I),o.constructor=A,o.render=Kn),P&&P.sub(o),o.props=b,o.state||(o.state={}),o.context=I,o.__n=r,y=o.__d=!0,o.__h=[],o._sb=[]),p&&o.__s==null&&(o.__s=o.state),p&&A.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=j({},o.__s)),j(o.__s,A.getDerivedStateFromProps(b,o.__s))),d=o.props,g=o.state,o.__v=t,y)p&&A.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),p&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(p&&A.getDerivedStateFromProps==null&&b!==d&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(b,I),!o.__e&&(o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(b,o.__s,I)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(o.props=b,o.state=o.__s,o.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),D=0;D<o._sb.length;D++)o.__h.push(o._sb[D]);o._sb=[],o.__h.length&&s.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(b,o.__s,I),p&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(d,g,m)})}if(o.context=I,o.props=b,o.__P=e,o.__e=!1,B=x.__r,v=0,p){for(o.state=o.__s,o.__d=!1,B&&B(t),l=o.render(o.props,o.state,o.context),w=0;w<o._sb.length;w++)o.__h.push(o._sb[w]);o._sb=[]}else do o.__d=!1,B&&B(t),l=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++v<25);o.state=o.__s,o.getChildContext!=null&&(r=j(j({},r),o.getChildContext())),p&&!y&&o.getSnapshotBeforeUpdate!=null&&(m=o.getSnapshotBeforeUpdate(d,g)),Rt(e,st(k=l!=null&&l.type===me&&l.key==null?l.props.children:l)?k:[k],t,n,r,a,i,s,f,c,u),o.base=t.__e,t.__u&=-161,o.__h.length&&s.push(o),h&&(o.__E=o.__=null)}catch(Z){if(t.__v=null,c||i!=null){for(t.__u|=c?160:32;f&&f.nodeType===8&&f.nextSibling;)f=f.nextSibling;i[i.indexOf(f)]=null,t.__e=f}else t.__e=n.__e,t.__k=n.__k;x.__e(Z,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Yn(n.__e,t,n,r,a,i,s,c,u);(l=x.diffed)&&l(t)}function Nt(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)ft(n[r],n[++r],n[++r]);x.__c&&x.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){x.__e(i,a.__v)}})}function Yn(e,t,n,r,a,i,s,f,c){var u,l,o,y,d,g,m,h=n.props,b=t.props,p=t.type;if(p==="svg"?a="http://www.w3.org/2000/svg":p==="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((d=i[u])&&"setAttribute"in d==!!p&&(p?d.localName===p:d.nodeType===3)){e=d,i[u]=null;break}}if(e==null){if(p===null)return document.createTextNode(b);e=document.createElementNS(a,p,b.is&&b),f&&(x.__m&&x.__m(t,i),f=!1),i=null}if(p===null)h===b||f&&e.data===b||(e.data=b);else{if(i=i&&ye.call(e.childNodes),h=n.props||Y,!f&&i!=null)for(h={},u=0;u<e.attributes.length;u++)h[(d=e.attributes[u]).name]=d.value;for(u in h)if(d=h[u],u!="children"){if(u=="dangerouslySetInnerHTML")o=d;else if(!(u in b)){if(u=="value"&&"defaultValue"in b||u=="checked"&&"defaultChecked"in b)continue;X(e,u,null,d,a)}}for(u in b)d=b[u],u=="children"?y=d:u=="dangerouslySetInnerHTML"?l=d:u=="value"?g=d:u=="checked"?m=d:f&&typeof d!="function"||h[u]===d||X(e,u,d,h[u],a);if(l)f||o&&(l.__html===o.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(o&&(e.innerHTML=""),Rt(e,st(y)?y:[y],t,n,r,p==="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,s,i?i[0]:n.__k&&H(n,0),f,c),i!=null)for(u=i.length;u--;)Mt(i[u]);f||(u="value",p==="progress"&&g==null?e.removeAttribute("value"):g!==void 0&&(g!==e[u]||p==="progress"&&!g||p==="option"&&g!==h[u])&&X(e,u,g,h[u],a),u="checked",m!==void 0&&m!==e[u]&&X(e,u,m,h[u],a))}return e}function ft(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(a){x.__e(a,n)}}function Wt(e,t,n){var r,a;if(x.unmount&&x.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ft(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){x.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&Wt(r[a],t,n||typeof e.type!="function");n||Mt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Kn(e,t,n){return this.constructor(e,n)}function pa(e,t,n){var r,a,i,s;x.__&&x.__(e,t),a=(r=!1)?null:t.__k,i=[],s=[],ot(t,e=t.__k=Nn(me,null,[e]),a||Y,Y,t.namespaceURI,a?null:t.firstChild?ye.call(t.childNodes):null,i,a?a.__e:t.firstChild,r,s),Nt(i,e,s)}ye=Tt.slice,x={__e:function(e,t,n,r){for(var a,i,s;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,r||{}),s=a.__d),s)return a.__E=a}catch(f){e=f}throw e}},jt=0,te.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=j({},this.state),typeof e=="function"&&(e=e(j({},n),this.props)),e&&j(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),bt(this))},te.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),bt(this))},te.prototype.render=me,M=[],zt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ge=function(e,t){return e.__v.__b-t.__v.__b},ae.__r=0,it=0,Se=ht(!1),Ie=ht(!0);var K,G,xe,vt,Ae=0,Jt=[],S=x,wt=S.__b,xt=S.__r,Pt=S.diffed,Ot=S.__c,Et=S.unmount,Gt=S.__;function ut(e,t){S.__h&&S.__h(G,e,Ae||t),Ae=0;var n=G.__H||(G.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ya(e){return Ae=1,Zn(Kt,e)}function Zn(e,t,n){var r=ut(K++,2);if(r.t=e,!r.__c&&(r.__=[Kt(void 0,t),function(f){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,f);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=G,!G.u)){var a=function(f,c,u){if(!r.__c.__H)return!0;var l=r.__c.__H.__.filter(function(y){return!!y.__c});if(l.every(function(y){return!y.__N}))return!i||i.call(this,f,c,u);var o=!1;return l.forEach(function(y){if(y.__N){var d=y.__[0];y.__=y.__N,y.__N=void 0,d!==y.__[0]&&(o=!0)}}),!(!o&&r.__c.props===f)&&(!i||i.call(this,f,c,u))};G.u=!0;var i=G.shouldComponentUpdate,s=G.componentWillUpdate;G.componentWillUpdate=function(f,c,u){if(this.__e){var l=i;i=void 0,a(f,c,u),i=l}s&&s.call(this,f,c,u)},G.shouldComponentUpdate=a}return r.__N||r.__}function ma(e,t){var n=ut(K++,3);!S.__s&&Yt(n.__H,t)&&(n.__=e,n.i=t,G.__H.__h.push(n))}function _a(e,t){var n=ut(K++,7);return Yt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Xn(){for(var e;e=Jt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ne),e.__H.__h.forEach(De),e.__H.__h=[]}catch(t){e.__H.__h=[],S.__e(t,e.__v)}}S.__b=function(e){G=null,wt&&wt(e)},S.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Gt&&Gt(e,t)},S.__r=function(e){xt&&xt(e),K=0;var t=(G=e.__c).__H;t&&(xe===G?(t.__h=[],G.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(ne),t.__h.forEach(De),t.__h=[],K=0)),xe=G},S.diffed=function(e){Pt&&Pt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Jt.push(t)!==1&&vt===S.requestAnimationFrame||((vt=S.requestAnimationFrame)||Qn)(Xn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),xe=G=null},S.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ne),n.__h=n.__h.filter(function(r){return!r.__||De(r)})}catch(r){t.some(function(a){a.__h&&(a.__h=[])}),t=[],S.__e(r,n.__v)}}),Ot&&Ot(e,t)},S.unmount=function(e){Et&&Et(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ne(r)}catch(a){t=a}}),n.__H=void 0,t&&S.__e(t,n.__v))};var St=typeof requestAnimationFrame=="function";function Qn(e){var t,n=function(){clearTimeout(r),St&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);St&&(t=requestAnimationFrame(n))}function ne(e){var t=G,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),G=t}function De(e){var t=G;e.__c=e.__(),G=t}function Yt(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Kt(e,t){return typeof t=="function"?t(e):t}const ba=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Zt(e){const{authorization:t,factory:n,factoryData:r}=e;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";const a=t.address;return R([a,r??"0x"])}return n?R([n,r??"0x"]):"0x"}function Xt(e){const{callGasLimit:t,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:a,paymaster:i,paymasterData:s,paymasterPostOpGasLimit:f,paymasterVerificationGasLimit:c,sender:u,signature:l="0x",verificationGasLimit:o}=e,y=R([C(E(o||0n),{size:16}),C(E(t||0n),{size:16})]),d=Zt(e),g=R([C(E(r||0n),{size:16}),C(E(a||0n),{size:16})]),m=e.nonce??0n,h=i?R([i,C(E(c||0n),{size:16}),C(E(f||0n),{size:16}),s||"0x"]):"0x",b=e.preVerificationGas??0n;return{accountGasLimits:y,callData:n,initCode:d,gasFees:g,nonce:m,paymasterAndData:h,preVerificationGas:b,sender:u,signature:l}}const qn={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function er(e){const{chainId:t,entryPointAddress:n,userOperation:r}=e,a=Xt(r);return{types:qn,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:a}}function ga(e){const{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,a=e.userOperation,{authorization:i,callData:s="0x",callGasLimit:f,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,paymasterAndData:o="0x",preVerificationGas:y,sender:d,verificationGasLimit:g}=a;if(r==="0.8")return gn(er({chainId:t,entryPointAddress:n,userOperation:a}));const m=(()=>{var h,b;if(r==="0.6"){const p=(h=a.initCode)==null?void 0:h.slice(0,42),P=(b=a.initCode)==null?void 0:b.slice(42),I=Zt({authorization:i,factory:p,factoryData:P});return ve([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[d,l,F(I),F(s),f,g,y,c,u,F(o)])}if(r==="0.7"){const p=Xt(a);return ve([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[p.sender,p.nonce,F(p.initCode),F(p.callData),p.accountGasLimits,p.preVerificationGas,p.gasFees,F(p.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return F(ve([{type:"bytes32"},{type:"address"},{type:"uint256"}],[F(m),n,BigInt(t)]))}async function ha(e){const{extend:t,nonceKeyManager:n=hn({source:{get(){return Date.now()},set(){}}}),...r}=e;let a=!1;const i=await e.getAddress();return{...t,...r,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(s){const f=(s==null?void 0:s.key)??BigInt(await n.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...s,key:f}):await wn(e.client,{abi:xn(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,f]})},async isDeployed(){return a?!0:(a=!!await L(e.client,vn,"getCode")({address:i}),a)},...e.sign?{async sign(s){const[{factory:f,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.sign(s)]);return f&&c?we({address:f,data:c,signature:u}):u}}:{},async signMessage(s){const[{factory:f,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signMessage(s)]);return f&&c&&f!=="0x7702"?we({address:f,data:c,signature:u}):u},async signTypedData(s){const[{factory:f,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signTypedData(s)]);return f&&c&&f!=="0x7702"?we({address:f,data:c,signature:u}):u},type:"smart"}}class Ue extends _{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(Ue,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class N extends _{constructor({cause:t,data:n,message:r}={}){var i;const a=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${a?`with reason: ${a}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}}Object.defineProperty(N,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(N,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class $e extends _{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty($e,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class Ce extends _{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(Ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class Le extends _{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(Le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class Be extends _{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(Be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class ke extends _{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(ke,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class Fe extends _{constructor({cause:t,factory:n,factoryData:r,initCode:a,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(Fe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class je extends _{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(je,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class ze extends _{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}}Object.defineProperty(ze,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class Te extends _{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}}Object.defineProperty(Te,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class Me extends _{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(Me,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class Ve extends _{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}}Object.defineProperty(Ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class ie extends _{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}}Object.defineProperty(ie,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Re extends _{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Re,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class V extends _{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(V,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(V,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class He extends _{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(He,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Ne extends _{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Ne,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class se extends _{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}}Object.defineProperty(se,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class oe extends _{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(oe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class We extends _{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(We,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class Je extends _{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(Je,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class fe extends _{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}}Object.defineProperty(fe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class Ye extends _{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(Ye,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class ue extends _{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(ue,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class Ke extends _{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(Ke,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class Ze extends _{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(Ze,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class Xe extends _{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(Xe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class Qe extends _{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(Qe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class ce extends _{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(ce,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class de extends _{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(de,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class le extends _{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(le,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class pe extends _{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(pe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class tr extends _{constructor({cause:t}){super(`An error occurred while executing user operation: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}}class qe extends _{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(qe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class et extends _{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(et,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class nr extends _{constructor(t,{callData:n,callGasLimit:r,docsPath:a,factory:i,factoryData:s,initCode:f,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,paymaster:o,paymasterAndData:y,paymasterData:d,paymasterPostOpGasLimit:g,paymasterVerificationGasLimit:m,preVerificationGas:h,sender:b,signature:p,verificationGasLimit:P}){const I=Pn({callData:n,callGasLimit:r,factory:i,factoryData:s,initCode:f,maxFeePerGas:typeof c<"u"&&`${yt(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${yt(u)} gwei`,nonce:l,paymaster:o,paymasterAndData:y,paymasterData:d,paymasterPostOpGasLimit:g,paymasterVerificationGasLimit:m,preVerificationGas:h,sender:b,signature:p,verificationGasLimit:P});super(t.shortMessage,{cause:t,docsPath:a,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",I].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class rr extends _{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class ar extends _{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}}class It extends _{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const ir=[N,ie,V,se,oe,fe,ue,pe,ce,de,le];function sr(e,t){const n=(e.details||"").toLowerCase();if(Ue.message.test(n))return new Ue({cause:e});if($e.message.test(n))return new $e({cause:e});if(Ce.message.test(n))return new Ce({cause:e});if(Le.message.test(n))return new Le({cause:e});if(Be.message.test(n))return new Be({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(ke.message.test(n))return new ke({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Fe.message.test(n))return new Fe({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(je.message.test(n))return new je({cause:e});if(ze.message.test(n))return new ze({cause:e});if(Me.message.test(n))return new Me({cause:e,nonce:t.nonce});if(Te.message.test(n))return new Te({cause:e});if(Ve.message.test(n))return new Ve({cause:e});if(Re.message.test(n))return new Re({cause:e});if(V.message.test(n))return new V({cause:e});if(He.message.test(n))return new He({cause:e});if(Ne.message.test(n))return new Ne({cause:e});if(We.message.test(n))return new We({cause:e});if(Ye.message.test(n))return new Ye({cause:e});if(Je.message.test(n))return new Je({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Ke.message.test(n))return new Ke({cause:e});if(Ze.message.test(n))return new Ze({cause:e});if(Qe.message.test(n))return new Qe({cause:e});if(Xe.message.test(n))return new Xe({cause:e});if(qe.message.test(n))return new qe({cause:e});if(et.message.test(n))return new et({cause:e});const r=e.walk(a=>ir.some(i=>i.code===a.code));if(r){if(r.code===N.code)return new N({cause:e,data:r.data,message:r.details});if(r.code===ie.code)return new ie({cause:e});if(r.code===V.code)return new V({cause:e});if(r.code===se.code)return new se({cause:e});if(r.code===oe.code)return new oe({cause:e});if(r.code===fe.code)return new fe({cause:e});if(r.code===ue.code)return new ue({cause:e});if(r.code===pe.code)return new pe({cause:e});if(r.code===ce.code)return new ce({cause:e});if(r.code===de.code)return new de({cause:e});if(r.code===le.code)return new le({cause:e})}return new tr({cause:e})}function Qt(e,{calls:t,docsPath:n,...r}){const a=(()=>{const i=sr(e,r);if(t&&i instanceof N){const s=or(i),f=t==null?void 0:t.filter(c=>c.abi);if(s&&f.length>0)return fr({calls:f,revertData:s})}return i})();return new nr(a,{docsPath:n,...r})}function or(e){let t;return e.walk(n=>{var a,i,s,f;const r=n;if(typeof r.data=="string"||typeof((a=r.data)==null?void 0:a.revertData)=="string"||!(r instanceof _)&&typeof r.message=="string"){const c=(f=(s=((i=r.data)==null?void 0:i.revertData)||r.data||r.message).match)==null?void 0:f.call(s,/(0x[A-Za-z0-9]*)/);if(c)return t=c[1],!0}return!1}),t}function fr(e){const{calls:t,revertData:n}=e,{abi:r,functionName:a,args:i,to:s}=(()=>{const c=t==null?void 0:t.filter(l=>!!l.abi);if(c.length===1)return c[0];const u=c.filter(l=>{try{return!!On({abi:l.abi,data:n})}catch{return!1}});return u.length===1?u[0]:{abi:[],functionName:c.reduce((l,o)=>`${l?`${l} | `:""}${o.functionName}`,""),args:void 0,to:void 0}})(),f=n==="0x"?new En({functionName:a}):new Gn({abi:r,data:n,functionName:a});return new Sn(f,{abi:r,args:i,contractAddress:s,functionName:a})}function ur(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function _e(e){const t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=E(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=E(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=E(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=E(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=E(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=E(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=E(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=E(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=cr(e.authorization)),t}function cr(e){return{address:e.address,chainId:E(e.chainId),nonce:E(e.nonce),r:e.r?E(BigInt(e.r),{size:32}):C("0x",{size:32}),s:e.s?E(BigInt(e.s),{size:32}):C("0x",{size:32}),yParity:e.yParity?E(e.yParity,{size:1}):C("0x",{size:32})}}async function dr(e,t){const{chainId:n,entryPointAddress:r,context:a,...i}=t,s=_e(i),{paymasterPostOpGasLimit:f,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,E(n),a]});return{...u,...f&&{paymasterPostOpGasLimit:re(f)},...c&&{paymasterVerificationGasLimit:re(c)}}}async function lr(e,t){const{chainId:n,entryPointAddress:r,context:a,...i}=t,s=_e(i),{paymasterPostOpGasLimit:f,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,E(n),a]});return{...u,...f&&{paymasterPostOpGasLimit:re(f)},...c&&{paymasterVerificationGasLimit:re(c)}}}const pr=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function ct(e,t){var B;const n=t,{account:r=e.account,parameters:a=pr,stateOverride:i}=n;if(!r)throw new tt;const s=nt(r),f=e,c=n.paymaster??(f==null?void 0:f.paymaster),u=typeof c=="string"?c:void 0,{getPaymasterStubData:l,getPaymasterData:o}=(()=>{if(c===!0)return{getPaymasterStubData:v=>L(f,lr,"getPaymasterStubData")(v),getPaymasterData:v=>L(f,dr,"getPaymasterData")(v)};if(typeof c=="object"){const{getPaymasterStubData:v,getPaymasterData:w}=c;return{getPaymasterStubData:w&&v?v:w,getPaymasterData:w&&v?w:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),y=n.paymasterContext?n.paymasterContext:f==null?void 0:f.paymasterContext;let d={...n,paymaster:u,sender:s.address};const[g,m,h,b,p]=await Promise.all([(async()=>n.calls?s.encodeCalls(n.calls.map(v=>{const w=v;return w.abi?{data:In(w),to:w.to,value:w.value}:w})):n.callData)(),(async()=>{if(!a.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:v,factoryData:w}=await s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:v&&w?R([v,w]):void 0}:{factory:v,factoryData:w}})(),(async()=>{var v;if(a.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return d;if((v=f==null?void 0:f.userOperation)!=null&&v.estimateFeesPerGas){const w=await f.userOperation.estimateFeesPerGas({account:s,bundlerClient:f,userOperation:d});return{...d,...w}}try{const w=f.client??e,k=await L(w,An,"estimateFeesPerGas")({chain:w.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*k.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*k.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(a.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:s.getNonce()})(),(async()=>{if(a.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(s.authorization&&!await s.isDeployed())return{...await Dn(s.client,s.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof g<"u"&&(d.callData=g),typeof m<"u"&&(d={...d,...m}),typeof h<"u"&&(d={...d,...h}),typeof b<"u"&&(d.nonce=b),typeof p<"u"&&(d.authorization=p),a.includes("signature")&&(typeof n.signature<"u"?d.signature=n.signature:d.signature=await s.getStubSignature(d)),s.entryPoint.version==="0.6"&&!d.initCode&&(d.initCode="0x");let P;async function I(){return P||(e.chain?e.chain.id:(P=await L(e,Ft,"getChainId")({}),P))}let D=!1;if(a.includes("paymaster")&&l&&!u&&!n.paymasterAndData){const{isFinal:v=!1,sponsor:w,...k}=await l({chainId:await I(),entryPointAddress:s.entryPoint.address,context:y,...d});D=v,d={...d,...k}}if(s.entryPoint.version==="0.6"&&!d.paymasterAndData&&(d.paymasterAndData="0x"),a.includes("gas")){if((B=s.userOperation)!=null&&B.estimateGas){const v=await s.userOperation.estimateGas(d);d={...d,...v}}if(typeof d.callGasLimit>"u"||typeof d.preVerificationGas>"u"||typeof d.verificationGasLimit>"u"||d.paymaster&&typeof d.paymasterPostOpGasLimit>"u"||d.paymaster&&typeof d.paymasterVerificationGasLimit>"u"){const v=await L(f,qt,"estimateUserOperationGas")({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...d.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...d});d={...d,callGasLimit:d.callGasLimit??v.callGasLimit,preVerificationGas:d.preVerificationGas??v.preVerificationGas,verificationGasLimit:d.verificationGasLimit??v.verificationGasLimit,paymasterPostOpGasLimit:d.paymasterPostOpGasLimit??v.paymasterPostOpGasLimit,paymasterVerificationGasLimit:d.paymasterVerificationGasLimit??v.paymasterVerificationGasLimit}}}if(a.includes("paymaster")&&o&&!u&&!n.paymasterAndData&&!D){const v=await o({chainId:await I(),entryPointAddress:s.entryPoint.address,context:y,...d});d={...d,...v}}return delete d.calls,delete d.parameters,delete d.paymasterContext,typeof d.paymaster!="string"&&delete d.paymaster,d}async function qt(e,t){var c;const{account:n=e.account,entryPointAddress:r,stateOverride:a}=t;if(!n&&!t.sender)throw new tt;const i=n?nt(n):void 0,s=Un(a),f=i?await L(e,ct,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{const u=[_e(f),r??((c=i==null?void 0:i.entryPoint)==null?void 0:c.address)],l=await e.request({method:"eth_estimateUserOperationGas",params:s?[...u,s]:[...u]});return ur(l)}catch(u){const l=t.calls;throw Qt(u,{...f,...l?{calls:l}:{}})}}function yr(e){return e.request({method:"eth_supportedEntryPoints"})}function mr(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function _r(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new ar({hash:t});const{blockHash:r,blockNumber:a,entryPoint:i,transactionHash:s,userOperation:f}=n;return{blockHash:r,blockNumber:BigInt(a),entryPoint:i,transactionHash:s,userOperation:mr(f)}}function br(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>$n(n))),e.receipt&&(t.receipt=Cn(t.receipt)),t}async function en(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new rr({hash:t});return br(n)}async function gr(e,t){var c,u;const{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new tt;const a=n?nt(n):void 0,i=a?await L(e,ct,"prepareUserOperation")(t):t,s=t.signature||await((c=a==null?void 0:a.signUserOperation)==null?void 0:c.call(a,i)),f=_e({...i,signature:s});try{return await e.request({method:"eth_sendUserOperation",params:[f,r??((u=a==null?void 0:a.entryPoint)==null?void 0:u.address)]},{retryCount:0})}catch(l){const o=t.calls;throw Qt(l,{...i,...o?{calls:o}:{},signature:s})}}function hr(e,t){const{hash:n,pollingInterval:r=e.pollingInterval,retryCount:a,timeout:i=12e4}=t;let s=0;const f=Ln(["waitForUserOperationReceipt",e.uid,n]);return new Promise((c,u)=>{const l=Bn(f,{resolve:c,reject:u},o=>{const y=g=>{d(),g(),l()},d=kn(async()=>{a&&s>=a&&y(()=>o.reject(new It({hash:n})));try{const g=await L(e,en,"getUserOperationReceipt")({hash:n});y(()=>o.resolve(g))}catch(g){const m=g;m.name!=="UserOperationReceiptNotFoundError"&&y(()=>o.reject(m))}s++},{emitOnBegin:!0,interval:r});return i&&setTimeout(()=>y(()=>o.reject(new It({hash:n}))),i),d})})}function vr(e){return{estimateUserOperationGas:t=>qt(e,t),getChainId:()=>Ft(e),getSupportedEntryPoints:()=>yr(e),getUserOperation:t=>_r(e,t),getUserOperationReceipt:t=>en(e,t),prepareUserOperation:t=>ct(e,t),sendUserOperation:t=>gr(e,t),waitForUserOperationReceipt:t=>hr(e,t)}}function va(e){const{client:t,key:n="bundler",name:r="Bundler Client",paymaster:a,paymasterContext:i,transport:s,userOperation:f}=e;return Object.assign(Fn({...e,chain:e.chain??(t==null?void 0:t.chain),key:n,name:r,transport:s,type:"bundlerClient"}),{client:t,paymaster:a,paymasterContext:i,userOperation:f}).extend(vr)}const wa="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",wr="0.1.1";function xr(){return wr}class O extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof O){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),a=n.cause instanceof O&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${a??""}`,f=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a?["",r?`Details: ${r}`:void 0,a?`See: ${s}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(f,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${xr()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=a,this.shortMessage=t}walk(t){return tn(this,t)}}function tn(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?tn(e.cause,t):t?null:e}const Pr="#__bigint";function be(e,t,n){return JSON.stringify(e,(r,a)=>typeof a=="bigint"?a.toString()+Pr:a,n)}function Or(e,t){if(J(e)>t)throw new Tr({givenSize:J(e),maxSize:t})}function Er(e,t){if(typeof t=="number"&&t>0&&t>J(e)-1)throw new dn({offset:t,position:"start",size:J(e)})}function Gr(e,t,n){if(typeof t=="number"&&typeof n=="number"&&J(e)!==n-t)throw new dn({offset:n,position:"end",size:J(e)})}const U={zero:48,nine:57,A:65,F:70,a:97,f:102};function At(e){if(e>=U.zero&&e<=U.nine)return e-U.zero;if(e>=U.A&&e<=U.F)return e-(U.A-10);if(e>=U.a&&e<=U.f)return e-(U.a-10)}function dt(e,t){if(T(e)>t)throw new kr({givenSize:T(e),maxSize:t})}function Sr(e,t){if(typeof t=="number"&&t>0&&t>T(e)-1)throw new on({offset:t,position:"start",size:T(e)})}function Ir(e,t,n){if(typeof t=="number"&&typeof n=="number"&&T(e)!==n-t)throw new on({offset:n,position:"end",size:T(e)})}function nn(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const a=e.replace("0x","");if(a.length>r*2)throw new Fr({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Ar=new TextEncoder,Dr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ur(e,t={}){const{strict:n=!1}=t;if(!e)throw new Dt(e);if(typeof e!="string")throw new Dt(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Ut(e);if(!e.startsWith("0x"))throw new Ut(e)}function ge(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function rn(e){return e instanceof Uint8Array?W(e):Array.isArray(e)?W(new Uint8Array(e)):e}function W(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=Dr[e[a]];const r=`0x${n}`;return typeof t.size=="number"?(dt(r,t.size),sn(r,t.size)):r}function z(e,t={}){const{signed:n,size:r}=t,a=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&n?-i-1n:0;if(i&&a>i||a<s){const u=typeof e=="bigint"?"n":"";throw new Br({max:i?`${i}${u}`:void 0,min:`${s}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?$r(c,r):c}function an(e,t={}){return W(Ar.encode(e),t)}function $r(e,t){return nn(e,{dir:"left",size:t})}function sn(e,t){return nn(e,{dir:"right",size:t})}function $(e,t,n,r={}){const{strict:a}=r;Sr(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&Ir(i,t,n),i}function T(e){return Math.ceil((e.length-2)/2)}function Cr(e,t={}){const{signed:n}=t;t.size&&dt(e,t.size);const r=BigInt(e);if(!n)return r;const a=(e.length-2)/2,i=(1n<<BigInt(a)*8n)-1n,s=i>>1n;return r<=s?r:r-i-1n}function Lr(e,t={}){const{strict:n=!1}=t;try{return Ur(e,{strict:n}),!0}catch{return!1}}class Br extends O{constructor({max:t,min:n,signed:r,size:a,value:i}){super(`Number \`${i}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Dt extends O{constructor(t){super(`Value \`${typeof t=="object"?be(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Ut extends O{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let kr=class extends O{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},on=class extends O{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}};class Fr extends O{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function jr(e){if(!(e instanceof Uint8Array)){if(!e)throw new Q(e);if(typeof e!="object")throw new Q(e);if(!("BYTES_PER_ELEMENT"in e))throw new Q(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new Q(e)}}function fn(e){return e instanceof Uint8Array?e:typeof e=="string"?cn(e):un(e)}function un(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function cn(e,t={}){const{size:n}=t;let r=e;n&&(dt(e,n),r=sn(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);const i=a.length/2,s=new Uint8Array(i);for(let f=0,c=0;f<i;f++){const u=At(a.charCodeAt(c++)),l=At(a.charCodeAt(c++));if(u===void 0||l===void 0)throw new O(`Invalid byte sequence ("${a[c-2]}${a[c-1]}" in "${a}").`);s[f]=u*16+l}return s}function J(e){return e.length}function $t(e,t,n,r={}){const{strict:a}=r;Er(e,t);const i=e.slice(t,n);return a&&Gr(i,t,n),i}function Ct(e,t={}){const{size:n}=t;typeof n<"u"&&Or(e,n);const r=W(e,t);return Cr(r,t)}function zr(e){try{return jr(e),!0}catch{return!1}}class Q extends O{constructor(t){super(`Value \`${typeof t=="object"?be(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class Tr extends O{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class dn extends O{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}function ln(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=jn(fn(e));return n==="Bytes"?r:W(r)}function pn(e,t={}){const{compressed:n}=t,{prefix:r,x:a,y:i}=e;if(n===!1||typeof a=="bigint"&&typeof i=="bigint"){if(r!==4)throw new Lt({prefix:r,cause:new Nr});return}if(n===!0||typeof a=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new Lt({prefix:r,cause:new Hr});return}throw new Rr({publicKey:e})}function Mr(e){const t=(()=>{if(Lr(e))return yn(e);if(zr(e))return Vr(e);const{prefix:n,x:r,y:a}=e;return typeof r=="bigint"&&typeof a=="bigint"?{prefix:n??4,x:r,y:a}:{prefix:n,x:r}})();return pn(t),t}function Vr(e){return yn(W(e))}function yn(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new Wr({publicKey:e});if(e.length===130){const r=BigInt($(e,0,32)),a=BigInt($(e,32,64));return{prefix:4,x:r,y:a}}if(e.length===132){const r=Number($(e,0,1)),a=BigInt($(e,1,33)),i=BigInt($(e,33,65));return{prefix:r,x:a,y:i}}const t=Number($(e,0,1)),n=BigInt($(e,1,33));return{prefix:t,x:n}}function Oa(e,t={}){pn(e);const{prefix:n,x:r,y:a}=e,{includePrefix:i=!0}=t;return ge(i?z(n,{size:1}):"0x",z(r,{size:32}),typeof a=="bigint"?z(a,{size:32}):"0x")}class Rr extends O{constructor({publicKey:t}){super(`Value \`${be(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class Lt extends O{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class Hr extends O{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class Nr extends O{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let Wr=class extends O{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${T(rn(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const Bt=2n**256n-1n;function Jr(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new Pe({signature:e});if(typeof e.s>"u")throw new Pe({signature:e});if(n&&typeof e.yParity>"u")throw new Pe({signature:e});if(e.r<0n||e.r>Bt)throw new Xr({value:e.r});if(e.s<0n||e.s>Bt)throw new Qr({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new lt({value:e.yParity})}function Ga(e){if(e.length!==130&&e.length!==132)throw new Zr({signature:e});const t=BigInt($(e,0,32)),n=BigInt($(e,32,64)),r=(()=>{const a=+`0x${e.slice(130)}`;if(!Number.isNaN(a))try{return Yr(a)}catch{throw new lt({value:a})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function Sa(e){Jr(e);const t=e.r,n=e.s;return ge(z(t,{size:32}),z(n,{size:32}),typeof e.yParity=="number"?z(Kr(e.yParity),{size:1}):"0x")}function Yr(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new qr({value:e})}function Kr(e){if(e===0)return 27;if(e===1)return 28;throw new lt({value:e})}class Zr extends O{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${T(rn(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Pe extends O{constructor({signature:t}){super(`Signature \`${be(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class Xr extends O{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class Qr extends O{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class lt extends O{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class qr extends O{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const ea=new TextDecoder,q=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]));({...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))});function ta(e,t={}){const{pad:n=!0,url:r=!1}=t,a=new Uint8Array(Math.ceil(e.length/3)*4);for(let c=0,u=0;u<e.length;c+=4,u+=3){const l=(e[u]<<16)+(e[u+1]<<8)+(e[u+2]|0);a[c]=q[l>>18],a[c+1]=q[l>>12&63],a[c+2]=q[l>>6&63],a[c+3]=q[l&63]}const i=e.length%3,s=Math.floor(e.length/3)*4+(i&&i+1);let f=ea.decode(new Uint8Array(a.buffer,0,s));return n&&i===1&&(f+="=="),n&&i===2&&(f+="="),r&&(f=f.replaceAll("+","-").replaceAll("/","_")),f}function na(e,t={}){return ta(cn(e),t)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mn={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},_n={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},bn={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},ra=at(mn.p),aa=at(_n.p),ia=at(bn.p),sa=rt({...mn,Fp:ra,lowS:!1},zn);rt({..._n,Fp:aa,lowS:!1},Tn);rt({...bn,Fp:ia,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Mn);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kt=sa;Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);function oa(e={}){const{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,a=ln(an(n)),i=z(t,{size:1}),s=z(r,{size:4});return ge(a,i,s)}function fa(e){const{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:a=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:na(t,{url:!0,pad:!1}),origin:a,crossOrigin:n,...r})}function Ia(e){const{challenge:t,crossOrigin:n,extraClientData:r,flag:a,origin:i,rpId:s,signCount:f,userVerification:c="required"}=e,u=oa({flag:a,rpId:s,signCount:f}),l=fa({challenge:t,crossOrigin:n,extraClientData:r,origin:i}),o=ln(an(l)),y=l.indexOf('"challenge"'),d=l.indexOf('"type"'),g={authenticatorData:u,clientDataJSON:l,challengeIndex:y,typeIndex:d,userVerificationRequired:c==="required"},m=ge(u,o);return{metadata:g,payload:m}}async function Aa(e={}){const{extractable:t=!1}=e,n=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),r=await globalThis.crypto.subtle.exportKey("raw",n.publicKey),a=Mr(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:a}}async function Da(e){const{payload:t,privateKey:n}=e,r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,fn(t)),a=un(new Uint8Array(r)),i=Ct($t(a,0,32));let s=Ct($t(a,32,64));return s>kt.CURVE.n/2n&&(s=kt.CURVE.n-s),{r:i,s}}function he(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function ua(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=he(n);return(a,i)=>r.then(s=>i(s.transaction(t,a).objectStore(t)))}let Oe;function pt(){return Oe||(Oe=ua("keyval-store","keyval")),Oe}function Ua(e,t=pt()){return t("readonly",n=>he(n.get(e)))}function $a(e,t,n=pt()){return n("readwrite",r=>(r.put(t,e),he(r.transaction)))}function Ca(e,t=pt()){return t("readwrite",n=>(n.delete(e),he(n.transaction)))}export{pa as B,_a as T,Nn as _,Vn as a,va as b,la as c,ua as d,Ca as e,$ as f,Ua as g,ya as h,Ia as i,Da as j,Sa as k,x as l,Aa as m,Ga as n,ha as o,da as p,wa as q,ba as r,$a as s,Oa as t,ga as u,ma as y};
//# sourceMappingURL=index-DIIo1iWv.js.map
