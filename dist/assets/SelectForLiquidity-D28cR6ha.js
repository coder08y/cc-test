import{l as S,r as m,ac as I,j as f,V as N}from"./vendor-CBmAETR3.js";import{S as T}from"./SelectTokenAndFeeConfirm-BsMtMGIm.js";import{S as V,a as W}from"./SelectPoolType-3Pww0Oc_.js";import{u as Z}from"./useCreatePoolHelper-0RjXBJPa.js";import{u as H}from"./SelectToken-T5VwJ8in.js";import{u as G}from"./useCreatePool-DptvRkPa.js";import{i as x}from"./index-D39Sw25C.js";import{c as J,d as K}from"./config-DTm0VBgZ.js";import{j as M,f as U,Z as P}from"./index-Lo8eQgA0.js";import{B as X}from"./BackButton-D2-OxVyR.js";import"./cross-J9VCREIf.js";import"./ErrorTips-BLWaROlb.js";import"./index-Lmhyywzw.js";import"./CetusMenu-DBgVrv1f.js";import"./useDocumentSize-DzZXzGS0.js";import"./index-BgoHGJbV.js";import"./debounce-MPJy35Ge.js";import"./index-D8UqOC8m.js";import"./maxBy-CjDOV9Q0.js";import"./icon_clmm-sLI9GHAc.js";import"./icon_dlmm-BKyFDzFK.js";import"./CheckBox-BfyJMUfq.js";import"./usePosAdd-DQqGRC2k.js";import"./msafe-BzcjPV-e.js";import"./dlmm-DZG9_A9Y.js";import"./utils-BTUfT3hi.js";import"./useWrapPoolData-tzYpVDlL.js";import"./en_US-KAK2ZBDO-KTAiToGz.js";import"./useGetDlmmPoolList-B5IuL-hD.js";import"./useGetPoolList-Bo7JxsYj.js";import"./index-Dk23fwcs.js";import"./Loading-DOvYGudd.js";import"./TooltipIcon-Bqqgb7rr.js";function Y(){const c=S(),[e,B]=m.useState(),[t,u]=m.useState(M.sui_coin),[n,F]=m.useState(void 0),[L,C]=m.useState([]),{fetchFeeTierList:v,getBinStepConfigs:A}=Z(),{quoteWhiteTokenList:d}=H(),{poolType:l,setPoolType:j,setCurrentStep:g}=G(),[$,_]=m.useState([]),[s,r]=m.useState(void 0),y=U("dlmm"),D=o=>{j(o)},Q=()=>{var o;e&&t?v(e.coin_type,t.coin_type).then(i=>{C(i==null?void 0:i.map(a=>{var p;const h=((p=i.find(w=>w.feeRate===a.feeRate))==null?void 0:p.title)||a.title;return{...a,description:void 0,disabled:h==="Not Created"&&!x(e,d)&&!x(t,d)}}))}):C((o=J)==null?void 0:o.map(i=>({...i,description:void 0,title:""})))},R=()=>{var o;e&&t?A(e==null?void 0:e.coin_type,t==null?void 0:t.coin_type).then(i=>{_(i==null?void 0:i.map(a=>{var p;const h=((p=i.find(w=>w.fee===a.fee))==null?void 0:p.title)||a.title;return{...a,description:void 0,disabled:h==="Not Created"&&!x(e,d)&&!x(t,d)}}))}):_((o=K)==null?void 0:o.map(i=>({...i,description:void 0,title:""})))};m.useEffect(()=>{l==="clmm"&&Q(),l==="dlmm"&&R()},[e==null?void 0:e.coin_type,t==null?void 0:t.coin_type,l]);const{isOpen:z,onOpen:O,onClose:E}=I();return{poolType:l,onContinue:async()=>{var o;if(n&&l==="clmm"&&(n.poolAddress?c(`/clmm?tab=deposit&poolAddress=${n.poolAddress}`):O()),s&&l==="dlmm"){if(s!=null&&s.poolAddress)c(`/dlmm?tab=deposit&poolId=${s.poolAddress}`);else if(e!=null&&e.coin_type&&(t!=null&&t.coin_type))try{const i=await((o=y==null?void 0:y.Pool)==null?void 0:o.getPoolAddress(P(e==null?void 0:e.coin_type,!0),P(t==null?void 0:t.coin_type,!0),s==null?void 0:s.binStep,s==null?void 0:s.baseFactor));i?(r({...s,poolAddress:i}),c(`/dlmm?tab=deposit&poolId=${i}`)):O()}catch{O()}}},baseToken:e,quoteToken:t,setBaseToken:B,setQuoteToken:u,feeTier:n,setFeeTier:F,feeTierList:L,onPoolTypeChange:D,isOpen:z,onClose:E,onConfirm:()=>{e&&t&&n&&l==="clmm"&&(g(2),c(`/create-pool/${e==null?void 0:e.coin_type}/${t==null?void 0:t.coin_type}/${n==null?void 0:n.feeRate}`)),e&&t&&s&&l==="dlmm"&&(g(2),c(`/create-pool/${e==null?void 0:e.coin_type}/${t==null?void 0:t.coin_type}/${s==null?void 0:s.fee}`))},handleBinStepChange:async(o,i,a)=>{var h;if(!(o!=null&&o.poolAddress)&&i&&a)try{const p=await((h=y==null?void 0:y.Pool)==null?void 0:h.getPoolAddress(P(i,!0),P(a,!0),o==null?void 0:o.binStep,o==null?void 0:o.baseFactor));r(p?{...o,poolAddress:p}:o)}catch{r(o)}else r(o)},feeOptions:$,binStep:s}}function Qt(){const c=S(),{poolType:e,onContinue:B,baseToken:t,quoteToken:u,setBaseToken:n,setQuoteToken:F,feeTier:L,setFeeTier:C,feeTierList:v,onPoolTypeChange:A,isOpen:d,onClose:l,onConfirm:j,binStep:g,feeOptions:$,handleBinStepChange:_}=Y(),s=()=>{c(e==="dlmm"?"/pools?tab=dlmm_pools":"/pools")};return f.jsxs(f.Fragment,{children:[f.jsxs(N,{w:"524px",align:"flex-start",gap:"20px",mt:"20px",children:[f.jsx(X,{text:"Pools",onClick:s}),f.jsx(V,{poolType:e,title:"Select pair",description:"Select the token you want to provide liquidity for.",onContinue:B,baseToken:t,onBaseTokenChange:r=>n(r),quoteToken:u,onQuoteTokenChange:r=>F(r),feeTier:L,onFeeTierChange:r=>C(r),binStep:g,binStepList:$,onBinStepChange:r=>_(r,t==null?void 0:t.coin_type,u==null?void 0:u.coin_type),fromSource:"addLiquidity",feeTierList:v,children:f.jsx(W,{type:e,onChange:A,currentStep:1,wrapStyle:{p:"0"},fromSource:"addLiquidity"})})]}),d&&f.jsx(T,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:d,onClose:l,onConfirm:j})]})}export{Qt as default};
