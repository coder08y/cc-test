import{j as e,V as R,H as V,T as A,r as p,m as M,w as N,B as G,l as H,i as z,ai as S,aj as u,C as Q,al as U,am as J,an as P,ah as K,F as X}from"./vendor-CBmAETR3.js";import{e as Z,A as D,E as f,M as F,Q as O,k as L,d as E,p as Y,c as I,I as ss,u as es,v as w,z as C,a as ts,B as rs}from"./index-Lo8eQgA0.js";import{N as W}from"./NoData-BFX9XpKb.js";import{a as q,c as ls}from"./usePositionList-Bupy7RnX.js";import"./cross-J9VCREIf.js";import{A as os}from"./index-mfa-9p2R.js";import{u as ds,E as xs}from"./ExpendItem-DrEG4ZJp.js";import{C as is}from"./CoinPairInfo-BkYX588i.js";import{R as ns}from"./RangeValue-D-wFxWdA.js";function cs({apiInfo:s}){var o,l,i;const{tokenInfo:t}=Z((o=(s==null?void 0:s.farmsRewarderList)||[])==null?void 0:o.map(r=>r==null?void 0:r.coinType));return e.jsx(R,{align:"flex-end",children:s!=null&&s.farmsRewarderList&&((l=s==null?void 0:s.farmsRewarderList)==null?void 0:l.length)>0?(i=s==null?void 0:s.farmsRewarderList)==null?void 0:i.map(r=>{var d;return e.jsxs(V,{children:[e.jsx(D,{token:t==null?void 0:t.get(r==null?void 0:r.coinType),imgBoxStyle:{w:"20px",h:"20px"},warningIcon:{iconW:"10px",iconH:"10px"},haveName:!1,haveSymbol:!1}),e.jsxs(A,{color:"text_caption",fontWeight:"500",children:[f(r==null?void 0:r.emissionsEveryDay)," ",(d=t==null?void 0:t.get(r==null?void 0:r.coinType))==null?void 0:d.symbol]})]},r==null?void 0:r.coinType)}):e.jsx(A,{color:"text_caption",children:"--"})})}function as({apiInfo:s}){var T;const{currentAccount:t}=F(),{getTokenAmountValue:o}=O(),{coinPriceObj:l}=L();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{posLiquidityData:i,posBaseListLoading:r,posBaseListGroupByPool:d}=q(),n=p.useMemo(()=>{var h,a;if(!(t!=null&&t.address)||!(s!=null&&s.poolAddress))return"--";if(!r)return(((a=(h=d[s.poolAddress])==null?void 0:h.list)==null?void 0:a.filter(x=>(x==null?void 0:x.posType)=="farms"))||[]).reduce((x,g)=>{var y,B;const m=i[g==null?void 0:g.posId],v=o((y=s==null?void 0:s.displayTokenA)==null?void 0:y.coin_type,m==null?void 0:m.displayCoinAmountA,"--"),_=o((B=s==null?void 0:s.displayTokenB)==null?void 0:B.coin_type,m==null?void 0:m.displayCoinAmountB,"--");return x=="--"||v=="--"||_=="--"?"--":E(x).plus(v).plus(_).toString()},"0")},[r,(T=Object.values(i))==null?void 0:T.length,l,t==null?void 0:t.address]),[b,c]=p.useState(""),j=p.useMemo(()=>{var a,k;const h=((k=(a=d==null?void 0:d[s==null?void 0:s.poolAddress])==null?void 0:a.list)==null?void 0:k.filter(x=>x.posType!=="burn").sort((x,g)=>Number(g.liquidity)-Number(x.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",h),h},[s==null?void 0:s.poolAddress,d]);return p.useEffect(()=>{const h=j==null?void 0:j.filter(a=>a.posType=="farms");c(h==null?void 0:h.length.toString())},[j]),e.jsx(e.Fragment,{children:t!=null&&t.address?e.jsxs(R,{align:"flex-end",children:[e.jsx(M,{isLoaded:!!n,children:e.jsx(A,{textColor:"text_caption",fontWeight:"500",textAlign:"right",lineHeight:"1",children:Y(n,2)})}),Number(b)>0&&e.jsx(M,{isLoaded:!!n,children:e.jsxs(A,{fontWeight:"500",bg:"position_farms_bg",color:"position_farms_color",fontSize:"12px",borderRadius:"8px",padding:"2px 10px",lineHeight:"1",children:[b," ",Number(b)>1?"Positions":"Position"]})})]}):e.jsx(A,{textColor:"text_caption",textAlign:"right",children:"--"})})}function $({apiInfo:s,disabled:t}){const{currentAccount:o}=F(),{posBaseListGroupByPool:l}=q(),{getPositionBaseList:i}=ls(),{toClaimAllPos:r,claimLoading:d}=ds(),n=async()=>{await i(o==null?void 0:o.address,{isFarmsPage:!0})},b=()=>{var c;r((c=l[s==null?void 0:s.poolAddress])==null?void 0:c.list,n)};return e.jsx(N,{onClick:c=>{I(c),b()},isLoading:d,isDisabled:t||d,w:{base:"64px",lg:"100px"},h:{base:"24px",lg:"32px"},borderRadius:"8px",variant:"outline",fontSize:"14px",children:"Claim"})}function gs({isOpen:s,apiInfo:t,disabled:o}){return e.jsxs(V,{justify:"flex-end",gap:"20px",children:[e.jsx($,{apiInfo:t,disabled:o}),e.jsx(N,{w:"32px",h:"90px",borderRadius:"8px",variant:"ghost",p:"0 !important",sx:{_hover:{svg:{fill:"text_caption"}}},children:e.jsx(ss,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:s?"rotate(180deg)":"rotate(0deg)"})})]})}function hs({apiInfo:s,disabled:t,totalEarned:o}){const{isApp:l}=es();return e.jsxs(V,{justify:"flex-end",children:[e.jsx(M,{isLoaded:!!o,children:e.jsx(A,{textColor:"primary_yellow",textAlign:"right",fontWeight:"500",children:Y(o,2)})}),l&&e.jsx($,{apiInfo:s,disabled:t})]})}function ms({apiInfo:s}){const t=p.useMemo(()=>{if((s==null?void 0:s.displayFarmsEffectMaxPrice)!=="âˆž")return E(1).div(s==null?void 0:s.displayFarmsEffectMaxPrice).toString()},[s==null?void 0:s.displayFarmsEffectMaxPrice]),o=p.useMemo(()=>{if(E(s==null?void 0:s.displayFarmsEffectMinPrice).gt(0))return E(1).div(s==null?void 0:s.displayFarmsEffectMinPrice).toString()},[s==null?void 0:s.displayFarmsEffectMinPrice]);return e.jsxs(R,{align:"flex-start",gap:"8px",w:{base:"100%",lg:"unset"},children:[e.jsx(G,{m:"-12px 0",children:e.jsx(is,{poolInfo:{...s,poolAddress:s==null?void 0:s.farmsPoolAddress,poolType:"clmm"},symbolFontSize:"15px",versionBlockPosition:"right",poolType:"clmm",showPoolTypeTag:!0,type:"column"})}),e.jsx(V,{maxW:"100%",display:"inline-block",w:{base:"100%",lg:"unset"},borderRadius:"12px",bg:"position_status_bg",p:"7px 12px",children:e.jsxs(R,{align:"flex-start",gap:"0px",w:{base:"100%",lg:"unset"},children:[e.jsx(A,{fontSize:"12px",color:"primary_gray",children:"Valid Range"}),e.jsx(ns,{symbolEllipsesDecimals:10,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,fontWeight:"500",priceInfo:{minPrice:w(s==null?void 0:s.displayFarmsEffectMinPrice).toString(),maxPrice:w(s==null?void 0:s.displayFarmsEffectMaxPrice).toString(),minPriceResever:w(t).toString(),maxPriceResever:w(o).toString()}})]})})]})}function us({apiInfo:s}){H();const{getTokenAmountValue:t}=O(),{coinPriceObj:o}=L();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{currentAccount:l,onWalletModal:i}=F(),[r,d]=p.useState({}),{farmsPosRewardsDataLoading:n,farmsPosRewardsData:b,posBaseListLoading:c,posBaseListGroupByPool:j}=q(),T=p.useMemo(()=>{var a;if(!(l!=null&&l.address)||!(s!=null&&s.poolAddress))return"--";if(!c&&!n)return(((a=j[s.poolAddress])==null?void 0:a.list)||[]).reduce((x,g)=>{const m=b[g==null?void 0:g.id]||[];console.log("ðŸš€ ~ returnposBaseList.reduce ~ posFarmsData:",x,m);const v=m.reduce((_,y)=>{if(_==="--")return"--";const B=t(y==null?void 0:y.token.coin_type,y==null?void 0:y.display_amount_owed,"--");return B==="--"?"--":C(_).plus(B).toString()},"0");return x==="--"||v==="--"?"--":C(x).plus(v).toString()},"0")},[c,b,n,o,l==null?void 0:l.address]),h=p.useMemo(()=>{var k,x;const a=((x=(k=j==null?void 0:j[s==null?void 0:s.poolAddress])==null?void 0:k.list)==null?void 0:x.filter(g=>g.posType!=="burn").sort((g,m)=>Number(m.liquidity)-Number(g.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",a),a},[s==null?void 0:s.poolAddress,j]);return e.jsxs(z.Fragment,{children:[e.jsxs(S,{cursor:"pointer",onClick:()=>{r[s==null?void 0:s.poolAddress]?r[s==null?void 0:s.poolAddress]=!1:r[s==null?void 0:s.poolAddress]=!0,d({...r})},sx:{td:{pb:r[s==null?void 0:s.poolAddress]?"20px !important":"16px !important"}},children:[e.jsx(u,{w:"30%",children:e.jsx(ms,{apiInfo:s})}),e.jsx(u,{textAlign:"right",children:e.jsx(A,{fontWeight:"500",textColor:"text_caption",textAlign:"right",children:s==null?void 0:s.farmsStatedTvlDisplay})}),e.jsx(u,{textAlign:"right",children:e.jsx(os,{poolInfo:s,isPosition:!0})}),e.jsx(u,{textAlign:"right",children:e.jsx(cs,{apiInfo:s})}),e.jsx(u,{textAlign:"right",children:e.jsx(as,{apiInfo:s})}),e.jsx(u,{textAlign:"right",children:e.jsx(hs,{totalEarned:T,apiInfo:s,disabled:T=="--"?!0:C(T).lte(0)})}),e.jsx(u,{textAlign:"right",children:e.jsx(gs,{isOpen:r[s==null?void 0:s.poolAddress],apiInfo:s,disabled:T=="--"?!0:C(T).lte(0)})})]}),!r[s==null?void 0:s.poolAddress]&&e.jsx(S,{h:"16px"}),e.jsx(S,{position:"relative",top:"-20px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:r[s==null?void 0:s.poolAddress]&&e.jsx(u,{colSpan:7,children:e.jsx(js,{expendList:h,apiInfo:s})})})]},s==null?void 0:s.poolAddress)}const js=({expendList:s,apiInfo:t})=>{const o=H(),{currentAccount:l,onWalletModal:i}=F(),{setBackUrl:r}=ts();return e.jsxs(rs,{overflow:"hidden",bg:{base:"bg_fifth",lg:"bg_secondary"},p:{base:"0px",lg:"16px"},borderTop:{lg:"none"},borderRadius:{base:"8px",lg:" 0 0 16px 16px "},children:[e.jsx(R,{overflow:"auto",h:l!=null&&l.address&&s&&(s==null?void 0:s.length)>2?"250px":"unset",children:l!=null&&l.address?(s==null?void 0:s.length)==0?e.jsx(W,{type:"nodata",text:"No Position Found",p:{base:"16px",lg:"20px"},border:{base:"none",lg:"1px solid"},borderColor:"border !important",borderRadius:{base:"8px",lg:"12px"},children:e.jsxs(R,{gap:"4px",mt:"-4px",children:[e.jsx(A,{fontSize:"12px",w:{base:"100%",lg:"380px"},lineHeight:{base:"16px",lg:"unset"},textAlign:"center",children:"Stake liquidity position to earn farming rewards. To get the position for this pool, you should provide liquidity to this pool first."}),e.jsx(N,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"36px",fontSize:"12px",onClick:()=>{r("/farms"),o(`/clmm?poolAddress=${t==null?void 0:t.poolAddress}`)},children:"Create a Position"})]})}):s==null?void 0:s.map((d,n)=>(console.log("ðŸš€ ~ expendList.map ~ item:",d),e.jsx(z.Fragment,{children:e.jsx(xs,{positionInfo:d,apiInfo:t})},n))):e.jsx(W,{type:"nowallet",onboard:()=>{i(!0)}})}),(s==null?void 0:s.length)>0&&(l==null?void 0:l.address)&&e.jsx(Q,{pb:{base:"12px",lg:"0"},children:e.jsx(N,{mt:{base:"12px",lg:"16px"},fontSize:"14px",onClick:d=>{r("/farms"),o(`/clmm?poolAddress=${t==null?void 0:t.poolAddress}`)},h:"32px",p:"0 16px",borderRadius:"8px",variant:"outline",children:"+ Create a position"})})]})};function _s({dataList:s,showSkeletonLoading:t,currTabLabel:o}){const{currentAccount:l,onWalletModal:i}=F();return e.jsxs(U,{variant:"simple_list",w:"100%",children:[e.jsx(J,{children:e.jsxs(S,{children:[e.jsx(P,{children:"Pools"}),e.jsx(P,{textAlign:"right",children:"Staked TVL"}),e.jsx(P,{textAlign:"right",children:"APR"}),e.jsx(P,{textAlign:"right",children:"Rewards / day"}),e.jsx(P,{textAlign:"right",children:"Your Staked"}),e.jsx(P,{textAlign:"right",children:"Your Earned"}),e.jsx(P,{textAlign:"right",children:"Actions"})]})}),e.jsx(K,{children:o=="Your Farms"&&!(l!=null&&l.address)?e.jsx(S,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(u,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nowallet",onboard:()=>{i(!0)}})})}):t?e.jsx(bs,{itemList:[1,2,3],skeletonNum:7,skeletonW:["200px","110px","100px","100px","100px","100px","100px"]}):s.length===0?e.jsx(S,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(u,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nodata",text:"No farms found"})})}):s.map(r=>e.jsx(us,{apiInfo:r},r.poolAddress))})]})}function bs({itemList:s,skeletonNum:t,skeletonW:o,rowStyle:l,isPreMode:i}){const r=(d,n)=>Array.from({length:d}).map((b,c)=>e.jsx(u,{textAlign:"right",children:e.jsx(X,{justify:c==0?"flex-start":"flex-end",children:e.jsx(M,{w:n?n[c]:i?"100px":"200px"})})},c));return s.map(d=>e.jsxs(z.Fragment,{children:[e.jsx(S,{h:"90px",...l,children:r(t,o)}),e.jsx(S,{h:"16px"})]},d))}export{js as F,cs as R,as as S,hs as T,ms as V,_s as a,bs as b};
