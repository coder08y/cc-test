import{a as A,d as oe,f as re}from"./useSwapHelper-CDwInMwe.js";import{M as ie,z as U,t as ne,d as se,I as H,c as ae,a as le,E as ce,ad as pe}from"./index-ihcskjKt.js";import"./cross-CbhIs7DK.js";import{r as i,j as t,V as C,H as x,T as w,B as de,w as _}from"./vendor-CBmAETR3.js";import{u as E}from"./usePriceImpact-C25MtScm.js";import{C as L}from"./CurrentPrice-CQbowz6j.js";import{P as V}from"./PriceImpact-BZtd4YV2.js";import{O as ue,R as xe,c as fe}from"./useGetRouterConfig-BJd6LFl8.js";import{u as me,S as be}from"./SolidPieCountdown-B9kgZHE-.js";import{u as he}from"./index-CLM3E_Q3.js";import{H as B}from"./HTextLabelBox-Cv1F2u1A.js";import{T as ge}from"./TradeConfirmAmountInfo-D6pugXWx.js";function Pe(c,p,s,n,u,o){const{currentAccount:a}=ie(),l=i.useMemo(()=>{const e={text:"Swap",disabled:!1};if(!(a!=null&&a.address))return e.text="Connect Wallet",e.disabled=!1,e;if(!n||!u)return e.text="Select a token",e.disabled=!0,e;if(!+c&&!+p)return e.text="Enter an amount",e.disabled=!0,e;if(o&&o.errorCode){if(o.errorCode===A.InsufficientLiquidity)return e.text="Insufficient liquidity for this trade",e.disabled=!0,e;if(o.errorCode===A.NoRouter||o.errorCode===A.HoneyPot)return e.text="No Available Route",e.disabled=!0,e}return+c&&U(c).gt(s||0)?(e.disabled=!0,e.text=`Insufficient ${ne(n==null?void 0:n.symbol,10)} Balance`,e):((!+c||!+p)&&(e.disabled=!0),e)},[a==null?void 0:a.address,c,p,s,o==null?void 0:o.errorCode,n,u]);return{btnText:l.text,btnDisabled:l.disabled}}function Ae(c){const{fromCoin:p,toCoin:s,findRouterLoading:n,isWidget:u=!1,routerData:o,bg:a="primary_opacity.10"}=c,{marketPrice:l,priceImpact:e,sources:h,priceImpactTextInfo:f,showIncalculable:d}=E(p,s,o==null?void 0:o.fromAmountUi,o==null?void 0:o.toAmountUi);return t.jsxs(C,{w:"100%",p:"8px",gap:"8px",bg:a,borderRadius:"12px",align:"flex-start",children:[t.jsx(L,{fromToken:p,toToken:s,fromValue:o==null?void 0:o.fromAmountUi,toValue:o==null?void 0:o.toAmountUi,isLoading:n,color:"text_caption",fontSize:u?"12px":"14px"}),!d&&se(e).lte(-30)&&t.jsxs(x,{w:"100%",justify:"flex-start",children:[t.jsx(H,{xlinkHref:"#icon-warning",svgFill:"primary_red",svgHover:"primary_red",fontSize:"16px"}),t.jsx(w,{color:"primary_red",fontSize:"12px",lineHeight:"20px",fontWeight:"500",children:"High price difference. Be cautious before submitting your order."})]}),t.jsx(V,{fromToken:p,isWidget:u,toToken:s,marketPrice:l,priceImpact:f,isLoading:n,sources:h,showIncalculable:d})]})}function He(c){const{data:p,allProviders:s,findRouterLoading:n,fromAmount:u,toAmount:o,fromCoin:a,toCoin:l,isSwapWidget:e=!1,handleSwapWidgetRouterClick:h}=c,[f,d]=i.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsxs(x,{w:"100%",justify:"space-between",align:"flex-start",p:"0 8px",mt:"2px",children:[t.jsx(w,{fontSize:e?"12px":"14px",fontWeight:"500",whiteSpace:"nowrap",children:"Auto Router"}),t.jsx(de,{mt:"-2px",onClick:b=>{ae(b),e?h&&h():d(!f)},cursor:"pointer",children:t.jsx(ue,{allProviders:s,loading:n,isSwapWidget:e,children:t.jsx(H,{xlinkHref:"#icon-icon_spread",fontSize:"16px"})})})]}),f&&!e&&t.jsx(xe,{isOpen:f,onClose:()=>d(!1),fromCoin:a,toCoin:l,allProviders:s,data:p,fromAmount:u,toAmount:o})]})}function Me(c){var W;const{lastRouterData:p,fromCoin:s,toCoin:n,onClose:u,data:o,handleRouterSwap:a,isWidget:l,isSelectedRfq:e=!1,rftCountdownFlagRef:h}=c,{slippage:f}=le(),d=me(h),[b,N]=i.useState(!1),I=i.useRef(!1),[r,O]=i.useState(o),k=i.useMemo(()=>r==null?void 0:r.fromAmountUi,[r]),R=i.useMemo(()=>r==null?void 0:r.toAmountUi,[r]),m=i.useMemo(()=>e?void 0:r,[r]),v=i.useMemo(()=>e?r:void 0,[r]),{amountLimit:F}=oe(f,m),[T,q]=i.useState(!1);i.useEffect(()=>{d!==void 0&&d<=0&&N(!0)},[d]);const{priceImpactTextInfo:$,marketPrice:G,sources:Q,showPriceImpactTips:Y,showPriceImpactWarn:S,showIncalculable:J}=E(s,n,k,R),{priceAcceptRouterData:j}=re(m,p),[M,K]=i.useState(!1),z=i.useMemo(()=>e?!1:j!==void 0,[j,e]),g=i.useMemo(()=>m!=null&&m.byAmountIn?n:s,[r]),X=()=>{if(j){if(I.current)return;I.current=!0;const te=fe(j);O({...te}),setTimeout(()=>{I.current=!1},300)}},Z=i.useMemo(()=>T?!1:!!S,[T,S]),D=i.useMemo(()=>e?!b:!z,[e,b,z]),{isProMode:P,currentProTab:y}=he(),ee=i.useMemo(()=>e?"Trade":P&&!l?y:"Confirm Swap",[e,P,l,y]);return t.jsxs(C,{textAlign:"center",gap:"0px",p:"0px",w:"100%",children:[t.jsxs(C,{w:"100%",gap:"16px",pl:"16px",pr:"16px",pb:e?"12px":"24px",children:[t.jsx(ge,{bg:l?"swap_bg_primary":"bg_primary",coinA:{amount:k||"0",...s},iconParams:{xlinkHref:"#icon-a-icon_trade",svgFill:"text_caption",fontSize:"12px"},coinB:{amount:R||"0",...n}}),t.jsx(x,{w:"100%",minH:"48px",bg:l?"swap_bg_primary":"bg_primary",borderRadius:"8px",border:"1px solid",borderColor:"border",justifyContent:"center",zIndex:"100",children:t.jsx(L,{fromToken:s,toToken:n,fromValue:k,toValue:R,color:"text_caption"})}),Y&&t.jsx(x,{zIndex:"99",w:"100%",mt:"-26px",bg:S?"primary_red_opacity.10":"primary_yellow_opacity.10",borderRadius:"12px",border:"1px solid",borderColor:"border",justifyContent:"center",p:"18px 16px 10px",children:t.jsx(w,{color:S?"primary_red":"primary_yellow",fontSize:"12px",lineHeight:"20px",textAlign:"start",fontWeight:"500",children:"High price difference. Be cautious before submitting your order."})}),!e&&t.jsx(B,{wrapStyle:{h:"20px",lineHeight:"20px"},label:"Slippage Tolerance",labelStyle:{fontSize:"14px"},value:`${U(f).mul(100)}%`,valueStyle:{fontSize:"14px"}}),!e&&t.jsx(B,{wrapStyle:{h:"20px",lineHeight:"20px"},label:m!=null&&m.byAmountIn?"Minimum Received":"Maximum Input",labelStyle:{fontSize:"14px"},value:`${ce(F||0,g==null?void 0:g.decimals,!1,pe.ROUND_DOWN).toString()} ${g==null?void 0:g.symbol}`,valueStyle:{fontSize:"14px"}}),t.jsx(V,{fromToken:s,toToken:n,sources:Q,marketPrice:G,priceImpact:$,showIncalculable:J}),S&&t.jsxs(C,{w:"100%",gap:"8px",children:[t.jsx(x,{w:"100%",bg:"primary_red_opacity.10",borderRadius:"12px",border:"1px solid",borderColor:"border",justifyContent:"start",p:"10px 16px",children:t.jsx(w,{color:"primary_red",fontSize:"12px",lineHeight:"20px",textAlign:"start",children:"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?"})}),t.jsxs(x,{w:"100%",justifyContent:"space-between",gap:"16px",children:[t.jsx(_,{variant:"outline",w:"100%",color:"text_highlight",fontSize:"14px",borderColor:T?"text_highlight":"button_outline_border",onClick:()=>{q(!0)},children:"Yes, please continue."}),t.jsx(_,{variant:"outline",w:"100%",color:"text_highlight",fontSize:"14px",borderColor:"button_outline_border",onClick:()=>u(),children:"No,cancel it."})]})]}),z&&!e&&t.jsxs(x,{w:"100%",justifyContent:"space-between",children:[t.jsxs(x,{children:[t.jsx(H,{xlinkHref:"#icon-icon_priceupdated1",svgW:"20px",svgH:"20px"}),t.jsx(w,{color:"text_caption",fontWeight:"500",fontSize:"14px",children:"Price updated"})]}),t.jsx(_,{onClick:X,h:"40px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",p:"0 42px",children:"Accept"})]}),e&&t.jsxs(x,{mt:"-4px",w:"100%",h:"40px",bg:b?"primary_yellow_opacity.10":"rfq_72C1F7_10",borderRadius:"12px",justify:"center",align:"center",children:[!b&&t.jsx(be,{rftCountdownFlag:d,totalSeconds:Number(((W=v==null?void 0:v.rfqQuote)==null?void 0:W.total_countdown)||0)}),b&&t.jsx(w,{color:"primary_yellow",fontWeight:"400",fontSize:"12px",children:"Cetus Tide offer expired, please request again."})]})]}),D&&t.jsx(_,{isDisabled:Z,isLoading:M,mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",variant:P&&!l&&!e?`solid-${y==null?void 0:y.toLocaleLowerCase()}`:"solid",onClick:()=>{M||(K(!0),a(r))},children:ee})]})}export{Ae as P,Me as S,He as a,Pe as u};
//# sourceMappingURL=SwapConfirmBlock-CoF0IzuN.js.map
