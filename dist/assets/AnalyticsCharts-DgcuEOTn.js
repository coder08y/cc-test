import{r as n,j as s,V as L,B as y,H as F,T as j,Z as $,C as B}from"./vendor-CBmAETR3.js";import{T as O}from"./TvlChart-CvwfzX_q.js";import{u as G,a as N,b as Q,V as U}from"./VolumeChart-4aQuhpLt.js";import{C as Z}from"./CoinPairInfo-BkYX588i.js";import{u as J}from"./index-WISx45d8.js";import{aq as K,l as v,u as X,a as Y,w as S,a5 as E,d as A,ai as V,I as P}from"./index-Lo8eQgA0.js";var w=(e=>(e.volume="Volume",e.tvl="TVL",e.fees="Fees",e))(w||{}),H=(e=>(e.volume="vol",e.tvl="tvl",e.fees="fee",e))(H||{}),R=(e=>(e.d="D",e.w="W",e.m="M",e))(R||{}),M=(e=>(e.d="day",e.w="wek",e.m="mon",e))(M||{});const I={D:40,W:30,M:20};function ee(e){const[c,p]=n.useState("Volume"),[u,d]=n.useState("D"),[C,x]=n.useState([]),{apiPoolInfo:b}=J(),[m,r]=n.useState(!0),[l,o]=n.useState(null),{getHistogramData:h}=G(),{poolAddress:g}=K(),{getHoverTime:T,time:f}=N(),i=n.useMemo(()=>v(e)?e==null?void 0:e.poolAddress:g,[g,e]),t=n.useMemo(()=>v(e)?e:b,[b,e]);n.useLayoutEffect(()=>{x([]),p("Volume"),d("D"),o(null)},[i]);const D=async()=>{if(i)try{r(!0);const a=await h({date_type:M[u.toLowerCase()],type:H[c.toLowerCase()],limit:I[u],address:i});a&&a.length&&x(a)}catch(a){throw console.error(a,"res-fetchAnalyticsData"),a}finally{r(!1)}};n.useEffect(()=>{D()},[i,c,u]),n.useEffect(()=>{l!=null&&l.date&&T(l==null?void 0:l.date,u)},[l==null?void 0:l.date,u]);const _=a=>{p(a.label),a.label!==c&&x([])},q=a=>{d(a.label),a.label!==u&&x([])},k=n.useMemo(()=>{if(c==="Volume")return{value:t==null?void 0:t.volume24Display,title:"Volume (24H)"};if(c==="TVL")return{value:t==null?void 0:t.tvlDisplay,title:"TVL"};if(c==="Fees")return{value:t==null?void 0:t.fees24Display,title:"Fees (24H)"}},[c,t==null?void 0:t.volume24Display,t==null?void 0:t.tvlDisplay,t==null?void 0:t.fees24Display]),W=Object.values(w).map(a=>({label:a})),z=Object.values(R).map(a=>({label:a}));return{handleChartTabChange:_,handleDateTabChange:q,defaultDisplay:k,chartsTabs:W,dateTypes:z,chartLoading:m,analyticsData:C,hoverData:l,setHoverData:o,currentChartTab:c,currentDateType:u,time:f}}function ne({poolInfo:e}){const{isApp:c}=X(),{handleChartTabChange:p,handleDateTabChange:u,defaultDisplay:d,chartsTabs:C,dateTypes:x,chartLoading:b,analyticsData:m,hoverData:r,setHoverData:l,currentChartTab:o,currentDateType:h,time:g}=ee(e),{setBackUrl:T}=Y(),{goLiquidity:f}=Q(),i=n.useMemo(()=>v(e),[e]);return s.jsxs(L,{align:"flex-start",flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[i&&s.jsx(y,{m:{base:"0 0 -12px 0",lg:"-12px 0"},children:s.jsx(Z,{poolInfo:e,symbolFontSize:"16px"})}),s.jsxs(F,{w:"100%",justify:{base:"center",lg:"space-between"},children:[s.jsx(S,{type:"outlineTab",tabList:C,currentTab:o,handleChangeTab:p,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!c&&s.jsx(S,{type:"outlineTab",tabList:x,currentTab:h,handleChangeTab:u,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),s.jsxs(L,{w:"100%",align:"flex-start",children:[s.jsx(j,{color:"text_caption",fontWeight:i?"500":"400",fontSize:i?"20px":"24px",children:(r==null?void 0:r.num)!==void 0&&r!==null?A(V(r.num)).gte("0.01")||A(V(r.num)).equals("0")?`$${E(r==null?void 0:r.num,2)}`:"<$0.01":d==null?void 0:d.value}),s.jsx(j,{children:r!=null&&r.date?g:d==null?void 0:d.title}),c&&s.jsx(S,{type:"outlineTab",tabList:x,currentTab:h,handleChangeTab:u,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),s.jsx(y,{w:"100%",h:i?"240px":"340px",mt:i?"0px":"20px",p:i?"8px":"0px",bg:i?"rgba(255,255,255,0.05)":"none",borderRadius:"8px",children:s.jsx(y,{w:"100%",h:"100%",position:"relative",children:b?s.jsx(y,{position:"absolute",top:i?"50%":"30%",left:"50%",transform:"translate(-50%,-50%)",children:s.jsx($,{})}):o===w.tvl?s.jsx(O,{data:m,onChangeValue:t=>l(t)}):s.jsx(U,{data:m,onChangeValue:t=>l(t),pageFrom:"pools"})})}),i&&s.jsx(B,{cursor:"pointer",w:"100%",mb:{base:"12px",lg:"0"},children:s.jsxs(j,{display:"flex",align:"center",lineHeight:"18px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption !important"}}},fontWeight:"500",borderRadius:"8px",onClick:()=>{T("/pools"),f(`/clmm?tab=analytics&poolAddress=${e==null?void 0:e.poolAddress}`,e)},children:["More details",s.jsx(P,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(90deg)"})]})})]})}export{ne as A};
