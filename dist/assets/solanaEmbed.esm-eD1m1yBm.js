import{aN as Pt,w as Zn,b as Ze,P as Qi}from"./cross-J9VCREIf.js";import{_ as qe}from"./objectSpread2-B-AaJtUa.js";import{a as pn,c as jt,g as al,a3 as te}from"./vendor-CBmAETR3.js";import{e5 as wn,ft as ll}from"./index-Lo8eQgA0.js";import{s as ul,d as bt}from"./index-BrJeOMXQ.js";import{H as fl,h as cl,t as dl,e as eo,b as hl,r as gl,c as pl,s as wl}from"./sha256-mf02Y2l5.js";var bs={exports:{}},Pr={exports:{}};let bl=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let r=0;r<t.length;r++)n+=`    ${t[r].stack}
`;super(n),this.name="AggregateError",this.errors=t}};var ye={AggregateError:bl,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},ys={exports:{}},_s={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format:yl,inspect:Jn}=_s,{AggregateError:_l}=ye,ml=globalThis.AggregateError||_l,El=Symbol("kIsNodeError"),Sl=["string","function","number","object","Function","Object","boolean","bigint","symbol"],vl=/^([A-Z][a-z0-9]*)+$/,Al="__node_internal_",nr={};function Nt(e,t){if(!e)throw new nr.ERR_INTERNAL_ASSERTION(t)}function to(e){let t="",n=e.length;const r=e[0]==="-"?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function Rl(e,t,n){if(typeof t=="function")return Nt(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const r=(t.match(/%[dfijoOs]/g)||[]).length;return Nt(r===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?t:yl(t,...n)}function Ne(e,t,n){n||(n=Error);class r extends n{constructor(...o){super(Rl(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[El]=!0,nr[e]=r}function no(e){const t=Al+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Il(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new ml([t,e],t.message);return n.code=t.code,n}return e||t}let Tl=class extends Error{constructor(t="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new nr.ERR_INVALID_ARG_TYPE("options","Object",n);super(t,n),this.code="ABORT_ERR",this.name="AbortError"}};Ne("ERR_ASSERTION","%s",Error);Ne("ERR_INVALID_ARG_TYPE",(e,t,n)=>{Nt(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const i=[],o=[],a=[];for(const p of t)Nt(typeof p=="string","All expected entries have to be of type string"),Sl.includes(p)?i.push(p.toLowerCase()):vl.test(p)?o.push(p):(Nt(p!=="object",'The value "object" should be written as "Object"'),a.push(p));if(o.length>0){const p=i.indexOf("object");p!==-1&&(i.splice(i,p,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const p=i.pop();r+=`one of type ${i.join(", ")}, or ${p}`}}(o.length>0||a.length>0)&&(r+=" or ")}if(o.length>0){switch(o.length){case 1:r+=`an instance of ${o[0]}`;break;case 2:r+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const p=o.pop();r+=`an instance of ${o.join(", ")}, or ${p}`}}a.length>0&&(r+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(r+="an "),r+=`${a[0]}`;break;case 2:r+=`one of ${a[0]} or ${a[1]}`;break;default:{const p=a.pop();r+=`one of ${a.join(", ")}, or ${p}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var c;if((c=n.constructor)!==null&&c!==void 0&&c.name)r+=`. Received an instance of ${n.constructor.name}`;else{const p=Jn(n,{depth:-1});r+=`. Received ${p}`}}else{let p=Jn(n,{colors:!1});p.length>25&&(p=`${p.slice(0,25)}...`),r+=`. Received type ${typeof n} (${p})`}return r},TypeError);Ne("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=Jn(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError);Ne("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;const i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);Ne("ERR_MISSING_ARGS",(...e)=>{Nt(e.length>0,"At least one arg needs to be specified");let t;const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(r=>`"${r}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}break}return`${t} must be specified`},TypeError);Ne("ERR_OUT_OF_RANGE",(e,t,n)=>{Nt(t,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=to(String(n));else if(typeof n=="bigint"){r=String(n);const i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=to(r)),r+="n"}else r=Jn(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError);Ne("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ne("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ne("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ne("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ne("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ne("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ne("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ne("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ne("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ne("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ne("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var xe={AbortError:Tl,aggregateTwoErrors:no(Il),hideStackFrames:no,codes:nr},sn={exports:{}},ro;function dn(){if(ro)return sn.exports;ro=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return sn.exports=e,sn.exports.AbortSignal=t,sn.exports.default=e,sn.exports}(function(e){const t=Pt,{format:n,inspect:r}=_s,{codes:{ERR_INVALID_ARG_TYPE:i}}=xe,{kResistStopPropagation:o,AggregateError:a,SymbolDispose:c}=ye,p=globalThis.AbortSignal||dn().AbortSignal,d=globalThis.AbortController||dn().AbortController,A=Object.getPrototypeOf(async function(){}).constructor,L=globalThis.Blob||t.Blob,D=typeof L<"u"?function(I){return I instanceof L}:function(I){return!1},B=(m,I)=>{if(m!==void 0&&(m===null||typeof m!="object"||!("aborted"in m)))throw new i(I,"AbortSignal",m)},W=(m,I)=>{if(typeof m!="function")throw new i(I,"Function",m)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(m){let I=!1;return function(...N){I||(I=!0,m.apply(this,N))}},createDeferredPromise:function(){let m,I;return{promise:new Promise((R,P)=>{m=R,I=P}),resolve:m,reject:I}},promisify(m){return new Promise((I,N)=>{m((R,...P)=>R?N(R):I(...P))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(m){return m instanceof A},isArrayBufferView(m){return ArrayBuffer.isView(m)}},isBlob:D,deprecate(m,I){return m},addAbortListener:wn.addAbortListener||function(I,N){if(I===void 0)throw new i("signal","AbortSignal",I);B(I,"signal"),W(N,"listener");let R;return I.aborted?queueMicrotask(()=>N()):(I.addEventListener("abort",N,{__proto__:null,once:!0,[o]:!0}),R=()=>{I.removeEventListener("abort",N)}),{__proto__:null,[c](){var P;(P=R)===null||P===void 0||P()}}},AbortSignalAny:p.any||function(I){if(I.length===1)return I[0];const N=new d,R=()=>N.abort();return I.forEach(P=>{B(P,"signals"),P.addEventListener("abort",R,{once:!0})}),N.signal.addEventListener("abort",()=>{I.forEach(P=>P.removeEventListener("abort",R))},{once:!0}),N.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(ys);var Be=ys.exports,Si={};const{ArrayIsArray:ms,ArrayPrototypeIncludes:Ol,ArrayPrototypeJoin:Nl,ArrayPrototypeMap:xl,NumberIsInteger:vi,NumberIsNaN:lh,NumberMAX_SAFE_INTEGER:Cl,NumberMIN_SAFE_INTEGER:Ll,NumberParseInt:uh,ObjectPrototypeHasOwnProperty:Pl,RegExpPrototypeExec:fh,String:Ml,StringPrototypeToUpperCase:ch,StringPrototypeTrim:dh}=ye,{hideStackFrames:He,codes:{ERR_SOCKET_BAD_PORT:hh,ERR_INVALID_ARG_TYPE:Ge,ERR_INVALID_ARG_VALUE:Es,ERR_OUT_OF_RANGE:Ht,ERR_UNKNOWN_SIGNAL:gh}}=xe,{normalizeEncoding:ph}=Be,{isAsyncFunction:Bl,isArrayBufferView:$l}=Be.types,Dl=He((e,t,n=Ll,r=Cl)=>{if(typeof e!="number")throw new Ge(t,"number",e);if(!vi(e))throw new Ht(t,"an integer",e);if(e<n||e>r)throw new Ht(t,`>= ${n} && <= ${r}`,e)});He((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!="number")throw new Ge(t,"number",e);if(!vi(e))throw new Ht(t,"an integer",e);if(e<n||e>r)throw new Ht(t,`>= ${n} && <= ${r}`,e)});He((e,t,n=!1)=>{if(typeof e!="number")throw new Ge(t,"number",e);if(!vi(e))throw new Ht(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new Ht(t,`>= ${r} && <= ${i}`,e)});He((e,t,n)=>{if(!Ol(n,e)){const i="must be one of: "+Nl(xl(n,o=>typeof o=="string"?`'${o}'`:Ml(o)),", ");throw new Es(t,e,i)}});function kl(e,t){if(typeof e!="boolean")throw new Ge(t,"boolean",e)}function Mr(e,t,n){return e==null||!Pl(e,t)?n:e[t]}const Wl=He((e,t,n=null)=>{const r=Mr(n,"allowArray",!1),i=Mr(n,"allowFunction",!1);if(!Mr(n,"nullable",!1)&&e===null||!r&&ms(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new Ge(t,"Object",e)});He((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new Ge(t,"a dictionary",e)});He((e,t,n=0)=>{if(!ms(e))throw new Ge(t,"Array",e);if(e.length<n){const r=`must be longer than ${n}`;throw new Es(t,e,r)}});He((e,t="buffer")=>{if(!$l(e))throw new Ge(t,["Buffer","TypedArray","DataView"],e)});const Ul=He((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new Ge(t,"AbortSignal",e)}),jl=He((e,t)=>{if(typeof e!="function")throw new Ge(t,"Function",e)});He((e,t)=>{if(typeof e!="function"||Bl(e))throw new Ge(t,"Function",e)});He((e,t)=>{if(e!==void 0)throw new Ge(t,"undefined",e)});var bn={validateBoolean:kl,validateFunction:jl,validateInteger:Dl,validateObject:Wl,validateAbortSignal:Ul},Ai={exports:{}},yt={};(function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(H){return H&&H.__esModule&&Object.prototype.hasOwnProperty.call(H,"default")?H.default:H}var n={exports:{}},r=n.exports={},i,o;function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=a}catch{i=a}try{typeof clearTimeout=="function"?o=clearTimeout:o=c}catch{o=c}})();function p(H){if(i===setTimeout)return setTimeout(H,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(H,0);try{return i(H,0)}catch{try{return i.call(null,H,0)}catch{return i.call(this,H,0)}}}function d(H){if(o===clearTimeout)return clearTimeout(H);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(H);try{return o(H)}catch{try{return o.call(null,H)}catch{return o.call(this,H)}}}var A=[],L=!1,D,B=-1;function W(){!L||!D||(L=!1,D.length?A=D.concat(A):B=-1,A.length&&m())}function m(){if(!L){var H=p(W);L=!0;for(var j=A.length;j;){for(D=A,A=[];++B<j;)D&&D[B].run();B=-1,j=A.length}D=null,L=!1,d(H)}}r.nextTick=function(H){var j=new Array(arguments.length-1);if(arguments.length>1)for(var G=1;G<arguments.length;G++)j[G-1]=arguments[G];A.push(new I(H,j)),A.length===1&&!L&&p(m)};function I(H,j){this.fun=H,this.array=j}I.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function N(){}r.on=N,r.addListener=N,r.once=N,r.off=N,r.removeListener=N,r.removeAllListeners=N,r.emit=N,r.prependListener=N,r.prependOnceListener=N,r.listeners=function(H){return[]},r.binding=function(H){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(H){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var R=n.exports;const P=t(R);e.default=P,e.process=P})(yt);const{SymbolAsyncIterator:io,SymbolIterator:oo,SymbolFor:Mt}=ye,Ss=Mt("nodejs.stream.destroyed"),Fl=Mt("nodejs.stream.errored"),so=Mt("nodejs.stream.readable"),ao=Mt("nodejs.stream.writable"),ql=Mt("nodejs.stream.disturbed"),Hl=Mt("nodejs.webstream.isClosedPromise"),Gl=Mt("nodejs.webstream.controllerErrorFunction");function Ri(e,t=!1){var n;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((n=e._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!e._writableState||e._readableState))}function rr(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function zl(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function tt(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function vs(e){return!!(e&&!tt(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function As(e){return!!(e&&!tt(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Rs(e){return!!(e&&!tt(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function Vl(e){return vs(e)||As(e)||Rs(e)}function Kl(e,t){return e==null?!1:t===!0?typeof e[io]=="function":t===!1?typeof e[oo]=="function":typeof e[io]=="function"||typeof e[oo]=="function"}function ir(e){if(!tt(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[Ss]||r!=null&&r.destroyed)}function Yl(e){if(!rr(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Zl(e,t){if(!rr(e))return null;if(e.writableFinished===!0)return!0;const n=e._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||t===!1&&n.ended===!0&&n.length===0)}function Is(e,t){if(!Ri(e))return null;const n=e._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0)}function Ts(e){return e&&e[so]!=null?e[so]:typeof(e==null?void 0:e.readable)!="boolean"?null:ir(e)?!1:Ri(e)&&e.readable&&!Is(e)}function Os(e){return e&&e[ao]!=null?e[ao]:typeof(e==null?void 0:e.writable)!="boolean"?null:ir(e)?!1:rr(e)&&e.writable&&!Yl(e)}function Jl(e,t){return tt(e)?ir(e)?!0:!((t==null?void 0:t.readable)!==!1&&Ts(e)||(t==null?void 0:t.writable)!==!1&&Os(e)):null}function Xl(e){var t,n;return tt(e)?e.writableErrored?e.writableErrored:(t=(n=e._writableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function Ql(e){var t,n;return tt(e)?e.readableErrored?e.readableErrored:(t=(n=e._readableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function eu(e){if(!tt(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,n=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(t==null?void 0:t.closed)||(n==null?void 0:n.closed):typeof e._closed=="boolean"&&Ns(e)?e._closed:null}function Ns(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function tu(e){return typeof e._sent100=="boolean"&&Ns(e)}function nu(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function ru(e){if(!tt(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&tu(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function iu(e){var t;return!!(e&&((t=e[ql])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function ou(e){var t,n,r,i,o,a,c,p,d,A;return!!(e&&((t=(n=(r=(i=(o=(a=e[Fl])!==null&&a!==void 0?a:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(c=e._readableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(p=e._writableState)===null||p===void 0?void 0:p.errorEmitted)!==null&&n!==void 0?n:(d=e._readableState)===null||d===void 0?void 0:d.errored)!==null&&t!==void 0?t:!((A=e._writableState)===null||A===void 0)&&A.errored))}var dt={isDestroyed:ir,kIsDestroyed:Ss,isDisturbed:iu,isErrored:ou,isReadable:Ts,kIsClosedPromise:Hl,kControllerErrorFunction:Gl,isClosed:eu,isDuplexNodeStream:zl,isFinished:Jl,isIterable:Kl,isReadableNodeStream:Ri,isReadableStream:vs,isReadableFinished:Is,isReadableErrored:Ql,isNodeStream:tt,isWebStream:Vl,isWritable:Os,isWritableNodeStream:rr,isWritableStream:As,isWritableFinished:Zl,isWritableErrored:Xl,isServerRequest:nu,willEmitClose:ru,isTransformStream:Rs};const pt=yt,{AbortError:xs,codes:su}=xe,{ERR_INVALID_ARG_TYPE:au,ERR_STREAM_PREMATURE_CLOSE:lo}=su,{kEmptyObject:ii,once:oi}=Be,{validateAbortSignal:lu,validateFunction:uu,validateObject:fu,validateBoolean:cu}=bn,{Promise:du,PromisePrototypeThen:hu,SymbolDispose:Cs}=ye,{isClosed:gu,isReadable:uo,isReadableNodeStream:Br,isReadableStream:pu,isReadableFinished:fo,isReadableErrored:co,isWritable:ho,isWritableNodeStream:go,isWritableStream:wu,isWritableFinished:po,isWritableErrored:wo,isNodeStream:bu,willEmitClose:yu,kIsClosedPromise:_u}=dt;let Ft;function mu(e){return e.setHeader&&typeof e.abort=="function"}const si=()=>{};function Ls(e,t,n){var r,i;if(arguments.length===2?(n=t,t=ii):t==null?t=ii:fu(t,"options"),uu(n,"callback"),lu(t.signal,"options.signal"),n=oi(n),pu(e)||wu(e))return Eu(e,t,n);if(!bu(e))throw new au("stream",["ReadableStream","WritableStream","Stream"],e);const o=(r=t.readable)!==null&&r!==void 0?r:Br(e),a=(i=t.writable)!==null&&i!==void 0?i:go(e),c=e._writableState,p=e._readableState,d=()=>{e.writable||D()};let A=yu(e)&&Br(e)===o&&go(e)===a,L=po(e,!1);const D=()=>{L=!0,e.destroyed&&(A=!1),!(A&&(!e.readable||o))&&(!o||B)&&n.call(e)};let B=fo(e,!1);const W=()=>{B=!0,e.destroyed&&(A=!1),!(A&&(!e.writable||a))&&(!a||L)&&n.call(e)},m=j=>{n.call(e,j)};let I=gu(e);const N=()=>{I=!0;const j=wo(e)||co(e);if(j&&typeof j!="boolean")return n.call(e,j);if(o&&!B&&Br(e,!0)&&!fo(e,!1))return n.call(e,new lo);if(a&&!L&&!po(e,!1))return n.call(e,new lo);n.call(e)},R=()=>{I=!0;const j=wo(e)||co(e);if(j&&typeof j!="boolean")return n.call(e,j);n.call(e)},P=()=>{e.req.on("finish",D)};mu(e)?(e.on("complete",D),A||e.on("abort",N),e.req?P():e.on("request",P)):a&&!c&&(e.on("end",d),e.on("close",d)),!A&&typeof e.aborted=="boolean"&&e.on("aborted",N),e.on("end",W),e.on("finish",D),t.error!==!1&&e.on("error",m),e.on("close",N),I?pt.nextTick(N):c!=null&&c.errorEmitted||p!=null&&p.errorEmitted?A||pt.nextTick(R):(!o&&(!A||uo(e))&&(L||ho(e)===!1)||!a&&(!A||ho(e))&&(B||uo(e)===!1)||p&&e.req&&e.aborted)&&pt.nextTick(R);const H=()=>{n=si,e.removeListener("aborted",N),e.removeListener("complete",D),e.removeListener("abort",N),e.removeListener("request",P),e.req&&e.req.removeListener("finish",D),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",D),e.removeListener("end",W),e.removeListener("error",m),e.removeListener("close",N)};if(t.signal&&!I){const j=()=>{const G=n;H(),G.call(e,new xs(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)pt.nextTick(j);else{Ft=Ft||Be.addAbortListener;const G=Ft(t.signal,j),K=n;n=oi((...s)=>{G[Cs](),K.apply(e,s)})}}return H}function Eu(e,t,n){let r=!1,i=si;if(t.signal)if(i=()=>{r=!0,n.call(e,new xs(void 0,{cause:t.signal.reason}))},t.signal.aborted)pt.nextTick(i);else{Ft=Ft||Be.addAbortListener;const a=Ft(t.signal,i),c=n;n=oi((...p)=>{a[Cs](),c.apply(e,p)})}const o=(...a)=>{r||pt.nextTick(()=>n.apply(e,a))};return hu(e[_u].promise,o,o),si}function Su(e,t){var n;let r=!1;return t===null&&(t=ii),(n=t)!==null&&n!==void 0&&n.cleanup&&(cu(t.cleanup,"cleanup"),r=t.cleanup),new du((i,o)=>{const a=Ls(e,t,c=>{r&&a(),c?o(c):i()})})}Ai.exports=Ls;Ai.exports.finished=Su;var _t=Ai.exports;const Qe=yt,{aggregateTwoErrors:vu,codes:{ERR_MULTIPLE_CALLBACK:Au},AbortError:Ru}=xe,{Symbol:Ps}=ye,{kIsDestroyed:Iu,isDestroyed:Tu,isFinished:Ou,isServerRequest:Nu}=dt,Ms=Ps("kDestroy"),ai=Ps("kConstruct");function Bs(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function xu(e,t){const n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof t=="function"&&t(),this):(Bs(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?bo(this,e,t):this.once(Ms,function(o){bo(this,vu(o,e),t)}),this)}function bo(e,t,n){let r=!1;function i(o){if(r)return;r=!0;const a=e._readableState,c=e._writableState;Bs(o,c,a),c&&(c.closed=!0),a&&(a.closed=!0),typeof n=="function"&&n(o),o?Qe.nextTick(Cu,e,o):Qe.nextTick($s,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function Cu(e,t){li(e,t),$s(e)}function $s(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function li(e,t){const n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function Lu(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function ui(e,t,n){const r=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),r&&!r.errored&&(r.errored=t),n?Qe.nextTick(li,e,t):li(e,t))}function Pu(e,t){if(typeof e._construct!="function")return;const n=e._readableState,r=e._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),e.once(ai,t),!(e.listenerCount(ai)>1)&&Qe.nextTick(Mu,e)}function Mu(e){let t=!1;function n(r){if(t){ui(e,r??new Au);return}t=!0;const i=e._readableState,o=e._writableState,a=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),a.destroyed?e.emit(Ms,r):r?ui(e,r,!0):Qe.nextTick(Bu,e)}try{e._construct(r=>{Qe.nextTick(n,r)})}catch(r){Qe.nextTick(n,r)}}function Bu(e){e.emit(ai)}function yo(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function Ds(e){e.emit("close")}function $u(e,t){e.emit("error",t),Qe.nextTick(Ds,e)}function Du(e,t){!e||Tu(e)||(!t&&!Ou(e)&&(t=new Ru),Nu(e)?(e.socket=null,e.destroy(t)):yo(e)?e.abort():yo(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Qe.nextTick($u,e,t):Qe.nextTick(Ds,e),e.destroyed||(e[Iu]=!0))}var Yt={construct:Pu,destroyer:Du,destroy:xu,undestroy:Lu,errorOrDestroy:ui};const{ArrayIsArray:ku,ObjectSetPrototypeOf:ks}=ye,{EventEmitter:or}=wn;function sr(e){or.call(this,e)}ks(sr.prototype,or.prototype);ks(sr,or);sr.prototype.pipe=function(e,t){const n=this;function r(A){e.writable&&e.write(A)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",a),n.on("close",c));let o=!1;function a(){o||(o=!0,e.end())}function c(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function p(A){d(),or.listenerCount(this,"error")===0&&this.emit("error",A)}fi(n,"error",p),fi(e,"error",p);function d(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",c),n.removeListener("error",p),e.removeListener("error",p),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e};function fi(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):ku(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}var Ii={Stream:sr,prependListener:fi},Ws={exports:{}};(function(e){const{SymbolDispose:t}=ye,{AbortError:n,codes:r}=xe,{isNodeStream:i,isWebStream:o,kControllerErrorFunction:a}=dt,c=_t,{ERR_INVALID_ARG_TYPE:p}=r;let d;const A=(L,D)=>{if(typeof L!="object"||!("aborted"in L))throw new p(D,"AbortSignal",L)};e.exports.addAbortSignal=function(D,B){if(A(D,"signal"),!i(B)&&!o(B))throw new p("stream",["ReadableStream","WritableStream","Stream"],B);return e.exports.addAbortSignalNoValidate(D,B)},e.exports.addAbortSignalNoValidate=function(L,D){if(typeof L!="object"||!("aborted"in L))return D;const B=i(D)?()=>{D.destroy(new n(void 0,{cause:L.reason}))}:()=>{D[a](new n(void 0,{cause:L.reason}))};if(L.aborted)B();else{d=d||Be.addAbortListener;const W=d(L,B);c(D,W[t])}return D}})(Ws);var ar=Ws.exports;const{StringPrototypeSlice:_o,SymbolIterator:Wu,TypedArrayPrototypeSet:Dn,Uint8Array:Uu}=ye,{Buffer:$r}=Pt,{inspect:ju}=Be;var Fu=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){const n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=t+n.data;return r}concat(t){if(this.length===0)return $r.alloc(0);const n=$r.allocUnsafe(t>>>0);let r=this.head,i=0;for(;r;)Dn(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(t,n){const r=this.head.data;if(t<r.length){const i=r.slice(0,t);return this.head.data=r.slice(t),i}return t===r.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Wu](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",r=this.head,i=0;do{const o=r.data;if(t>o.length)n+=o,t-=o.length;else{t===o.length?(n+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=_o(o,0,t),this.head=r,r.data=_o(o,t));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(t){const n=$r.allocUnsafe(t),r=t;let i=this.head,o=0;do{const a=i.data;if(t>a.length)Dn(n,a,r-t),t-=a.length;else{t===a.length?(Dn(n,a,r-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(Dn(n,new Uu(a.buffer,a.byteOffset,t),r-t),this.head=i,i.data=a.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return ju(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:qu,NumberIsInteger:Hu}=ye,{validateInteger:Gu}=bn,{ERR_INVALID_ARG_VALUE:zu}=xe.codes;let Us=16*1024,js=16;function Vu(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function Fs(e){return e?js:Us}function Ku(e,t){Gu(t,"value",0),e?js=t:Us=t}function Yu(e,t,n,r){const i=Vu(t,r,n);if(i!=null){if(!Hu(i)||i<0){const o=r?`options.${n}`:"options.highWaterMark";throw new zu(o,i)}return qu(i)}return Fs(e.objectMode)}var lr={getHighWaterMark:Yu,getDefaultHighWaterMark:Fs,setDefaultHighWaterMark:Ku};const mo=yt,{PromisePrototypeThen:Zu,SymbolAsyncIterator:Eo,SymbolIterator:So}=ye,{Buffer:Ju}=Pt,{ERR_INVALID_ARG_TYPE:Xu,ERR_STREAM_NULL_VALUES:Qu}=xe.codes;function ef(e,t,n){let r;if(typeof t=="string"||t instanceof Ju)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});let i;if(t&&t[Eo])i=!0,r=t[Eo]();else if(t&&t[So])i=!1,r=t[So]();else throw new Xu("iterable",["Iterable"],t);const o=new e({objectMode:!0,highWaterMark:1,...n});let a=!1;o._read=function(){a||(a=!0,p())},o._destroy=function(d,A){Zu(c(d),()=>mo.nextTick(A,d),L=>mo.nextTick(A,L||d))};async function c(d){const A=d!=null,L=typeof r.throw=="function";if(A&&L){const{value:D,done:B}=await r.throw(d);if(await D,B)return}if(typeof r.return=="function"){const{value:D}=await r.return();await D}}async function p(){for(;;){try{const{value:d,done:A}=i?await r.next():r.next();if(A)o.push(null);else{const L=d&&typeof d.then=="function"?await d:d;if(L===null)throw a=!1,new Qu;if(o.push(L))continue;a=!1}}catch(d){o.destroy(d)}break}}return o}var qs=ef,Dr,vo;function ur(){if(vo)return Dr;vo=1;const e=yt,{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:a,ObjectSetPrototypeOf:c,Promise:p,SafeSet:d,SymbolAsyncDispose:A,SymbolAsyncIterator:L,Symbol:D}=ye;Dr=re,re.ReadableState=$e;const{EventEmitter:B}=wn,{Stream:W,prependListener:m}=Ii,{Buffer:I}=Pt,{addAbortSignal:N}=ar,R=_t;let P=Be.debuglog("stream",f=>{P=f});const H=Fu,j=Yt,{getHighWaterMark:G,getDefaultHighWaterMark:K}=lr,{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:u,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_OUT_OF_RANGE:E,ERR_STREAM_PUSH_AFTER_EOF:_,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:h},AbortError:x}=xe,{validateObject:l}=bn,w=D("kPaused"),{StringDecoder:S}=ll,v=qs;c(re.prototype,W.prototype),c(re,W);const M=()=>{},{errorOrDestroy:F}=j,q=1,X=2,U=4,ne=8,ee=16,ie=32,se=64,Ee=128,ve=256,Ae=512,_e=1024,me=2048,T=4096,C=8192,k=16384,Y=32768,Q=65536,fe=1<<17,ge=1<<18;function le(f){return{enumerable:!1,get(){return(this.state&f)!==0},set(y){y?this.state|=f:this.state&=~f}}}o($e.prototype,{objectMode:le(q),ended:le(X),endEmitted:le(U),reading:le(ne),constructed:le(ee),sync:le(ie),needReadable:le(se),emittedReadable:le(Ee),readableListening:le(ve),resumeScheduled:le(Ae),errorEmitted:le(_e),emitClose:le(me),autoDestroy:le(T),destroyed:le(C),closed:le(k),closeEmitted:le(Y),multiAwaitDrain:le(Q),readingMore:le(fe),dataEmitted:le(ge)});function $e(f,y,z){typeof z!="boolean"&&(z=y instanceof ft()),this.state=me|T|ee|ie,f&&f.objectMode&&(this.state|=q),z&&f&&f.readableObjectMode&&(this.state|=q),this.highWaterMark=f?G(this,f,"readableHighWaterMark",z):K(!1),this.buffer=new H,this.length=0,this.pipes=[],this.flowing=null,this[w]=null,f&&f.emitClose===!1&&(this.state&=~me),f&&f.autoDestroy===!1&&(this.state&=~T),this.errored=null,this.defaultEncoding=f&&f.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,f&&f.encoding&&(this.decoder=new S(f.encoding),this.encoding=f.encoding)}function re(f){if(!(this instanceof re))return new re(f);const y=this instanceof ft();this._readableState=new $e(f,this,y),f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.construct=="function"&&(this._construct=f.construct),f.signal&&!y&&N(f.signal,this)),W.call(this,f),j.construct(this,()=>{this._readableState.needReadable&&Et(this,this._readableState)})}re.prototype.destroy=j.destroy,re.prototype._undestroy=j.undestroy,re.prototype._destroy=function(f,y){y(f)},re.prototype[B.captureRejectionSymbol]=function(f){this.destroy(f)},re.prototype[A]=function(){let f;return this.destroyed||(f=this.readableEnded?null:new x,this.destroy(f)),new p((y,z)=>R(this,V=>V&&V!==f?z(V):y(null)))},re.prototype.push=function(f,y){return Oe(this,f,y,!1)},re.prototype.unshift=function(f,y){return Oe(this,f,y,!0)};function Oe(f,y,z,V){P("readableAddChunk",y);const Z=f._readableState;let Re;if(Z.state&q||(typeof y=="string"?(z=z||Z.defaultEncoding,Z.encoding!==z&&(V&&Z.encoding?y=I.from(y,z).toString(Z.encoding):(y=I.from(y,z),z=""))):y instanceof I?z="":W._isUint8Array(y)?(y=W._uint8ArrayToBuffer(y),z=""):y!=null&&(Re=new u("chunk",["string","Buffer","Uint8Array"],y))),Re)F(f,Re);else if(y===null)Z.state&=~ne,kt(f,Z);else if(Z.state&q||y&&y.length>0)if(V)if(Z.state&U)F(f,new h);else{if(Z.destroyed||Z.errored)return!1;Dt(f,Z,y,!0)}else if(Z.ended)F(f,new _);else{if(Z.destroyed||Z.errored)return!1;Z.state&=~ne,Z.decoder&&!z?(y=Z.decoder.write(y),Z.objectMode||y.length!==0?Dt(f,Z,y,!1):Et(f,Z)):Dt(f,Z,y,!1)}else V||(Z.state&=~ne,Et(f,Z));return!Z.ended&&(Z.length<Z.highWaterMark||Z.length===0)}function Dt(f,y,z,V){y.flowing&&y.length===0&&!y.sync&&f.listenerCount("data")>0?(y.state&Q?y.awaitDrainWriters.clear():y.awaitDrainWriters=null,y.dataEmitted=!0,f.emit("data",z)):(y.length+=y.objectMode?1:z.length,V?y.buffer.unshift(z):y.buffer.push(z),y.state&se&&mt(f)),Et(f,y)}re.prototype.isPaused=function(){const f=this._readableState;return f[w]===!0||f.flowing===!1},re.prototype.setEncoding=function(f){const y=new S(f);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;const z=this._readableState.buffer;let V="";for(const Z of z)V+=y.write(Z);return z.clear(),V!==""&&z.push(V),this._readableState.length=V.length,this};const Sn=1073741824;function yr(f){if(f>Sn)throw new E("size","<= 1GiB",f);return f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++,f}function vn(f,y){return f<=0||y.length===0&&y.ended?0:y.state&q?1:r(f)?y.flowing&&y.length?y.buffer.first().length:y.length:f<=y.length?f:y.ended?y.length:0}re.prototype.read=function(f){P("read",f),f===void 0?f=NaN:n(f)||(f=i(f,10));const y=this._readableState,z=f;if(f>y.highWaterMark&&(y.highWaterMark=yr(f)),f!==0&&(y.state&=~Ee),f===0&&y.needReadable&&((y.highWaterMark!==0?y.length>=y.highWaterMark:y.length>0)||y.ended))return P("read: emitReadable",y.length,y.ended),y.length===0&&y.ended?Qt(this):mt(this),null;if(f=vn(f,y),f===0&&y.ended)return y.length===0&&Qt(this),null;let V=(y.state&se)!==0;if(P("need readable",V),(y.length===0||y.length-f<y.highWaterMark)&&(V=!0,P("length less than watermark",V)),y.ended||y.reading||y.destroyed||y.errored||!y.constructed)V=!1,P("reading, ended or constructing",V);else if(V){P("do read"),y.state|=ne|ie,y.length===0&&(y.state|=se);try{this._read(y.highWaterMark)}catch(Re){F(this,Re)}y.state&=~ie,y.reading||(f=vn(z,y))}let Z;return f>0?Z=ht(f,y):Z=null,Z===null?(y.needReadable=y.length<=y.highWaterMark,f=0):(y.length-=f,y.multiAwaitDrain?y.awaitDrainWriters.clear():y.awaitDrainWriters=null),y.length===0&&(y.ended||(y.needReadable=!0),z!==f&&y.ended&&Qt(this)),Z!==null&&!y.errorEmitted&&!y.closeEmitted&&(y.dataEmitted=!0,this.emit("data",Z)),Z};function kt(f,y){if(P("onEofChunk"),!y.ended){if(y.decoder){const z=y.decoder.end();z&&z.length&&(y.buffer.push(z),y.length+=y.objectMode?1:z.length)}y.ended=!0,y.sync?mt(f):(y.needReadable=!1,y.emittedReadable=!0,Jt(f))}}function mt(f){const y=f._readableState;P("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(P("emitReadable",y.flowing),y.emittedReadable=!0,e.nextTick(Jt,f))}function Jt(f){const y=f._readableState;P("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&!y.errored&&(y.length||y.ended)&&(f.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,Xt(f)}function Et(f,y){!y.readingMore&&y.constructed&&(y.readingMore=!0,e.nextTick(An,f,y))}function An(f,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&y.length===0);){const z=y.length;if(P("maybeReadMore read 0"),f.read(0),z===y.length)break}y.readingMore=!1}re.prototype._read=function(f){throw new b("_read()")},re.prototype.pipe=function(f,y){const z=this,V=this._readableState;V.pipes.length===1&&(V.multiAwaitDrain||(V.multiAwaitDrain=!0,V.awaitDrainWriters=new d(V.awaitDrainWriters?[V.awaitDrainWriters]:[]))),V.pipes.push(f),P("pipe count=%d opts=%j",V.pipes.length,y);const Re=(!y||y.end!==!1)&&f!==e.stdout&&f!==e.stderr?Nn:St;V.endEmitted?e.nextTick(Re):z.once("end",Re),f.on("unpipe",Ce);function Ce(it,ze){P("onunpipe"),it===z&&ze&&ze.hasUnpiped===!1&&(ze.hasUnpiped=!0,Sr())}function Nn(){P("onend"),f.end()}let Le,xn=!1;function Sr(){P("cleanup"),f.removeListener("close",Je),f.removeListener("finish",nn),Le&&f.removeListener("drain",Le),f.removeListener("error",tn),f.removeListener("unpipe",Ce),z.removeListener("end",Nn),z.removeListener("end",St),z.removeListener("data",Ln),xn=!0,Le&&V.awaitDrainWriters&&(!f._writableState||f._writableState.needDrain)&&Le()}function Cn(){xn||(V.pipes.length===1&&V.pipes[0]===f?(P("false write response, pause",0),V.awaitDrainWriters=f,V.multiAwaitDrain=!1):V.pipes.length>1&&V.pipes.includes(f)&&(P("false write response, pause",V.awaitDrainWriters.size),V.awaitDrainWriters.add(f)),z.pause()),Le||(Le=_r(z,f),f.on("drain",Le))}z.on("data",Ln);function Ln(it){P("ondata");const ze=f.write(it);P("dest.write",ze),ze===!1&&Cn()}function tn(it){if(P("onerror",it),St(),f.removeListener("error",tn),f.listenerCount("error")===0){const ze=f._writableState||f._readableState;ze&&!ze.errorEmitted?F(f,it):f.emit("error",it)}}m(f,"error",tn);function Je(){f.removeListener("finish",nn),St()}f.once("close",Je);function nn(){P("onfinish"),f.removeListener("close",Je),St()}f.once("finish",nn);function St(){P("unpipe"),z.unpipe(f)}return f.emit("pipe",z),f.writableNeedDrain===!0?Cn():V.flowing||(P("pipe resume"),z.resume()),f};function _r(f,y){return function(){const V=f._readableState;V.awaitDrainWriters===y?(P("pipeOnDrain",1),V.awaitDrainWriters=null):V.multiAwaitDrain&&(P("pipeOnDrain",V.awaitDrainWriters.size),V.awaitDrainWriters.delete(y)),(!V.awaitDrainWriters||V.awaitDrainWriters.size===0)&&f.listenerCount("data")&&f.resume()}}re.prototype.unpipe=function(f){const y=this._readableState,z={hasUnpiped:!1};if(y.pipes.length===0)return this;if(!f){const Z=y.pipes;y.pipes=[],this.pause();for(let Re=0;Re<Z.length;Re++)Z[Re].emit("unpipe",this,{hasUnpiped:!1});return this}const V=t(y.pipes,f);return V===-1?this:(y.pipes.splice(V,1),y.pipes.length===0&&this.pause(),f.emit("unpipe",this,z),this)},re.prototype.on=function(f,y){const z=W.prototype.on.call(this,f,y),V=this._readableState;return f==="data"?(V.readableListening=this.listenerCount("readable")>0,V.flowing!==!1&&this.resume()):f==="readable"&&!V.endEmitted&&!V.readableListening&&(V.readableListening=V.needReadable=!0,V.flowing=!1,V.emittedReadable=!1,P("on readable",V.length,V.reading),V.length?mt(this):V.reading||e.nextTick(nt,this)),z},re.prototype.addListener=re.prototype.on,re.prototype.removeListener=function(f,y){const z=W.prototype.removeListener.call(this,f,y);return f==="readable"&&e.nextTick(Rn,this),z},re.prototype.off=re.prototype.removeListener,re.prototype.removeAllListeners=function(f){const y=W.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&e.nextTick(Rn,this),y};function Rn(f){const y=f._readableState;y.readableListening=f.listenerCount("readable")>0,y.resumeScheduled&&y[w]===!1?y.flowing=!0:f.listenerCount("data")>0?f.resume():y.readableListening||(y.flowing=null)}function nt(f){P("readable nexttick read 0"),f.read(0)}re.prototype.resume=function(){const f=this._readableState;return f.flowing||(P("resume"),f.flowing=!f.readableListening,Wt(this,f)),f[w]=!1,this};function Wt(f,y){y.resumeScheduled||(y.resumeScheduled=!0,e.nextTick(mr,f,y))}function mr(f,y){P("resume",y.reading),y.reading||f.read(0),y.resumeScheduled=!1,f.emit("resume"),Xt(f),y.flowing&&!y.reading&&f.read(0)}re.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[w]=!0,this};function Xt(f){const y=f._readableState;for(P("flow",y.flowing);y.flowing&&f.read()!==null;);}re.prototype.wrap=function(f){let y=!1;f.on("data",V=>{!this.push(V)&&f.pause&&(y=!0,f.pause())}),f.on("end",()=>{this.push(null)}),f.on("error",V=>{F(this,V)}),f.on("close",()=>{this.destroy()}),f.on("destroy",()=>{this.destroy()}),this._read=()=>{y&&f.resume&&(y=!1,f.resume())};const z=a(f);for(let V=1;V<z.length;V++){const Z=z[V];this[Z]===void 0&&typeof f[Z]=="function"&&(this[Z]=f[Z].bind(f))}return this},re.prototype[L]=function(){return In(this)},re.prototype.iterator=function(f){return f!==void 0&&l(f,"options"),In(this,f)};function In(f,y){typeof f.read!="function"&&(f=re.wrap(f,{objectMode:!0}));const z=Tn(f,y);return z.stream=f,z}async function*Tn(f,y){let z=M;function V(Ce){this===f?(z(),z=M):z=Ce}f.on("readable",V);let Z;const Re=R(f,{writable:!1},Ce=>{Z=Ce?s(Z,Ce):null,z(),z=M});try{for(;;){const Ce=f.destroyed?null:f.read();if(Ce!==null)yield Ce;else{if(Z)throw Z;if(Z===null)return;await new p(V)}}}catch(Ce){throw Z=s(Z,Ce),Z}finally{(Z||(y==null?void 0:y.destroyOnReturn)!==!1)&&(Z===void 0||f._readableState.autoDestroy)?j.destroyer(f,null):(f.off("readable",V),Re())}}o(re.prototype,{readable:{__proto__:null,get(){const f=this._readableState;return!!f&&f.readable!==!1&&!f.destroyed&&!f.errorEmitted&&!f.endEmitted},set(f){this._readableState&&(this._readableState.readable=!!f)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(f){this._readableState&&(this._readableState.flowing=f)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(f){this._readableState&&(this._readableState.destroyed=f)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o($e.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[w]!==!1},set(f){this[w]=!!f}}}),re._fromList=ht;function ht(f,y){if(y.length===0)return null;let z;return y.objectMode?z=y.buffer.shift():!f||f>=y.length?(y.decoder?z=y.buffer.join(""):y.buffer.length===1?z=y.buffer.first():z=y.buffer.concat(y.length),y.buffer.clear()):z=y.buffer.consume(f,y.decoder),z}function Qt(f){const y=f._readableState;P("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,e.nextTick(rt,y,f))}function rt(f,y){if(P("endReadableNT",f.endEmitted,f.length),!f.errored&&!f.closeEmitted&&!f.endEmitted&&f.length===0){if(f.endEmitted=!0,y.emit("end"),y.writable&&y.allowHalfOpen===!1)e.nextTick(Er,y);else if(f.autoDestroy){const z=y._writableState;(!z||z.autoDestroy&&(z.finished||z.writable===!1))&&y.destroy()}}}function Er(f){f.writable&&!f.writableEnded&&!f.destroyed&&f.end()}re.from=function(f,y){return v(re,f,y)};let en;function On(){return en===void 0&&(en={}),en}return re.fromWeb=function(f,y){return On().newStreamReadableFromReadableStream(f,y)},re.toWeb=function(f,y){return On().newReadableStreamFromStreamReadable(f,y)},re.wrap=function(f,y){var z,V;return new re({objectMode:(z=(V=f.readableObjectMode)!==null&&V!==void 0?V:f.objectMode)!==null&&z!==void 0?z:!0,...y,destroy(Z,Re){j.destroyer(f,Z),Re(Z)}}).wrap(f)},Dr}var kr,Ao;function Ti(){if(Ao)return kr;Ao=1;const e=yt,{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:c,Symbol:p,SymbolHasInstance:d}=ye;kr=l,l.WritableState=h;const{EventEmitter:A}=wn,L=Ii.Stream,{Buffer:D}=Pt,B=Yt,{addAbortSignal:W}=ar,{getHighWaterMark:m,getDefaultHighWaterMark:I}=lr,{ERR_INVALID_ARG_TYPE:N,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_MULTIPLE_CALLBACK:P,ERR_STREAM_CANNOT_PIPE:H,ERR_STREAM_DESTROYED:j,ERR_STREAM_ALREADY_FINISHED:G,ERR_STREAM_NULL_VALUES:K,ERR_STREAM_WRITE_AFTER_END:s,ERR_UNKNOWN_ENCODING:u}=xe.codes,{errorOrDestroy:b}=B;a(l.prototype,L.prototype),a(l,L);function E(){}const _=p("kOnFinished");function h(T,C,k){typeof k!="boolean"&&(k=C instanceof ft()),this.objectMode=!!(T&&T.objectMode),k&&(this.objectMode=this.objectMode||!!(T&&T.writableObjectMode)),this.highWaterMark=T?m(this,T,"writableHighWaterMark",k):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Y=!!(T&&T.decodeStrings===!1);this.decodeStrings=!Y,this.defaultEncoding=T&&T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,C),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,x(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!T||T.emitClose!==!1,this.autoDestroy=!T||T.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[_]=[]}function x(T){T.buffered=[],T.bufferedIndex=0,T.allBuffers=!0,T.allNoop=!0}h.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(h.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function l(T){const C=this instanceof ft();if(!C&&!r(l,this))return new l(T);this._writableState=new h(T,this,C),T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final),typeof T.construct=="function"&&(this._construct=T.construct),T.signal&&W(T.signal,this)),L.call(this,T),B.construct(this,()=>{const k=this._writableState;k.writing||ne(this,k),Ee(this,k)})}i(l,d,{__proto__:null,value:function(T){return r(this,T)?!0:this!==l?!1:T&&T._writableState instanceof h}}),l.prototype.pipe=function(){b(this,new H)};function w(T,C,k,Y){const Q=T._writableState;if(typeof k=="function")Y=k,k=Q.defaultEncoding;else{if(!k)k=Q.defaultEncoding;else if(k!=="buffer"&&!D.isEncoding(k))throw new u(k);typeof Y!="function"&&(Y=E)}if(C===null)throw new K;if(!Q.objectMode)if(typeof C=="string")Q.decodeStrings!==!1&&(C=D.from(C,k),k="buffer");else if(C instanceof D)k="buffer";else if(L._isUint8Array(C))C=L._uint8ArrayToBuffer(C),k="buffer";else throw new N("chunk",["string","Buffer","Uint8Array"],C);let fe;return Q.ending?fe=new s:Q.destroyed&&(fe=new j("write")),fe?(e.nextTick(Y,fe),b(T,fe,!0),fe):(Q.pendingcb++,S(T,Q,C,k,Y))}l.prototype.write=function(T,C,k){return w(this,T,C,k)===!0},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){const T=this._writableState;T.corked&&(T.corked--,T.writing||ne(this,T))},l.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=c(C)),!D.isEncoding(C))throw new u(C);return this._writableState.defaultEncoding=C,this};function S(T,C,k,Y,Q){const fe=C.objectMode?1:k.length;C.length+=fe;const ge=C.length<C.highWaterMark;return ge||(C.needDrain=!0),C.writing||C.corked||C.errored||!C.constructed?(C.buffered.push({chunk:k,encoding:Y,callback:Q}),C.allBuffers&&Y!=="buffer"&&(C.allBuffers=!1),C.allNoop&&Q!==E&&(C.allNoop=!1)):(C.writelen=fe,C.writecb=Q,C.writing=!0,C.sync=!0,T._write(k,Y,C.onwrite),C.sync=!1),ge&&!C.errored&&!C.destroyed}function v(T,C,k,Y,Q,fe,ge){C.writelen=Y,C.writecb=ge,C.writing=!0,C.sync=!0,C.destroyed?C.onwrite(new j("write")):k?T._writev(Q,C.onwrite):T._write(Q,fe,C.onwrite),C.sync=!1}function M(T,C,k,Y){--C.pendingcb,Y(k),U(C),b(T,k)}function F(T,C){const k=T._writableState,Y=k.sync,Q=k.writecb;if(typeof Q!="function"){b(T,new P);return}k.writing=!1,k.writecb=null,k.length-=k.writelen,k.writelen=0,C?(C.stack,k.errored||(k.errored=C),T._readableState&&!T._readableState.errored&&(T._readableState.errored=C),Y?e.nextTick(M,T,k,C,Q):M(T,k,C,Q)):(k.buffered.length>k.bufferedIndex&&ne(T,k),Y?k.afterWriteTickInfo!==null&&k.afterWriteTickInfo.cb===Q?k.afterWriteTickInfo.count++:(k.afterWriteTickInfo={count:1,cb:Q,stream:T,state:k},e.nextTick(q,k.afterWriteTickInfo)):X(T,k,1,Q))}function q({stream:T,state:C,count:k,cb:Y}){return C.afterWriteTickInfo=null,X(T,C,k,Y)}function X(T,C,k,Y){for(!C.ending&&!T.destroyed&&C.length===0&&C.needDrain&&(C.needDrain=!1,T.emit("drain"));k-- >0;)C.pendingcb--,Y();C.destroyed&&U(C),Ee(T,C)}function U(T){if(T.writing)return;for(let Q=T.bufferedIndex;Q<T.buffered.length;++Q){var C;const{chunk:fe,callback:ge}=T.buffered[Q],le=T.objectMode?1:fe.length;T.length-=le,ge((C=T.errored)!==null&&C!==void 0?C:new j("write"))}const k=T[_].splice(0);for(let Q=0;Q<k.length;Q++){var Y;k[Q]((Y=T.errored)!==null&&Y!==void 0?Y:new j("end"))}x(T)}function ne(T,C){if(C.corked||C.bufferProcessing||C.destroyed||!C.constructed)return;const{buffered:k,bufferedIndex:Y,objectMode:Q}=C,fe=k.length-Y;if(!fe)return;let ge=Y;if(C.bufferProcessing=!0,fe>1&&T._writev){C.pendingcb-=fe-1;const le=C.allNoop?E:re=>{for(let Oe=ge;Oe<k.length;++Oe)k[Oe].callback(re)},$e=C.allNoop&&ge===0?k:t(k,ge);$e.allBuffers=C.allBuffers,v(T,C,!0,C.length,$e,"",le),x(C)}else{do{const{chunk:le,encoding:$e,callback:re}=k[ge];k[ge++]=null;const Oe=Q?1:le.length;v(T,C,!1,Oe,le,$e,re)}while(ge<k.length&&!C.writing);ge===k.length?x(C):ge>256?(k.splice(0,ge),C.bufferedIndex=0):C.bufferedIndex=ge}C.bufferProcessing=!1}l.prototype._write=function(T,C,k){if(this._writev)this._writev([{chunk:T,encoding:C}],k);else throw new R("_write()")},l.prototype._writev=null,l.prototype.end=function(T,C,k){const Y=this._writableState;typeof T=="function"?(k=T,T=null,C=null):typeof C=="function"&&(k=C,C=null);let Q;if(T!=null){const fe=w(this,T,C);fe instanceof n&&(Q=fe)}return Y.corked&&(Y.corked=1,this.uncork()),Q||(!Y.errored&&!Y.ending?(Y.ending=!0,Ee(this,Y,!0),Y.ended=!0):Y.finished?Q=new G("end"):Y.destroyed&&(Q=new j("end"))),typeof k=="function"&&(Q||Y.finished?e.nextTick(k,Q):Y[_].push(k)),this};function ee(T){return T.ending&&!T.destroyed&&T.constructed&&T.length===0&&!T.errored&&T.buffered.length===0&&!T.finished&&!T.writing&&!T.errorEmitted&&!T.closeEmitted}function ie(T,C){let k=!1;function Y(Q){if(k){b(T,Q??P());return}if(k=!0,C.pendingcb--,Q){const fe=C[_].splice(0);for(let ge=0;ge<fe.length;ge++)fe[ge](Q);b(T,Q,C.sync)}else ee(C)&&(C.prefinished=!0,T.emit("prefinish"),C.pendingcb++,e.nextTick(ve,T,C))}C.sync=!0,C.pendingcb++;try{T._final(Y)}catch(Q){Y(Q)}C.sync=!1}function se(T,C){!C.prefinished&&!C.finalCalled&&(typeof T._final=="function"&&!C.destroyed?(C.finalCalled=!0,ie(T,C)):(C.prefinished=!0,T.emit("prefinish")))}function Ee(T,C,k){ee(C)&&(se(T,C),C.pendingcb===0&&(k?(C.pendingcb++,e.nextTick((Y,Q)=>{ee(Q)?ve(Y,Q):Q.pendingcb--},T,C)):ee(C)&&(C.pendingcb++,ve(T,C))))}function ve(T,C){C.pendingcb--,C.finished=!0;const k=C[_].splice(0);for(let Y=0;Y<k.length;Y++)k[Y]();if(T.emit("finish"),C.autoDestroy){const Y=T._readableState;(!Y||Y.autoDestroy&&(Y.endEmitted||Y.readable===!1))&&T.destroy()}}o(l.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(T){this._writableState&&(this._writableState.destroyed=T)}},writable:{__proto__:null,get(){const T=this._writableState;return!!T&&T.writable!==!1&&!T.destroyed&&!T.errored&&!T.ending&&!T.ended},set(T){this._writableState&&(this._writableState.writable=!!T)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const T=this._writableState;return T?!T.destroyed&&!T.ending&&T.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Ae=B.destroy;l.prototype.destroy=function(T,C){const k=this._writableState;return!k.destroyed&&(k.bufferedIndex<k.buffered.length||k[_].length)&&e.nextTick(U,k),Ae.call(this,T,C),this},l.prototype._undestroy=B.undestroy,l.prototype._destroy=function(T,C){C(T)},l.prototype[A.captureRejectionSymbol]=function(T){this.destroy(T)};let _e;function me(){return _e===void 0&&(_e={}),_e}return l.fromWeb=function(T,C){return me().newStreamWritableFromWritableStream(T,C)},l.toWeb=function(T){return me().newWritableStreamFromStreamWritable(T)},kr}var Wr,Ro;function tf(){if(Ro)return Wr;Ro=1;const e=yt,t=Pt,{isReadable:n,isWritable:r,isIterable:i,isNodeStream:o,isReadableNodeStream:a,isWritableNodeStream:c,isDuplexNodeStream:p,isReadableStream:d,isWritableStream:A}=dt,L=_t,{AbortError:D,codes:{ERR_INVALID_ARG_TYPE:B,ERR_INVALID_RETURN_VALUE:W}}=xe,{destroyer:m}=Yt,I=ft(),N=ur(),R=Ti(),{createDeferredPromise:P}=Be,H=qs,j=globalThis.Blob||t.Blob,G=typeof j<"u"?function(h){return h instanceof j}:function(h){return!1},K=globalThis.AbortController||dn().AbortController,{FunctionPrototypeCall:s}=ye;class u extends I{constructor(h){super(h),(h==null?void 0:h.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(h==null?void 0:h.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Wr=function _(h,x){if(p(h))return h;if(a(h))return E({readable:h});if(c(h))return E({writable:h});if(o(h))return E({writable:!1,readable:!1});if(d(h))return E({readable:N.fromWeb(h)});if(A(h))return E({writable:R.fromWeb(h)});if(typeof h=="function"){const{value:w,write:S,final:v,destroy:M}=b(h);if(i(w))return H(u,w,{objectMode:!0,write:S,final:v,destroy:M});const F=w==null?void 0:w.then;if(typeof F=="function"){let q;const X=s(F,w,U=>{if(U!=null)throw new W("nully","body",U)},U=>{m(q,U)});return q=new u({objectMode:!0,readable:!1,write:S,final(U){v(async()=>{try{await X,e.nextTick(U,null)}catch(ne){e.nextTick(U,ne)}})},destroy:M})}throw new W("Iterable, AsyncIterable or AsyncFunction",x,w)}if(G(h))return _(h.arrayBuffer());if(i(h))return H(u,h,{objectMode:!0,writable:!1});if(d(h==null?void 0:h.readable)&&A(h==null?void 0:h.writable))return u.fromWeb(h);if(typeof(h==null?void 0:h.writable)=="object"||typeof(h==null?void 0:h.readable)=="object"){const w=h!=null&&h.readable?a(h==null?void 0:h.readable)?h==null?void 0:h.readable:_(h.readable):void 0,S=h!=null&&h.writable?c(h==null?void 0:h.writable)?h==null?void 0:h.writable:_(h.writable):void 0;return E({readable:w,writable:S})}const l=h==null?void 0:h.then;if(typeof l=="function"){let w;return s(l,h,S=>{S!=null&&w.push(S),w.push(null)},S=>{m(w,S)}),w=new u({objectMode:!0,writable:!1,read(){}})}throw new B(x,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],h)};function b(_){let{promise:h,resolve:x}=P();const l=new K,w=l.signal;return{value:_(async function*(){for(;;){const v=h;h=null;const{chunk:M,done:F,cb:q}=await v;if(e.nextTick(q),F)return;if(w.aborted)throw new D(void 0,{cause:w.reason});({promise:h,resolve:x}=P()),yield M}}(),{signal:w}),write(v,M,F){const q=x;x=null,q({chunk:v,done:!1,cb:F})},final(v){const M=x;x=null,M({done:!0,cb:v})},destroy(v,M){l.abort(),M(v)}}}function E(_){const h=_.readable&&typeof _.readable.read!="function"?N.wrap(_.readable):_.readable,x=_.writable;let l=!!n(h),w=!!r(x),S,v,M,F,q;function X(U){const ne=F;F=null,ne?ne(U):U&&q.destroy(U)}return q=new u({readableObjectMode:!!(h!=null&&h.readableObjectMode),writableObjectMode:!!(x!=null&&x.writableObjectMode),readable:l,writable:w}),w&&(L(x,U=>{w=!1,U&&m(h,U),X(U)}),q._write=function(U,ne,ee){x.write(U,ne)?ee():S=ee},q._final=function(U){x.end(),v=U},x.on("drain",function(){if(S){const U=S;S=null,U()}}),x.on("finish",function(){if(v){const U=v;v=null,U()}})),l&&(L(h,U=>{l=!1,U&&m(h,U),X(U)}),h.on("readable",function(){if(M){const U=M;M=null,U()}}),h.on("end",function(){q.push(null)}),q._read=function(){for(;;){const U=h.read();if(U===null){M=q._read;return}if(!q.push(U))return}}),q._destroy=function(U,ne){!U&&F!==null&&(U=new D),M=null,S=null,v=null,F===null?ne(U):(F=ne,m(x,U),m(h,U))},q}return Wr}var Ur,Io;function ft(){if(Io)return Ur;Io=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=ye;Ur=a;const i=ur(),o=Ti();r(a.prototype,i.prototype),r(a,i);{const A=n(o.prototype);for(let L=0;L<A.length;L++){const D=A[L];a.prototype[D]||(a.prototype[D]=o.prototype[D])}}function a(A){if(!(this instanceof a))return new a(A);i.call(this,A),o.call(this,A),A?(this.allowHalfOpen=A.allowHalfOpen!==!1,A.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),A.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(a.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(A){this._readableState&&this._writableState&&(this._readableState.destroyed=A,this._writableState.destroyed=A)}}});let c;function p(){return c===void 0&&(c={}),c}a.fromWeb=function(A,L){return p().newStreamDuplexFromReadableWritablePair(A,L)},a.toWeb=function(A){return p().newReadableWritablePairFromDuplex(A)};let d;return a.from=function(A){return d||(d=tf()),d(A,"body")},Ur}const{ObjectSetPrototypeOf:Hs,Symbol:nf}=ye;var Gs=ct;const{ERR_METHOD_NOT_IMPLEMENTED:rf}=xe.codes,Oi=ft(),{getHighWaterMark:of}=lr;Hs(ct.prototype,Oi.prototype);Hs(ct,Oi);const fn=nf("kCallback");function ct(e){if(!(this instanceof ct))return new ct(e);const t=e?of(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),Oi.call(this,e),this._readableState.sync=!1,this[fn]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",sf)}function ci(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function sf(){this._final!==ci&&ci.call(this)}ct.prototype._final=ci;ct.prototype._transform=function(e,t,n){throw new rf("_transform()")};ct.prototype._write=function(e,t,n){const r=this._readableState,i=this._writableState,o=r.length;this._transform(e,t,(a,c)=>{if(a){n(a);return}c!=null&&this.push(c),i.ended||o===r.length||r.length<r.highWaterMark?n():this[fn]=n})};ct.prototype._read=function(){if(this[fn]){const e=this[fn];this[fn]=null,e()}};const{ObjectSetPrototypeOf:zs}=ye;var Vs=Gt;const Ni=Gs;zs(Gt.prototype,Ni.prototype);zs(Gt,Ni);function Gt(e){if(!(this instanceof Gt))return new Gt(e);Ni.call(this,e)}Gt.prototype._transform=function(e,t,n){n(null,e)};const ln=yt,{ArrayIsArray:af,Promise:lf,SymbolAsyncIterator:uf,SymbolDispose:ff}=ye,Xn=_t,{once:cf}=Be,df=Yt,To=ft(),{aggregateTwoErrors:hf,codes:{ERR_INVALID_ARG_TYPE:di,ERR_INVALID_RETURN_VALUE:jr,ERR_MISSING_ARGS:gf,ERR_STREAM_DESTROYED:pf,ERR_STREAM_PREMATURE_CLOSE:wf},AbortError:bf}=xe,{validateFunction:yf,validateAbortSignal:_f}=bn,{isIterable:It,isReadable:Fr,isReadableNodeStream:Vn,isNodeStream:Oo,isTransformStream:Ut,isWebStream:mf,isReadableStream:qr,isReadableFinished:Ef}=dt,Sf=globalThis.AbortController||dn().AbortController;let Hr,Gr,zr;function No(e,t,n){let r=!1;e.on("close",()=>{r=!0});const i=Xn(e,{readable:t,writable:n},o=>{r=!o});return{destroy:o=>{r||(r=!0,df.destroyer(e,o||new pf("pipe")))},cleanup:i}}function vf(e){return yf(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Vr(e){if(It(e))return e;if(Vn(e))return Af(e);throw new di("val",["Readable","Iterable","AsyncIterable"],e)}async function*Af(e){Gr||(Gr=ur()),yield*Gr.prototype[uf].call(e)}async function kn(e,t,n,{end:r}){let i,o=null;const a=d=>{if(d&&(i=d),o){const A=o;o=null,A()}},c=()=>new lf((d,A)=>{i?A(i):o=()=>{i?A(i):d()}});t.on("drain",a);const p=Xn(t,{readable:!1},a);try{t.writableNeedDrain&&await c();for await(const d of e)t.write(d)||await c();r&&(t.end(),await c()),n()}catch(d){n(i!==d?hf(i,d):d)}finally{p(),t.off("drain",a)}}async function Kr(e,t,n,{end:r}){Ut(t)&&(t=t.writable);const i=t.getWriter();try{for await(const o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(o){try{await i.abort(o),n(o)}catch(a){n(a)}}}function Rf(...e){return Ks(e,cf(vf(e)))}function Ks(e,t,n){if(e.length===1&&af(e[0])&&(e=e[0]),e.length<2)throw new gf("streams");const r=new Sf,i=r.signal,o=n==null?void 0:n.signal,a=[];_f(o,"options.signal");function c(){W(new bf)}zr=zr||Be.addAbortListener;let p;o&&(p=zr(o,c));let d,A;const L=[];let D=0;function B(R){W(R,--D===0)}function W(R,P){var H;if(R&&(!d||d.code==="ERR_STREAM_PREMATURE_CLOSE")&&(d=R),!(!d&&!P)){for(;L.length;)L.shift()(d);(H=p)===null||H===void 0||H[ff](),r.abort(),P&&(d||a.forEach(j=>j()),ln.nextTick(t,d,A))}}let m;for(let R=0;R<e.length;R++){const P=e[R],H=R<e.length-1,j=R>0,G=H||(n==null?void 0:n.end)!==!1,K=R===e.length-1;if(Oo(P)){let s=function(u){u&&u.name!=="AbortError"&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"&&B(u)};if(G){const{destroy:u,cleanup:b}=No(P,H,j);L.push(u),Fr(P)&&K&&a.push(b)}P.on("error",s),Fr(P)&&K&&a.push(()=>{P.removeListener("error",s)})}if(R===0)if(typeof P=="function"){if(m=P({signal:i}),!It(m))throw new jr("Iterable, AsyncIterable or Stream","source",m)}else It(P)||Vn(P)||Ut(P)?m=P:m=To.from(P);else if(typeof P=="function"){if(Ut(m)){var I;m=Vr((I=m)===null||I===void 0?void 0:I.readable)}else m=Vr(m);if(m=P(m,{signal:i}),H){if(!It(m,!0))throw new jr("AsyncIterable",`transform[${R-1}]`,m)}else{var N;Hr||(Hr=Vs);const s=new Hr({objectMode:!0}),u=(N=m)===null||N===void 0?void 0:N.then;if(typeof u=="function")D++,u.call(m,_=>{A=_,_!=null&&s.write(_),G&&s.end(),ln.nextTick(B)},_=>{s.destroy(_),ln.nextTick(B,_)});else if(It(m,!0))D++,kn(m,s,B,{end:G});else if(qr(m)||Ut(m)){const _=m.readable||m;D++,kn(_,s,B,{end:G})}else throw new jr("AsyncIterable or Promise","destination",m);m=s;const{destroy:b,cleanup:E}=No(m,!1,!0);L.push(b),K&&a.push(E)}}else if(Oo(P)){if(Vn(m)){D+=2;const s=If(m,P,B,{end:G});Fr(P)&&K&&a.push(s)}else if(Ut(m)||qr(m)){const s=m.readable||m;D++,kn(s,P,B,{end:G})}else if(It(m))D++,kn(m,P,B,{end:G});else throw new di("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=P}else if(mf(P)){if(Vn(m))D++,Kr(Vr(m),P,B,{end:G});else if(qr(m)||It(m))D++,Kr(m,P,B,{end:G});else if(Ut(m))D++,Kr(m.readable,P,B,{end:G});else throw new di("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=P}else m=To.from(P)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&ln.nextTick(c),m}function If(e,t,n,{end:r}){let i=!1;if(t.on("close",()=>{i||n(new wf)}),e.pipe(t,{end:!1}),r){let o=function(){i=!0,t.end()};Ef(e)?ln.nextTick(o):e.once("end",o)}else n();return Xn(e,{readable:!0,writable:!1},o=>{const a=e._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?e.once("end",n).once("error",n):n(o)}),Xn(t,{readable:!1,writable:!0},n)}var xi={pipelineImpl:Ks,pipeline:Rf};const{pipeline:Tf}=xi,Wn=ft(),{destroyer:Of}=Yt,{isNodeStream:Un,isReadable:xo,isWritable:Co,isWebStream:Yr,isTransformStream:At,isWritableStream:Lo,isReadableStream:Po}=dt,{AbortError:Nf,codes:{ERR_INVALID_ARG_VALUE:Mo,ERR_MISSING_ARGS:xf}}=xe,Cf=_t;var Ys=function(...t){if(t.length===0)throw new xf("streams");if(t.length===1)return Wn.from(t[0]);const n=[...t];if(typeof t[0]=="function"&&(t[0]=Wn.from(t[0])),typeof t[t.length-1]=="function"){const B=t.length-1;t[B]=Wn.from(t[B])}for(let B=0;B<t.length;++B)if(!(!Un(t[B])&&!Yr(t[B]))){if(B<t.length-1&&!(xo(t[B])||Po(t[B])||At(t[B])))throw new Mo(`streams[${B}]`,n[B],"must be readable");if(B>0&&!(Co(t[B])||Lo(t[B])||At(t[B])))throw new Mo(`streams[${B}]`,n[B],"must be writable")}let r,i,o,a,c;function p(B){const W=a;a=null,W?W(B):B?c.destroy(B):!D&&!L&&c.destroy()}const d=t[0],A=Tf(t,p),L=!!(Co(d)||Lo(d)||At(d)),D=!!(xo(A)||Po(A)||At(A));if(c=new Wn({writableObjectMode:!!(d!=null&&d.writableObjectMode),readableObjectMode:!!(A!=null&&A.readableObjectMode),writable:L,readable:D}),L){if(Un(d))c._write=function(W,m,I){d.write(W,m)?I():r=I},c._final=function(W){d.end(),i=W},d.on("drain",function(){if(r){const W=r;r=null,W()}});else if(Yr(d)){const m=(At(d)?d.writable:d).getWriter();c._write=async function(I,N,R){try{await m.ready,m.write(I).catch(()=>{}),R()}catch(P){R(P)}},c._final=async function(I){try{await m.ready,m.close().catch(()=>{}),i=I}catch(N){I(N)}}}const B=At(A)?A.readable:A;Cf(B,()=>{if(i){const W=i;i=null,W()}})}if(D){if(Un(A))A.on("readable",function(){if(o){const B=o;o=null,B()}}),A.on("end",function(){c.push(null)}),c._read=function(){for(;;){const B=A.read();if(B===null){o=c._read;return}if(!c.push(B))return}};else if(Yr(A)){const W=(At(A)?A.readable:A).getReader();c._read=async function(){for(;;)try{const{value:m,done:I}=await W.read();if(!c.push(m))return;if(I){c.push(null);return}}catch{return}}}}return c._destroy=function(B,W){!B&&a!==null&&(B=new Nf),o=null,r=null,i=null,a===null?W(B):(a=W,Un(A)&&Of(A,B))},c};const Lf=globalThis.AbortController||dn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Pf,ERR_INVALID_ARG_TYPE:yn,ERR_MISSING_ARGS:Mf,ERR_OUT_OF_RANGE:Bf},AbortError:et}=xe,{validateAbortSignal:Bt,validateInteger:Bo,validateObject:$t}=bn,$f=ye.Symbol("kWeak"),Df=ye.Symbol("kResistStopPropagation"),{finished:kf}=_t,Wf=Ys,{addAbortSignalNoValidate:Uf}=ar,{isWritable:jf,isNodeStream:Ff}=dt,{deprecate:qf}=Be,{ArrayPrototypePush:Hf,Boolean:Gf,MathFloor:$o,Number:zf,NumberIsNaN:Vf,Promise:Do,PromiseReject:ko,PromiseResolve:Kf,PromisePrototypeThen:Wo,Symbol:Zs}=ye,Qn=Zs("kEmpty"),Uo=Zs("kEof");function Yf(e,t){if(t!=null&&$t(t,"options"),(t==null?void 0:t.signal)!=null&&Bt(t.signal,"options.signal"),Ff(e)&&!jf(e))throw new Pf("stream",e,"must be writable");const n=Wf(this,e);return t!=null&&t.signal&&Uf(t.signal,n),n}function fr(e,t){if(typeof e!="function")throw new yn("fn",["Function","AsyncFunction"],e);t!=null&&$t(t,"options"),(t==null?void 0:t.signal)!=null&&Bt(t.signal,"options.signal");let n=1;(t==null?void 0:t.concurrency)!=null&&(n=$o(t.concurrency));let r=n-1;return(t==null?void 0:t.highWaterMark)!=null&&(r=$o(t.highWaterMark)),Bo(n,"options.concurrency",1),Bo(r,"options.highWaterMark",0),r+=n,(async function*(){const o=Be.AbortSignalAny([t==null?void 0:t.signal].filter(Gf)),a=this,c=[],p={signal:o};let d,A,L=!1,D=0;function B(){L=!0,W()}function W(){D-=1,m()}function m(){A&&!L&&D<n&&c.length<r&&(A(),A=null)}async function I(){try{for await(let N of a){if(L)return;if(o.aborted)throw new et;try{if(N=e(N,p),N===Qn)continue;N=Kf(N)}catch(R){N=ko(R)}D+=1,Wo(N,W,B),c.push(N),d&&(d(),d=null),!L&&(c.length>=r||D>=n)&&await new Do(R=>{A=R})}c.push(Uo)}catch(N){const R=ko(N);Wo(R,W,B),c.push(R)}finally{L=!0,d&&(d(),d=null)}}I();try{for(;;){for(;c.length>0;){const N=await c[0];if(N===Uo)return;if(o.aborted)throw new et;N!==Qn&&(yield N),c.shift(),m()}await new Do(N=>{d=N})}}finally{L=!0,A&&(A(),A=null)}}).call(this)}function Zf(e=void 0){return e!=null&&$t(e,"options"),(e==null?void 0:e.signal)!=null&&Bt(e.signal,"options.signal"),(async function*(){let n=0;for await(const i of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new et({cause:e.signal.reason});yield[n++,i]}}).call(this)}async function Js(e,t=void 0){for await(const n of Ci.call(this,e,t))return!0;return!1}async function Jf(e,t=void 0){if(typeof e!="function")throw new yn("fn",["Function","AsyncFunction"],e);return!await Js.call(this,async(...n)=>!await e(...n),t)}async function Xf(e,t){for await(const n of Ci.call(this,e,t))return n}async function Qf(e,t){if(typeof e!="function")throw new yn("fn",["Function","AsyncFunction"],e);async function n(r,i){return await e(r,i),Qn}for await(const r of fr.call(this,n,t));}function Ci(e,t){if(typeof e!="function")throw new yn("fn",["Function","AsyncFunction"],e);async function n(r,i){return await e(r,i)?r:Qn}return fr.call(this,n,t)}class ec extends Mf{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function tc(e,t,n){var r;if(typeof e!="function")throw new yn("reducer",["Function","AsyncFunction"],e);n!=null&&$t(n,"options"),(n==null?void 0:n.signal)!=null&&Bt(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const d=new et(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await kf(this.destroy(d)),d}const o=new Lf,a=o.signal;if(n!=null&&n.signal){const d={once:!0,[$f]:this,[Df]:!0};n.signal.addEventListener("abort",()=>o.abort(),d)}let c=!1;try{for await(const d of this){var p;if(c=!0,n!=null&&(p=n.signal)!==null&&p!==void 0&&p.aborted)throw new et;i?t=await e(t,d,{signal:a}):(t=d,i=!0)}if(!c&&!i)throw new ec}finally{o.abort()}return t}async function nc(e){e!=null&&$t(e,"options"),(e==null?void 0:e.signal)!=null&&Bt(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new et(void 0,{cause:e.signal.reason});Hf(t,r)}return t}function rc(e,t){const n=fr.call(this,e,t);return(async function*(){for await(const i of n)yield*i}).call(this)}function Xs(e){if(e=zf(e),Vf(e))return 0;if(e<0)throw new Bf("number",">= 0",e);return e}function ic(e,t=void 0){return t!=null&&$t(t,"options"),(t==null?void 0:t.signal)!=null&&Bt(t.signal,"options.signal"),e=Xs(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new et;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new et;e--<=0&&(yield o)}}).call(this)}function oc(e,t=void 0){return t!=null&&$t(t,"options"),(t==null?void 0:t.signal)!=null&&Bt(t.signal,"options.signal"),e=Xs(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new et;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new et;if(e-- >0&&(yield o),e<=0)return}}).call(this)}Si.streamReturningOperators={asIndexedPairs:qf(Zf,"readable.asIndexedPairs will be removed in a future version."),drop:ic,filter:Ci,flatMap:rc,map:fr,take:oc,compose:Yf};Si.promiseReturningOperators={every:Jf,forEach:Qf,reduce:tc,toArray:nc,some:Js,find:Xf};var Zr,jo;function Qs(){if(jo)return Zr;jo=1;const{ArrayPrototypePop:e,Promise:t}=ye,{isIterable:n,isNodeStream:r,isWebStream:i}=dt,{pipelineImpl:o}=xi,{finished:a}=_t;ea();function c(...p){return new t((d,A)=>{let L,D;const B=p[p.length-1];if(B&&typeof B=="object"&&!r(B)&&!n(B)&&!i(B)){const W=e(p);L=W.signal,D=W.end}o(p,(W,m)=>{W?A(W):d(m)},{signal:L,end:D})})}return Zr={finished:a,pipeline:c},Zr}var Fo;function ea(){if(Fo)return Pr.exports;Fo=1;const{Buffer:e}=Pt,{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=ye,{promisify:{custom:i}}=Be,{streamReturningOperators:o,promiseReturningOperators:a}=Si,{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=xe,p=Ys,{setDefaultHighWaterMark:d,getDefaultHighWaterMark:A}=lr,{pipeline:L}=xi,{destroyer:D}=Yt,B=_t,W=Qs(),m=dt,I=Pr.exports=Ii.Stream;I.isDestroyed=m.isDestroyed,I.isDisturbed=m.isDisturbed,I.isErrored=m.isErrored,I.isReadable=m.isReadable,I.isWritable=m.isWritable,I.Readable=ur();for(const R of n(o)){let H=function(...j){if(new.target)throw c();return I.Readable.from(r(P,this,j))};const P=o[R];t(H,"name",{__proto__:null,value:P.name}),t(H,"length",{__proto__:null,value:P.length}),t(I.Readable.prototype,R,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}for(const R of n(a)){let H=function(...j){if(new.target)throw c();return r(P,this,j)};const P=a[R];t(H,"name",{__proto__:null,value:P.name}),t(H,"length",{__proto__:null,value:P.length}),t(I.Readable.prototype,R,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}I.Writable=Ti(),I.Duplex=ft(),I.Transform=Gs,I.PassThrough=Vs,I.pipeline=L;const{addAbortSignal:N}=ar;return I.addAbortSignal=N,I.finished=B,I.destroy=D,I.compose=p,I.setDefaultHighWaterMark=d,I.getDefaultHighWaterMark=A,t(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return W}}),t(L,i,{__proto__:null,enumerable:!0,get(){return W.pipeline}}),t(B,i,{__proto__:null,enumerable:!0,get(){return W.finished}}),I.Stream=I,I._isUint8Array=function(P){return P instanceof Uint8Array},I._uint8ArrayToBuffer=function(P){return e.from(P.buffer,P.byteOffset,P.byteLength)},Pr.exports}(function(e){const t=ea(),n=Qs(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(bs);var cr=bs.exports,Li={exports:{}},sc=ta;function ta(e,t){if(e&&t)return ta(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(r){n[r]=e[r]}),n;function n(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];var o=e.apply(this,r),a=r[r.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach(function(c){o[c]=a[c]}),o}}var na=sc;Li.exports=na(Kn);Li.exports.strict=na(ra);Kn.proto=Kn(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Kn(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ra(this)},configurable:!0})});function Kn(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function ra(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var Pi=Li.exports;const ac=pn(Pi);var lc=Pi,uc=function(){},fc=jt.Bare?queueMicrotask:Zn.nextTick.bind(Zn),cc=function(e){return e.setHeader&&typeof e.abort=="function"},dc=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},ia=function(e,t,n){if(typeof t=="function")return ia(e,null,t);t||(t={}),n=lc(n||uc);var r=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,a=t.writable||t.writable!==!1&&e.writable,c=!1,p=function(){e.writable||d()},d=function(){a=!1,o||n.call(e)},A=function(){o=!1,a||n.call(e)},L=function(I){n.call(e,I?new Error("exited with error code: "+I):null)},D=function(I){n.call(e,I)},B=function(){fc(W)},W=function(){if(!c){if(o&&!(i&&i.ended&&!i.destroyed))return n.call(e,new Error("premature close"));if(a&&!(r&&r.ended&&!r.destroyed))return n.call(e,new Error("premature close"))}},m=function(){e.req.on("finish",d)};return cc(e)?(e.on("complete",d),e.on("abort",B),e.req?m():e.on("request",m)):a&&!r&&(e.on("end",p),e.on("close",p)),dc(e)&&e.on("exit",L),e.on("end",A),e.on("finish",d),t.error!==!1&&e.on("error",D),e.on("close",B),function(){c=!0,e.removeListener("complete",d),e.removeListener("abort",B),e.removeListener("request",m),e.req&&e.req.removeListener("finish",d),e.removeListener("end",p),e.removeListener("close",p),e.removeListener("finish",d),e.removeListener("exit",L),e.removeListener("end",A),e.removeListener("error",D),e.removeListener("close",B)}},oa=ia;const qo=pn(oa);var hc=null;const gc=Object.freeze(Object.defineProperty({__proto__:null,default:hc},Symbol.toStringTag,{value:"Module"})),pc=al(gc);var wc=Pi,bc=oa,Yn;try{Yn=pc}catch{}var hn=function(){},yc=typeof Zn>"u"?!1:/^v?\.0/.test(Zn.version),dr=function(e){return typeof e=="function"},_c=function(e){return!yc||!Yn?!1:(e instanceof(Yn.ReadStream||hn)||e instanceof(Yn.WriteStream||hn))&&dr(e.close)},mc=function(e){return e.setHeader&&dr(e.abort)},Ec=function(e,t,n,r){r=wc(r);var i=!1;e.on("close",function(){i=!0}),bc(e,{readable:t,writable:n},function(a){if(a)return r(a);i=!0,r()});var o=!1;return function(a){if(!i&&!o){if(o=!0,_c(e))return e.close(hn);if(mc(e))return e.abort();if(dr(e.destroy))return e.destroy();r(a||new Error("stream was destroyed"))}}},Ho=function(e){e()},Sc=function(e,t){return e.pipe(t)},vc=function(){var e=Array.prototype.slice.call(arguments),t=dr(e[e.length-1]||hn)&&e.pop()||hn;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var n,r=e.map(function(i,o){var a=o<e.length-1,c=o>0;return Ec(i,a,c,function(p){n||(n=p),p&&r.forEach(Ho),!a&&(r.forEach(Ho),t(n))})});return e.reduce(Sc)},Ac=vc;const Go=pn(Ac);function jn(){}const zo="SYN",Jr="ACK",Vo="BRK";class Ko extends cr.Duplex{constructor(t){let{name:n,target:r,targetWindow:i=window,targetOrigin:o="*"}=t;if(super({objectMode:!0}),te(this,"_init",void 0),te(this,"_haveSyn",void 0),te(this,"_name",void 0),te(this,"_target",void 0),te(this,"_targetWindow",void 0),te(this,"_targetOrigin",void 0),te(this,"_onMessage",void 0),te(this,"_synIntervalId",void 0),!n||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=n,this._target=r,this._targetWindow=i,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(Vo,null,jn),this._haveSyn=!1,this._init=!1}_handShake(){this._write(zo,null,jn),this.cork()}_onData(t){if(!this._init)t===zo?(this._haveSyn=!0,this._write(Jr,null,jn)):t===Jr&&(this._init=!0,this._haveSyn||this._write(Jr,null,jn),this.uncork());else if(t===Vo)this._break();else try{this.push(t)}catch(n){this.emit("error",n)}}_postMessage(t){const n=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},n)}onMessage(t){const n=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof n!="object"||n.target!==this._name||!n.data||this._onData(n.data)}_read(){}_write(t,n,r){this._postMessage(t),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Rc={rpc:{internal:-32603}},Yo={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Zo=Rc.rpc.internal,Ic="Unspecified error message. This is a bug, please report it.";function sa(e){return Number.isInteger(e)}function Jo(e){return typeof e=="string"&&e.length>0}function Xo(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function aa(e){const t=e;return!(!t||!sa(t.code)||!Jo(t.message)||t.stack&&!Jo(t.stack))}function Tc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ic;if(sa(e)){const n=e.toString();if(Object.hasOwn(Yo,n))return Yo[n].message}return t}const Oc={code:Zo,message:Tc(Zo)};function hi(e){try{JSON.parse(JSON.stringify(e,(t,n)=>{if(t==="__proto__"||t==="constructor")throw new Error("Not valid json");if(typeof n=="function"||typeof n=="symbol")throw new Error("Not valid json");return n}),(t,n)=>{if(!(t==="__proto__"||t==="constructor"))return n})}catch{return!1}return!0}function Qo(e){return Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return hi(r)&&(t[n]=r),t},{})}function Nc(e){return Array.isArray(e)?e.map(t=>hi(t)?t:Xo(t)?Qo(t):null):Xo(e)?Qo(e):hi(e)?e:null}function xc(e,t){if(e&&typeof e=="object"&&"serialize"in e&&typeof e.serialize=="function")return e.serialize();if(aa(e))return e;const n=Nc(e);return qe(qe({},t),{},{data:{cause:n}})}function es(e){let{fallbackError:t=Oc,shouldIncludeStack:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!aa(t))throw new Error("Must provide fallback error with integer number code and string message.");const r=xc(e,t);return n||delete r.stack,r}function ts(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function Cc(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}class hr extends wn.EventEmitter{emit(t){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(n){let p;if(o.length>0&&([p]=o),p instanceof Error)throw p;const d=new Error(`Unhandled error.${p?` (${p.message})`:""}`);throw d.context=p,d}const c=r[t];if(c===void 0)return!1;if(typeof c=="function")ts(c,this,o);else{const p=c.length,d=Cc(c);for(let A=0;A<p;A+=1)ts(d[A],this,o)}return!0}}class an extends Error{constructor(t){let{code:n,message:r,data:i}=t;if(!Number.isInteger(n))throw new Error("code must be an integer");if(!r||typeof r!="string")throw new Error("message must be string");super(r),te(this,"code",void 0),te(this,"data",void 0),this.code=n,i!==void 0&&(this.data=i)}toString(){return ul({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const gi=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(r,i)=>{r||i.error?t(r||i.error):!n||Array.isArray(i)?e(i):e(i.result)}};function Lc(){const e={};function t(){return!1}const n=new hr;function r(p){const d=e[p.id];if(!d)throw new Error(`StreamMiddleware - Unknown response id "${p.id}"`);delete e[p.id],Object.assign(d.res,p),setTimeout(d.end)}function i(p){n.emit("notification",p)}function o(p,d,A){let L;try{!p.id?i(p):r(p)}catch(D){L=D}A(L)}const a=new cr.Duplex({objectMode:!0,read:t,write:o});return{events:n,middleware:(p,d,A,L)=>{a.push(p),e[p.id]={req:p,res:d,next:A,end:L}},stream:a}}function Pc(){return(e,t,n,r)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,n(a=>{e.id=i,t.id=i,a()})}}class at extends hr{constructor(){super(),te(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,n,r){const i=[];let o=null,a=!1;for(const c of r)if([o,a]=await at._runMiddleware(t,n,c,i),a)break;return[o,a,i.reverse()]}static _runMiddleware(t,n,r,i){return new Promise(o=>{const a=p=>{const d=p||n.error;d&&(typeof d=="object"&&Object.keys(d).includes("stack")===!1&&(d.stack="Stack trace is not available."),n.error=es(d,{shouldIncludeStack:!0,fallbackError:{message:(d==null?void 0:d.message)||(d==null?void 0:d.toString()),code:(d==null?void 0:d.code)||-32603,stack:(d==null?void 0:d.stack)||"Stack trace is not available.",data:(d==null?void 0:d.data)||(d==null?void 0:d.message)||(d==null?void 0:d.toString())}})),o([d,!0])},c=p=>{n.error?a(n.error):(p&&(typeof p!="function"&&a(new an({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(p)),o([null,!1]))};try{r(t,n,c,a)}catch(p){a(p)}})}static async _runReturnHandlers(t){for(const n of t)await new Promise((r,i)=>{n(o=>o?i(o):r())})}static _checkForCompletion(t,n,r){if(!("result"in n)&&!("error"in n))throw new an({code:-32603,message:"Response has no error or result for request"});if(!r)throw new an({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,n){if(n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?n?this._handleBatch(t,n):this._handleBatch(t):n?this._handle(t,n):this._promiseHandle(t)}asMiddleware(){return async(t,n,r,i)=>{try{const[o,a,c]=await at._runAllMiddleware(t,n,this._middleware);return a?(await at._runReturnHandlers(c),i(o)):r(async p=>{try{await at._runReturnHandlers(c)}catch(d){return p(d)}return p()})}catch(o){return i(o)}}}async _handleBatch(t,n){try{const r=await Promise.all(t.map(this._promiseHandle.bind(this)));return n?n(null,r):r}catch(r){if(n)return n(r);throw r}}_promiseHandle(t){return new Promise((n,r)=>{this._handle(t,(i,o)=>{i&&o===void 0?r(i):n(o)}).catch(r)})}async _handle(t,n){if(!t||Array.isArray(t)||typeof t!="object"){const B=new an({code:-32603,message:"request must be plain object"});return n(B,{id:void 0,jsonrpc:"2.0",error:B})}if(typeof t.method!="string"){const B=new an({code:-32603,message:"method must be string"});return n(B,{id:t.id,jsonrpc:"2.0",error:B})}const r=qe({},t),i={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,i)}catch(B){o=B}if(o&&(delete i.result,!i.error)){var a,c,p,d,A,L,D;typeof o=="object"&&Object.keys(o).includes("stack")===!1&&(o.stack="Stack trace is not available."),i.error=es(o,{shouldIncludeStack:!0,fallbackError:{message:((a=o)===null||a===void 0?void 0:a.message)||((c=o)===null||c===void 0?void 0:c.toString()),code:((p=o)===null||p===void 0?void 0:p.code)||-32603,stack:((d=o)===null||d===void 0?void 0:d.stack)||"Stack trace is not available.",data:((A=o)===null||A===void 0?void 0:A.data)||((L=o)===null||L===void 0?void 0:L.message)||((D=o)===null||D===void 0?void 0:D.toString())}})}return n(o,i)}async _processRequest(t,n){const[r,i,o]=await at._runAllMiddleware(t,n,this._middleware);if(at._checkForCompletion(t,n,i),await at._runReturnHandlers(o),r)throw r}}class Mc extends cr.Duplex{constructor(t){let{parent:n,name:r}=t;super({objectMode:!0}),te(this,"_parent",void 0),te(this,"_name",void 0),this._parent=n,this._name=r}_read(){}_write(t,n,r){this._parent.push({name:this._name,data:t}),r()}}const ns=Symbol("IGNORE_SUBSTREAM");class Bc extends cr.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(qe(qe({},t),{},{objectMode:!0})),te(this,"_substreams",void 0),te(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const n=new Mc({parent:this,name:t});return this._substreams[t]=n,$c(this,r=>n.destroy(r||void 0)),n}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=ns}_read(){}_write(t,n,r){const{name:i,data:o}=t;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),r();const a=this._substreams[i];return a?(a!==ns&&a.push(o),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),r())}}function $c(e,t){const n=ac(t);qo(e,{readable:!1},n),qo(e,{writable:!1},n)}var er={exports:{}};er.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,a=9007199254740991,c="[object Arguments]",p="[object Array]",d="[object AsyncFunction]",A="[object Boolean]",L="[object Date]",D="[object Error]",B="[object Function]",W="[object GeneratorFunction]",m="[object Map]",I="[object Number]",N="[object Null]",R="[object Object]",P="[object Proxy]",H="[object RegExp]",j="[object Set]",G="[object String]",K="[object Undefined]",s="[object WeakMap]",u="[object ArrayBuffer]",b="[object DataView]",E="[object Float32Array]",_="[object Float64Array]",h="[object Int8Array]",x="[object Int16Array]",l="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",v="[object Uint16Array]",M="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,q=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,U={};U[E]=U[_]=U[h]=U[x]=U[l]=U[w]=U[S]=U[v]=U[M]=!0,U[c]=U[p]=U[u]=U[A]=U[b]=U[L]=U[D]=U[B]=U[m]=U[I]=U[R]=U[H]=U[j]=U[G]=U[s]=!1;var ne=typeof jt=="object"&&jt&&jt.Object===Object&&jt,ee=typeof self=="object"&&self&&self.Object===Object&&self,ie=ne||ee||Function("return this")(),se=t&&!t.nodeType&&t,Ee=se&&!0&&e&&!e.nodeType&&e,ve=Ee&&Ee.exports===se,Ae=ve&&ne.process,_e=function(){try{var g=Ee&&Ee.require&&Ee.require("util").types;return g||Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),me=_e&&_e.isTypedArray;function T(g,O,$){switch($.length){case 0:return g.call(O);case 1:return g.call(O,$[0]);case 2:return g.call(O,$[0],$[1]);case 3:return g.call(O,$[0],$[1],$[2])}return g.apply(O,$)}function C(g,O){for(var $=-1,J=Array(g);++$<g;)J[$]=O($);return J}function k(g){return function(O){return g(O)}}function Y(g,O){return g==null?void 0:g[O]}function Q(g,O){return function($){return g(O($))}}var fe=Array.prototype,ge=Function.prototype,le=Object.prototype,$e=ie["__core-js_shared__"],re=ge.toString,Oe=le.hasOwnProperty,Dt=function(){var g=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Sn=le.toString,yr=re.call(Object),vn=RegExp("^"+re.call(Oe).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=ve?ie.Buffer:void 0,mt=ie.Symbol,Jt=ie.Uint8Array;kt&&kt.allocUnsafe;var Et=Q(Object.getPrototypeOf,Object),An=Object.create,_r=le.propertyIsEnumerable,Rn=fe.splice,nt=mt?mt.toStringTag:void 0,Wt=function(){try{var g=Rr(Object,"defineProperty");return g({},"",{}),g}catch{}}(),mr=kt?kt.isBuffer:void 0,Xt=Math.max,In=Date.now,Tn=Rr(ie,"Map"),ht=Rr(Object,"create"),Qt=function(){function g(){}return function(O){if(!vt(O))return{};if(An)return An(O);g.prototype=O;var $=new g;return g.prototype=void 0,$}}();function rt(g){var O=-1,$=g==null?0:g.length;for(this.clear();++O<$;){var J=g[O];this.set(J[0],J[1])}}function Er(){this.__data__=ht?ht(null):{},this.size=0}function en(g){var O=this.has(g)&&delete this.__data__[g];return this.size-=O?1:0,O}function On(g){var O=this.__data__;if(ht){var $=O[g];return $===r?void 0:$}return Oe.call(O,g)?O[g]:void 0}function f(g){var O=this.__data__;return ht?O[g]!==void 0:Oe.call(O,g)}function y(g,O){var $=this.__data__;return this.size+=this.has(g)?0:1,$[g]=ht&&O===void 0?r:O,this}rt.prototype.clear=Er,rt.prototype.delete=en,rt.prototype.get=On,rt.prototype.has=f,rt.prototype.set=y;function z(g){var O=-1,$=g==null?0:g.length;for(this.clear();++O<$;){var J=g[O];this.set(J[0],J[1])}}function V(){this.__data__=[],this.size=0}function Z(g){var O=this.__data__,$=Pn(O,g);if($<0)return!1;var J=O.length-1;return $==J?O.pop():Rn.call(O,$,1),--this.size,!0}function Re(g){var O=this.__data__,$=Pn(O,g);return $<0?void 0:O[$][1]}function Ce(g){return Pn(this.__data__,g)>-1}function Nn(g,O){var $=this.__data__,J=Pn($,g);return J<0?(++this.size,$.push([g,O])):$[J][1]=O,this}z.prototype.clear=V,z.prototype.delete=Z,z.prototype.get=Re,z.prototype.has=Ce,z.prototype.set=Nn;function Le(g){var O=-1,$=g==null?0:g.length;for(this.clear();++O<$;){var J=g[O];this.set(J[0],J[1])}}function xn(){this.size=0,this.__data__={hash:new rt,map:new(Tn||z),string:new rt}}function Sr(g){var O=Bn(this,g).delete(g);return this.size-=O?1:0,O}function Cn(g){return Bn(this,g).get(g)}function Ln(g){return Bn(this,g).has(g)}function tn(g,O){var $=Bn(this,g),J=$.size;return $.set(g,O),this.size+=$.size==J?0:1,this}Le.prototype.clear=xn,Le.prototype.delete=Sr,Le.prototype.get=Cn,Le.prototype.has=Ln,Le.prototype.set=tn;function Je(g){var O=this.__data__=new z(g);this.size=O.size}function nn(){this.__data__=new z,this.size=0}function St(g){var O=this.__data__,$=O.delete(g);return this.size=O.size,$}function it(g){return this.__data__.get(g)}function ze(g){return this.__data__.has(g)}function Ta(g,O){var $=this.__data__;if($ instanceof z){var J=$.__data__;if(!Tn||J.length<n-1)return J.push([g,O]),this.size=++$.size,this;$=this.__data__=new Le(J)}return $.set(g,O),this.size=$.size,this}Je.prototype.clear=nn,Je.prototype.delete=St,Je.prototype.get=it,Je.prototype.has=ze,Je.prototype.set=Ta;function Oa(g,O){var $=Or(g),J=!$&&Tr(g),ae=!$&&!J&&Vi(g),ce=!$&&!J&&!ae&&Yi(g),pe=$||J||ae||ce,ue=pe?C(g.length,String):[],we=ue.length;for(var Ve in g)pe&&(Ve=="length"||ae&&(Ve=="offset"||Ve=="parent")||ce&&(Ve=="buffer"||Ve=="byteLength"||Ve=="byteOffset")||Gi(Ve,we))||ue.push(Ve);return ue}function vr(g,O,$){($!==void 0&&!$n(g[O],$)||$===void 0&&!(O in g))&&Ar(g,O,$)}function Na(g,O,$){var J=g[O];(!(Oe.call(g,O)&&$n(J,$))||$===void 0&&!(O in g))&&Ar(g,O,$)}function Pn(g,O){for(var $=g.length;$--;)if($n(g[$][0],O))return $;return-1}function Ar(g,O,$){O=="__proto__"&&Wt?Wt(g,O,{configurable:!0,enumerable:!0,value:$,writable:!0}):g[O]=$}var xa=qa();function Mn(g){return g==null?g===void 0?K:N:nt&&nt in Object(g)?Ha(g):Za(g)}function qi(g){return rn(g)&&Mn(g)==c}function Ca(g){if(!vt(g)||Ka(g))return!1;var O=xr(g)?vn:q;return O.test(el(g))}function La(g){return rn(g)&&Ki(g.length)&&!!U[Mn(g)]}function Pa(g){if(!vt(g))return Ya(g);var O=zi(g),$=[];for(var J in g)J=="constructor"&&(O||!Oe.call(g,J))||$.push(J);return $}function Hi(g,O,$,J,ae){g!==O&&xa(O,function(ce,pe){if(ae||(ae=new Je),vt(ce))Ma(g,O,pe,$,Hi,J,ae);else{var ue=J?J(Ir(g,pe),ce,pe+"",g,O,ae):void 0;ue===void 0&&(ue=ce),vr(g,pe,ue)}},Zi)}function Ma(g,O,$,J,ae,ce,pe){var ue=Ir(g,$),we=Ir(O,$),Ve=pe.get(we);if(Ve){vr(g,$,Ve);return}var De=ce?ce(ue,we,$+"",g,O,pe):void 0,on=De===void 0;if(on){var Cr=Or(we),Lr=!Cr&&Vi(we),Xi=!Cr&&!Lr&&Yi(we);De=we,Cr||Lr||Xi?Or(ue)?De=ue:tl(ue)?De=Ua(ue):Lr?(on=!1,De=Da(we)):Xi?(on=!1,De=Wa(we)):De=[]:nl(we)||Tr(we)?(De=ue,Tr(ue)?De=rl(ue):(!vt(ue)||xr(ue))&&(De=Ga(we))):on=!1}on&&(pe.set(we,De),ae(De,we,J,ce,pe),pe.delete(we)),vr(g,$,De)}function Ba(g,O){return Xa(Ja(g,O,Ji),g+"")}var $a=Wt?function(g,O){return Wt(g,"toString",{configurable:!0,enumerable:!1,value:ol(O),writable:!0})}:Ji;function Da(g,O){return g.slice()}function ka(g){var O=new g.constructor(g.byteLength);return new Jt(O).set(new Jt(g)),O}function Wa(g,O){var $=ka(g.buffer);return new g.constructor($,g.byteOffset,g.length)}function Ua(g,O){var $=-1,J=g.length;for(O||(O=Array(J));++$<J;)O[$]=g[$];return O}function ja(g,O,$,J){var ae=!$;$||($={});for(var ce=-1,pe=O.length;++ce<pe;){var ue=O[ce],we=void 0;we===void 0&&(we=g[ue]),ae?Ar($,ue,we):Na($,ue,we)}return $}function Fa(g){return Ba(function(O,$){var J=-1,ae=$.length,ce=ae>1?$[ae-1]:void 0,pe=ae>2?$[2]:void 0;for(ce=g.length>3&&typeof ce=="function"?(ae--,ce):void 0,pe&&za($[0],$[1],pe)&&(ce=ae<3?void 0:ce,ae=1),O=Object(O);++J<ae;){var ue=$[J];ue&&g(O,ue,J,ce)}return O})}function qa(g){return function(O,$,J){for(var ae=-1,ce=Object(O),pe=J(O),ue=pe.length;ue--;){var we=pe[++ae];if($(ce[we],we,ce)===!1)break}return O}}function Bn(g,O){var $=g.__data__;return Va(O)?$[typeof O=="string"?"string":"hash"]:$.map}function Rr(g,O){var $=Y(g,O);return Ca($)?$:void 0}function Ha(g){var O=Oe.call(g,nt),$=g[nt];try{g[nt]=void 0;var J=!0}catch{}var ae=Sn.call(g);return J&&(O?g[nt]=$:delete g[nt]),ae}function Ga(g){return typeof g.constructor=="function"&&!zi(g)?Qt(Et(g)):{}}function Gi(g,O){var $=typeof g;return O=O??a,!!O&&($=="number"||$!="symbol"&&X.test(g))&&g>-1&&g%1==0&&g<O}function za(g,O,$){if(!vt($))return!1;var J=typeof O;return(J=="number"?Nr($)&&Gi(O,$.length):J=="string"&&O in $)?$n($[O],g):!1}function Va(g){var O=typeof g;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?g!=="__proto__":g===null}function Ka(g){return!!Dt&&Dt in g}function zi(g){var O=g&&g.constructor,$=typeof O=="function"&&O.prototype||le;return g===$}function Ya(g){var O=[];if(g!=null)for(var $ in Object(g))O.push($);return O}function Za(g){return Sn.call(g)}function Ja(g,O,$){return O=Xt(O===void 0?g.length-1:O,0),function(){for(var J=arguments,ae=-1,ce=Xt(J.length-O,0),pe=Array(ce);++ae<ce;)pe[ae]=J[O+ae];ae=-1;for(var ue=Array(O+1);++ae<O;)ue[ae]=J[ae];return ue[O]=$(pe),T(g,this,ue)}}function Ir(g,O){if(!(O==="constructor"&&typeof g[O]=="function")&&O!="__proto__")return g[O]}var Xa=Qa($a);function Qa(g){var O=0,$=0;return function(){var J=In(),ae=o-(J-$);if($=J,ae>0){if(++O>=i)return arguments[0]}else O=0;return g.apply(void 0,arguments)}}function el(g){if(g!=null){try{return re.call(g)}catch{}try{return g+""}catch{}}return""}function $n(g,O){return g===O||g!==g&&O!==O}var Tr=qi(function(){return arguments}())?qi:function(g){return rn(g)&&Oe.call(g,"callee")&&!_r.call(g,"callee")},Or=Array.isArray;function Nr(g){return g!=null&&Ki(g.length)&&!xr(g)}function tl(g){return rn(g)&&Nr(g)}var Vi=mr||sl;function xr(g){if(!vt(g))return!1;var O=Mn(g);return O==B||O==W||O==d||O==P}function Ki(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=a}function vt(g){var O=typeof g;return g!=null&&(O=="object"||O=="function")}function rn(g){return g!=null&&typeof g=="object"}function nl(g){if(!rn(g)||Mn(g)!=R)return!1;var O=Et(g);if(O===null)return!0;var $=Oe.call(O,"constructor")&&O.constructor;return typeof $=="function"&&$ instanceof $&&re.call($)==yr}var Yi=me?k(me):La;function rl(g){return ja(g,Zi(g))}function Zi(g){return Nr(g)?Oa(g):Pa(g)}var il=Fa(function(g,O,$){Hi(g,O,$)});function ol(g){return function(){return g}}function Ji(g){return g}function sl(){return!1}e.exports=il})(er,er.exports);er.exports;var la={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(jt,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},a=null;function c(m,I){var N=m[I];if(typeof N.bind=="function")return N.bind(m);try{return Function.prototype.bind.call(N,m)}catch{return function(){return Function.prototype.apply.apply(N,[m,arguments])}}}function p(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?p:console[m]!==void 0?c(console,m):console.log!==void 0?c(console,"log"):t}function A(){for(var m=this.getLevel(),I=0;I<i.length;I++){var N=i[I];this[N]=I<m?t:this.methodFactory(N,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function L(m){return function(){typeof console!==n&&(A.call(this),this[m].apply(this,arguments))}}function D(m,I,N){return d(m)||L.apply(this,arguments)}function B(m,I){var N=this,R,P,H,j="loglevel";typeof m=="string"?j+=":"+m:typeof m=="symbol"&&(j=void 0);function G(E){var _=(i[E]||"silent").toUpperCase();if(!(typeof window===n||!j)){try{window.localStorage[j]=_;return}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+_+";"}catch{}}}function K(){var E;if(!(typeof window===n||!j)){try{E=window.localStorage[j]}catch{}if(typeof E===n)try{var _=window.document.cookie,h=encodeURIComponent(j),x=_.indexOf(h+"=");x!==-1&&(E=/^([^;]+)/.exec(_.slice(x+h.length+1))[1])}catch{}return N.levels[E]===void 0&&(E=void 0),E}}function s(){if(!(typeof window===n||!j)){try{window.localStorage.removeItem(j)}catch{}try{window.document.cookie=encodeURIComponent(j)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function u(E){var _=E;if(typeof _=="string"&&N.levels[_.toUpperCase()]!==void 0&&(_=N.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=N.levels.SILENT)return _;throw new TypeError("log.setLevel() called with invalid level: "+E)}N.name=m,N.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},N.methodFactory=I||D,N.getLevel=function(){return H??P??R},N.setLevel=function(E,_){return H=u(E),_!==!1&&G(H),A.call(N)},N.setDefaultLevel=function(E){P=u(E),K()||N.setLevel(E,!1)},N.resetLevel=function(){H=null,s(),A.call(N)},N.enableAll=function(E){N.setLevel(N.levels.TRACE,E)},N.disableAll=function(E){N.setLevel(N.levels.SILENT,E)},N.rebuild=function(){if(a!==N&&(R=u(a.getLevel())),A.call(N),a===N)for(var E in o)o[E].rebuild()},R=u(a?a.getLevel():"WARN");var b=K();b!=null&&(H=u(b)),A.call(N)}a=new B,a.getLogger=function(I){if(typeof I!="symbol"&&typeof I!="string"||I==="")throw new TypeError("You must supply a name when creating a logger.");var N=o[I];return N||(N=o[I]=new B(I,a.methodFactory)),N};var W=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=W),a},a.getLoggers=function(){return o},a.default=a,a})})(la);var ua=la.exports;const tr=pn(ua),Dc=tr.getLogger("http-helpers");Dc.setLevel(ua.levels.INFO);class fa extends fl{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,cl(t);const r=dl(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return eo(this),this.iHash.update(t),this}digestInto(t){eo(this),hl(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:a,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ca=(e,t,n)=>new fa(e,t).update(n).digest();ca.create=(e,t)=>new fa(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const da=BigInt(0),gr=BigInt(1),kc=BigInt(2);function Ct(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function _n(e){if(!Ct(e))throw new Error("Uint8Array expected")}const Wc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function zt(e){_n(e);let t="";for(let n=0;n<e.length;n++)t+=Wc[e[n]];return t}function ha(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Mi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const ot={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function rs(e){if(e>=ot._0&&e<=ot._9)return e-ot._0;if(e>=ot._A&&e<=ot._F)return e-(ot._A-10);if(e>=ot._a&&e<=ot._f)return e-(ot._a-10)}function Vt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const a=rs(e.charCodeAt(o)),c=rs(e.charCodeAt(o+1));if(a===void 0||c===void 0){const p=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+o)}r[i]=a*16+c}return r}function xt(e){return Mi(zt(e))}function Bi(e){return _n(e),Mi(zt(Uint8Array.from(e).reverse()))}function Kt(e,t){return Vt(e.toString(16).padStart(t*2,"0"))}function $i(e,t){return Kt(e,t).reverse()}function Uc(e){return Vt(ha(e))}function Ye(e,t,n){let r;if(typeof t=="string")try{r=Vt(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Ct(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function gn(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];_n(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}function jc(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function Fc(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function qc(e){let t;for(t=0;e>da;e>>=gr,t+=1);return t}function Hc(e,t){return e>>BigInt(t)&gr}function Gc(e,t,n){return e|(n?gr:da)<<BigInt(t)}const Di=e=>(kc<<BigInt(e-1))-gr,Xr=e=>new Uint8Array(e),is=e=>Uint8Array.from(e);function ga(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Xr(e),i=Xr(e),o=0;const a=()=>{r.fill(1),i.fill(0),o=0},c=(...L)=>n(i,r,...L),p=(L=Xr())=>{i=c(is([0]),L),r=c(),L.length!==0&&(i=c(is([1]),L),r=c())},d=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let L=0;const D=[];for(;L<t;){r=c();const B=r.slice();D.push(B),L+=r.length}return gn(...D)};return(L,D)=>{a(),p(L);let B;for(;!(B=D(d()));)p();return a(),B}}const zc={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ct(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function mn(e,t,n={}){const r=(i,o,a)=>{const c=zc[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);const p=e[i];if(!(a&&p===void 0)&&!c(p,e))throw new Error(`Invalid param ${String(i)}=${p} (${typeof p}), expected ${o}`)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const Vc=Object.freeze(Object.defineProperty({__proto__:null,abytes:_n,bitGet:Hc,bitLen:qc,bitMask:Di,bitSet:Gc,bytesToHex:zt,bytesToNumberBE:xt,bytesToNumberLE:Bi,concatBytes:gn,createHmacDrbg:ga,ensureBytes:Ye,equalBytes:jc,hexToBytes:Vt,hexToNumber:Mi,isBytes:Ct,numberToBytesBE:Kt,numberToBytesLE:$i,numberToHexUnpadded:ha,numberToVarBytesBE:Uc,utf8ToBytes:Fc,validateObject:mn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Te=BigInt(0),Se=BigInt(1),Tt=BigInt(2),Kc=BigInt(3),pi=BigInt(4),os=BigInt(5),ss=BigInt(8);BigInt(9);BigInt(16);function Me(e,t){const n=e%t;return n>=Te?n:t+n}function Yc(e,t,n){if(n<=Te||t<Te)throw new Error("Expected power/modulo > 0");if(n===Se)return Te;let r=Se;for(;t>Te;)t&Se&&(r=r*e%n),e=e*e%n,t>>=Se;return r}function ke(e,t,n){let r=e;for(;t-- >Te;)r*=r,r%=n;return r}function wi(e,t){if(e===Te||t<=Te)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Me(e,t),r=t,i=Te,o=Se;for(;n!==Te;){const c=r/n,p=r%n,d=i-o*c;r=n,n=p,i=o,o=d}if(r!==Se)throw new Error("invert: does not exist");return Me(i,t)}function Zc(e){const t=(e-Se)/Tt;let n,r,i;for(n=e-Se,r=0;n%Tt===Te;n/=Tt,r++);for(i=Tt;i<e&&Yc(i,t,e)!==e-Se;i++);if(r===1){const a=(e+Se)/pi;return function(p,d){const A=p.pow(d,a);if(!p.eql(p.sqr(A),d))throw new Error("Cannot find square root");return A}}const o=(n+Se)/Tt;return function(c,p){if(c.pow(p,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let d=r,A=c.pow(c.mul(c.ONE,i),n),L=c.pow(p,o),D=c.pow(p,n);for(;!c.eql(D,c.ONE);){if(c.eql(D,c.ZERO))return c.ZERO;let B=1;for(let m=c.sqr(D);B<d&&!c.eql(m,c.ONE);B++)m=c.sqr(m);const W=c.pow(A,Se<<BigInt(d-B-1));A=c.sqr(W),L=c.mul(L,W),D=c.mul(D,A),d=B}return L}}function Jc(e){if(e%pi===Kc){const t=(e+Se)/pi;return function(r,i){const o=r.pow(i,t);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%ss===os){const t=(e-os)/ss;return function(r,i){const o=r.mul(i,Tt),a=r.pow(o,t),c=r.mul(i,a),p=r.mul(r.mul(c,Tt),a),d=r.mul(c,r.sub(p,r.ONE));if(!r.eql(r.sqr(d),i))throw new Error("Cannot find square root");return d}}return Zc(e)}const Xc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qc(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Xc.reduce((r,i)=>(r[i]="function",r),t);return mn(e,n)}function ed(e,t,n){if(n<Te)throw new Error("Expected power > 0");if(n===Te)return e.ONE;if(n===Se)return t;let r=e.ONE,i=t;for(;n>Te;)n&Se&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Se;return r}function td(e,t){const n=new Array(t.length),r=t.reduce((o,a,c)=>e.is0(a)?o:(n[c]=o,e.mul(o,a)),e.ONE),i=e.inv(r);return t.reduceRight((o,a,c)=>e.is0(a)?o:(n[c]=e.mul(o,n[c]),e.mul(o,a)),i),n}function pa(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function nd(e,t,n=!1,r={}){if(e<=Te)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=pa(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Jc(e),c=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Di(i),ZERO:Te,ONE:Se,create:p=>Me(p,e),isValid:p=>{if(typeof p!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof p}`);return Te<=p&&p<e},is0:p=>p===Te,isOdd:p=>(p&Se)===Se,neg:p=>Me(-p,e),eql:(p,d)=>p===d,sqr:p=>Me(p*p,e),add:(p,d)=>Me(p+d,e),sub:(p,d)=>Me(p-d,e),mul:(p,d)=>Me(p*d,e),pow:(p,d)=>ed(c,p,d),div:(p,d)=>Me(p*wi(d,e),e),sqrN:p=>p*p,addN:(p,d)=>p+d,subN:(p,d)=>p-d,mulN:(p,d)=>p*d,inv:p=>wi(p,e),sqrt:r.sqrt||(p=>a(c,p)),invertBatch:p=>td(c,p),cmov:(p,d,A)=>A?d:p,toBytes:p=>n?$i(p,o):Kt(p,o),fromBytes:p=>{if(p.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${p.length}`);return n?Bi(p):xt(p)}});return Object.freeze(c)}function wa(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ba(e){const t=wa(e);return t+Math.ceil(t/2)}function rd(e,t,n=!1){const r=e.length,i=wa(t),o=ba(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const a=n?xt(e):Bi(e),c=Me(a,t-Se)+Se;return n?$i(c,i):Kt(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const id=BigInt(0),Qr=BigInt(1);function od(e,t){const n=(i,o)=>{const a=o.negate();return i?a:o},r=i=>{const o=Math.ceil(t/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:n,unsafeLadder(i,o){let a=e.ZERO,c=i;for(;o>id;)o&Qr&&(a=a.add(c)),c=c.double(),o>>=Qr;return a},precomputeWindow(i,o){const{windows:a,windowSize:c}=r(o),p=[];let d=i,A=d;for(let L=0;L<a;L++){A=d,p.push(A);for(let D=1;D<c;D++)A=A.add(d),p.push(A);d=A.double()}return p},wNAF(i,o,a){const{windows:c,windowSize:p}=r(i);let d=e.ZERO,A=e.BASE;const L=BigInt(2**i-1),D=2**i,B=BigInt(i);for(let W=0;W<c;W++){const m=W*p;let I=Number(a&L);a>>=B,I>p&&(I-=D,a+=Qr);const N=m,R=m+Math.abs(I)-1,P=W%2!==0,H=I<0;I===0?A=A.add(n(P,o[N])):d=d.add(n(H,o[R]))}return{p:d,f:A}},wNAFCached(i,o,a,c){const p=i._WINDOW_SIZE||1;let d=o.get(i);return d||(d=this.precomputeWindow(i,p),p!==1&&o.set(i,c(d))),this.wNAF(p,d,a)}}}function ya(e){return Qc(e.Fp),mn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...pa(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sd(e){const t=ya(e);mn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:ad,hexToBytes:ld}=Vc,Ot={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Ot;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ad(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ot,n=typeof e=="string"?ld(e):e;_n(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=Ot._parseInt(n.subarray(2)),{d:a,l:c}=Ot._parseInt(o);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=d=>Number.parseInt(d[0],16)&8?"00"+d:d,n=d=>{const A=d.toString(16);return A.length&1?`0${A}`:A},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,a=i.length/2,c=n(o),p=n(a);return`30${n(a+o+4)}02${p}${i}02${c}${r}`}},lt=BigInt(0),Fe=BigInt(1);BigInt(2);const as=BigInt(3);BigInt(4);function ud(e){const t=sd(e),{Fp:n}=t,r=t.toBytes||((W,m,I)=>{const N=m.toAffine();return gn(Uint8Array.from([4]),n.toBytes(N.x),n.toBytes(N.y))}),i=t.fromBytes||(W=>{const m=W.subarray(1),I=n.fromBytes(m.subarray(0,n.BYTES)),N=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:I,y:N}});function o(W){const{a:m,b:I}=t,N=n.sqr(W),R=n.mul(N,W);return n.add(n.add(R,n.mul(W,m)),I)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(W){return typeof W=="bigint"&&lt<W&&W<t.n}function c(W){if(!a(W))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function p(W){const{allowedPrivateKeyLengths:m,nByteLength:I,wrapPrivateKey:N,n:R}=t;if(m&&typeof W!="bigint"){if(Ct(W)&&(W=zt(W)),typeof W!="string"||!m.includes(W.length))throw new Error("Invalid key");W=W.padStart(I*2,"0")}let P;try{P=typeof W=="bigint"?W:xt(Ye("private key",W,I))}catch{throw new Error(`private key must be ${I} bytes, hex or bigint, not ${typeof W}`)}return N&&(P=Me(P,R)),c(P),P}const d=new Map;function A(W){if(!(W instanceof L))throw new Error("ProjectivePoint expected")}class L{constructor(m,I,N){if(this.px=m,this.py=I,this.pz=N,m==null||!n.isValid(m))throw new Error("x required");if(I==null||!n.isValid(I))throw new Error("y required");if(N==null||!n.isValid(N))throw new Error("z required")}static fromAffine(m){const{x:I,y:N}=m||{};if(!m||!n.isValid(I)||!n.isValid(N))throw new Error("invalid affine point");if(m instanceof L)throw new Error("projective point not allowed");const R=P=>n.eql(P,n.ZERO);return R(I)&&R(N)?L.ZERO:new L(I,N,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const I=n.invertBatch(m.map(N=>N.pz));return m.map((N,R)=>N.toAffine(I[R])).map(L.fromAffine)}static fromHex(m){const I=L.fromAffine(i(Ye("pointHex",m)));return I.assertValidity(),I}static fromPrivateKey(m){return L.BASE.multiply(p(m))}_setWindowSize(m){this._WINDOW_SIZE=m,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:I}=this.toAffine();if(!n.isValid(m)||!n.isValid(I))throw new Error("bad point: x or y not FE");const N=n.sqr(I),R=o(m);if(!n.eql(N,R))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){A(m);const{px:I,py:N,pz:R}=this,{px:P,py:H,pz:j}=m,G=n.eql(n.mul(I,j),n.mul(P,R)),K=n.eql(n.mul(N,j),n.mul(H,R));return G&&K}negate(){return new L(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:I}=t,N=n.mul(I,as),{px:R,py:P,pz:H}=this;let j=n.ZERO,G=n.ZERO,K=n.ZERO,s=n.mul(R,R),u=n.mul(P,P),b=n.mul(H,H),E=n.mul(R,P);return E=n.add(E,E),K=n.mul(R,H),K=n.add(K,K),j=n.mul(m,K),G=n.mul(N,b),G=n.add(j,G),j=n.sub(u,G),G=n.add(u,G),G=n.mul(j,G),j=n.mul(E,j),K=n.mul(N,K),b=n.mul(m,b),E=n.sub(s,b),E=n.mul(m,E),E=n.add(E,K),K=n.add(s,s),s=n.add(K,s),s=n.add(s,b),s=n.mul(s,E),G=n.add(G,s),b=n.mul(P,H),b=n.add(b,b),s=n.mul(b,E),j=n.sub(j,s),K=n.mul(b,u),K=n.add(K,K),K=n.add(K,K),new L(j,G,K)}add(m){A(m);const{px:I,py:N,pz:R}=this,{px:P,py:H,pz:j}=m;let G=n.ZERO,K=n.ZERO,s=n.ZERO;const u=t.a,b=n.mul(t.b,as);let E=n.mul(I,P),_=n.mul(N,H),h=n.mul(R,j),x=n.add(I,N),l=n.add(P,H);x=n.mul(x,l),l=n.add(E,_),x=n.sub(x,l),l=n.add(I,R);let w=n.add(P,j);return l=n.mul(l,w),w=n.add(E,h),l=n.sub(l,w),w=n.add(N,R),G=n.add(H,j),w=n.mul(w,G),G=n.add(_,h),w=n.sub(w,G),s=n.mul(u,l),G=n.mul(b,h),s=n.add(G,s),G=n.sub(_,s),s=n.add(_,s),K=n.mul(G,s),_=n.add(E,E),_=n.add(_,E),h=n.mul(u,h),l=n.mul(b,l),_=n.add(_,h),h=n.sub(E,h),h=n.mul(u,h),l=n.add(l,h),E=n.mul(_,l),K=n.add(K,E),E=n.mul(w,l),G=n.mul(x,G),G=n.sub(G,E),E=n.mul(x,_),s=n.mul(w,s),s=n.add(s,E),new L(G,K,s)}subtract(m){return this.add(m.negate())}is0(){return this.equals(L.ZERO)}wNAF(m){return B.wNAFCached(this,d,m,I=>{const N=n.invertBatch(I.map(R=>R.pz));return I.map((R,P)=>R.toAffine(N[P])).map(L.fromAffine)})}multiplyUnsafe(m){const I=L.ZERO;if(m===lt)return I;if(c(m),m===Fe)return this;const{endo:N}=t;if(!N)return B.unsafeLadder(this,m);let{k1neg:R,k1:P,k2neg:H,k2:j}=N.splitScalar(m),G=I,K=I,s=this;for(;P>lt||j>lt;)P&Fe&&(G=G.add(s)),j&Fe&&(K=K.add(s)),s=s.double(),P>>=Fe,j>>=Fe;return R&&(G=G.negate()),H&&(K=K.negate()),K=new L(n.mul(K.px,N.beta),K.py,K.pz),G.add(K)}multiply(m){c(m);let I=m,N,R;const{endo:P}=t;if(P){const{k1neg:H,k1:j,k2neg:G,k2:K}=P.splitScalar(I);let{p:s,f:u}=this.wNAF(j),{p:b,f:E}=this.wNAF(K);s=B.constTimeNegate(H,s),b=B.constTimeNegate(G,b),b=new L(n.mul(b.px,P.beta),b.py,b.pz),N=s.add(b),R=u.add(E)}else{const{p:H,f:j}=this.wNAF(I);N=H,R=j}return L.normalizeZ([N,R])[0]}multiplyAndAddUnsafe(m,I,N){const R=L.BASE,P=(j,G)=>G===lt||G===Fe||!j.equals(R)?j.multiplyUnsafe(G):j.multiply(G),H=P(this,I).add(P(m,N));return H.is0()?void 0:H}toAffine(m){const{px:I,py:N,pz:R}=this,P=this.is0();m==null&&(m=P?n.ONE:n.inv(R));const H=n.mul(I,m),j=n.mul(N,m),G=n.mul(R,m);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(G,n.ONE))throw new Error("invZ was invalid");return{x:H,y:j}}isTorsionFree(){const{h:m,isTorsionFree:I}=t;if(m===Fe)return!0;if(I)return I(L,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:I}=t;return m===Fe?this:I?I(L,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return this.assertValidity(),r(L,this,m)}toHex(m=!0){return zt(this.toRawBytes(m))}}L.BASE=new L(t.Gx,t.Gy,n.ONE),L.ZERO=new L(n.ZERO,n.ONE,n.ZERO);const D=t.nBitLength,B=od(L,t.endo?Math.ceil(D/2):D);return{CURVE:t,ProjectivePoint:L,normPrivateKeyToScalar:p,weierstrassEquation:o,isWithinCurveOrder:a}}function fd(e){const t=ya(e);return mn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function cd(e){const t=fd(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function a(l){return lt<l&&l<n.ORDER}function c(l){return Me(l,r)}function p(l){return wi(l,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:A,weierstrassEquation:L,isWithinCurveOrder:D}=ud({...t,toBytes(l,w,S){const v=w.toAffine(),M=n.toBytes(v.x),F=gn;return S?F(Uint8Array.from([w.hasEvenY()?2:3]),M):F(Uint8Array.from([4]),M,n.toBytes(v.y))},fromBytes(l){const w=l.length,S=l[0],v=l.subarray(1);if(w===i&&(S===2||S===3)){const M=xt(v);if(!a(M))throw new Error("Point is not on curve");const F=L(M);let q;try{q=n.sqrt(F)}catch(ne){const ee=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+ee)}const X=(q&Fe)===Fe;return(S&1)===1!==X&&(q=n.neg(q)),{x:M,y:q}}else if(w===o&&S===4){const M=n.fromBytes(v.subarray(0,n.BYTES)),F=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:M,y:F}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),B=l=>zt(Kt(l,t.nByteLength));function W(l){const w=r>>Fe;return l>w}function m(l){return W(l)?c(-l):l}const I=(l,w,S)=>xt(l.slice(w,S));class N{constructor(w,S,v){this.r=w,this.s=S,this.recovery=v,this.assertValidity()}static fromCompact(w){const S=t.nByteLength;return w=Ye("compactSignature",w,S*2),new N(I(w,0,S),I(w,S,2*S))}static fromDER(w){const{r:S,s:v}=Ot.toSig(Ye("DER",w));return new N(S,v)}assertValidity(){if(!D(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!D(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new N(this.r,this.s,w)}recoverPublicKey(w){const{r:S,s:v,recovery:M}=this,F=K(Ye("msgHash",w));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const q=M===2||M===3?S+t.n:S;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=M&1?"03":"02",U=d.fromHex(X+B(q)),ne=p(q),ee=c(-F*ne),ie=c(v*ne),se=d.BASE.multiplyAndAddUnsafe(U,ee,ie);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return W(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Vt(this.toDERHex())}toDERHex(){return Ot.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Vt(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const R={isValidPrivateKey(l){try{return A(l),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const l=ba(t.n);return rd(t.randomBytes(l),t.n)},precompute(l=8,w=d.BASE){return w._setWindowSize(l),w.multiply(BigInt(3)),w}};function P(l,w=!0){return d.fromPrivateKey(l).toRawBytes(w)}function H(l){const w=Ct(l),S=typeof l=="string",v=(w||S)&&l.length;return w?v===i||v===o:S?v===2*i||v===2*o:l instanceof d}function j(l,w,S=!0){if(H(l))throw new Error("first arg must be private key");if(!H(w))throw new Error("second arg must be public key");return d.fromHex(w).multiply(A(l)).toRawBytes(S)}const G=t.bits2int||function(l){const w=xt(l),S=l.length*8-t.nBitLength;return S>0?w>>BigInt(S):w},K=t.bits2int_modN||function(l){return c(G(l))},s=Di(t.nBitLength);function u(l){if(typeof l!="bigint")throw new Error("bigint expected");if(!(lt<=l&&l<s))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Kt(l,t.nByteLength)}function b(l,w,S=E){if(["recovered","canonical"].some(ve=>ve in S))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:M}=t;let{lowS:F,prehash:q,extraEntropy:X}=S;F==null&&(F=!0),l=Ye("msgHash",l),q&&(l=Ye("prehashed msgHash",v(l)));const U=K(l),ne=A(w),ee=[u(ne),u(U)];if(X!=null&&X!==!1){const ve=X===!0?M(n.BYTES):X;ee.push(Ye("extraEntropy",ve))}const ie=gn(...ee),se=U;function Ee(ve){const Ae=G(ve);if(!D(Ae))return;const _e=p(Ae),me=d.BASE.multiply(Ae).toAffine(),T=c(me.x);if(T===lt)return;const C=c(_e*c(se+T*ne));if(C===lt)return;let k=(me.x===T?0:2)|Number(me.y&Fe),Y=C;return F&&W(C)&&(Y=m(C),k^=1),new N(T,Y,k)}return{seed:ie,k2sig:Ee}}const E={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function h(l,w,S=E){const{seed:v,k2sig:M}=b(l,w,S),F=t;return ga(F.hash.outputLen,F.nByteLength,F.hmac)(v,M)}d.BASE._setWindowSize(8);function x(l,w,S,v=_){var me;const M=l;if(w=Ye("msgHash",w),S=Ye("publicKey",S),"strict"in v)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:q}=v;let X,U;try{if(typeof M=="string"||Ct(M))try{X=N.fromDER(M)}catch(T){if(!(T instanceof Ot.Err))throw T;X=N.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:T,s:C}=M;X=new N(T,C)}else throw new Error("PARSE");U=d.fromHex(S)}catch(T){if(T.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&X.hasHighS())return!1;q&&(w=t.hash(w));const{r:ne,s:ee}=X,ie=K(w),se=p(ee),Ee=c(ie*se),ve=c(ne*se),Ae=(me=d.BASE.multiplyAndAddUnsafe(U,Ee,ve))==null?void 0:me.toAffine();return Ae?c(Ae.x)===ne:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:j,sign:h,verify:x,ProjectivePoint:d,Signature:N,utils:R}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dd(e){return{hash:e,hmac:(t,...n)=>ca(e,t,pl(...n)),randomBytes:gl}}function hd(e,t){const n=r=>cd({...e,...dd(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _a=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ls=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gd=BigInt(1),bi=BigInt(2),us=(e,t)=>(e+t/bi)/t;function pd(e){const t=_a,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),c=BigInt(44),p=BigInt(88),d=e*e*e%t,A=d*d*e%t,L=ke(A,n,t)*A%t,D=ke(L,n,t)*A%t,B=ke(D,bi,t)*d%t,W=ke(B,i,t)*B%t,m=ke(W,o,t)*W%t,I=ke(m,c,t)*m%t,N=ke(I,p,t)*I%t,R=ke(N,c,t)*m%t,P=ke(R,n,t)*A%t,H=ke(P,a,t)*W%t,j=ke(H,r,t)*d%t,G=ke(j,bi,t);if(!yi.eql(yi.sqr(G),e))throw new Error("Cannot find square root");return G}const yi=nd(_a,void 0,void 0,{sqrt:pd}),ki=hd({a:BigInt(0),b:BigInt(7),Fp:yi,n:ls,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ls,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-gd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),c=us(o*e,t),p=us(-r*e,t);let d=Me(e-c*n-p*i,t),A=Me(-c*r-p*o,t);const L=d>a,D=A>a;if(L&&(d=t-d),D&&(A=t-A),d>a||A>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:L,k1:d,k2neg:D,k2:A}}}},wl);BigInt(0);ki.ProjectivePoint;function wd(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}BigInt(0);const _i={},mi={};for(let e=0;e<16;e++){const t=e,n=e*16,r=e.toString(16).toLowerCase();mi[r]=t,mi[r.toUpperCase()]=t,_i[r]=n,_i[r.toUpperCase()]=n}function bd(e){const t=e.length,n=new Uint8Array(t/2);for(let r=0;r<t;r+=2)n[r/2]=_i[e[r]]+mi[e[r+1]];return n}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));for(let e=0;e<=256*256-1;e++)BigInt(e);const pr=e=>{if(typeof e!="string")throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return bd(t.length%2===0?t:wd(t))},yd=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`},En=e=>{const t=yd(e);return pr(t)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");ki.CURVE.n;ki.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const _d="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";pr(_d);const md="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";pr(md);const Ed="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";pr(Ed);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));var fs;(function(e){e.String="string",e.Bytes="view",e.Number="number"})(fs||(fs={}));var cs;(function(e){e.String="string",e.Bytes="view",e.JSON="json"})(cs||(cs={}));var ds;(function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"})(ds||(ds={}));var hs;(function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"})(hs||(hs={}));var Lt;(function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"})(Lt||(Lt={}));En(Lt.Version);En(Lt.Balance);En(Lt.Nonce);En(Lt.CodeHash);En(Lt.CodeSize);BigInt(256)**BigInt(31);var Sd={exports:{}},Wi={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});function vd(e){var t=4,n=e.length,r=n%t;if(!r)return e;var i=n,o=t-r,a=n+o,c=Ze.alloc(a);for(c.write(e);o--;)c.write("=",i++);return c.toString()}Ui.default=vd;Object.defineProperty(Wi,"__esModule",{value:!0});var Ad=Ui;function ma(e,t){return t===void 0&&(t="utf8"),Ze.isBuffer(e)?Ei(e.toString("base64")):Ei(Ze.from(e,t).toString("base64"))}function Rd(e,t){return t===void 0&&(t="utf8"),Ze.from(ji(e),"base64").toString(t)}function ji(e){return e=e.toString(),Ad.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Ei(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Id(e){return Ze.from(ji(e),"base64")}var Zt=ma;Zt.encode=ma;Zt.decode=Rd;Zt.toBase64=ji;Zt.fromBase64=Ei;Zt.toBuffer=Id;Wi.default=Zt;(function(e){e.exports=Wi.default,e.exports.default=e.exports})(Sd);const he={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},wt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";he.AQUA+"",wt.SAPPHIRE_MAINNET,he.CELESTE+"",wt.SAPPHIRE_MAINNET,he.CYAN+"",wt.SAPPHIRE_MAINNET,he.MAINNET+"",wt.SAPPHIRE_MAINNET,he.TESTNET+"",wt.SAPPHIRE_DEVNET;he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";wt.SAPPHIRE_MAINNET+"",wt.SAPPHIRE_DEVNET+"",he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";function gs(e){let t=!1,n=0,r;try{r=window[e],t=!0,n=r.length;const i="__storage_test__";return r.setItem(i,i),r.removeItem(i),!0}catch(i){const o=i;return o&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&n!==0}}class Td{constructor(){te(this,"store",new Map)}getItem(t){return this.store.get(t)||null}setItem(t,n){this.store.set(t,n)}removeItem(t){this.store.delete(t)}}class Od{constructor(t,n){te(this,"storage",void 0),te(this,"_storeKey",void 0),this.storage=n,this._storeKey=t;try{n.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(t)){let r;n==="local"&&gs("localStorage")?r=window.localStorage:n==="session"&&gs("sessionStorage")?r=window.sessionStorage:r=new Td,this.instanceMap.set(t,new this(t,r))}return this.instanceMap.get(t)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.removeItem(this._storeKey),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,n){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[t]=n,this.storage.setItem(this._storeKey,JSON.stringify(r))}}te(Od,"instanceMap",new Map);qe(qe({},wt),he);var Nd=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ei=Math.ceil,Ue=Math.floor,Pe="[BigNumber Error] ",ps=Pe+"Number primitive has more than 15 significant digits: ",Ke=1e14,oe=14,ti=9007199254740991,ni=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],gt=1e7,Ie=1e9;function Ea(e){var t,n,r,i=R.prototype={constructor:R,toString:null,valueOf:null},o=new R(1),a=20,c=4,p=-7,d=21,A=-1e7,L=1e7,D=!1,B=1,W=0,m={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},I="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function R(s,u){var b,E,_,h,x,l,w,S,v=this;if(!(v instanceof R))return new R(s,u);if(u==null){if(s&&s._isBigNumber===!0){v.s=s.s,!s.c||s.e>L?v.c=v.e=null:s.e<A?v.c=[v.e=0]:(v.e=s.e,v.c=s.c.slice());return}if((l=typeof s=="number")&&s*0==0){if(v.s=1/s<0?(s=-s,-1):1,s===~~s){for(h=0,x=s;x>=10;x/=10,h++);h>L?v.c=v.e=null:(v.e=h,v.c=[s]);return}S=String(s)}else{if(!Nd.test(S=String(s)))return r(v,S,l);v.s=S.charCodeAt(0)==45?(S=S.slice(1),-1):1}(h=S.indexOf("."))>-1&&(S=S.replace(".","")),(x=S.search(/e/i))>0?(h<0&&(h=x),h+=+S.slice(x+1),S=S.substring(0,x)):h<0&&(h=S.length)}else{if(be(u,2,I.length,"Base"),u==10&&N)return v=new R(s),G(v,a+v.e+1,c);if(S=String(s),l=typeof s=="number"){if(s*0!=0)return r(v,S,l,u);if(v.s=1/s<0?(S=S.slice(1),-1):1,R.DEBUG&&S.replace(/^0\.0*|\./,"").length>15)throw Error(ps+s)}else v.s=S.charCodeAt(0)===45?(S=S.slice(1),-1):1;for(b=I.slice(0,u),h=x=0,w=S.length;x<w;x++)if(b.indexOf(E=S.charAt(x))<0){if(E=="."){if(x>h){h=w;continue}}else if(!_&&(S==S.toUpperCase()&&(S=S.toLowerCase())||S==S.toLowerCase()&&(S=S.toUpperCase()))){_=!0,x=-1,h=0;continue}return r(v,String(s),l,u)}l=!1,S=n(S,u,10,v.s),(h=S.indexOf("."))>-1?S=S.replace(".",""):h=S.length}for(x=0;S.charCodeAt(x)===48;x++);for(w=S.length;S.charCodeAt(--w)===48;);if(S=S.slice(x,++w)){if(w-=x,l&&R.DEBUG&&w>15&&(s>ti||s!==Ue(s)))throw Error(ps+v.s*s);if((h=h-x-1)>L)v.c=v.e=null;else if(h<A)v.c=[v.e=0];else{if(v.e=h,v.c=[],x=(h+1)%oe,h<0&&(x+=oe),x<w){for(x&&v.c.push(+S.slice(0,x)),w-=oe;x<w;)v.c.push(+S.slice(x,x+=oe));x=oe-(S=S.slice(x)).length}else x-=w;for(;x--;S+="0");v.c.push(+S)}}else v.c=[v.e=0]}R.clone=Ea,R.ROUND_UP=0,R.ROUND_DOWN=1,R.ROUND_CEIL=2,R.ROUND_FLOOR=3,R.ROUND_HALF_UP=4,R.ROUND_HALF_DOWN=5,R.ROUND_HALF_EVEN=6,R.ROUND_HALF_CEIL=7,R.ROUND_HALF_FLOOR=8,R.EUCLID=9,R.config=R.set=function(s){var u,b;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(u="DECIMAL_PLACES")&&(b=s[u],be(b,0,Ie,u),a=b),s.hasOwnProperty(u="ROUNDING_MODE")&&(b=s[u],be(b,0,8,u),c=b),s.hasOwnProperty(u="EXPONENTIAL_AT")&&(b=s[u],b&&b.pop?(be(b[0],-Ie,0,u),be(b[1],0,Ie,u),p=b[0],d=b[1]):(be(b,-Ie,Ie,u),p=-(d=b<0?-b:b))),s.hasOwnProperty(u="RANGE"))if(b=s[u],b&&b.pop)be(b[0],-Ie,-1,u),be(b[1],1,Ie,u),A=b[0],L=b[1];else if(be(b,-Ie,Ie,u),b)A=-(L=b<0?-b:b);else throw Error(Pe+u+" cannot be zero: "+b);if(s.hasOwnProperty(u="CRYPTO"))if(b=s[u],b===!!b)if(b)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))D=b;else throw D=!b,Error(Pe+"crypto unavailable");else D=b;else throw Error(Pe+u+" not true or false: "+b);if(s.hasOwnProperty(u="MODULO_MODE")&&(b=s[u],be(b,0,9,u),B=b),s.hasOwnProperty(u="POW_PRECISION")&&(b=s[u],be(b,0,Ie,u),W=b),s.hasOwnProperty(u="FORMAT"))if(b=s[u],typeof b=="object")m=b;else throw Error(Pe+u+" not an object: "+b);if(s.hasOwnProperty(u="ALPHABET"))if(b=s[u],typeof b=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(b))N=b.slice(0,10)=="0123456789",I=b;else throw Error(Pe+u+" invalid: "+b)}else throw Error(Pe+"Object expected: "+s);return{DECIMAL_PLACES:a,ROUNDING_MODE:c,EXPONENTIAL_AT:[p,d],RANGE:[A,L],CRYPTO:D,MODULO_MODE:B,POW_PRECISION:W,FORMAT:m,ALPHABET:I}},R.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!R.DEBUG)return!0;var u,b,E=s.c,_=s.e,h=s.s;e:if({}.toString.call(E)=="[object Array]"){if((h===1||h===-1)&&_>=-Ie&&_<=Ie&&_===Ue(_)){if(E[0]===0){if(_===0&&E.length===1)return!0;break e}if(u=(_+1)%oe,u<1&&(u+=oe),String(E[0]).length==u){for(u=0;u<E.length;u++)if(b=E[u],b<0||b>=Ke||b!==Ue(b))break e;if(b!==0)return!0}}}else if(E===null&&_===null&&(h===null||h===1||h===-1))return!0;throw Error(Pe+"Invalid BigNumber: "+s)},R.maximum=R.max=function(){return H(arguments,-1)},R.minimum=R.min=function(){return H(arguments,1)},R.random=function(){var s=9007199254740992,u=Math.random()*s&2097151?function(){return Ue(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(b){var E,_,h,x,l,w=0,S=[],v=new R(o);if(b==null?b=a:be(b,0,Ie),x=ei(b/oe),D)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(x*=2));w<x;)l=E[w]*131072+(E[w+1]>>>11),l>=9e15?(_=crypto.getRandomValues(new Uint32Array(2)),E[w]=_[0],E[w+1]=_[1]):(S.push(l%1e14),w+=2);w=x/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(x*=7);w<x;)l=(E[w]&31)*281474976710656+E[w+1]*1099511627776+E[w+2]*4294967296+E[w+3]*16777216+(E[w+4]<<16)+(E[w+5]<<8)+E[w+6],l>=9e15?crypto.randomBytes(7).copy(E,w):(S.push(l%1e14),w+=7);w=x/7}else throw D=!1,Error(Pe+"crypto unavailable");if(!D)for(;w<x;)l=u(),l<9e15&&(S[w++]=l%1e14);for(x=S[--w],b%=oe,x&&b&&(l=ni[oe-b],S[w]=Ue(x/l)*l);S[w]===0;S.pop(),w--);if(w<0)S=[h=0];else{for(h=-1;S[0]===0;S.splice(0,1),h-=oe);for(w=1,l=S[0];l>=10;l/=10,w++);w<oe&&(h-=oe-w)}return v.e=h,v.c=S,v}}(),R.sum=function(){for(var s=1,u=arguments,b=new R(u[0]);s<u.length;)b=b.plus(u[s++]);return b},n=function(){var s="0123456789";function u(b,E,_,h){for(var x,l=[0],w,S=0,v=b.length;S<v;){for(w=l.length;w--;l[w]*=E);for(l[0]+=h.indexOf(b.charAt(S++)),x=0;x<l.length;x++)l[x]>_-1&&(l[x+1]==null&&(l[x+1]=0),l[x+1]+=l[x]/_|0,l[x]%=_)}return l.reverse()}return function(b,E,_,h,x){var l,w,S,v,M,F,q,X,U=b.indexOf("."),ne=a,ee=c;for(U>=0&&(v=W,W=0,b=b.replace(".",""),X=new R(E),F=X.pow(b.length-U),W=v,X.c=u(st(We(F.c),F.e,"0"),10,_,s),X.e=X.c.length),q=u(b,E,_,x?(l=I,s):(l=s,I)),S=v=q.length;q[--v]==0;q.pop());if(!q[0])return l.charAt(0);if(U<0?--S:(F.c=q,F.e=S,F.s=h,F=t(F,X,ne,ee,_),q=F.c,M=F.r,S=F.e),w=S+ne+1,U=q[w],v=_/2,M=M||w<0||q[w+1]!=null,M=ee<4?(U!=null||M)&&(ee==0||ee==(F.s<0?3:2)):U>v||U==v&&(ee==4||M||ee==6&&q[w-1]&1||ee==(F.s<0?8:7)),w<1||!q[0])b=M?st(l.charAt(1),-ne,l.charAt(0)):l.charAt(0);else{if(q.length=w,M)for(--_;++q[--w]>_;)q[w]=0,w||(++S,q=[1].concat(q));for(v=q.length;!q[--v];);for(U=0,b="";U<=v;b+=l.charAt(q[U++]));b=st(b,S,l.charAt(0))}return b}}(),t=function(){function s(E,_,h){var x,l,w,S,v=0,M=E.length,F=_%gt,q=_/gt|0;for(E=E.slice();M--;)w=E[M]%gt,S=E[M]/gt|0,x=q*w+S*F,l=F*w+x%gt*gt+v,v=(l/h|0)+(x/gt|0)+q*S,E[M]=l%h;return v&&(E=[v].concat(E)),E}function u(E,_,h,x){var l,w;if(h!=x)w=h>x?1:-1;else for(l=w=0;l<h;l++)if(E[l]!=_[l]){w=E[l]>_[l]?1:-1;break}return w}function b(E,_,h,x){for(var l=0;h--;)E[h]-=l,l=E[h]<_[h]?1:0,E[h]=l*x+E[h]-_[h];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,_,h,x,l){var w,S,v,M,F,q,X,U,ne,ee,ie,se,Ee,ve,Ae,_e,me,T=E.s==_.s?1:-1,C=E.c,k=_.c;if(!C||!C[0]||!k||!k[0])return new R(!E.s||!_.s||(C?k&&C[0]==k[0]:!k)?NaN:C&&C[0]==0||!k?T*0:T/0);for(U=new R(T),ne=U.c=[],S=E.e-_.e,T=h+S+1,l||(l=Ke,S=je(E.e/oe)-je(_.e/oe),T=T/oe|0),v=0;k[v]==(C[v]||0);v++);if(k[v]>(C[v]||0)&&S--,T<0)ne.push(1),M=!0;else{for(ve=C.length,_e=k.length,v=0,T+=2,F=Ue(l/(k[0]+1)),F>1&&(k=s(k,F,l),C=s(C,F,l),_e=k.length,ve=C.length),Ee=_e,ee=C.slice(0,_e),ie=ee.length;ie<_e;ee[ie++]=0);me=k.slice(),me=[0].concat(me),Ae=k[0],k[1]>=l/2&&Ae++;do{if(F=0,w=u(k,ee,_e,ie),w<0){if(se=ee[0],_e!=ie&&(se=se*l+(ee[1]||0)),F=Ue(se/Ae),F>1)for(F>=l&&(F=l-1),q=s(k,F,l),X=q.length,ie=ee.length;u(q,ee,X,ie)==1;)F--,b(q,_e<X?me:k,X,l),X=q.length,w=1;else F==0&&(w=F=1),q=k.slice(),X=q.length;if(X<ie&&(q=[0].concat(q)),b(ee,q,ie,l),ie=ee.length,w==-1)for(;u(k,ee,_e,ie)<1;)F++,b(ee,_e<ie?me:k,ie,l),ie=ee.length}else w===0&&(F++,ee=[0]);ne[v++]=F,ee[0]?ee[ie++]=C[Ee]||0:(ee=[C[Ee]],ie=1)}while((Ee++<ve||ee[0]!=null)&&T--);M=ee[0]!=null,ne[0]||ne.splice(0,1)}if(l==Ke){for(v=1,T=ne[0];T>=10;T/=10,v++);G(U,h+(U.e=v+S*oe-1)+1,x,M)}else U.e=S,U.r=+M;return U}}();function P(s,u,b,E){var _,h,x,l,w;if(b==null?b=c:be(b,0,8),!s.c)return s.toString();if(_=s.c[0],x=s.e,u==null)w=We(s.c),w=E==1||E==2&&(x<=p||x>=d)?qn(w,x):st(w,x,"0");else if(s=G(new R(s),u,b),h=s.e,w=We(s.c),l=w.length,E==1||E==2&&(u<=h||h<=p)){for(;l<u;w+="0",l++);w=qn(w,h)}else if(u-=x+(E===2&&h>x),w=st(w,h,"0"),h+1>l){if(--u>0)for(w+=".";u--;w+="0");}else if(u+=h-l,u>0)for(h+1==l&&(w+=".");u--;w+="0");return s.s<0&&_?"-"+w:w}function H(s,u){for(var b,E,_=1,h=new R(s[0]);_<s.length;_++)E=new R(s[_]),(!E.s||(b=Rt(h,E))===u||b===0&&h.s===u)&&(h=E);return h}function j(s,u,b){for(var E=1,_=u.length;!u[--_];u.pop());for(_=u[0];_>=10;_/=10,E++);return(b=E+b*oe-1)>L?s.c=s.e=null:b<A?s.c=[s.e=0]:(s.e=b,s.c=u),s}r=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,b=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(h,x,l,w){var S,v=l?x:x.replace(_,"");if(E.test(v))h.s=isNaN(v)?null:v<0?-1:1;else{if(!l&&(v=v.replace(s,function(M,F,q){return S=(q=q.toLowerCase())=="x"?16:q=="b"?2:8,!w||w==S?F:M}),w&&(S=w,v=v.replace(u,"$1").replace(b,"0.$1")),x!=v))return new R(v,S);if(R.DEBUG)throw Error(Pe+"Not a"+(w?" base "+w:"")+" number: "+x);h.s=null}h.c=h.e=null}}();function G(s,u,b,E){var _,h,x,l,w,S,v,M=s.c,F=ni;if(M){e:{for(_=1,l=M[0];l>=10;l/=10,_++);if(h=u-_,h<0)h+=oe,x=u,w=M[S=0],v=Ue(w/F[_-x-1]%10);else if(S=ei((h+1)/oe),S>=M.length)if(E){for(;M.length<=S;M.push(0));w=v=0,_=1,h%=oe,x=h-oe+1}else break e;else{for(w=l=M[S],_=1;l>=10;l/=10,_++);h%=oe,x=h-oe+_,v=x<0?0:Ue(w/F[_-x-1]%10)}if(E=E||u<0||M[S+1]!=null||(x<0?w:w%F[_-x-1]),E=b<4?(v||E)&&(b==0||b==(s.s<0?3:2)):v>5||v==5&&(b==4||E||b==6&&(h>0?x>0?w/F[_-x]:0:M[S-1])%10&1||b==(s.s<0?8:7)),u<1||!M[0])return M.length=0,E?(u-=s.e+1,M[0]=F[(oe-u%oe)%oe],s.e=-u||0):M[0]=s.e=0,s;if(h==0?(M.length=S,l=1,S--):(M.length=S+1,l=F[oe-h],M[S]=x>0?Ue(w/F[_-x]%F[x])*l:0),E)for(;;)if(S==0){for(h=1,x=M[0];x>=10;x/=10,h++);for(x=M[0]+=l,l=1;x>=10;x/=10,l++);h!=l&&(s.e++,M[0]==Ke&&(M[0]=1));break}else{if(M[S]+=l,M[S]!=Ke)break;M[S--]=0,l=1}for(h=M.length;M[--h]===0;M.pop());}s.e>L?s.c=s.e=null:s.e<A&&(s.c=[s.e=0])}return s}function K(s){var u,b=s.e;return b===null?s.toString():(u=We(s.c),u=b<=p||b>=d?qn(u,b):st(u,b,"0"),s.s<0?"-"+u:u)}return i.absoluteValue=i.abs=function(){var s=new R(this);return s.s<0&&(s.s=1),s},i.comparedTo=function(s,u){return Rt(this,new R(s,u))},i.decimalPlaces=i.dp=function(s,u){var b,E,_,h=this;if(s!=null)return be(s,0,Ie),u==null?u=c:be(u,0,8),G(new R(h),s+h.e+1,u);if(!(b=h.c))return null;if(E=((_=b.length-1)-je(this.e/oe))*oe,_=b[_])for(;_%10==0;_/=10,E--);return E<0&&(E=0),E},i.dividedBy=i.div=function(s,u){return t(this,new R(s,u),a,c)},i.dividedToIntegerBy=i.idiv=function(s,u){return t(this,new R(s,u),0,1)},i.exponentiatedBy=i.pow=function(s,u){var b,E,_,h,x,l,w,S,v,M=this;if(s=new R(s),s.c&&!s.isInteger())throw Error(Pe+"Exponent not an integer: "+K(s));if(u!=null&&(u=new R(u)),l=s.e>14,!M.c||!M.c[0]||M.c[0]==1&&!M.e&&M.c.length==1||!s.c||!s.c[0])return v=new R(Math.pow(+K(M),l?s.s*(2-Fn(s)):+K(s))),u?v.mod(u):v;if(w=s.s<0,u){if(u.c?!u.c[0]:!u.s)return new R(NaN);E=!w&&M.isInteger()&&u.isInteger(),E&&(M=M.mod(u))}else{if(s.e>9&&(M.e>0||M.e<-1||(M.e==0?M.c[0]>1||l&&M.c[1]>=24e7:M.c[0]<8e13||l&&M.c[0]<=9999975e7)))return h=M.s<0&&Fn(s)?-0:0,M.e>-1&&(h=1/h),new R(w?1/h:h);W&&(h=ei(W/oe+2))}for(l?(b=new R(.5),w&&(s.s=1),S=Fn(s)):(_=Math.abs(+K(s)),S=_%2),v=new R(o);;){if(S){if(v=v.times(M),!v.c)break;h?v.c.length>h&&(v.c.length=h):E&&(v=v.mod(u))}if(_){if(_=Ue(_/2),_===0)break;S=_%2}else if(s=s.times(b),G(s,s.e+1,1),s.e>14)S=Fn(s);else{if(_=+K(s),_===0)break;S=_%2}M=M.times(M),h?M.c&&M.c.length>h&&(M.c.length=h):E&&(M=M.mod(u))}return E?v:(w&&(v=o.div(v)),u?v.mod(u):h?G(v,W,c,x):v)},i.integerValue=function(s){var u=new R(this);return s==null?s=c:be(s,0,8),G(u,u.e+1,s)},i.isEqualTo=i.eq=function(s,u){return Rt(this,new R(s,u))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(s,u){return Rt(this,new R(s,u))>0},i.isGreaterThanOrEqualTo=i.gte=function(s,u){return(u=Rt(this,new R(s,u)))===1||u===0},i.isInteger=function(){return!!this.c&&je(this.e/oe)>this.c.length-2},i.isLessThan=i.lt=function(s,u){return Rt(this,new R(s,u))<0},i.isLessThanOrEqualTo=i.lte=function(s,u){return(u=Rt(this,new R(s,u)))===-1||u===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(s,u){var b,E,_,h,x=this,l=x.s;if(s=new R(s,u),u=s.s,!l||!u)return new R(NaN);if(l!=u)return s.s=-u,x.plus(s);var w=x.e/oe,S=s.e/oe,v=x.c,M=s.c;if(!w||!S){if(!v||!M)return v?(s.s=-u,s):new R(M?x:NaN);if(!v[0]||!M[0])return M[0]?(s.s=-u,s):new R(v[0]?x:c==3?-0:0)}if(w=je(w),S=je(S),v=v.slice(),l=w-S){for((h=l<0)?(l=-l,_=v):(S=w,_=M),_.reverse(),u=l;u--;_.push(0));_.reverse()}else for(E=(h=(l=v.length)<(u=M.length))?l:u,l=u=0;u<E;u++)if(v[u]!=M[u]){h=v[u]<M[u];break}if(h&&(_=v,v=M,M=_,s.s=-s.s),u=(E=M.length)-(b=v.length),u>0)for(;u--;v[b++]=0);for(u=Ke-1;E>l;){if(v[--E]<M[E]){for(b=E;b&&!v[--b];v[b]=u);--v[b],v[E]+=Ke}v[E]-=M[E]}for(;v[0]==0;v.splice(0,1),--S);return v[0]?j(s,v,S):(s.s=c==3?-1:1,s.c=[s.e=0],s)},i.modulo=i.mod=function(s,u){var b,E,_=this;return s=new R(s,u),!_.c||!s.s||s.c&&!s.c[0]?new R(NaN):!s.c||_.c&&!_.c[0]?new R(_):(B==9?(E=s.s,s.s=1,b=t(_,s,0,3),s.s=E,b.s*=E):b=t(_,s,0,B),s=_.minus(b.times(s)),!s.c[0]&&B==1&&(s.s=_.s),s)},i.multipliedBy=i.times=function(s,u){var b,E,_,h,x,l,w,S,v,M,F,q,X,U,ne,ee=this,ie=ee.c,se=(s=new R(s,u)).c;if(!ie||!se||!ie[0]||!se[0])return!ee.s||!s.s||ie&&!ie[0]&&!se||se&&!se[0]&&!ie?s.c=s.e=s.s=null:(s.s*=ee.s,!ie||!se?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(E=je(ee.e/oe)+je(s.e/oe),s.s*=ee.s,w=ie.length,M=se.length,w<M&&(X=ie,ie=se,se=X,_=w,w=M,M=_),_=w+M,X=[];_--;X.push(0));for(U=Ke,ne=gt,_=M;--_>=0;){for(b=0,F=se[_]%ne,q=se[_]/ne|0,x=w,h=_+x;h>_;)S=ie[--x]%ne,v=ie[x]/ne|0,l=q*S+v*F,S=F*S+l%ne*ne+X[h]+b,b=(S/U|0)+(l/ne|0)+q*v,X[h--]=S%U;X[h]=b}return b?++E:X.splice(0,1),j(s,X,E)},i.negated=function(){var s=new R(this);return s.s=-s.s||null,s},i.plus=function(s,u){var b,E=this,_=E.s;if(s=new R(s,u),u=s.s,!_||!u)return new R(NaN);if(_!=u)return s.s=-u,E.minus(s);var h=E.e/oe,x=s.e/oe,l=E.c,w=s.c;if(!h||!x){if(!l||!w)return new R(_/0);if(!l[0]||!w[0])return w[0]?s:new R(l[0]?E:_*0)}if(h=je(h),x=je(x),l=l.slice(),_=h-x){for(_>0?(x=h,b=w):(_=-_,b=l),b.reverse();_--;b.push(0));b.reverse()}for(_=l.length,u=w.length,_-u<0&&(b=w,w=l,l=b,u=_),_=0;u;)_=(l[--u]=l[u]+w[u]+_)/Ke|0,l[u]=Ke===l[u]?0:l[u]%Ke;return _&&(l=[_].concat(l),++x),j(s,l,x)},i.precision=i.sd=function(s,u){var b,E,_,h=this;if(s!=null&&s!==!!s)return be(s,1,Ie),u==null?u=c:be(u,0,8),G(new R(h),s,u);if(!(b=h.c))return null;if(_=b.length-1,E=_*oe+1,_=b[_]){for(;_%10==0;_/=10,E--);for(_=b[0];_>=10;_/=10,E++);}return s&&h.e+1>E&&(E=h.e+1),E},i.shiftedBy=function(s){return be(s,-ti,ti),this.times("1e"+s)},i.squareRoot=i.sqrt=function(){var s,u,b,E,_,h=this,x=h.c,l=h.s,w=h.e,S=a+4,v=new R("0.5");if(l!==1||!x||!x[0])return new R(!l||l<0&&(!x||x[0])?NaN:x?h:1/0);if(l=Math.sqrt(+K(h)),l==0||l==1/0?(u=We(x),(u.length+w)%2==0&&(u+="0"),l=Math.sqrt(+u),w=je((w+1)/2)-(w<0||w%2),l==1/0?u="5e"+w:(u=l.toExponential(),u=u.slice(0,u.indexOf("e")+1)+w),b=new R(u)):b=new R(l+""),b.c[0]){for(w=b.e,l=w+S,l<3&&(l=0);;)if(_=b,b=v.times(_.plus(t(h,_,S,1))),We(_.c).slice(0,l)===(u=We(b.c)).slice(0,l))if(b.e<w&&--l,u=u.slice(l-3,l+1),u=="9999"||!E&&u=="4999"){if(!E&&(G(_,_.e+a+2,0),_.times(_).eq(h))){b=_;break}S+=4,l+=4,E=1}else{(!+u||!+u.slice(1)&&u.charAt(0)=="5")&&(G(b,b.e+a+2,1),s=!b.times(b).eq(h));break}}return G(b,b.e+a+1,c,s)},i.toExponential=function(s,u){return s!=null&&(be(s,0,Ie),s++),P(this,s,u,1)},i.toFixed=function(s,u){return s!=null&&(be(s,0,Ie),s=s+this.e+1),P(this,s,u)},i.toFormat=function(s,u,b){var E,_=this;if(b==null)s!=null&&u&&typeof u=="object"?(b=u,u=null):s&&typeof s=="object"?(b=s,s=u=null):b=m;else if(typeof b!="object")throw Error(Pe+"Argument not an object: "+b);if(E=_.toFixed(s,u),_.c){var h,x=E.split("."),l=+b.groupSize,w=+b.secondaryGroupSize,S=b.groupSeparator||"",v=x[0],M=x[1],F=_.s<0,q=F?v.slice(1):v,X=q.length;if(w&&(h=l,l=w,w=h,X-=h),l>0&&X>0){for(h=X%l||l,v=q.substr(0,h);h<X;h+=l)v+=S+q.substr(h,l);w>0&&(v+=S+q.slice(h)),F&&(v="-"+v)}E=M?v+(b.decimalSeparator||"")+((w=+b.fractionGroupSize)?M.replace(new RegExp("\\d{"+w+"}\\B","g"),"$&"+(b.fractionGroupSeparator||"")):M):v}return(b.prefix||"")+E+(b.suffix||"")},i.toFraction=function(s){var u,b,E,_,h,x,l,w,S,v,M,F,q=this,X=q.c;if(s!=null&&(l=new R(s),!l.isInteger()&&(l.c||l.s!==1)||l.lt(o)))throw Error(Pe+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+K(l));if(!X)return new R(q);for(u=new R(o),S=b=new R(o),E=w=new R(o),F=We(X),h=u.e=F.length-q.e-1,u.c[0]=ni[(x=h%oe)<0?oe+x:x],s=!s||l.comparedTo(u)>0?h>0?u:S:l,x=L,L=1/0,l=new R(F),w.c[0]=0;v=t(l,u,0,1),_=b.plus(v.times(E)),_.comparedTo(s)!=1;)b=E,E=_,S=w.plus(v.times(_=S)),w=_,u=l.minus(v.times(_=u)),l=_;return _=t(s.minus(b),E,0,1),w=w.plus(_.times(S)),b=b.plus(_.times(E)),w.s=S.s=q.s,h=h*2,M=t(S,E,h,c).minus(q).abs().comparedTo(t(w,b,h,c).minus(q).abs())<1?[S,E]:[w,b],L=x,M},i.toNumber=function(){return+K(this)},i.toPrecision=function(s,u){return s!=null&&be(s,1,Ie),P(this,s,u,2)},i.toString=function(s){var u,b=this,E=b.s,_=b.e;return _===null?E?(u="Infinity",E<0&&(u="-"+u)):u="NaN":(s==null?u=_<=p||_>=d?qn(We(b.c),_):st(We(b.c),_,"0"):s===10&&N?(b=G(new R(b),a+_+1,c),u=st(We(b.c),b.e,"0")):(be(s,2,I.length,"Base"),u=n(st(We(b.c),_,"0"),10,s,E,!0)),E<0&&b.c[0]&&(u="-"+u)),u},i.valueOf=i.toJSON=function(){return K(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&R.set(e),R}function je(e){var t=e|0;return e>0||e===t?t:t-1}function We(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=oe-t.length;n--;t="0"+t);o+=t}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function Rt(e,t){var n,r,i=e.c,o=t.c,a=e.s,c=t.s,p=e.e,d=t.e;if(!a||!c)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-c:a;if(a!=c)return a;if(n=a<0,r=p==d,!i||!o)return r?0:!i^n?1:-1;if(!r)return p>d^n?1:-1;for(c=(p=i.length)<(d=o.length)?p:d,a=0;a<c;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return p==d?0:p>d^n?1:-1}function be(e,t,n,r){if(e<t||e>n||e!==Ue(e))throw Error(Pe+(r||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Fn(e){var t=e.c.length-1;return je(e.e/oe)==t&&e.c[t]%2!=0}function qn(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function st(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}Ea();class xd extends Error{}xd.prototype.name="InvalidTokenError";const Hn={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},ut={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Cd={GET_PROVIDER_STATE:"wallet_get_provider_state"},ri={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Ld(e){return function(n,r,i){i(o=>{r.error&&tr.warn(`Error in RPC response:
`,r),!n.isTorusInternal&&(tr.info(`RPC (${e.origin}):`,n,"->",r),o())})}}var Pd=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const Md=pn(Pd);var Bd="2.1.0";function Sa(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function $d(e){return Sa(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}function Dd(e){return Sa(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"}function kd(e){return $d(e)&&Dd(e)}var Xe={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`}};const Wd={PRODUCTION:"production"},un={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},Ud={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Fi={translations:Ud,localStorageKeyPrefix:"torus-"},de=tr.getLogger("solana-embed");function jd(){return(e,t,n)=>{(typeof e.method!="string"||!e.method)&&(t.error=bt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),n(r=>{const{error:i}=t;return i&&de.error(`Torus - RPC Error: ${i.message}`,i),r()})}}function Fd(e,t,n){let r=`Torus: Lost connection to "${e}".`;t!=null&&t.stack&&(r+=`
${t.stack}`),de.warn(r),n&&n.listenerCount("error")>0&&n.emit("error",r)}const Gn=()=>Math.random().toString(36).slice(2),va=async e=>{let t,n;switch(e){case"testing":t="https://solana-testing.tor.us",n="debug";break;case"development":t="http://localhost:8080",n="debug";break;default:t="https://solana.tor.us",n="error";break}return{torusUrl:t,logLevel:n}},qd=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Fi.translations,t[0])?t[0]:"en",e},Hd={height:660,width:375},Gd={height:740,width:1315},zd={height:700,width:1200},Aa={height:600,width:400};function Vd(e){let t;try{t=window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){const r=n;return r&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function cn(e){let{width:t,height:n}=e;const r=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,c=1,p=Math.abs((o-t)/2/c+r),d=Math.abs((a-n)/2/c+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${n/c},width=${t/c},top=${d},left=${p}`}class Ra extends hr{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;if(super(),te(this,"isTorus",void 0),te(this,"_rpcEngine",void 0),te(this,"jsonRpcConnectionEvents",void 0),te(this,"_state",void 0),!kd(t))throw new Error(Xe.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Bc;Go(t,o,t,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const a=Lc();Go(a.stream,o.createStream(i),a.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const c=new at;c.push(Pc()),c.push(jd()),c.push(Ld({origin:location.origin})),c.push(a.middleware),this._rpcEngine=c,this.jsonRpcConnectionEvents=a.events}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw bt.ethErrors.rpc.invalidRequest({message:Xe.errors.invalidRequestArgs(),data:t});const{method:n,params:r}=t;if(typeof n!="string"||n.length===0)throw bt.ethErrors.rpc.invalidRequest({message:Xe.errors.invalidRequestMethod(),data:t});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw bt.ethErrors.rpc.invalidRequest({message:Xe.errors.invalidRequestParams(),data:t});return new Promise((i,o)=>{this._rpcRequest({method:n,params:r},gi(i,o))})}send(t,n){this._rpcRequest(t,n)}sendAsync(t){return new Promise((n,r)=>{this._rpcRequest(t,gi(n,r))})}_handleStreamDisconnect(t,n){Fd(t,n,this),this._handleDisconnect(!1,n?n.message:void 0)}}const qt=e=>{const t=window.document.createElement("template"),n=e.trim();return t.innerHTML=n,t.content.firstChild};function zn(e){return e.version===void 0}class Ia extends hr{constructor(t){let{url:n,target:r,features:i,timeout:o=3e4}=t;super(),te(this,"url",void 0),te(this,"target",void 0),te(this,"features",void 0),te(this,"window",void 0),te(this,"windowTimer",void 0),te(this,"iClosedWindow",void 0),te(this,"timeout",void 0),this.url=n,this.target=r||"_blank",this.features=i||cn(zd),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!=null&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}class wr extends Ra{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;super(t,{maxEventListeners:r,jsonRpcStreamName:i}),te(this,"embedTranslations",void 0),te(this,"torusUrl",void 0),te(this,"dappStorageKey",void 0),te(this,"windowRefs",void 0),te(this,"tryWindowHandle",void 0),te(this,"torusAlertContainer",void 0),te(this,"torusIframe",void 0),this._state=qe({},wr._defaultState),this.torusUrl="",this.dappStorageKey="";const o=Fi.translations[qd()];this.embedTranslations=o.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const a=c=>{const{method:p,params:d}=c;if(p===Hn.IFRAME_STATUS){const{isFullScreen:A,rid:L}=d;this._displayIframe({isFull:A,rid:L})}else if(p==="create_window"){const{windowId:A,url:L}=d;this._createPopupBlockAlert(A,L)}else if(p===Hn.CLOSE_WINDOW)this._handleCloseWindow(d);else if(p===Hn.USER_LOGGED_IN){const{currentLoginProvider:A}=d;this._state.isLoggedIn=!0,this._state.currentLoginProvider=A}else p===Hn.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",a)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(t){try{const{torusUrl:n,dappStorageKey:r,torusAlertContainer:i,torusIframe:o}=t;this.torusUrl=n,this.dappStorageKey=r,this.torusAlertContainer=i,this.torusIframe=o,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:a,isLoggedIn:c}=await this.request({method:ut.GET_PROVIDER_STATE,params:[]});this._handleConnect(a,c)}catch(n){de.error("Torus: Failed to get initial state. Please report this bug.",n)}finally{de.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(t){let{url:n,target:r,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new URL(n||`${this.torusUrl}/redirect?windowId=${t}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const a=new Ia({url:o,target:r,features:i});if(a.open(),!a.window){this._createPopupBlockAlert(t,o.href);return}this.windowRefs[t]=a,this.request({method:"opened_window",params:{windowId:t}}),a.once("close",()=>{delete this.windowRefs[t],this.request({method:ut.CLOSED_WINDOW,params:{windowId:t}})})}_displayIframe(){let{isFull:t=!1,rid:n=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={};if(t)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case un.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case un.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case un.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case un.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto";break}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=t,this.request({method:ut.IFRAME_STATUS,params:{isIFrameFullScreen:t,rid:n}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(t,n){const r=n,i=t;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,r)}_handleConnect(t,n){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:t,isLoggedIn:n}),de.debug(Xe.info.connected(t)))}_handleDisconnect(t,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let r;t?(r=new bt.EthereumRpcError(1013,n||Xe.errors.disconnected()),de.debug(r)):(r=new bt.EthereumRpcError(1011,n||Xe.errors.permanentlyDisconnected()),de.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(t){const{windowId:n}=t;this.windowRefs[n]&&(this.windowRefs[n].close(),delete this.windowRefs[n])}async _createPopupBlockAlert(t,n){const r=this.getLogoUrl(),i=qt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=qt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),a=qt('<div id="torusAlert__btn-container"></div>');a.appendChild(o),i.appendChild(a);const c=()=>{o.addEventListener("click",()=>{this._handleWindow(t,{url:n,target:"_blank",features:cn(Aa)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),c(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}te(wr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class br extends Ra{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;super(t,{maxEventListeners:r,jsonRpcStreamName:i}),te(this,"chainId",void 0),te(this,"selectedAddress",void 0),te(this,"tryWindowHandle",void 0),this._state=qe({},br._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const o=a=>{const{method:c,params:p}=a;c===ri.ACCOUNTS_CHANGED?this._handleAccountsChanged(p):c===ri.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(p):c===ri.CHAIN_CHANGED&&this._handleChainChanged(p)};this.jsonRpcConnectionEvents.on("notification",o)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:t,chainId:n,isUnlocked:r}=await this.request({method:Cd.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:n}),this._handleChainChanged({chainId:n}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}catch(t){de.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{de.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=n;const o=t;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="solana_accounts"||o.method==="solana_requestAccounts")i=(a,c)=>{this._handleAccountsChanged(c.result||[],o.method==="solana_accounts",r),n(a,c)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(t,i);return}}this.tryWindowHandle(o,i)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),de.debug(Xe.info.connected(t)))}_handleDisconnect(t,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let r;t?(r=new bt.EthereumRpcError(1013,n||Xe.errors.disconnected()),de.debug(r)):(r=new bt.EthereumRpcError(1011,n||Xe.errors.permanentlyDisconnected()),de.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;Array.isArray(i)||(de.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const o of t)if(typeof o!="string"){de.error("Torus: Received non-string account. Please report this bug.",t),i=[];break}Md(this._state.accounts,i)||(n&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&de.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t){de.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:t});return}t==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof n!="boolean"){de.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:n});return}n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(t||[]))}}te(br,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function ws(e){return new Promise((t,n)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(r){n(r)}})}const Kd=e=>{const{document:t}=e,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Yd(e){try{const{document:t}=e;let n=t.querySelector('head > link[rel="shortcut icon"]');return n&&await ws(n.href)||(n=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(r=>!!r.href),n&&await ws(n.href))?n.href:""}catch{return""}}const Zd=async()=>({name:Kd(window),icon:await Yd(window)}),Jd=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Xd=[ut.SET_PROVIDER],Qd=Vd("localStorage");(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:n}=await va("production");t.href=`${n}/frame`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){de.warn(t)}})();class yh{constructor(){let{modalZIndex:t=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(this,"isInitialized",void 0),te(this,"torusAlert",void 0),te(this,"modalZIndex",void 0),te(this,"alertZIndex",void 0),te(this,"requestedLoginProvider",void 0),te(this,"provider",void 0),te(this,"communicationProvider",void 0),te(this,"dappStorageKey",void 0),te(this,"isTopupHidden",!1),te(this,"torusAlertContainer",void 0),te(this,"torusUrl",void 0),te(this,"torusIframe",void 0),te(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=t,this.alertZIndex=t+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:t=Wd.PRODUCTION,enableLogging:n=!1,network:r,showTorusButton:i=!1,useLocalStorage:o=!1,buttonPosition:a=un.BOTTOM_LEFT,apiKey:c="torus-default",extraParams:p={},whiteLabel:d}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:A,logLevel:L}=await va(t);de.enableAll(),de.info(A,"url loaded"),de.info(`Solana Embed Version :${Bd}`),this.torusUrl=A,de.setDefaultLevel(L),n?de.enableAll():de.disableAll();const D=this.handleDappStorageKey(o),B=new URL(A);B.pathname.endsWith("/")?B.pathname+="frame":B.pathname+="/frame";const W=new URLSearchParams;return D&&W.append("dappStorageKey",D),W.append("origin",window.location.origin),B.hash=W.toString(),this.torusIframe=qt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${B.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=qt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=qt(`<link href="${A}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((m,I)=>{try{this.torusIframe.addEventListener("load",async()=>{const N=await Zd();this.torusIframe.contentWindow.postMessage({buttonPosition:a,apiKey:c,network:r,dappMetadata:N,extraParams:p,whiteLabel:d},B.origin),await this._setupWeb3({torusUrl:A}),i&&this.showTorusButton(),d!=null&&d.topupHide?this.isTopupHidden=d.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,m()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(N){I(N)}})}async login(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const n=await new Promise((r,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,t.login_hint]},gi(r,i))});if(Array.isArray(n)&&n.length>0)return n;throw new Error("Login failed")}catch(n){throw de.error("login failed",n),n}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(t){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:n,userInfo:r}=t,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:n,userInfo:r}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:ut.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(n){return n instanceof Element||n instanceof Document}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(t){await this.communicationProvider.request({method:ut.SET_PROVIDER,params:qe({},t)})}async showWallet(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=await this.communicationProvider.request({method:ut.WALLET_INSTANCE_ID,params:[]}),i=t?`/${t}`:"",o=new URL(`${this.torusUrl}/wallet${i}`);o.searchParams.append("instanceId",r),Object.keys(n).forEach(c=>{o.searchParams.append(c,n[c])}),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new Ia({url:o,features:cn(Gd)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:ut.USER_INFO,params:[]})}async initiateTopup(t,n){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=Gn();return this.communicationProvider._handleWindow(r),await this.communicationProvider.request({method:ut.TOPUP,params:{provider:t,params:n,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(t){const n=zn(t),r=n?t.serialize({requireAllSignatures:!1}).toString("hex"):Ze.from(t.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:r,isLegacyTransaction:n}})}async signAndSendTransaction(t,n){const r=zn(t),i=r?t.serialize({requireAllSignatures:!1}).toString("hex"):Ze.from(t.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:n,isLegacyTransaction:r}})}}async signTransaction(t){const n=zn(t),r=n?t.serializeMessage().toString("hex"):Ze.from(t.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:r,messageOnly:!0,isLegacyTransaction:n}}),o=JSON.parse(i),a={publicKey:new Qi(o.publicKey),signature:Ze.from(o.signature,"hex")};return t.addSignature(a.publicKey,a.signature),t}async signAllTransactions(t){let n;const r=t.map(a=>(n=zn(a),n?a.serializeMessage().toString("hex"):Ze.from(a.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:r,messageOnly:!0,isLegacyTransaction:n}})).map(a=>{const c=JSON.parse(a);return{publicKey:new Qi(c.publicKey),signature:Ze.from(c.signature,"hex")}});return t.forEach((a,c)=>(a.addSignature(o[c].publicKey,o[c].signature),a)),t}async signMessage(t){return await this.provider.request({method:"sign_message",params:{data:t}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(t){const n=`${Fi.localStorageKeyPrefix}${window.location.hostname}`;let r="";if(Qd&&t){const i=window.localStorage.getItem(n);if(i)r=i;else{const o=`torus-app-${Gn()}`;window.localStorage.setItem(n,o),r=o}}return this.dappStorageKey=r,r}async _setupWeb3(t){de.info("setupWeb3 running");const n=new Ko({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new Ko({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new br(n,{}),o=new wr(r,{});i.tryWindowHandle=(d,A)=>{const L=d;if(!Array.isArray(L)&&Jd.includes(L.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const D=Gn();o._handleWindow(D,{target:"_blank",features:cn(Aa)}),L.windowId=D}i._rpcEngine.handle(L,A)},o.tryWindowHandle=(d,A)=>{const L=d;if(!Array.isArray(L)&&Xd.includes(L.method)){const D=Gn();o._handleWindow(D,{target:"_blank",features:cn(Hd)}),L.params.windowId=D}o._rpcEngine.handle(L,A)};const a=d=>{const A=i[d],L=this;i[d]=function(B,W){const{method:m,params:I=[]}=B;if(m==="solana_requestAccounts"){if(!W)return L.login({loginProvider:I[0]});L.login({loginProvider:I[0]}).then(N=>W(null,N)).catch(N=>W(N))}return A.apply(this,[B,W])}};a("request"),a("sendAsync"),a("send");const c=new Proxy(i,{deleteProperty:()=>!0}),p=new Proxy(o,{deleteProperty:()=>!0});this.provider=c,this.communicationProvider=p,await Promise.all([i._initializeState(),o._initializeState(qe(qe({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),de.debug("Torus - injected provider")}}export{un as BUTTON_POSITION,Wd as TORUS_BUILD_ENV,br as TorusInPageProvider,yh as default};
