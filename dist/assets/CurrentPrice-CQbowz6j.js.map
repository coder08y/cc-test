{"version":3,"file":"CurrentPrice-CQbowz6j.js","sources":["../../../cetus-design/src/components/common/CurrentPrice.tsx"],"sourcesContent":["import { Token } from '@cetus/types'\nimport { Icon, SingleCoinImage } from '@cetus/ui-kit'\nimport { cancelBubble, d, formatPrice, textEllipses } from '@cetus/utils'\nimport { Box, Flex, FlexProps, HStack, Spinner, Text, TextProps } from '@chakra-ui/react'\nimport { useEffect, useMemo, useState } from 'react'\n\ntype CurrentPriceProps = {\n  fromToken: Token\n  toToken: Token\n  fromValue?: string\n  toValue?: string\n  noIcon?: boolean\n  showSwitchIcon?: boolean\n  noCenter?: boolean\n  pageDirect?: boolean\n  handlePageToggleDirect?: () => void\n  color?: TextProps['color']\n  isLoading?: boolean\n  fontSize?: TextProps['fontSize']\n  wrapStyle?: FlexProps\n  tooltipRef?: any\n  priceWrap?: boolean\n}\nexport default function CurrentPrice(props: CurrentPriceProps) {\n  const {\n    fromToken,\n    toToken,\n    fromValue,\n    toValue,\n    noIcon,\n    noCenter,\n    pageDirect = true,\n    showSwitchIcon = true,\n    handlePageToggleDirect,\n    color = 'text_paragraph',\n    isLoading,\n    fontSize = '14px',\n    wrapStyle = {},\n    tooltipRef,\n    priceWrap = false\n  } = props\n  const [direct, setDirect] = useState(pageDirect)\n\n  const handleToggleDirect = (e: any) => {\n    cancelBubble(e)\n    setDirect(direct => !direct)\n    if (handlePageToggleDirect) {\n      handlePageToggleDirect()\n    }\n  }\n  useEffect(() => {\n    if (typeof pageDirect === 'boolean') {\n      setDirect(pageDirect)\n    }\n  }, [pageDirect])\n\n  const displayPrice = useMemo(() => {\n    if (direct && toValue && fromValue) {\n      return formatPrice(d(toValue).div(fromValue).toString())\n    }\n    if (!direct && toValue && fromValue) {\n      return formatPrice(d(fromValue).div(toValue).toString())\n    }\n    return ''\n  }, [direct, fromValue, toValue])\n  return (\n    <Flex alignItems=\"center\" justifyContent={noCenter ? 'space-between' : 'center'} {...wrapStyle}>\n      {/* <Skeleton isLoaded={!preSwapLoading}> */}\n      <Flex align=\"center\" flexWrap={priceWrap ? 'wrap' : 'nowrap'} justifyContent={priceWrap ? 'end' : 'center'}>\n        <Flex align=\"center\" whiteSpace=\"nowrap\" cursor=\"pointer\" onClick={handleToggleDirect}>\n          {noIcon ? null : direct ? (\n            <Box mr=\"8px\">\n              <SingleCoinImage imageUrl={fromToken?.logo_url} w=\"20px\" h=\"20px\" />\n            </Box>\n          ) : (\n            <Box mr=\"8px\">\n              <SingleCoinImage imageUrl={toToken?.logo_url} w=\"20px\" h=\"20px\" />\n            </Box>\n          )}\n          <HStack>\n            <Text color={color} fontSize={fontSize} fontWeight=\"500\">\n              1\n            </Text>\n            <Text color={color} fontSize={fontSize} fontWeight=\"500\">\n              {textEllipses(direct ? fromToken?.symbol : toToken?.symbol, 10)}\n            </Text>\n          </HStack>\n          {/* <Text color={usdTextColor}>($0.999)</Text> */}\n          <Text color={color} fontWeight=\"500\">\n            &nbsp;â‰ˆ&nbsp;\n          </Text>\n        </Flex>\n        {isLoading ? (\n          <Spinner size=\"sm\" />\n        ) : (\n          // <RefreshLoadingAnimation />\n          <Flex align=\"center\" cursor=\"pointer\" onClick={handleToggleDirect}>\n            <Text mr=\"4px\" whiteSpace=\"normal\" wordBreak=\"break-all\" color={color} fontSize={fontSize} fontWeight=\"500\">\n              {displayPrice}\n            </Text>\n            <Text mr=\"4px\" color={color} fontSize={fontSize} fontWeight=\"500\">\n              {textEllipses(direct ? toToken?.symbol : fromToken?.symbol, 10)}\n            </Text>\n\n            {noIcon ? null : direct ? (\n              <Box ml=\"4px\" mr=\"4px\">\n                <SingleCoinImage imageUrl={toToken?.logo_url} w=\"20px\" h=\"20px\" />\n              </Box>\n            ) : (\n              <Box ml=\"4px\" mr=\"4px\">\n                <SingleCoinImage imageUrl={fromToken?.logo_url} w=\"20px\" h=\"20px\" />\n              </Box>\n            )}\n          </Flex>\n        )}\n      </Flex>\n      {showSwitchIcon && (\n        <Box minW=\"20p\" minH=\"20px\">\n          <Icon xlinkHref=\"#icon-icon_swap1\" svgW=\"16px\" svgH=\"16px\" onClick={handleToggleDirect} />\n        </Box>\n      )}\n      {/* </Skeleton> */}\n    </Flex>\n  )\n}\n"],"names":["CurrentPrice","props","fromToken","toToken","fromValue","toValue","noIcon","noCenter","pageDirect","showSwitchIcon","handlePageToggleDirect","color","isLoading","fontSize","wrapStyle","tooltipRef","priceWrap","direct","setDirect","useState","handleToggleDirect","e","cancelBubble","useEffect","displayPrice","useMemo","formatPrice","d","jsxs","Flex","jsx","Box","SingleCoinImage","HStack","Text","textEllipses","Spinner","Icon"],"mappings":"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"}