{"version":3,"file":"RewardsBlock-CiciTiU-.js","sources":["../../src/components/pools/RewardsBlock.tsx"],"sourcesContent":["import { CetusTooltip } from '@cetus/design'\nimport { useGetToken } from '@cetus/hooks/src/useToken'\nimport { SingleCoinImage } from '@cetus/ui-kit'\nimport { d, fixRounding, formatNumber, fromDecimalsAmountFix, textEllipses } from '@cetus/utils'\nimport { Box, Center, HStack, Text } from '@chakra-ui/react'\nimport { useEffect, useState } from 'react'\n\nfunction RewardsBlock({\n  miningRewardList,\n  farmsRewarderList,\n  isParent,\n  showRate\n}: {\n  miningRewardList: any\n  farmsRewarderList: any\n  isParent?: boolean\n  showRate?: boolean\n}) {\n  const { getTokenListInfo } = useGetToken()\n  const [rewardsList, setRewardsList] = useState<any>([])\n  const [rewardsListOrigin, setRewardsListOrigin] = useState<any>([])\n\n  useEffect(() => {\n    const fetchData = async () => {\n      if (miningRewardList?.length > 0 || farmsRewarderList?.length > 0) {\n        try {\n          let miningList: any = []\n          let farmingList: any = []\n          if (miningRewardList?.length > 0) {\n            const coinTypeList = miningRewardList?.map((item: any) => item?.coinType)\n            const tokenMap = await getTokenListInfo(coinTypeList)\n            miningList = miningRewardList.map((item: any) => {\n              const tokenInfo = tokenMap?.get(item?.coinType)\n              return { ...item, tokenInfo, isMining: true }\n            })\n          }\n          if (farmsRewarderList?.length > 0) {\n            const coinTypeList = farmsRewarderList?.map((item: any) => item?.coinType)\n            const tokenMap = await getTokenListInfo(coinTypeList)\n            farmingList = farmsRewarderList.map((item: any) => {\n              const tokenInfo = tokenMap?.get(item?.coinType)\n              return { ...item, tokenInfo, isFarming: true }\n            })\n          }\n          setRewardsList(miningList.concat(farmingList).splice(0, 5))\n          setRewardsListOrigin(miningList.concat(farmingList))\n        } catch (error) {\n          console.error('Error processing list:', error)\n        }\n      }\n    }\n\n    fetchData()\n  }, [miningRewardList, farmsRewarderList])\n\n  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null) // 记录当前hover的 token 索引\n\n  return (\n    <HStack w=\"100%\" justify=\"flex-end\" gap=\"0px\">\n      {rewardsList?.map((item: any, index: number) => {\n        // 2.hoveredIndex == rewardsList?.length - 1 其他token(hoveredIndex > index)都左移14px\n        const shouldMoveLeft10 =\n          (hoveredIndex == index && hoveredIndex !== rewardsList?.length - 1) || (hoveredIndex == rewardsList?.length - 1 && hoveredIndex > index)\n        const shouldMoveLeft20 = hoveredIndex !== null && hoveredIndex !== rewardsList?.length - 1 && index <= hoveredIndex\n        return (\n          <Box\n            key={item?.coinType}\n            onClick={(e: any) => e.stopPropagation()}\n            w=\"24px\"\n            h=\"24px\"\n            onMouseEnter={() => setHoveredIndex(index)}\n            onMouseLeave={() => setHoveredIndex(null)}\n            sx={{\n              display: 'flex',\n              ml: '-10px',\n              transform: shouldMoveLeft10 ? 'translateX(-10px)' : shouldMoveLeft20 ? 'translateX(-20px)' : 'translateX(0)',\n              transition: 'transform 0.3s ease',\n              willChange: 'transform'\n            }}\n          >\n            <CetusTooltip\n              key={item?.coinType}\n              placement=\"top\"\n              tooltip={\n                <>\n                  {isParent && !showRate ? (\n                    <Text color=\"text_caption\" fontSize=\"12px\" display=\"inline-block\">\n                      {textEllipses(item?.tokenInfo?.symbol)}\n                    </Text>\n                  ) : (\n                    <HStack gap=\"4px\">\n                      <Box>\n                        <SingleCoinImage\n                          showTagHeight=\"10px\"\n                          showTagWidth=\"10px\"\n                          coinType={item?.tokenInfo?.coin_type}\n                          imageUrl={item?.tokenInfo?.logo_url}\n                          w=\"24px\"\n                          h=\"24px\"\n                        />\n                      </Box>\n                      {item?.isMining && (\n                        <Text color=\"primary\" display=\"inline-block\">\n                          {/* 处理精度后向上取整展示位隔符 */}\n                          {formatNumber(fixRounding(fromDecimalsAmountFix(item?.emissionsEveryDay, item?.tokenInfo?.decimals), 2))}{' '}\n                          {textEllipses(item?.tokenInfo?.symbol, 8)} per day in Mining\n                        </Text>\n                      )}\n                      {item?.isFarming && (\n                        <Text color=\"primary\" display=\"inline-block\">\n                          {/* 处理精度后向上取整展示位隔符 */}\n                          {formatNumber(fixRounding(item?.emissionsEveryDay, 2))} {textEllipses(item?.tokenInfo?.symbol, 8)} per day in Farming\n                        </Text>\n                      )}\n                    </HStack>\n                  )}\n                </>\n              }\n            >\n              <Center as=\"button\">\n                <SingleCoinImage\n                  showTagHeight=\"10px\"\n                  showTagWidth=\"10px\"\n                  coinType={item?.tokenInfo?.coin_type}\n                  imageUrl={item?.tokenInfo?.logo_url}\n                  w=\"20px\"\n                  h=\"20px\"\n                />\n              </Center>\n            </CetusTooltip>\n          </Box>\n        )\n      })}\n      {rewardsListOrigin?.length > 5 && <Text color=\"text_caption\">+{d(rewardsListOrigin?.length).minus(5).toString()}</Text>}\n    </HStack>\n  )\n}\nexport default RewardsBlock\n"],"names":["RewardsBlock","miningRewardList","farmsRewarderList","isParent","showRate","getTokenListInfo","useGetToken","rewardsList","setRewardsList","useState","rewardsListOrigin","setRewardsListOrigin","useEffect","miningList","farmingList","coinTypeList","item","tokenMap","tokenInfo","error","hoveredIndex","setHoveredIndex","HStack","index","shouldMoveLeft10","shouldMoveLeft20","jsx","Box","e","CetusTooltip","Text","textEllipses","_a","jsxs","SingleCoinImage","_b","_c","formatNumber","fixRounding","fromDecimalsAmountFix","_d","_e","_f","Center","_g","_h","d"],"mappings":"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"}