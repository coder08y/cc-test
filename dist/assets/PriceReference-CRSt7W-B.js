import{j as e,r as n,V as m,H as d,T as o,B as _}from"./vendor-CBmAETR3.js";import{d as u,be as w,a5 as v,av as T,Q as L,S as C,Y as P,aO as R}from"./index-BpSfzecM.js";import"./cross-DJ28FxNa.js";import{M as S}from"./MarketSource-Zu8s3YB-.js";import{T as H}from"./TooltipIcon-DVhxXZmh.js";import{R as z}from"./Ratio-JsiL9RvN.js";import{R as E,Y as W}from"./YAxis-DLEZvSSr.js";import{L as A}from"./LineChart-7c6x8Z7S.js";import{T as B}from"./generateCategoricalChart-CmRMqbFo.js";import{L as N}from"./Line-zvGWD_L_.js";import"./debounce-MPJy35Ge.js";const U=({active:s,payload:p,label:i})=>{var l,a;return s&&p&&p.length?e.jsxs("div",{style:{backgroundColor:"#121212",border:"1px solid border_secondary",padding:"12px",borderRadius:"8px",position:"relative",left:"0px",top:"-30px",fontSize:"12px"},children:[e.jsx("p",{style:{color:"#909CA4"},children:w.unix((a=(l=p[0])==null?void 0:l.payload)==null?void 0:a.timestamp).format("MM/DD HH:mm")}),e.jsxs("p",{style:{color:"#fff",marginTop:"8px"},children:["$",v(p[0].value)]})]}):null};function Y({data:s=[]}){const p=u(Math.min(...s.map(l=>l.price))).mul(.99999).toNumber(),i=u(Math.max(...s.map(l=>l.price))).mul(1.00001).toNumber();return e.jsx(E,{width:"100%",height:"100%",children:e.jsxs(A,{width:180,height:48,data:s,margin:{top:5,right:20,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"priceLine",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(117, 200, 255, 1)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(104, 255, 216, 1)"})]})}),e.jsx(W,{hide:!0,domain:[p,i]}),e.jsx(B,{cursor:!1,content:e.jsx(U,{})}),e.jsx(N,{type:"linear",dot:!1,dataKey:"price",stroke:"url(#priceLine)",strokeWidth:2})]})})}function D({fromCoin:s,toCoin:p,wrapStyle:i={gap:"28px"},titleStyle:l,itemStyle:a,type:h="swap",chartStyle:g}){return n.useMemo(()=>[s,p].filter(Boolean).filter(x=>!!((x==null?void 0:x.is_verified)===void 0?x!=null&&x.is_trusted:x!=null&&x.is_verified)),[s,p]).length?e.jsxs(m,{w:"100%",align:"flex-start",gap:"8px",children:[e.jsxs(d,{justify:"flex-start",h:"52px",align:"center",gap:"4px",...l,children:[e.jsx(o,{fontSize:"14px",fontWeight:"500",color:"text_caption",h:"20px",lineHeight:"20px",children:"Price Reference"}),e.jsx(H,{tooltipCon:"The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus."})]}),e.jsxs(m,{w:"100%",...i,children:[e.jsx(f,{coin:s,itemStyle:a,type:h,chartStyle:g}),e.jsx(f,{coin:p,itemStyle:a,type:h,chartStyle:g})]})]}):null}const f=({coin:s,itemStyle:p,type:i,chartStyle:l})=>{const{getExplorerUrl:a}=T(),{getPriceKline:h,getTokenPrice:g}=L(),[t,x]=n.useState({price:[],daily_rate:""});n.useEffect(()=>{x({price:[],daily_rate:""})},[s==null?void 0:s.coin_type]);const r=g(s==null?void 0:s.coin_type),c=async(b,y)=>{try{const j=await h(b,y);x(j)}catch(j){console.log(j,"error")}};return n.useEffect(()=>{r!=null&&r.base_symbol&&(r==null?void 0:r.market)!=="cetus"&&c(r==null?void 0:r.base_symbol,r==null?void 0:r.market)},[r==null?void 0:r.base_symbol,r==null?void 0:r.market,s==null?void 0:s.coin_type]),i==="swap"&&(!t||t.price.length===0)?e.jsx(e.Fragment,{}):e.jsxs(m,{w:"100%",gap:"12px",...p,children:[e.jsxs(d,{w:"100%",justify:"space-between",align:"flex-start",h:"32px",children:[e.jsxs(d,{children:[e.jsx(C,{imageUrl:s==null?void 0:s.logo_url,coinType:s==null?void 0:s.coin_type,useImportTokenList:!1,w:"28px",h:"28px"}),e.jsxs(m,{align:"flex-start",gap:"4px",children:[e.jsx(o,{fontSize:"14px",h:"16px",lineHeight:"16px",fontWeight:"600",color:"text_caption",children:s==null?void 0:s.symbol}),e.jsx(o,{fontSize:"12px",h:"12px",lineHeight:"12px",fontWeight:"500",children:s==null?void 0:s.name})]})]}),e.jsxs(d,{children:[(r==null?void 0:r.market)&&e.jsx(S,{market:r==null?void 0:r.market}),e.jsxs(o,{color:"text_caption",fontSize:"14px",fontWeight:"500",children:["$",(r==null?void 0:r.price)!==void 0?P(r==null?void 0:r.price):"--"]}),(t==null?void 0:t.daily_rate)&&(r==null?void 0:r.price)!==void 0&&e.jsx(z,{value:t==null?void 0:t.daily_rate})]})]}),e.jsxs(d,{w:"100%",justify:"space-between",align:"flex-end",gap:"0",children:[e.jsx(R,{address:s==null?void 0:s.coin_type,onClickLink:()=>window.open(a(s==null?void 0:s.coin_type,"coin")),wrapStyle:{border:"1px solid",borderColor:"border",h:"24px",borderRadius:"8px",p:"0 8px",bg:"bg_secondary",gap:"8px"},fontWeight:"500",iconGap:"8px"}),e.jsx(_,{flex:(l==null?void 0:l.flex)||"0 0 210px",h:"24px",mr:"-13px",children:(r==null?void 0:r.price)!==void 0&&(t==null?void 0:t.price.length)>0?e.jsx(Y,{data:t==null?void 0:t.price}):e.jsx(o,{fontSize:"12px",p:"0 16px",textAlign:"right",children:"No available data"})})]})]})};export{D as default};
