{"version":3,"file":"PositionPriceRangeBar-B3Gr2ilx.js","sources":["../../src/components/position/list/PositionPriceRangeBar.tsx"],"sourcesContent":["import { removeComma } from '@cetus/utils/src/common'\nimport { d } from '@cetusprotocol/common-sdk'\nimport { Box, BoxProps, Skeleton, Text, VStack } from '@chakra-ui/react'\nimport { useEffect, useMemo, useRef, useState } from 'react'\n\ninterface Props {\n  minPrice: string\n  maxPrice: string\n  currPrice: string\n  isActive: boolean\n  wrapStyle?: BoxProps\n  isShowActive?: boolean\n  priceDirect?: boolean\n}\nexport default function PositionPriceBar({ minPrice, maxPrice, currPrice, isActive, wrapStyle, isShowActive = false, priceDirect = true }: Props) {\n  const elementRef = useRef<HTMLDivElement>(null)\n  const [elementWidth, setElementWidth] = useState<number>(0)\n\n  useEffect(() => {\n    const updateWidths = () => {\n      if (elementRef.current) setElementWidth(elementRef.current.offsetWidth)\n    }\n    const resizeObserver = new ResizeObserver(updateWidths)\n    if (elementRef.current) resizeObserver.observe(elementRef.current)\n    return () => {\n      if (elementRef.current) resizeObserver.unobserve(elementRef.current)\n    }\n  }, [minPrice, maxPrice, currPrice])\n\n  const displayMinPrice = useMemo(() => {\n    return priceDirect ? minPrice : maxPrice == '∞' ? '∞' : d(1).div(removeComma(maxPrice)).toString()\n  }, [priceDirect, minPrice, maxPrice])\n\n  const displayMaxPrice = useMemo(() => {\n    return priceDirect ? maxPrice : d(1).div(removeComma(minPrice)).toString()\n  }, [priceDirect, minPrice, maxPrice])\n\n  const displayCurrPrice = useMemo(() => {\n    return priceDirect ? currPrice : d(1).div(removeComma(currPrice)).toString()\n  }, [currPrice, priceDirect])\n\n  const sliderML = useMemo(() => {\n    if (displayMaxPrice === '∞' || displayMinPrice === '∞') return '0px'\n    if (displayCurrPrice && displayMinPrice && displayMaxPrice && elementWidth) {\n      if (d(displayCurrPrice).lessThanOrEqualTo(displayMaxPrice) && d(displayCurrPrice).greaterThanOrEqualTo(displayMinPrice)) {\n        const relative = d(displayCurrPrice).sub(displayMinPrice).div(d(displayMaxPrice).sub(displayMinPrice)).toString()\n        return `${d(elementWidth).mul(relative).toFixed(0)}px`\n      }\n      if (d(displayCurrPrice).lt(displayMinPrice)) return '-6px'\n      if (d(displayCurrPrice).gt(displayMaxPrice)) return 'calc(100% + 6px)'\n    }\n    return '0px'\n  }, [displayCurrPrice, displayMinPrice, displayMaxPrice, elementWidth])\n\n  return (\n    <VStack height=\"100%\" justifyContent=\"space-between\" {...wrapStyle}>\n      <Skeleton h=\"6px\" isLoaded={!!currPrice} borderRadius=\"4px\">\n        <Box w=\"88px\" h=\"6px\" bgImage={maxPrice === '∞' ? 'none' : \"url('/images/img_inactive_bg@2x.png')\"} bgSize=\"88px 6px\" {...wrapStyle}>\n          <Box\n            w={maxPrice === '∞' ? '88px' : '56px'}\n            h={maxPrice === '∞' ? '2px' : '6px'}\n            position=\"relative\"\n            ref={elementRef}\n            background={\n              maxPrice === '∞' ? 'linear-gradient(135deg, #68FFD8 0%, #0091FF 100%)' : isActive ? \"url('/images/img_range@2x.png')\" : 'none'\n            }\n            ml={maxPrice === '∞' ? '0px' : '16px'}\n            bgSize=\"100% 6px\"\n            bgPosition=\"center\"\n            bgRepeat=\"no-repeat\"\n          >\n            {maxPrice !== '∞' && (\n              <Box\n                w=\"2px\"\n                h=\"8px\"\n                bg=\"#fff\"\n                borderRadius=\"8px\"\n                position=\"absolute\"\n                top=\"50%\"\n                left={sliderML}\n                transform=\"translateY(-50%)\"\n                zIndex=\"5\"\n              />\n            )}\n          </Box>\n        </Box>\n      </Skeleton>\n      {isShowActive && (\n        <Text fontSize=\"12px\" color={isActive ? 'primary' : 'primary_gray'} fontWeight=\"500\">\n          {isActive ? 'Active' : 'Inactive'}\n        </Text>\n      )}\n    </VStack>\n  )\n}\n"],"names":["PositionPriceBar","minPrice","maxPrice","currPrice","isActive","wrapStyle","isShowActive","priceDirect","elementRef","useRef","elementWidth","setElementWidth","useState","useEffect","updateWidths","resizeObserver","displayMinPrice","useMemo","d","removeComma","displayMaxPrice","displayCurrPrice","sliderML","relative","VStack","jsx","Skeleton","Box","Text"],"mappings":"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"}