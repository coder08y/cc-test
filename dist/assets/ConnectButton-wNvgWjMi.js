import{r as i,l as B,ac as V,j as e,H as n,w as g,P as G,x as F,n as k,T as l,y as M,V as _}from"./vendor-CBmAETR3.js";import{u as L,A as $,R as D}from"./RecentTransactions-B9h5zGYt.js";import{aY as A,aZ as J,a_ as U,M as I,a$ as Y,b0 as Z,b1 as q,av as Q,u as X,a4 as K,aG as ee,b2 as se,an as te,C as R,b3 as oe,I as h}from"./index-ihcskjKt.js";import{u as ne}from"./useTrack-Cu3it5QI.js";import{u as ae}from"./useAccountBalance-D7pkS3C9.js";import"./cross-CbhIs7DK.js";import"./NoData-BFX9XpKb.js";import"./v4-C6aID195.js";function ie(){const{phantomInstance:x}=A(),{mutate:c}=J(),d=U(),o=()=>{var u,s;const r=JSON.parse(((u=window==null?void 0:window.localStorage)==null?void 0:u.getItem("sui-dapp-kit:wallet-connection-info"))||"{}");if(((s=r==null?void 0:r.state)==null?void 0:s.lastConnectedWalletName)==="Phantom"){const f=d.find(t=>t.name==="Phantom");f&&c({wallet:f})}};i.useEffect(()=>{x&&o()},[x])}function he({isCetusPump:x}){ie();const[c,d]=i.useState(!1),{currentAccount:o,accounts:r,onWalletModal:b,saveAccounts:u}=I(),{currentWallet:s,connectionStatus:f}=Y(),t=Z(),{mutate:W}=q(),{getExplorerUrl:z}=Q(),{windowWidth:j}=X(),T=B(),{fetchAccountBalance:N}=ae(),{isOpen:v,onToggle:P,onClose:p}=V(),{currentNode:ce}=K(),{fetchServiceNames:y}=L(),{phantomInstance:C}=A(),{toTrackWalletConnect:E}=ne(),{isInitialized:w}=ee(),{saveCurrentAccount:H,accountServiceNameObj:m,setAccountServiceNameObj:re}=I();i.useEffect(()=>{H(t||void 0),t&&y([t.address]),t&&w&&N(t.address,!0)},[t,w]),i.useEffect(()=>{const a=(s==null?void 0:s.accounts)||[];u([...a])},[s]),i.useEffect(()=>{t!=null&&t.address&&(s!=null&&s.name)&&E({walletAddress:t==null?void 0:t.address,walletName:s==null?void 0:s.name})},[t==null?void 0:t.address,s==null?void 0:s.name]);const S=i.useMemo(()=>{if(s){const a=se.find(O=>s.name===O.walletName);return a?a.icon.startsWith("http")?a.icon:`/images/wallet/${a.icon}.png`:s.icon}},[s]);return e.jsxs(n,{children:[!o&&e.jsx(g,{borderRadius:"8px",fontSize:"14px",p:"0 16px",h:"36px",fontWeight:"500",onClick:()=>{b(!0),p()},children:"Connect"}),o&&e.jsxs(G,{isLazy:!0,isOpen:v,onClose:p,children:[e.jsx(F,{children:e.jsxs(g,{variant:"unstyled",display:"flex",gap:"8px",cursor:"pointer",borderRadius:"8px",border:"1px solid",borderColor:"border",p:{base:"0 8px",lg:"0 16px"},bg:"block_color_opacity.50",backdropFilter:"blur(20px)",h:"36px",sx:{_hover:{bg:"button_outline_hov_bg"}},onClick:P,children:[e.jsx(k,{src:S,alt:"SVG Image",boxSize:"20px",objectFit:"cover",borderRadius:"4px"}),e.jsx(l,{fontSize:"14px",color:"text_caption",fontWeight:"500",children:(m==null?void 0:m[o.address])||te(o.address)})]})}),(c?!0:v)&&e.jsx(M,{w:j<=352?"100%":"352px",right:j<=352?"0px":"8px",bg:"bg_secondary",borderRadius:"12px",p:"0px",children:e.jsxs(_,{alignItems:"start",p:"16px",w:"100%",children:[e.jsxs(l,{fontSize:"14px",color:"text_caption",children:["Connected with ",s==null?void 0:s.name]}),e.jsxs(_,{mt:"8px",w:"100%",p:"20px",borderRadius:"12px",alignItems:"start",sx:{backgroundImage:"url('/images/bg@2x.png')",backgroundPosition:"top 0px",backgroundSize:"328px 116px",backgroundRepeat:"no-repeat"},children:[e.jsxs(n,{gap:"8px",children:[e.jsx(k,{src:S,alt:"SVG Image",boxSize:"30px",objectFit:"cover",borderRadius:"8px"}),e.jsx(l,{fontSize:"14px",fontWeight:"500",children:o==null?void 0:o.label})]}),e.jsxs(n,{w:"100%",justifyContent:"space-between",alignItems:"center",mt:"8px",children:[e.jsx($,{currentAccount:o,accounts:r,onClose:p}),e.jsxs(n,{gap:"8px",children:[e.jsx(R,{children:e.jsx(oe,{svgW:"18px",svgH:"18px",text:o.address}),tooltip:"Copy address",placement:"top"}),e.jsx(R,{children:e.jsx(h,{xlinkHref:"#icon-icon_link1",fontSize:"18px",onClick:()=>{window.open(z(o.address),"_blank")}}),tooltip:"View on Explorer",placement:"top"})]})]})]}),x&&e.jsx(g,{variant:"outline",fontSize:"14px",w:"100%",mt:"12px",onClick:()=>{p(),T("/portfolio")},children:"Profile"}),e.jsxs(n,{w:"100%",mt:"8px",children:[e.jsxs(n,{cursor:"pointer",sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},onClick:()=>{d(!0)},children:[e.jsx(h,{xlinkHref:"#icon-icon_recenttransactions",svgW:"20px",svgH:"20px"}),e.jsx(l,{children:"Recent Transactions"})]}),e.jsxs(n,{pl:"16px",cursor:"pointer",sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},onClick:()=>{W(),C&&C.hide(),p()},children:[e.jsx(h,{xlinkHref:"#icon-icon_disconnect",svgW:"20px",svgH:"20px",svgHover:"text_paragraph"}),e.jsx(l,{children:"Disconnect"})]})]})]})})]}),c&&e.jsx(D,{isOpen:c,onClose:()=>d(!1)})]})}export{he as default};
//# sourceMappingURL=ConnectButton-wNvgWjMi.js.map
