import{r as n,l as X,j as e,H as i,V as T,B as I,T as q,a8 as ee,S as ie,w as re,as as ae,Y as se,m as x}from"./vendor-CBmAETR3.js";import{C as xe}from"./CoinPairInfo-CDiS7h0Q.js";import{u as ce}from"./PositionItemContent-Cx-1mfww.js";import{u as K,aq as me,z as ne,B as y,I as Z,a as le,c as de,M as ge,Z as V,w as be}from"./index-ihcskjKt.js";import{u as J}from"./useFavoritePool-D10BRIh4.js";import{a as pe,u as ue}from"./usePositionList-5SlPZsY2.js";import{P as he}from"./PositionCurrentPrice-DCdJgKoa.js";import{P as je}from"./PositionItem-Bu3y-Fls.js";import{D as we}from"./DLMMPositionItem-CmHH6WC2.js";import"./cross-CbhIs7DK.js";import{u as ye}from"./useFavoriteDlmmPool-Kbo6eRe5.js";import{C as _e}from"./CheckBox-CkL01dAe.js";import{R as te}from"./RefreshButton-DtwRJDvy.js";import{V as Pe,S as Ae}from"./SearchInputBlock-DFqrJwWo.js";function ke({handleIsWatchList:s=()=>{},handleIsDisplayChecked:S=()=>{},onClickIncentiveTypes:z,handleRefresh:B,selectCoinList:M,onClickSelectCoinList:W,onDeleteSelectCoinList:C,isPools:u=!0,isDlmmPools:b=!1,isProfile:h=!1,isRefreshed:m,isVaults:v=!1,currentTab:j,setCurrentTab:_,whiteTokenList:w,positionCountObj:t,handleChangePositionTab:E,children:l}){const{isWatchList:g,isAllPools:P,isIncentivizedOnly:p,resetPoolFilterParams:D}=J(),{isDlmmWatchList:A,isDlmmAllPools:d,isDlmmIncentivizedOnly:R}=ye(),{isApp:c,windowWidth:G}=K(),[r,k]=n.useState("All"),{tab:F}=me();n.useMemo(()=>[{title:"All",num:ne((t==null?void 0:t.clmm_position_count)??0).plus((t==null?void 0:t.dlmm_position_count)??0).toNumber()},{title:"CLMM",num:(t==null?void 0:t.clmm_position_count)??0},{title:"DLMM",num:(t==null?void 0:t.dlmm_position_count)??0}],[t==null?void 0:t.clmm_position_count,t==null?void 0:t.dlmm_position_count]),X();const[L,H]=n.useState(!0);n.useEffect(()=>{M.length==0&&H(!0)},[M]);const $=n.useMemo(()=>u||b,[u,b]),N=n.useMemo(()=>b?A:u?g:!1,[g,A,u,b]),Q=n.useMemo(()=>b?R:u?p:!1,[p,R,u,b]),U=n.useMemo(()=>F==="dlmm_pools"?d:u?P:!1,[P,d,u,d,F]);return e.jsxs(i,{w:h?c?"100%":"unset":"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(T,{w:{base:"100%",lg:$||h?"unset":"100%"},align:"flex-start",children:[e.jsxs(i,{w:"100%",justify:"space-between",sx:{">button":{">div":{borderRadius:h?"8px":"12px"}}},children:[c&&v&&L&&e.jsx(Pe,{currentTab:j,onClickVaultsTab:Y=>_==null?void 0:_(Y)}),e.jsx(I,{w:{base:v&&L?"40px":$||h?"100%":"calc(100% - 48px)",lg:"auto"},sx:{"> button":{minW:"100% !important"}},children:e.jsx(Ae,{isProfile:h,selectCoinList:M,onClickSelectCoinList:W,onDeleteSelectCoinList:C,isSmall:v&&L,isVault:!1,setIsSmall:H,whiteTokenList:w})}),(!h&&(c||!$)||!c&&l)&&e.jsxs(i,{w:{base:"40px",lg:"unset"},children:[!c&&l,!h&&(c||!$)&&e.jsx(I,{w:"40px",children:e.jsx(te,{handleRefresh:B,isRefreshed:$?m:void 0})})]})]}),c&&l&&e.jsx(i,{w:"100%",children:l})]}),$&&e.jsxs(i,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(y,{w:{base:G<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:G<=350?e.jsx(i,{h:"38px",justify:"center",align:"center",children:e.jsx(Z,{xlinkHref:"#icon-icon_star",svgFill:N?"primary":"text_paragraph"})}):e.jsxs(i,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(_e,{checked:N,onClick:()=>{}}),e.jsx(q,{color:N?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(i,{w:{base:"100%",lg:"unset"},children:[e.jsx(y,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:c?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(i,{h:"100%",justify:"space-between",gap:c?"4px":"8px",children:[e.jsx(q,{color:Q?"text_caption":"text_paragraph",children:c?"Incentivized":"Incentivized Only"}),e.jsx(ee,{isChecked:Q,onChange:z})]})}),e.jsx(y,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:c?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(i,{h:"100%",justify:"space-between",children:[e.jsxs(q,{color:U?"text_caption":"text_paragraph",children:[" ",c?"All":"All pools"]}),e.jsx(ee,{isChecked:U,onChange:S})]})})]}),!h&&!c&&e.jsx(te,{handleRefresh:B,isRefreshed:m})]})]})}function Se({poolInfo:s}){var w,t,E,l,g,P,p,D;const S=X(),{posPoolsRelatedData:z,posApiPoolData:B}=pe();ce();const{isExpendPositionMap:M,setIsExpendPosition:W}=J();n.useMemo(()=>{var A;return((A=s==null?void 0:s.list)==null?void 0:A.filter(d=>d.posType!=="burn"))||[]},[s==null?void 0:s.list]);const C=(w=B[s==null?void 0:s.clmmPoolAddress])==null?void 0:w.haveFarming,u=(((l=z[(E=(t=s==null?void 0:s.list)==null?void 0:t[0])==null?void 0:E.posId])==null?void 0:l.displayFee)||"--")+"%",{setBackUrl:b}=le(),[h,m]=n.useState(!0),{isApp:v}=K(),j=n.useMemo(()=>M[s==null?void 0:s.clmmPoolAddress]??!1,[M]),_=()=>{W([s==null?void 0:s.clmmPoolAddress],!j)};return e.jsx(y,{w:"100%",p:v?"4px 12px 16px":j?"12px 16px 16px":"12px 16px 8px",borderRadius:"16px",children:e.jsxs(T,{w:"100%",gap:{base:"12px",lg:"12px"},children:[e.jsxs(ie,{direction:{base:"column",lg:"row"},justify:"space-between",w:"100%",gap:{base:"0px",lg:"8px"},cursor:"pointer",onClick:_,children:[e.jsx(xe,{type:"column",poolType:"clmm",symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:u,...s,poolAddress:s==null?void 0:s.clmmPoolAddress},haveFarming:C,versionBlockPosition:"right",showPoolTypeTag:!0,moreDetails:!0,clickFun:()=>S(`/clmm?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)}),e.jsxs(i,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(i,{mr:"0px",w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(q,{color:"primary_gray",children:"Current Price"}),e.jsx(he,{symbolEllipsesDecimals:10,posId:(P=(g=s==null?void 0:s.list)==null?void 0:g[0])==null?void 0:P.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,handleDirect:()=>m(!h)})]}),e.jsxs(i,{w:{base:"100%",lg:"unset"},flexDirection:{base:"column",lg:"row"},justify:"space-between",children:[e.jsx(re,{onClick:A=>{de(A),b("/pools?tab=positions"),S(`/clmm?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"100%",lg:"unset"},p:{base:"0 8px",lg:"0 12px"},h:"32px",fontWeight:"500",variant:"outline",bg:"primary_opacity.10",fontSize:"12px",children:"Create Position"}),e.jsx(y,{cursor:"pointer",w:{base:"100%",lg:"unset"},p:"4px 0 4px 8px",h:"32px",borderRadius:"8px",bg:"none",border:{base:"1px solid",lg:"none"},borderColor:"border",_hover:{svg:{fill:"text_caption"},p:{color:"text_caption"}},children:e.jsxs(i,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(q,{fontSize:"12px",children:[(p=s==null?void 0:s.list)==null?void 0:p.length," ",((D=s==null?void 0:s.list)==null?void 0:D.length)>1?"Positions":"Position"]}),e.jsx(Z,{xlinkHref:"#icon-icon_descending_nor",fontSize:"20px",transition:"transform 0.5s",transform:j?"rotate(-180deg)":"rotate(0deg)"})]})})]})]})]}),e.jsx(ae,{unmountOnExit:!0,animateOpacity:!0,in:j,style:{width:"100%"},transition:{enter:{duration:.2,ease:"easeOut"},exit:{duration:.2,ease:"easeIn"}},children:e.jsx(je,{poolInfo:s,priceDirect:h})})]})})}function Me({poolInfo:s,createAble:S=!0}){var E,l,g,P,p,D,A,d,R,c,G;const z=X(),{dlmmPosPoolsRelatedData:B,dlmmPosLiquidityData:M}=ue();ce();const{isExpendPositionMap:W,setIsExpendPosition:C}=J();n.useMemo(()=>{var r;return((r=s==null?void 0:s.list)==null?void 0:r.filter(k=>k.posType!=="burn"))||[]},[s==null?void 0:s.list]);const u=(E=M[s==null?void 0:s.dlmmPoolAddress])==null?void 0:E.haveFarming,b=(((P=B[(g=(l=s==null?void 0:s.list)==null?void 0:l[0])==null?void 0:g.id])==null?void 0:P.displayFee)||"--")+"%",h=((A=B[(D=(p=s==null?void 0:s.list)==null?void 0:p[0])==null?void 0:D.id])==null?void 0:A.binStep)||"--",{setBackUrl:m}=le(),[v,j]=n.useState(!0),{isApp:_}=K(),w=n.useMemo(()=>W[s==null?void 0:s.dlmmPoolAddress]??!1,[W]),t=()=>{C([s==null?void 0:s.dlmmPoolAddress],!w)};return e.jsx(y,{w:"100%",p:_?"4px 12px 16px":w?"12px 16px 16px":"12px 16px 8px",borderRadius:"16px",children:e.jsxs(T,{w:"100%",gap:{base:"12px",lg:"12px"},children:[e.jsxs(ie,{direction:{base:"column",lg:"row"},justify:"space-between",w:"100%",gap:{base:"0px",lg:"8px"},cursor:"pointer",onClick:t,children:[e.jsx(xe,{type:"column",poolType:"dlmm",symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:b,binStep:h,...s,poolAddress:s==null?void 0:s.dlmmPoolAddress},haveFarming:u,versionBlockPosition:"right",showPoolTypeTag:!0,moreDetails:!0,clickFun:()=>z(`/dlmm?poolId=${s==null?void 0:s.dlmmPoolAddress}`)}),e.jsxs(i,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(i,{mr:"0px",w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(q,{color:"primary_gray",children:"Current Price"}),e.jsx(he,{symbolEllipsesDecimals:10,posId:(R=(d=s==null?void 0:s.list)==null?void 0:d[0])==null?void 0:R.id,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,handleDirect:()=>j(!v)})]}),e.jsxs(i,{w:{base:"100%",lg:"unset"},flexDirection:{base:"column",lg:"row"},justify:"space-between",children:[e.jsx(re,{w:{base:"100%",lg:"unset"},onClick:r=>{de(r),m("/pools?tab=positions"),z(`/dlmm?poolId=${s==null?void 0:s.dlmmPoolAddress}`)},borderRadius:"8px",p:{base:"0 8px",lg:"0 12px"},h:"32px",fontWeight:"500",variant:"outline",bg:"primary_opacity.10",fontSize:"12px",children:"Create Position"}),e.jsx(y,{cursor:"pointer",w:{base:"100%",lg:"unset"},p:"4px 0 4px 8px",h:"32px",borderRadius:"8px",bg:"none",border:{base:"1px solid",lg:"none"},borderColor:"border",_hover:{svg:{fill:"text_caption"},p:{color:"text_caption"}},children:e.jsxs(i,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(q,{fontSize:"12px",children:[(c=s==null?void 0:s.list)==null?void 0:c.length," ",((G=s==null?void 0:s.list)==null?void 0:G.length)>1?"Positions":"Position"]}),e.jsx(Z,{xlinkHref:"#icon-icon_descending_nor",fontSize:"20px",transition:"transform 0.5s",transform:w?"rotate(-180deg)":"rotate(0deg)"})]})})]})]})]}),e.jsx(ae,{unmountOnExit:!0,animateOpacity:!0,in:w,style:{width:"100%"},transition:{enter:{duration:.2,ease:"easeOut"},exit:{duration:.2,ease:"easeIn"}},children:e.jsx(we,{poolInfo:s,priceDirect:v})})]})})}function qe({poolInfo:s,...S}){return(s==null?void 0:s.poolType)==="dlmm"?e.jsx(Me,{poolInfo:s,...S}):e.jsx(Se,{poolInfo:s,...S})}function Ce(){const{isApp:s}=K();return e.jsx(y,{w:"100%",p:s?"16px 12px":"24px 16px 16px",borderRadius:"16px",children:e.jsxs(T,{w:"100%",gap:{base:"12px",lg:"24px"},children:[e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsxs(i,{gap:"0",children:[e.jsx(se,{size:"9"}),e.jsx(se,{size:"9"}),e.jsxs(T,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"150px"})]})]}),!s&&e.jsx(x,{height:"5",width:"250px"})]}),e.jsx(T,{w:"100%",gap:"12px",children:s?e.jsx(y,{w:"100%",borderRadius:"16px",bg:"position_bg",border:"none",p:{base:"16px 8px 12px",lg:"20px 16px "},children:e.jsxs(T,{w:"100%",gap:"12px",align:"flex-start",children:[e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"})]}),e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"})]}),e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"})]})]})}):e.jsxs(T,{w:"100%",children:[e.jsx(y,{w:"100%",borderRadius:"16px",bg:"position_bg",border:"none",p:{base:"16px 8px 12px",lg:"20px 16px "},children:e.jsx(T,{w:{base:"100%",lg:"calc(100%)"},align:"flex-start",children:e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"})]})})}),e.jsx(y,{w:"100%",borderRadius:"16px",bg:"position_bg",border:"none",p:{base:"16px 8px 12px",lg:"20px 16px "},children:e.jsx(T,{w:{base:"100%",lg:"calc(100%)"},align:"flex-start",children:e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"}),e.jsx(x,{height:"4",width:"100px"})]})})})]})})]})})}function Le({isProfile:s,isVaults:S=!1,currentTab:z="",setCurrentTab:B,whiteTokenList:M,isShowChildren:W,handleRefresh:C,onClickSelectCoinList:u,onDeleteSelectCoinList:b,showPosListGroupByPool:h,selectCoinList:m,changeShowPosListGroupByPool:v}){const{isApp:j}=K(),[_,w]=n.useState("All"),{showPosListLength:t,setShowPosListLength:E,posBaseListGroupByPool:l}=pe(),{isExpendPositionMap:g,setIsExpendPosition:P}=J(),{dlmmPosBaseListGroupByPool:p}=ue(),{currentAccount:D,onWalletModal:A}=ge(),d=n.useMemo(()=>[{label:"All",value:"All",num:ne((t==null?void 0:t.clmm_position_count)??0).plus((t==null?void 0:t.dlmm_position_count)??0).toString()},{label:"CLMM",value:"CLMM",num:(t==null?void 0:t.clmm_position_count)??0},{label:"DLMM",value:"DLMM",num:(t==null?void 0:t.dlmm_position_count)??0}],[t]),R=n.useMemo(()=>Object.values(g).some(k=>k),[g]),c=r=>{w(r),G(r)};n.useEffect(()=>{console.log("ðŸš€ ~ PositionTypeAndCollapse ~ posBaseListGroupByPool:",p,l),G(_)},[m,_,l,p]);const G=r=>{var U,Y,O,f;console.log("ðŸš€ ~ handleFilterGroupPool ~ tab:",r,p,l);let k={};r=="All"?k={...l,...p}:r=="CLMM"?k={...l}:r=="DLMM"&&(k={...p});const F=(U=m[0])!=null&&U.coin_type?V((Y=m[0])==null?void 0:Y.coin_type):void 0,L=(O=m[1])!=null&&O.coin_type?V((f=m[1])==null?void 0:f.coin_type):void 0,H=Object.values(k).filter(a=>F&&L?V(a.tokenA.coin_type)==F&&V(a.tokenB.coin_type)==L||V(a.tokenA.coin_type)==L&&V(a.tokenB.coin_type)==F:F?V(a.tokenA.coin_type)==F||V(a.tokenB.coin_type)==F:a);v(H),console.log("ðŸš€ ~ handleFilterGroupPool ~ filterArr:",H);const $=Object.keys(g);H==null||H.forEach(a=>{const o=(a==null?void 0:a.dlmmPoolAddress)||(a==null?void 0:a.clmmPoolAddress);$.includes(o)||P([o],!0)});const N=Object.values(l).filter(a=>a.poolType=="clmm").reduce((a,o)=>a+(o.list?o.list.length:0),0),Q=Object.values(p).filter(a=>a.poolType=="dlmm").reduce((a,o)=>a+(o.list?o.list.length:0),0);D!=null&&D.address?E({clmm_position_count:N,dlmm_position_count:Q}):E({})};return e.jsx(ke,{isProfile:s,isPools:!1,isVaults:S,currentTab:z,setCurrentTab:B,whiteTokenList:M,handleRefresh:C,selectCoinList:m,onClickSelectCoinList:u,onDeleteSelectCoinList:b,positionCountObj:t,handleChangePositionTab:c,children:W&&(d==null?void 0:d.length)>0&&e.jsxs(i,{gap:"12px",w:"100%",children:[e.jsx(be,{type:"outlineTab",isActive:(r,k)=>r===k.value,wrapStyle:{w:"100%",border:"1px solid",borderColor:"border",bg:"bg_secondary",h:"40px",justifyContent:"flex-end",p:"4px"},itemStyle:{w:j?`calc(100% / ${d==null?void 0:d.length})`:"102px",fontSize:"14px",borderRadius:"8px",gap:"0px"},tabList:d,currentTab:_,handleChangeTab:r=>{w(r==null?void 0:r.value)}}),!j&&e.jsx(y,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:j?"0 6px 0 8px":"0px 10px 0 8px",h:"40px",sx:{cursor:"pointer",_hover:{svg:{fill:"text_caption"},p:{color:"text_caption"}}},onClick:()=>{const r=!R;P(Object.keys(g),r)},children:e.jsxs(i,{h:"100%",justify:"space-between",children:[R?e.jsx(Z,{xlinkHref:"#icon-icon_collapse"}):e.jsx(Z,{xlinkHref:"#icon-icon_expand"}),e.jsx(q,{whiteSpace:"nowrap",children:R?"Collapse":"Expand"})]})})]})})}export{Ce as P,qe as a,Le as b,ke as c};
//# sourceMappingURL=PositionTypeAndCollapse-KcFDLp6P.js.map
